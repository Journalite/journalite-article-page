(()=>{var e={};e.id=296,e.ids=[296],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},20458:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l,generateStaticParams:()=>c});var s=r(37413),a=r(61120),i=r(25491),n=r(34717),o=r(45823);async function c(){try{let e=(0,n.rJ)(o.db,"articles"),t=(0,n.P)(e,(0,n._M)("status","==","published")),r=await (0,n.GG)(t),s=new Set;r.forEach(e=>{let t=e.data();t.tags&&Array.isArray(t.tags)&&t.tags.forEach(e=>{e&&"string"==typeof e&&s.add(e.toLowerCase())})});let a=Array.from(s).map(e=>({tag:e}));return console.log("Generated static params for tags:",a.length),a}catch(e){return console.error("Error generating static params for tags:",e),[]}}function l({params:e}){return(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)("div",{children:"Loading tag page..."}),children:(0,s.jsx)(i.default,{tag:e.tag})})}},21820:e=>{"use strict";e.exports=require("os")},25491:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/sirabdisalam/journalite-article-page/src/app/tag/[tag]/TagPageClient.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/sirabdisalam/journalite-article-page/src/app/tag/[tag]/TagPageClient.tsx","default")},27910:e=>{"use strict";e.exports=require("stream")},28163:(e,t,r)=>{"use strict";r.d(t,{Hs:()=>d,N9:()=>i,Ss:()=>n,bA:()=>o,fP:()=>l,he:()=>c});var s=r(75535),a=r(43649);async function i(e,t,r,i){try{if(e===r)return null;let n={userId:e,type:"follow",read:!1,sourceId:r,sourceType:"user",message:`${t} (@${i}) started following you`,fromUser:{id:r,name:t,username:i},createdAt:s.Timestamp.now()};return{id:(await (0,s.addDoc)((0,s.collection)(a.db,"notifications"),n)).id,...n}}catch(e){return console.error("Error creating follow notification:",e),null}}async function n(e=!1){try{let t,r=a.j2.currentUser;if(!r)throw Error("User not authenticated");let i=(0,s.collection)(a.db,"notifications");t=e?(0,s.query)(i,(0,s.where)("userId","==",r.uid),(0,s.where)("read","==",!1),(0,s.orderBy)("createdAt","desc"),(0,s.limit)(100)):(0,s.query)(i,(0,s.where)("userId","==",r.uid),(0,s.orderBy)("createdAt","desc"),(0,s.limit)(100));let n=await (0,s.getDocs)(t),o=[];return n.forEach(e=>{o.push({id:e.id,...e.data()})}),o}catch(e){throw console.error("Error fetching notifications:",e),e}}async function o(e){try{let t=a.j2.currentUser;if(!t)throw Error("User not authenticated");let r=(0,s.doc)(a.db,"notifications",e),i=await (0,s.getDoc)(r);if(!i.exists())throw Error("Notification not found");if(i.data().userId!==t.uid)throw Error("Unauthorized access to notification");return await (0,s.updateDoc)(r,{read:!0}),{success:!0}}catch(e){throw console.error("Error marking notification as read:",e),e}}async function c(){try{let e=a.j2.currentUser;if(!e)throw Error("User not authenticated");let t=(0,s.collection)(a.db,"notifications"),r=(0,s.query)(t,(0,s.where)("userId","==",e.uid),(0,s.where)("read","==",!1)),i=await (0,s.getDocs)(r),n=i.docs.map(e=>(0,s.updateDoc)(e.ref,{read:!0}));return await Promise.all(n),{success:!0,count:i.size}}catch(e){throw console.error("Error marking all notifications as read:",e),e}}async function l(e){try{let t=a.j2.currentUser;if(!t)throw Error("User not authenticated");let r=(0,s.doc)(a.db,"notifications",e),i=await (0,s.getDoc)(r);if(!i.exists())throw Error("Notification not found");if(i.data().userId!==t.uid)throw Error("Unauthorized access to notification");return await (0,s.deleteDoc)(r),{success:!0}}catch(e){throw console.error("Error deleting notification:",e),e}}async function d(){try{let e=a.j2.currentUser;if(!e)return 0;let t=(0,s.collection)(a.db,"notifications"),r=(0,s.query)(t,(0,s.where)("userId","==",e.uid),(0,s.where)("read","==",!1));return(await (0,s.getDocs)(r)).size}catch(e){return console.error("Error counting unread notifications:",e),0}}},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37366:e=>{"use strict";e.exports=require("dns")},43649:(e,t,r)=>{"use strict";r.d(t,{db:()=>c,j2:()=>o});var s=r(67989);r(10178);var a=r(84245),i=r(75535);let n=(0,s.Wp)({apiKey:"AIzaSyCFpybhLt43iKUw6lNahU1n2zjYv0BXmf4",authDomain:"journalitev1.firebaseapp.com",projectId:"journalitev1",storageBucket:"journalitev1.firebasestorage.app",messagingSenderId:"897263211529",appId:"1:897263211529:web:bae4a00910a2236d6d54d8",measurementId:"G-ZYT8PRMT0D"}),o=(0,a.getAuth)(n),c=(0,i.getFirestore)(n)},45823:(e,t,r)=>{"use strict";r.d(t,{db:()=>o});var s=r(89579);r(84884);var a=r(25367),i=r(34717);let n=(0,s.Wp)({apiKey:"AIzaSyCFpybhLt43iKUw6lNahU1n2zjYv0BXmf4",authDomain:"journalitev1.firebaseapp.com",projectId:"journalitev1",storageBucket:"journalitev1.firebasestorage.app",messagingSenderId:"897263211529",appId:"1:897263211529:web:bae4a00910a2236d6d54d8",measurementId:"G-ZYT8PRMT0D"});(0,a.xI)(n);let o=(0,i.aU)(n)},54452:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>l});var s=r(65239),a=r(48088),i=r(88170),n=r.n(i),o=r(30893),c={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);r.d(t,c);let l={children:["",{children:["tag",{children:["[tag]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,20458)),"/Users/sirabdisalam/journalite-article-page/src/app/tag/[tag]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/Users/sirabdisalam/journalite-article-page/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,54413)),"/Users/sirabdisalam/journalite-article-page/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["/Users/sirabdisalam/journalite-article-page/src/app/tag/[tag]/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/tag/[tag]/page",pathname:"/tag/[tag]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70769:(e,t,r)=>{Promise.resolve().then(r.bind(r,90025))},71441:(e,t,r)=>{Promise.resolve().then(r.bind(r,25491))},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},90025:(e,t,r)=>{"use strict";r.d(t,{default:()=>x});var s=r(60687),a=r(43210),i=r(85814),n=r.n(i),o=r(5062),c=r.n(o),l=r(43649),d=r(84245),u=r(26734),h=r(89911);r(79440);let p=e=>e.authorName||"Unknown Author",g=e=>{let t=Math.ceil((e?e.split(/\s+/).length:0)/200);return t<1?1:t},m=e=>{let t=e.content&&e.content.length>0?e.content[0].text:e.excerpt||"",r=t.includes("<")&&t.includes(">")?(e=>{let t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""})(t):t;return r.length>150?r.substring(0,150)+"...":r};function x({tag:e}){let[t,r]=(0,a.useState)([]),[i,o]=(0,a.useState)(!0),[x,f]=(0,a.useState)(null),[b,j]=(0,a.useState)(!1),[w,v]=(0,a.useState)(!1),[y,N]=(0,a.useState)(0),E=async()=>{try{await (0,d.signOut)(l.j2)}catch(e){console.error("Error signing out:",e)}},q=()=>{v(!w)},U=e?e.charAt(0).toUpperCase()+e.slice(1):"";return(0,s.jsxs)("div",{className:c()["three-column-layout"],children:[y<768&&!w&&(0,s.jsx)("div",{className:`${c()["menu-overlay"]} ${c().active}`,onClick:q}),(0,s.jsx)(h.A,{isAuthenticated:b,handleLogout:E,toggleSidebar:q,isSidebarCollapsed:w}),y<768&&(0,s.jsx)("button",{className:c()["toggle-button"],onClick:q,"aria-label":w?"Expand sidebar":"Collapse sidebar",children:w?"☰":"✕"}),(0,s.jsxs)("main",{className:c()["center-column"],children:[(0,s.jsx)("div",{className:c()["tag-header"],children:(0,s.jsxs)("h1",{children:["Articles tagged with ",(0,s.jsxs)("span",{className:c().highlight,children:["#",U]})]})}),i?(0,s.jsx)("div",{className:c().loading,children:"Loading articles..."}):x?(0,s.jsxs)("div",{className:c().loading,children:["Error: ",x]}):0===t.length?(0,s.jsxs)("div",{className:c()["no-results"],children:[(0,s.jsx)("p",{children:"No articles found with this tag."}),(0,s.jsx)(n(),{href:"/",className:c()["back-link"],children:"Back to home"})]}):(0,s.jsx)("div",{className:c()["article-grid"],children:t.map((e,t)=>(0,s.jsxs)("article",{className:c()["article-card"],children:[(0,s.jsx)("h3",{className:c()["article-title"],children:e.title}),(0,s.jsxs)("div",{className:c()["article-meta"],children:["by ",p(e)," • ",g(e.content[0].text)," min read"]}),(0,s.jsx)("p",{className:c()["article-excerpt"],children:m(e)}),e.tags&&e.tags.length>0&&(0,s.jsx)("div",{className:c()["article-tags"],children:e.tags.map((t,r)=>(0,s.jsxs)(n(),{href:`/tag/${t.toLowerCase()}`,className:c().tag,children:["#",t]},`${e.slug}-tag-${r}`))}),(0,s.jsxs)("div",{className:c()["reaction-bar"],children:[(0,s.jsx)("button",{className:c()["reaction-button"],children:"❤️ Echo"}),(0,s.jsx)("button",{className:c()["reaction-button"],children:"\uD83D\uDD01 Resonate"}),(0,s.jsx)("button",{className:c()["reaction-button"],children:"\uD83D\uDCAC Comment"}),(0,s.jsx)(n(),{href:`/articles?slug=${encodeURIComponent(e.slug)}`,className:c()["read-link"],children:"Read →"})]})]},e._id||e.slug||`article-${t}`))})]}),(0,s.jsxs)("aside",{className:c()["right-sidebar"],children:[(0,s.jsx)("h2",{className:c()["sidebar-heading"],children:"About this tag"}),b&&(0,s.jsx)(u.A,{}),(0,s.jsx)("div",{className:c()["tag-description"],children:(0,s.jsxs)("p",{children:["Browsing articles tagged with ",(0,s.jsxs)("strong",{children:["#",U]}),". Discover content related to this topic."]})}),(0,s.jsxs)(n(),{href:"/write",className:c()["write-button"],children:["Write about #",U]}),(0,s.jsx)(n(),{href:"/",className:c()["back-link"],children:"Back to Home"})]})]})}},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[476,948,44,405,11,598],()=>r(54452));module.exports=s})();