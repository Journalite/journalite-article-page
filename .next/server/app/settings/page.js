(()=>{var e={};e.id=662,e.ids=[662],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5062:e=>{e.exports={"article-page":"home_article-page__CJrzD","three-column-layout":"home_three-column-layout__x41EQ","left-sidebar":"home_left-sidebar__MaSov","top-left-logo":"home_top-left-logo__JmZ4H","toggle-button":"home_toggle-button__sVP2W","sidebar-footer":"home_sidebar-footer__Fj8FR","sidebar-collapse-button":"home_sidebar-collapse-button__W3ZL0","vertical-nav":"home_vertical-nav__Cj0En","nav-home":"home_nav-home__X8XEK","nav-icon":"home_nav-icon__yM4nn","nav-create":"home_nav-create__My7ng","nav-thoughts":"home_nav-thoughts__0rfq1","nav-trending":"home_nav-trending__ExDVC","nav-news":"home_nav-news___K3Hw","nav-explore":"home_nav-explore__bcQBn","nav-learn":"home_nav-learn__M1FC_","nav-signin":"home_nav-signin__tzTY_","nav-login":"home_nav-login__1lQUW","nav-link":"home_nav-link__6kEPW","nav-text":"home_nav-text__B7jdN",active:"home_active__S0jaV","profile-button":"home_profile-button__hzl_I","profile-dropdown":"home_profile-dropdown__Y5WsU",open:"home_open__XfBoq","profile-dropdown-item":"home_profile-dropdown-item__evd8S","profile-dropdown-separator":"home_profile-dropdown-separator___NXrk","center-column":"home_center-column__eaxY9",expanded:"home_expanded__mJRm4",loading:"home_loading__D6__B",centerSearchContainer:"home_centerSearchContainer__IOa3K",centerSearchWrapper:"home_centerSearchWrapper__NNrYK",focused:"home_focused__5YCO2","holographic-shine":"home_holographic-shine__x_mJJ",searchIcon:"home_searchIcon__xc0XK",centerSearchInput:"home_centerSearchInput__48wSR",searchLoadingIcon:"home_searchLoadingIcon__k5Sm7",centerSearchResults:"home_centerSearchResults__nuYpC",slideDown:"home_slideDown__8UuRE",shimmer:"home_shimmer__Qx0I4",centerSearchResultItem:"home_centerSearchResultItem__bn8jP",resultUserAvatar:"home_resultUserAvatar__UWdCO",resultUserInfo:"home_resultUserInfo__OeoCv",resultUserName:"home_resultUserName___o7C3",resultUserUsername:"home_resultUserUsername__7tLvP",centerSearchNoResults:"home_centerSearchNoResults__qKulK","featured-card":"home_featured-card__r3SXe","featured-content":"home_featured-content__gbOMz","featured-image":"home_featured-image__3DBbZ","cover-image":"home_cover-image___ZInI","featured-label":"home_featured-label__z2IzP","featured-title":"home_featured-title__qNCn0","featured-meta":"home_featured-meta__Lq6uD","featured-excerpt":"home_featured-excerpt__dhAPX","read-link":"home_read-link___6ZMN","article-grid":"home_article-grid__mC5EI","article-card":"home_article-card__fzb4w","article-title":"home_article-title__toAvL","article-meta":"home_article-meta__9UhXG","article-excerpt":"home_article-excerpt__kuCuZ","article-tags":"home_article-tags__VxN88",tag:"home_tag__LEtq4","reaction-bar":"home_reaction-bar__Y0gsv","reaction-button":"home_reaction-button__KLD0h","reaction-icon":"home_reaction-icon__vhB0y","right-sidebar":"home_right-sidebar__e_5Hr","sidebar-heading":"home_sidebar-heading__lega4","tag-list":"home_tag-list__fgeEi","trending-tag":"home_trending-tag__0awB8","write-button":"home_write-button__Gowtg","edit-button":"home_edit-button__RsQLX","quote-card":"home_quote-card__LAcHm","quote-tag":"home_quote-tag__AukSw","article-container":"home_article-container__RCmcS","article-header":"home_article-header__mdTUd","article-content":"home_article-content__HUOVu","article-paragraph":"home_article-paragraph__6t7oy","article-cover-image":"home_article-cover-image__KDspQ","sidebar-header":"home_sidebar-header__4tIx3",header:"home_header__PUC5f",logo:"home_logo__fwoF8",hero:"home_hero__3iLRs","hero-title":"home_hero-title__tuN3q","hero-subtitle":"home_hero-subtitle__cyiJZ","cta-button":"home_cta-button__X8xB1","main-grid":"home_main-grid__qFsbA","section-title":"home_section-title__wEK3N","article-tag":"home_article-tag__m6NuJ","author-info":"home_author-info__Xw67P","author-avatar":"home_author-avatar__kBH_g","author-name":"home_author-name__vEgN7",topics:"home_topics__lPwTP","topic-tag":"home_topic-tag__LL122","trending-list":"home_trending-list__YinkY",writers:"home_writers__2u4IP","writer-item":"home_writer-item__1jEW3","writer-info":"home_writer-info__OG3R7","writer-avatar":"home_writer-avatar__b69xH","writer-name":"home_writer-name__McEqt","follow-button":"home_follow-button__UX_LS",features:"home_features__Uc1bS","feature-title":"home_feature-title__9pzGT","feature-desc":"home_feature-desc__jOby5",footer:"home_footer__1HL_E","menu-overlay":"home_menu-overlay__S__PE",fadeIn:"home_fadeIn__uLm0f",articleFormContainer:"home_articleFormContainer__DSMnb",articleFormHeader:"home_articleFormHeader__yeH26",articleFormTitle:"home_articleFormTitle__B11fv",articleFormSubtitle:"home_articleFormSubtitle__XZLCa",articleForm:"home_articleForm__qtKbt",formGroup:"home_formGroup__dX_8o",formLabel:"home_formLabel__qdIcu",optionalLabel:"home_optionalLabel__U0gvl",formControl:"home_formControl__Cf48C",formTextarea:"home_formTextarea__tVyby",formActions:"home_formActions__BdMyR",cancelButton:"home_cancelButton__docpL",submitButton:"home_submitButton__gVGwS",errorAlert:"home_errorAlert__tVY_A",errorIcon:"home_errorIcon__gc9ZB",imagePreview:"home_imagePreview__zqwvQ",tagsPreview:"home_tagsPreview__V6lf7",container:"home_container__TLSt1","writing-tips":"home_writing-tips__2ODsS","writing-tip":"home_writing-tip__dmGLE",loginLink:"home_loginLink__imUQF",discussionSection:"home_discussionSection__0Ifpl",discussionTitle:"home_discussionTitle__O3EuW",commentForm:"home_commentForm__zAQrR",commentInputContainer:"home_commentInputContainer__gKx6N",commentAvatar:"home_commentAvatar__T8zJ0",replyAvatar:"home_replyAvatar___kB3f",commentInputWrapper:"home_commentInputWrapper__hxZkN",commentInput:"home_commentInput__uUtg_",replyInput:"home_replyInput__rYKdQ",commentActions:"home_commentActions__OO9jZ",replyActions:"home_replyActions__p9B_f",submitReplyButton:"home_submitReplyButton__BdUJ2",cancelReplyButton:"home_cancelReplyButton__XvM8F",loginPrompt:"home_loginPrompt__w4N0u",loginPromptButtons:"home_loginPromptButtons__snC_B",loginButton:"home_loginButton__YS1MQ",closePromptButton:"home_closePromptButton__QYTJ8",errorMessage:"home_errorMessage__9Ki1b",loadingSpinner:"home_loadingSpinner__peANt",spin:"home_spin__D0mwY",noComments:"home_noComments__850HV",commentsList:"home_commentsList__fRn9g",commentItem:"home_commentItem__L5fNy",commentHeader:"home_commentHeader___Zk6a",replyHeader:"home_replyHeader__f7TaG",commentMeta:"home_commentMeta__MJRA8",replyMeta:"home_replyMeta__ve_YC",commentAuthor:"home_commentAuthor__HPgNT",replyAuthor:"home_replyAuthor__2Brdn",commentDate:"home_commentDate__VBAuX",replyDate:"home_replyDate__y0RtU",commentContent:"home_commentContent__uzL9r",replyContent:"home_replyContent__HFiXM",commentControls:"home_commentControls__ebC_D",likeButton:"home_likeButton__gtW9b",replyButton:"home_replyButton__e_FYj",toggleRepliesButton:"home_toggleRepliesButton__UC2Rk",deleteButton:"home_deleteButton__VEIPc",liked:"home_liked__LMNuR",replyForm:"home_replyForm__CpHFF",replyInputContainer:"home_replyInputContainer__3_T0M",repliesList:"home_repliesList__TjSoC",replyItem:"home_replyItem__TadHa",profileHeader:"home_profileHeader__N2hD3",profileAvatar:"home_profileAvatar__zAfHf",avatarPlaceholder:"home_avatarPlaceholder__mh9Xc",profileInfo:"home_profileInfo__tQtas",profileName:"home_profileName__7mtlO",profileUsername:"home_profileUsername__ACE_Q",profileBio:"home_profileBio__pKxZ3",sectionHeading:"home_sectionHeading__F_a8F",profileContent:"home_profileContent__a6u08",emptyState:"home_emptyState__0oCVS",sidebarSection:"home_sidebarSection__cyQHn",backLink:"home_backLink__Anavd","article-image":"home_article-image__mOEoE",searchContainer:"home_searchContainer__NcXe2",searchInputWrapper:"home_searchInputWrapper__jDfiT",searchInput:"home_searchInput__D6QYE",clearSearchButton:"home_clearSearchButton__XEPTo",searchResultsContainer:"home_searchResultsContainer__aOrYe",searchResultsTitle:"home_searchResultsTitle__KjT7N",backToAllButton:"home_backToAllButton__ShJnS",searchResults:"home_searchResults__sWgqy",searchResultItem:"home_searchResultItem__CuGQu",searchResultAvatar:"home_searchResultAvatar__QRukz",adminAvatar:"home_adminAvatar__5I7Wp",developerAvatar:"home_developerAvatar__YWLjR",userAvatar:"home_userAvatar__sJEnc",searchResultInfo:"home_searchResultInfo__vOptx",searchResultName:"home_searchResultName__yMZVz",searchResultUsername:"home_searchResultUsername__oQ4tk",searchResultRole:"home_searchResultRole__E5rB8",searchResultRoleAdmin:"home_searchResultRoleAdmin__58nmi",searchResultRoleDeveloper:"home_searchResultRoleDeveloper__D6KaE",searchResultRoleUser:"home_searchResultRoleUser__P_B5t",roleTag:"home_roleTag__X3nyq",noResults:"home_noResults__VKSke",tabContainer:"home_tabContainer__WiCFt",tabButton:"home_tabButton___0LSM",activeTab:"home_activeTab___peId",docsContainer:"home_docsContainer__uFnrg",userManagementContainer:"home_userManagementContainer__d8zKX",sectionTitle:"home_sectionTitle___LoW8",statsContainer:"home_statsContainer__Ecxt0",statBox:"home_statBox__sOuzf",statNumber:"home_statNumber__0HaRO",statLabel:"home_statLabel___lx3s",usersTableContainer:"home_usersTableContainer__xgtQE",usersTable:"home_usersTable__UQjnE",roleSelect:"home_roleSelect__85R__",documentationContainer:"home_documentationContainer__3hhXs",docSidebar:"home_docSidebar__NjNVF",docSearchContainer:"home_docSearchContainer__2oA__",docSearchInput:"home_docSearchInput__YwfD7",docNav:"home_docNav__TyBYN",docNavItem:"home_docNavItem__wzbPN",docNavItemActive:"home_docNavItemActive__2G1E0",docContent:"home_docContent__HO1_Q",docTitle:"home_docTitle__IElVr",docSubheading:"home_docSubheading__qezFR",docText:"home_docText__pOq_f",codeBlock:"home_codeBlock__2XLSi",codeBlockContainer:"home_codeBlockContainer__m8biO",codeLineNumbers:"home_codeLineNumbers___g0z3",codeContent:"home_codeContent__8Ufq0",keyword:"home_keyword__xcIYJ",string:"home_string__IDzCq",comment:"home_comment___nq3w",function:"home_function__lPtv4",type:"home_type__Ot2EV",variable:"home_variable__V9b_I",number:"home_number__EdK6u",operator:"home_operator__4A6PV",copyButton:"home_copyButton__FJrSq",alertInfo:"home_alertInfo__DNxOh",alertWarning:"home_alertWarning__h5lMU",alertSuccess:"home_alertSuccess__VNous",userTableCell:"home_userTableCell__EfMXq","tag-header":"home_tag-header__V7Fnc",highlight:"home_highlight__wsiMU","tag-description":"home_tag-description___G1Ky","back-link":"home_back-link__nWn7j","no-results":"home_no-results__lv_Xi","explore-header":"home_explore-header__EECf8","explore-title":"home_explore-title__FCgPB","explore-subtitle":"home_explore-subtitle__n2Hy_","explore-container":"home_explore-container__RUVLK","explore-section":"home_explore-section__kWWcA","featured-articles-grid":"home_featured-articles-grid__Fow9u","feature-large":"home_feature-large__V74KX","tags-selector":"home_tags-selector__Bw1Pi","tag-button":"home_tag-button__xESQB","tag-button-active":"home_tag-button-active__cuvxR",fullWidthContainer:"home_fullWidthContainer__bH7VI",editorHeader:"home_editorHeader__nxAUv",backButton:"home_backButton__7YWR2",editorContainer:"home_editorContainer__TTjO_","glass-container":"home_glass-container__DeqYo","glass-highlight":"home_glass-highlight__M6PuC","glass-content":"home_glass-content__1NgZn","glass-button":"home_glass-button__CVS9T","glass-button-primary":"home_glass-button-primary__o3Eea","glass-button-success":"home_glass-button-success__Tju00","glass-button-danger":"home_glass-button-danger__QrAXi","glass-card":"home_glass-card__xqfi9","glass-card-highlight":"home_glass-card-highlight__U_WWE","glass-modal-overlay":"home_glass-modal-overlay__P9nln","glass-modal":"home_glass-modal__ujLH0","glass-nav-container":"home_glass-nav-container__s_3lM","glass-nav-button":"home_glass-nav-button___HD46","glass-notification-unread":"home_glass-notification-unread__Ddf3D","glass-notification-read":"home_glass-notification-read__Bz8wx","glass-tag":"home_glass-tag__ic8iV","glass-tag-warning":"home_glass-tag-warning__1z0Xj","glass-loading":"home_glass-loading___OOS7","glass-empty-state":"home_glass-empty-state__ngWuT","glass-profile-container":"home_glass-profile-container__Ofhd4","glass-profile-header":"home_glass-profile-header__0xqky"}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16189:(e,t,r)=>{"use strict";var o=r(65773);r.o(o,"usePathname")&&r.d(t,{usePathname:function(){return o.usePathname}}),r.o(o,"useRouter")&&r.d(t,{useRouter:function(){return o.useRouter}}),r.o(o,"useSearchParams")&&r.d(t,{useSearchParams:function(){return o.useSearchParams}})},16533:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var o=r(60687);r(43210);var a=r(85814),s=r.n(a),n=r(5062),i=r.n(n);let l=()=>(0,o.jsx)(s(),{href:"/",className:i()["top-left-logo"],children:"Journalite"})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28163:(e,t,r)=>{"use strict";r.d(t,{Hs:()=>m,N9:()=>n,Ss:()=>i,bA:()=>l,fP:()=>_,fZ:()=>s,he:()=>c});var o=r(75535),a=r(43649);async function s(e,t,r,s,n,i){try{let t=a.j2.currentUser;if(!t||t.uid===e)return null;let l={userId:e,type:"comment",read:!1,sourceId:n,sourceType:"comment",message:`${t.displayName||"Someone"} commented on your article: "${i.substring(0,50)}${i.length>50?"...":""}"`,fromUser:{id:t.uid,name:t.displayName||"Anonymous"},createdAt:o.Timestamp.now(),articleSlug:r,articleTitle:s};return{id:(await (0,o.addDoc)((0,o.collection)(a.db,"notifications"),l)).id,...l}}catch(e){return console.error("Error creating notification:",e),null}}async function n(e,t,r,s){try{if(e===r)return null;let n={userId:e,type:"follow",read:!1,sourceId:r,sourceType:"user",message:`${t} (@${s}) started following you`,fromUser:{id:r,name:t,username:s},createdAt:o.Timestamp.now()};return{id:(await (0,o.addDoc)((0,o.collection)(a.db,"notifications"),n)).id,...n}}catch(e){return console.error("Error creating follow notification:",e),null}}async function i(e=!1){try{let t,r=a.j2.currentUser;if(!r)throw Error("User not authenticated");let s=(0,o.collection)(a.db,"notifications");t=e?(0,o.query)(s,(0,o.where)("userId","==",r.uid),(0,o.where)("read","==",!1),(0,o.orderBy)("createdAt","desc"),(0,o.limit)(100)):(0,o.query)(s,(0,o.where)("userId","==",r.uid),(0,o.orderBy)("createdAt","desc"),(0,o.limit)(100));let n=await (0,o.getDocs)(t),i=[];return n.forEach(e=>{i.push({id:e.id,...e.data()})}),i}catch(e){throw console.error("Error fetching notifications:",e),e}}async function l(e){try{let t=a.j2.currentUser;if(!t)throw Error("User not authenticated");let r=(0,o.doc)(a.db,"notifications",e),s=await (0,o.getDoc)(r);if(!s.exists())throw Error("Notification not found");if(s.data().userId!==t.uid)throw Error("Unauthorized access to notification");return await (0,o.updateDoc)(r,{read:!0}),{success:!0}}catch(e){throw console.error("Error marking notification as read:",e),e}}async function c(){try{let e=a.j2.currentUser;if(!e)throw Error("User not authenticated");let t=(0,o.collection)(a.db,"notifications"),r=(0,o.query)(t,(0,o.where)("userId","==",e.uid),(0,o.where)("read","==",!1)),s=await (0,o.getDocs)(r),n=s.docs.map(e=>(0,o.updateDoc)(e.ref,{read:!0}));return await Promise.all(n),{success:!0,count:s.size}}catch(e){throw console.error("Error marking all notifications as read:",e),e}}async function _(e){try{let t=a.j2.currentUser;if(!t)throw Error("User not authenticated");let r=(0,o.doc)(a.db,"notifications",e),s=await (0,o.getDoc)(r);if(!s.exists())throw Error("Notification not found");if(s.data().userId!==t.uid)throw Error("Unauthorized access to notification");return await (0,o.deleteDoc)(r),{success:!0}}catch(e){throw console.error("Error deleting notification:",e),e}}async function m(){try{let e=a.j2.currentUser;if(!e)return 0;let t=(0,o.collection)(a.db,"notifications"),r=(0,o.query)(t,(0,o.where)("userId","==",e.uid),(0,o.where)("read","==",!1));return(await (0,o.getDocs)(r)).size}catch(e){return console.error("Error counting unread notifications:",e),0}}},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34419:(e,t,r)=>{Promise.resolve().then(r.bind(r,74198))},34631:e=>{"use strict";e.exports=require("tls")},37366:e=>{"use strict";e.exports=require("dns")},43649:(e,t,r)=>{"use strict";r.d(t,{db:()=>l,j2:()=>i});var o=r(67989);r(10178);var a=r(84245),s=r(75535);let n=(0,o.Wp)({apiKey:"AIzaSyCFpybhLt43iKUw6lNahU1n2zjYv0BXmf4",authDomain:"journalitev1.firebaseapp.com",projectId:"journalitev1",storageBucket:"journalitev1.firebasestorage.app",messagingSenderId:"897263211529",appId:"1:897263211529:web:bae4a00910a2236d6d54d8",measurementId:"G-ZYT8PRMT0D"}),i=(0,a.getAuth)(n),l=(0,s.getFirestore)(n)},49048:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>m,Ci:()=>b,E$:()=>g,OQ:()=>i,Qt:()=>h,SR:()=>f,VM:()=>c,Vz:()=>l,e_:()=>_,mH:()=>p,pV:()=>d,x5:()=>u});var o=r(75535),a=r(84245),s=r(43649),n=r(28163);async function i(e){try{let t=(0,o.query)((0,o.collection)(s.db,"users"),(0,o.where)("username","==",e.toLowerCase()));return!(await (0,o.getDocs)(t)).empty}catch(e){throw console.error("Error checking username:",e),e}}async function l(e,t){try{let r=await c(e);if(r){console.log("User profile already exists, updating instead of creating");let n=(0,o.doc)(s.db,"users",e);await (0,o.updateDoc)(n,{firstName:t.firstName,lastName:t.lastName,username:t.username.toLowerCase(),email:t.email.toLowerCase(),bio:t.bio||r.bio||""}),s.j2.currentUser&&await (0,a.updateProfile)(s.j2.currentUser,{displayName:t.username});return}let n=(0,o.query)((0,o.collection)(s.db,"users"),(0,o.where)("email","==",t.email.toLowerCase()));if(!(await (0,o.getDocs)(n)).empty)throw Error("Email is already associated with another account");if(await i(t.username))throw Error("Username is already taken");let l=(0,o.doc)(s.db,"users",e);await (0,o.setDoc)(l,{uid:e,firstName:t.firstName,lastName:t.lastName,username:t.username.toLowerCase(),email:t.email.toLowerCase(),bio:t.bio||"",createdAt:(0,o.serverTimestamp)()}),s.j2.currentUser&&await (0,a.updateProfile)(s.j2.currentUser,{displayName:t.username})}catch(e){throw console.error("Error creating user profile:",e),e}}async function c(e){try{let t=(0,o.doc)(s.db,"users",e),r=await (0,o.getDoc)(t);if(r.exists())return r.data();return null}catch(e){throw console.error("Error fetching user profile:",e),e}}async function _(e){if(!e)return null;try{let t=(0,o.query)((0,o.collection)(s.db,"users"),(0,o.where)("email","==",e.toLowerCase()),(0,o.limit)(1)),r=await (0,o.getDocs)(t);if(!r.empty)return r.docs[0].data();return null}catch(e){throw console.error("Error fetching user profile by email:",e),e}}async function m(e,t){try{let r=(0,o.doc)(s.db,"users",e);await (0,o.updateDoc)(r,{interests:t}),console.log(`Interests updated for user ${e}:`,t)}catch(e){throw console.error("Error updating user interests:",e),e}}async function u(e){try{if(!e||e.trim().length<2)return[];let t=e.toLowerCase().trim(),r=(0,o.collection)(s.db,"users");return(await (0,o.getDocs)(r)).docs.map(e=>e.data()).filter(e=>{let r=e.username.toLowerCase(),o=e.firstName.toLowerCase(),a=e.lastName.toLowerCase(),s=`${o} ${a}`;return r.includes(t)||o.includes(t)||a.includes(t)||s.includes(t)})}catch(e){return console.error("Error searching users:",e),[]}}async function d(e,t){try{if(e===t)throw Error("You cannot follow yourself");let r=(0,o.doc)(s.db,"users",e);await (0,o.updateDoc)(r,{following:(0,o.arrayUnion)(t),followingCount:(0,o.increment)(1)});let a=(0,o.doc)(s.db,"users",t);await (0,o.updateDoc)(a,{followers:(0,o.arrayUnion)(e),followersCount:(0,o.increment)(1)});let i=await (0,o.getDoc)(r);if(i.exists()){let r=i.data();await (0,n.N9)(t,`${r.firstName} ${r.lastName}`,e,r.username)}}catch(e){throw console.error("Error following user:",e),e}}async function h(e,t){try{let r=(0,o.doc)(s.db,"users",e);await (0,o.updateDoc)(r,{following:(0,o.arrayRemove)(t),followingCount:(0,o.increment)(-1)});let a=(0,o.doc)(s.db,"users",t);await (0,o.updateDoc)(a,{followers:(0,o.arrayRemove)(e),followersCount:(0,o.increment)(-1)})}catch(e){throw console.error("Error unfollowing user:",e),e}}async function g(e,t){try{let r=(0,o.doc)(s.db,"users",e),a=await (0,o.getDoc)(r);if(!a.exists())return!1;let n=a.data();return n.following?.includes(t)||!1}catch(e){throw console.error("Error checking follow status:",e),e}}async function p(e,t=50){try{let r=(0,o.doc)(s.db,"users",e),a=await (0,o.getDoc)(r);if(!a.exists())return[];let n=a.data().following||[];if(0===n.length)return[];let i=[],l=Math.min(n.length,t);for(let e=0;e<l;e++){let t=n[e],r=(0,o.doc)(s.db,"users",t),a=await (0,o.getDoc)(r);a.exists()&&i.push(a.data())}return i}catch(e){throw console.error("Error getting following list:",e),e}}async function f(e,t=50){try{let r=(0,o.doc)(s.db,"users",e),a=await (0,o.getDoc)(r);if(!a.exists())return[];let n=a.data().followers||[];if(0===n.length)return[];let i=[],l=Math.min(n.length,t);for(let e=0;e<l;e++){let t=n[e],r=(0,o.doc)(s.db,"users",t),a=await (0,o.getDoc)(r);a.exists()&&i.push(a.data())}return i}catch(e){throw console.error("Error getting followers list:",e),e}}async function b(e){try{let t=(0,o.doc)(s.db,"users",e);await (0,o.deleteDoc)(t),console.log(`User profile for UID ${e} deleted from Firestore.`);let r=s.j2.currentUser;if(r&&r.uid===e)await (0,a.deleteUser)(r),console.log(`User account for UID ${e} deleted from Firebase Authentication.`);else if(r)throw console.error("Current authenticated user does not match UID to be deleted."),Error("Mismatch between authenticated user and account to be deleted.");else throw console.error("No current user authenticated. Cannot delete Firebase Auth user."),Error("Authentication required to delete account.")}catch(e){if(console.error("Error deleting user account:",e),"auth/requires-recent-login"===e.code)throw Error("This operation is sensitive and requires recent authentication. Please sign out and sign back in, then try again.");throw Error("Failed to delete user account. "+e.message)}}},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73496:e=>{"use strict";e.exports=require("http2")},73546:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>_,routeModule:()=>u,tree:()=>c});var o=r(65239),a=r(48088),s=r(88170),n=r.n(s),i=r(30893),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let c={children:["",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,74198)),"/Users/sirabdisalam/journalite-article-page/src/app/settings/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/Users/sirabdisalam/journalite-article-page/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,54413)),"/Users/sirabdisalam/journalite-article-page/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,_=["/Users/sirabdisalam/journalite-article-page/src/app/settings/page.tsx"],m={require:r,loadChunk:()=>Promise.resolve()},u=new o.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/settings/page",pathname:"/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},74075:e=>{"use strict";e.exports=require("zlib")},74198:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});let o=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/sirabdisalam/journalite-article-page/src/app/settings/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/sirabdisalam/journalite-article-page/src/app/settings/page.tsx","default")},74992:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var o=r(60687),a=r(43210),s=r(16189),n=r(85814),i=r.n(n),l=r(43649),c=r(84245),_=r(49048),m=r(16533),u=r(5062),d=r.n(u);let h=["Technology","Science","Art & Design","Books & Literature","Travel","Food & Cooking","Health & Wellness","Sports","Music","Movies & TV","Gaming","Fashion","Business & Finance","History","Politics","Photography"];function g(){let[e,t]=(0,a.useState)(null),[r,n]=(0,a.useState)(null),[u,g]=(0,a.useState)([]),[p,f]=(0,a.useState)(!1),[b,x]=(0,a.useState)(""),[y,v]=(0,a.useState)(""),[w,N]=(0,a.useState)(""),[C,j]=(0,a.useState)(""),[S,E]=(0,a.useState)(!1),[I,k]=(0,a.useState)(null),[U,R]=(0,a.useState)(!1),[A,P]=(0,a.useState)({}),[D,B]=(0,a.useState)({}),[T,q]=(0,a.useState)(!1),[L,F]=(0,a.useState)(!1),[H,M]=(0,a.useState)(""),[z,$]=(0,a.useState)(!1),[W,O]=(0,a.useState)(!0),[V,X]=(0,a.useState)(""),[Y,K]=(0,a.useState)(""),[Q,G]=(0,a.useState)(""),[Z,J]=(0,a.useState)(""),[ee,et]=(0,a.useState)(""),[er,eo]=(0,a.useState)(""),[ea,es]=(0,a.useState)(""),[en,ei]=(0,a.useState)(!1),[el,ec]=(0,a.useState)(!1),[e_]=(0,a.useState)(h),em=(0,s.useRouter)(),eu=e=>{G(""),X(""),g(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},ed=async()=>{if(!e)return void X("User not authenticated. Please log in again.");if(u.length<3){X("Please select at least 3 interests."),G("");return}f(!0),X(""),G("");try{await (0,_.Ay)(e.uid,u),G("Your interests have been updated successfully!"),r&&n({...r,interests:u})}catch(e){console.error("Failed to update interests:",e),X("Failed to update interests. Please try again.")}finally{f(!1)}},eh=()=>{let e={},t=!0;return b.trim()||(e.firstName="First name is required.",t=!1),y.trim()||(e.lastName="Last name is required.",t=!1),w.trim()?w.length<2?(e.username="Username must be at least 2 characters.",t=!1):!1===I&&w!==r?.username&&(e.username="This username is already taken.",t=!1):(e.username="Username is required.",t=!1),B(e),P({firstName:!0,lastName:!0,username:!0,bio:!0}),t},eg=async()=>{if(!e||!r)return void K("User data not available. Please try again.");if(eh()){R(!0),K(""),J("");try{await (0,_.Vz)(e.uid,{firstName:b,lastName:y,username:w,email:r.email,bio:C,interests:u}),J("Profile information updated successfully!"),n(e=>e?{...e,firstName:b,lastName:y,username:w,bio:C}:null)}catch(e){console.error("Failed to update profile:",e),e.message?.includes("Username is already taken")?(B({...D,username:"This username is already taken."}),K("This username is already taken. Please choose another.")):K("Failed to update profile information. Please try again.")}finally{R(!1)}}},ep=async()=>{if("DELETE"===H){$(!0);try{await ef()}catch(e){console.error("Error deleting account:",e)}finally{$(!1)}}},ef=async()=>{if(!e){X("User not authenticated. Please re-login."),q(!1);return}$(!0),X(""),K("");try{await (0,_.Ci)(e.uid),await (0,c.signOut)(l.j2),em.push("/login?accountDeleted=true")}catch(e){console.error("Failed to delete account:",e),e.message.includes("requires recent authentication")?X("This action requires you to have signed in recently. Please sign out, sign back in, and try again."):X("Failed to delete your account. Please try again or contact support.")}finally{$(!1),V||q(!1)}};return W?(0,o.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-stone-100 to-amber-100 flex items-center justify-center font-sans",children:(0,o.jsx)("div",{className:"animate-spin h-10 w-10 border-4 border-amber-500 rounded-full border-t-transparent"})}):e&&r?(0,o.jsxs)("div",{className:`${d()["three-column-layout"]}`,children:[(0,o.jsx)(m.A,{}),(0,o.jsxs)("main",{className:d()["center-column"],children:[(0,o.jsxs)("div",{className:`${d()["glass-container"]} mb-8 p-8`,children:[(0,o.jsx)("div",{className:d()["glass-highlight"]}),(0,o.jsx)("div",{className:d()["glass-content"],children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{className:"text-4xl font-bold text-stone-800 mb-2 font-serif",children:"Settings"}),(0,o.jsx)("p",{className:"text-stone-600 text-lg",children:"Customize your Journalite experience"})]}),(0,o.jsx)(i(),{href:"/",className:`${d()["glass-button"]} text-stone-600 hover:text-stone-800 flex items-center gap-2 px-4 py-2`,children:"â† Back to Home"})]})})]}),(0,o.jsxs)("div",{className:"grid lg:grid-cols-2 gap-8",children:[(0,o.jsxs)("div",{className:`${d()["glass-container"]} p-8`,children:[(0,o.jsx)("div",{className:d()["glass-highlight"]}),(0,o.jsxs)("div",{className:d()["glass-content"],children:[(0,o.jsx)("h2",{className:"text-2xl font-bold text-stone-800 mb-6 font-serif",children:"Profile Information"}),(0,o.jsxs)("form",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-semibold text-stone-700 mb-2",children:"First Name"}),(0,o.jsx)("input",{type:"text",value:b,onChange:e=>x(e.target.value),className:"w-full px-4 py-3 rounded-xl border border-stone-200 focus:border-blue-400 focus:ring-2 focus:ring-blue-100 transition-all",style:{background:"rgba(255, 255, 255, 0.8)"}})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-semibold text-stone-700 mb-2",children:"Last Name"}),(0,o.jsx)("input",{type:"text",value:y,onChange:e=>v(e.target.value),className:"w-full px-4 py-3 rounded-xl border border-stone-200 focus:border-blue-400 focus:ring-2 focus:ring-blue-100 transition-all",style:{background:"rgba(255, 255, 255, 0.8)"}})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-semibold text-stone-700 mb-2",children:"Username"}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("input",{type:"text",value:w,onChange:e=>N(e.target.value),className:"w-full px-4 py-3 rounded-xl border border-stone-200 focus:border-blue-400 focus:ring-2 focus:ring-blue-100 transition-all",style:{background:"rgba(255, 255, 255, 0.8)"}}),S&&(0,o.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:(0,o.jsx)("div",{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"})})]}),!1===I&&(0,o.jsx)("p",{className:"text-red-500 text-sm mt-1",children:"Username not available"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-semibold text-stone-700 mb-2",children:"Bio (Optional)"}),(0,o.jsx)("textarea",{value:C,onChange:e=>j(e.target.value),rows:4,className:"w-full px-4 py-3 rounded-xl border border-stone-200 focus:border-blue-400 focus:ring-2 focus:ring-blue-100 transition-all resize-none",style:{background:"rgba(255, 255, 255, 0.8)"},placeholder:"Tell us a bit about yourself..."})]}),(0,o.jsx)("button",{type:"button",onClick:eg,disabled:U||S,className:`${d()["glass-button"]} ${d()["glass-button-primary"]} w-full py-4 font-semibold disabled:opacity-50`,children:U?"Saving...":"Save Profile"}),Z&&(0,o.jsx)("div",{className:`p-4 rounded-xl ${d()["glass-button-success"]}`,children:Z})]})]})]}),(0,o.jsxs)("div",{className:`${d()["glass-container"]} p-8`,children:[(0,o.jsx)("div",{className:d()["glass-highlight"]}),(0,o.jsxs)("div",{className:d()["glass-content"],children:[(0,o.jsx)("h2",{className:"text-2xl font-bold text-stone-800 mb-6 font-serif",children:"Your Interests"}),(0,o.jsx)("p",{className:"text-stone-600 mb-6",children:"Select at least 3 interests to personalize your experience"}),(0,o.jsx)("div",{className:"grid grid-cols-2 gap-3 mb-6",children:h.map(e=>(0,o.jsx)("button",{onClick:()=>eu(e),className:`p-3 rounded-xl text-sm font-medium transition-all ${u.includes(e)?`${d()["glass-button-primary"]}`:`${d()["glass-button"]}`}`,children:e},e))}),(0,o.jsx)("div",{className:"mb-6",children:(0,o.jsx)("div",{className:`${d()["glass-tag"]} inline-flex items-center gap-2`,children:(0,o.jsxs)("span",{className:"text-sm font-medium",children:[u.length," / 3 minimum selected"]})})}),(0,o.jsx)("button",{onClick:ed,disabled:u.length<3||p,className:`${d()["glass-button"]} ${d()["glass-button-success"]} w-full py-4 font-semibold disabled:opacity-50`,children:p?"Saving...":"Save Interests"}),Q&&(0,o.jsx)("div",{className:`mt-4 p-4 rounded-xl ${d()["glass-button-success"]}`,children:Q})]})]})]}),(0,o.jsxs)("div",{className:`${d()["glass-container"]} mt-8 p-8`,style:{borderColor:"rgba(239, 68, 68, 0.2)",background:"rgba(239, 68, 68, 0.05)"},children:[(0,o.jsx)("div",{className:d()["glass-highlight"]}),(0,o.jsxs)("div",{className:d()["glass-content"],children:[(0,o.jsx)("h2",{className:"text-2xl font-bold text-red-700 mb-4 font-serif",children:"Danger Zone"}),(0,o.jsx)("p",{className:"text-stone-600 mb-6",children:"Once you delete your account, there is no going back. Please be certain."}),(0,o.jsx)("button",{onClick:()=>{K(""),X(""),F(!0)},className:`${d()["glass-button"]} ${d()["glass-button-danger"]} px-6 py-3 font-semibold`,children:"Delete Account"})]})]})]}),L&&(0,o.jsx)("div",{className:d()["glass-modal-overlay"],children:(0,o.jsxs)("div",{className:`${d()["glass-modal"]} p-8`,children:[(0,o.jsx)("h3",{className:"text-xl font-bold text-red-700 mb-4 font-serif",children:"Delete Account"}),(0,o.jsx)("p",{className:"text-stone-700 mb-6",children:"Are you absolutely sure? This action cannot be undone. This will permanently delete your account and remove all of your data from our servers."}),(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("label",{className:"block text-sm font-semibold text-stone-700 mb-2",children:'Type "DELETE" to confirm:'}),(0,o.jsx)("input",{type:"text",value:H,onChange:e=>M(e.target.value),className:"w-full px-4 py-3 rounded-xl border border-stone-200 focus:border-red-400 focus:ring-2 focus:ring-red-100 transition-all",style:{background:"rgba(255, 255, 255, 0.9)"},placeholder:"Type DELETE"})]}),(0,o.jsxs)("div",{className:"flex gap-3",children:[(0,o.jsx)("button",{onClick:()=>{F(!1),M("")},className:`${d()["glass-button"]} flex-1 py-3 font-medium`,children:"Cancel"}),(0,o.jsx)("button",{onClick:ep,disabled:"DELETE"!==H||z,className:`${d()["glass-button"]} ${d()["glass-button-danger"]} flex-1 py-3 font-medium disabled:opacity-50`,children:z?"Deleting...":"Delete Account"})]})]})})]}):(0,o.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-stone-100 to-amber-100 flex flex-col items-center justify-center p-4 font-sans",children:[(0,o.jsx)("p",{className:"text-red-600",children:V||"Could not load user data. Please try refreshing."}),(0,o.jsx)(i(),{href:"/",className:"mt-4 px-4 py-2 bg-stone-700 text-white rounded-md hover:bg-stone-600",children:"Go to Homepage"})]})}},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94667:(e,t,r)=>{Promise.resolve().then(r.bind(r,74992))},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[476,948,405],()=>r(73546));module.exports=o})();