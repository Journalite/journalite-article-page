(()=>{var e={};e.id=268,e.ids=[268],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},6576:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/sirabdisalam/journalite-article-page/src/app/edit-article/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/sirabdisalam/journalite-article-page/src/app/edit-article/page.tsx","default")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},18955:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a,viewport:()=>s});let s={width:"device-width",initialScale:1};function a({children:e}){return e}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37366:e=>{"use strict";e.exports=require("dns")},45177:(e,r,t)=>{Promise.resolve().then(t.bind(t,99473))},46007:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>l.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var s=t(65239),a=t(48088),i=t(88170),l=t.n(i),n=t(30893),o={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(r,o);let c={children:["",{children:["edit-article",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,6576)),"/Users/sirabdisalam/journalite-article-page/src/app/edit-article/page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,18955)),"/Users/sirabdisalam/journalite-article-page/src/app/edit-article/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,94431)),"/Users/sirabdisalam/journalite-article-page/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,54413)),"/Users/sirabdisalam/journalite-article-page/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["/Users/sirabdisalam/journalite-article-page/src/app/edit-article/page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/edit-article/page",pathname:"/edit-article",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},92377:(e,r,t)=>{Promise.resolve().then(t.bind(t,6576))},94735:e=>{"use strict";e.exports=require("events")},99473:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>g});var s=t(60687),a=t(43210),i=t(16189);t(84245);var l=t(43649),n=t(85814),o=t.n(n),c=t(79440),d=t(77081),u=t.n(d);let p=({articleId:e})=>{let[r,t]=(0,a.useState)(""),[n,d]=(0,a.useState)(""),[p,m]=(0,a.useState)(""),[h,x]=(0,a.useState)(""),[g,v]=(0,a.useState)("published"),[j,f]=(0,a.useState)(!1),[b,y]=(0,a.useState)(!0),[N,q]=(0,a.useState)(""),[C,P]=(0,a.useState)(0),[S,w]=(0,a.useState)(""),_=(0,i.useRouter)();(0,a.useEffect)(()=>{P(n.length)},[n]),(0,a.useEffect)(()=>{let r=async()=>{try{y(!0);let r=await (0,c.zE)(e);t(r.title),d(r.body),m(r.tags?.join(", ")||""),x(r.coverImage||""),v(r.status||"published"),w(r.slug||""),P(r.body.length)}catch(e){console.error("Error loading article:",e),q("Failed to load article data")}finally{y(!1)}};e&&r()},[e]);let F=async t=>{if(t.preventDefault(),!r||!n)return void q("Title and content are required");if(!l.j2.currentUser)return void q("You must be logged in to edit an article");try{f(!0),q("");let t=p.split(",").map(e=>e.trim()).filter(e=>""!==e),s={title:r,body:n,tags:t,status:g};""!==h.trim()&&(s.coverImage=h);let a=await (0,c.iZ)(e,s);"published"===g?_.push(`/articles?slug=${a.slug}`):_.push("/my-thoughts")}catch(e){console.error("Error updating article:",e),q("Failed to update article. Please try again.")}finally{f(!1)}},E=["Consider adding more details to make your content more engaging","Re-read your article for clarity before publishing","Use descriptive language to paint a picture for your readers","Update your tags to reach a wider audience"],L=E[Math.floor(Math.random()*E.length)];return b?(0,s.jsx)("div",{className:u().articleFormContainer,children:(0,s.jsxs)("div",{className:u().loading,children:[(0,s.jsx)("div",{className:u().loadingSpinner}),(0,s.jsx)("span",{children:"Loading article data..."})]})}):(0,s.jsxs)("div",{className:u().articleFormContainer,children:[(0,s.jsxs)("div",{className:u().articleFormHeader,children:[(0,s.jsx)("h1",{className:u().articleFormTitle,children:"Edit Your Story"}),(0,s.jsx)("p",{className:u().articleFormSubtitle,children:"Refine your thoughts and make your article shine"})]}),N&&(0,s.jsxs)("div",{className:u().errorAlert,children:[(0,s.jsx)("span",{className:u().errorIcon,children:"⚠️"}),(0,s.jsx)("span",{children:N})]}),(0,s.jsxs)("form",{onSubmit:F,className:u().articleForm,children:[(0,s.jsxs)("div",{className:u().formGroup,children:[(0,s.jsx)("label",{htmlFor:"title",className:u().formLabel,children:"Title"}),(0,s.jsx)("input",{type:"text",id:"title",value:r,onChange:e=>t(e.target.value),required:!0,placeholder:"Enter a captivating title for your article...",className:u().formControl,maxLength:100}),(0,s.jsx)("div",{className:u().formHint,children:"A good title is clear, specific, and engaging"})]}),(0,s.jsxs)("div",{className:u().formGroup,children:[(0,s.jsxs)("label",{htmlFor:"coverImage",className:u().formLabel,children:["Cover Image URL ",(0,s.jsx)("span",{className:u().optionalLabel,children:"optional"})]}),(0,s.jsx)("input",{type:"url",id:"coverImage",value:h,onChange:e=>x(e.target.value),placeholder:"https://example.com/image.jpg",className:u().formControl}),(0,s.jsx)("div",{className:u().formHint,children:"A striking image can increase engagement with your article"}),h&&(0,s.jsx)("div",{className:u().imagePreview,children:(0,s.jsx)("img",{src:h,alt:"Cover preview"})})]}),(0,s.jsxs)("div",{className:u().formGroup,children:[(0,s.jsxs)("label",{htmlFor:"tags",className:u().formLabel,children:["Tags ",(0,s.jsx)("span",{className:u().optionalLabel,children:"comma separated"})]}),(0,s.jsx)("input",{type:"text",id:"tags",value:p,onChange:e=>m(e.target.value),placeholder:"technology, news, science, learning",className:u().formControl}),(0,s.jsx)("div",{className:u().formHint,children:"Tags help readers discover your content"}),p&&(0,s.jsx)("div",{className:u().tagsPreview,children:p.split(",").map((e,r)=>e.trim()&&(0,s.jsx)("span",{className:u().tag,children:e.trim()},r))})]}),(0,s.jsxs)("div",{className:`${u().formGroup} ${u().statusDropdown}`,children:[(0,s.jsx)("label",{htmlFor:"status",className:u().formLabel,children:"Status"}),(0,s.jsxs)("select",{id:"status",value:g,onChange:e=>v(e.target.value),className:u().formControl,children:[(0,s.jsx)("option",{value:"published",children:"Published (visible to everyone)"}),(0,s.jsx)("option",{value:"drafts",children:"Save as Draft (only visible to you)"})]}),(0,s.jsx)("div",{className:u().formHint,children:"published"===g?"Your article will be visible to all users":"Only you can see your draft until you publish it"})]}),(0,s.jsxs)("div",{className:u().formGroup,children:[(0,s.jsx)("label",{htmlFor:"body",className:u().formLabel,children:"Content"}),(0,s.jsx)("textarea",{id:"body",value:n,onChange:e=>d(e.target.value),required:!0,placeholder:"Write your article content here. Provide valuable insights, share your experience, or tell a compelling story...",className:u().formTextarea,rows:15}),(0,s.jsx)("div",{className:u().characterCount,children:(0,s.jsxs)("span",{className:C>3e3?u().characterWarning:"",children:[C," characters"]})}),(0,s.jsx)("div",{className:u().formHint,children:(0,s.jsxs)("span",{children:["✨ Tip: ",L]})})]}),(0,s.jsxs)("div",{className:u().formActions,children:[(0,s.jsx)(o(),{href:"/my-thoughts",className:u().cancelButton,children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:u().submitButton,disabled:j,children:j?"Saving...":"Save Changes"})]})]})]})};var m=t(5062),h=t.n(m);function x(){let e=(0,i.useSearchParams)(),r=e?.get("id")||"",[t,l]=(0,a.useState)(!1),[n,o]=(0,a.useState)(!0);return((0,i.useRouter)(),n)?(0,s.jsx)("div",{className:h().container,children:(0,s.jsx)("div",{className:h().loading,children:"Loading..."})}):t?r?(0,s.jsx)(p,{articleId:r}):(0,s.jsx)("div",{className:h().container,children:(0,s.jsx)("div",{className:h().loading,children:"No article ID provided."})}):(0,s.jsx)("div",{className:h().container,children:(0,s.jsx)("div",{className:h().loading,children:"Please log in to edit articles."})})}function g(){return(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)("div",{className:h().container,children:(0,s.jsx)("div",{className:h().loading,children:"Loading..."})}),children:(0,s.jsx)(x,{})})}}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[476,948,154,686],()=>t(46007));module.exports=s})();