(()=>{var e={};e.id=268,e.ids=[268],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},6576:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/sirabdisalam/journalite-article-page/src/app/edit-article/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/sirabdisalam/journalite-article-page/src/app/edit-article/page.tsx","default")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},18955:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a,viewport:()=>s});let s={width:"device-width",initialScale:1};function a({children:e}){return e}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37366:e=>{"use strict";e.exports=require("dns")},45177:(e,t,r)=>{Promise.resolve().then(r.bind(r,99473))},53175:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var s=r(60687),a=r(43210),i=r(96322),o=r.n(i);let l=()=>{let[e,t]=(0,a.useState)(!1),[r,i]=(0,a.useState)(!1);(0,a.useEffect)(()=>{i(navigator.platform.toUpperCase().indexOf("MAC")>=0)},[]);let l=()=>{t(!e)};return(0,s.jsxs)("div",{className:o().shortcutsContainer,children:[(0,s.jsx)("button",{type:"button",onClick:l,className:o().shortcutsButton,title:"Keyboard Shortcuts",children:"⌨️"}),e&&(0,s.jsxs)("div",{className:o().shortcutsModal,children:[(0,s.jsxs)("div",{className:o().shortcutsHeader,children:[(0,s.jsxs)("h3",{children:["Keyboard Shortcuts ",r?"(macOS)":"(Windows/Linux)"]}),(0,s.jsx)("button",{type:"button",onClick:l,className:o().closeButton,children:"\xd7"})]}),(0,s.jsx)("div",{className:o().shortcutsList,children:[{name:"Bold",macKeys:["⌘","B"],winKeys:["Ctrl","B"],description:"Make text bold"},{name:"Italic",macKeys:["⌘","I"],winKeys:["Ctrl","I"],description:"Italicize text"},{name:"Code",macKeys:["⌘","E"],winKeys:["Ctrl","E"],description:"Format as code"},{name:"Link",macKeys:["⌘","K"],winKeys:["Ctrl","K"],description:"Create a hyperlink"},{name:"Image",macKeys:["⌘","Shift","I"],winKeys:["Ctrl","Shift","I"],description:"Insert an image"},{name:"Heading 1",macKeys:["⌘","Option","1"],winKeys:["Ctrl","Alt","1"],description:"Format as heading 1"},{name:"Heading 2",macKeys:["⌘","Option","2"],winKeys:["Ctrl","Alt","2"],description:"Format as heading 2"},{name:"Heading 3",macKeys:["⌘","Option","3"],winKeys:["Ctrl","Alt","3"],description:"Format as heading 3"},{name:"Bullet List",macKeys:["⌘","Shift","8"],winKeys:["Ctrl","Shift","8"],description:"Create bullet list"},{name:"Numbered List",macKeys:["⌘","Shift","7"],winKeys:["Ctrl","Shift","7"],description:"Create numbered list"},{name:"Clear Format",macKeys:["⌘","Shift","X"],winKeys:["Ctrl","Shift","X"],description:"Clear text formatting"},{name:"Paste with Format",macKeys:["⌘","Shift","V"],winKeys:["Ctrl","Shift","V"],description:"Paste with original formatting"},{name:"Paste as Plain",macKeys:["⌘","V"],winKeys:["Ctrl","V"],description:"Paste as plain text"}].map((e,t)=>(0,s.jsxs)("div",{className:o().shortcutItem,children:[(0,s.jsx)("div",{className:o().shortcutName,children:e.name}),(0,s.jsx)("div",{className:o().shortcutKeys,children:(r?e.macKeys:e.winKeys).map((t,a)=>(0,s.jsxs)("span",{className:o().keyboardKey,children:[t,a<(r?e.macKeys.length:e.winKeys.length)-1&&(0,s.jsx)("span",{className:o().keySeparator,children:"+"})]},a))}),(0,s.jsx)("div",{className:o().shortcutDescription,children:e.description})]},t))})]})]})}},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},77081:e=>{e.exports={articleFormContainer:"ArticleForm_articleFormContainer__Oamhm",articleFormHeader:"ArticleForm_articleFormHeader__lPvz4",articleFormTitle:"ArticleForm_articleFormTitle__GQZ6U",articleFormSubtitle:"ArticleForm_articleFormSubtitle__d0K2B",articleForm:"ArticleForm_articleForm__aPoqs",formGroup:"ArticleForm_formGroup__NG8OF",formLabel:"ArticleForm_formLabel__DP5Fz",optionalLabel:"ArticleForm_optionalLabel__C_B1S",formControl:"ArticleForm_formControl__mBao_",formTextarea:"ArticleForm_formTextarea__ZsknF",editorToolbar:"ArticleForm_editorToolbar__IrlBb",toolbarButton:"ArticleForm_toolbarButton__pHHwN",activeButton:"ArticleForm_activeButton__YQm_y",richTextEditor:"ArticleForm_richTextEditor__FyiQb",formActions:"ArticleForm_formActions__WqypQ",cancelButton:"ArticleForm_cancelButton__OAgVI",submitButton:"ArticleForm_submitButton__o9hsW",errorAlert:"ArticleForm_errorAlert__1DQ3x",errorIcon:"ArticleForm_errorIcon___YV5p",imagePreview:"ArticleForm_imagePreview__92eKB",tagsPreview:"ArticleForm_tagsPreview__48G_v",tag:"ArticleForm_tag__MTDKK",statusDropdown:"ArticleForm_statusDropdown__FfXJV",characterCount:"ArticleForm_characterCount__IqdJb",characterWarning:"ArticleForm_characterWarning__ZKaNu",formHint:"ArticleForm_formHint__h9Deh",loading:"ArticleForm_loading__EUkeX",loadingSpinner:"ArticleForm_loadingSpinner__iaWlv",spin:"ArticleForm_spin__reKcv",toolbarSpacer:"ArticleForm_toolbarSpacer__J3Il4",pasteOptionsContainer:"ArticleForm_pasteOptionsContainer__cuLJK",fadeIn:"ArticleForm_fadeIn__0Fub5",pasteOptionsHeader:"ArticleForm_pasteOptionsHeader__Lto86",pasteOptionButton:"ArticleForm_pasteOptionButton__Yn36Q"}},78151:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c});var s=r(65239),a=r(48088),i=r(88170),o=r.n(i),l=r(30893),n={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);r.d(t,n);let c={children:["",{children:["edit-article",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,6576)),"/Users/sirabdisalam/journalite-article-page/src/app/edit-article/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,18955)),"/Users/sirabdisalam/journalite-article-page/src/app/edit-article/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/Users/sirabdisalam/journalite-article-page/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,54413)),"/Users/sirabdisalam/journalite-article-page/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["/Users/sirabdisalam/journalite-article-page/src/app/edit-article/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/edit-article/page",pathname:"/edit-article",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},78335:()=>{},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},92377:(e,t,r)=>{Promise.resolve().then(r.bind(r,6576))},94735:e=>{"use strict";e.exports=require("events")},96322:e=>{e.exports={shortcutsContainer:"KeyboardShortcutsHelp_shortcutsContainer__MXhO1",shortcutsButton:"KeyboardShortcutsHelp_shortcutsButton__SsEp1",shortcutsModal:"KeyboardShortcutsHelp_shortcutsModal__KZ29s",shortcutsHeader:"KeyboardShortcutsHelp_shortcutsHeader__NSSOU",closeButton:"KeyboardShortcutsHelp_closeButton__nLV6K",shortcutsList:"KeyboardShortcutsHelp_shortcutsList__CRB0P",shortcutItem:"KeyboardShortcutsHelp_shortcutItem__G4I3k",shortcutName:"KeyboardShortcutsHelp_shortcutName__a_amN",shortcutKeys:"KeyboardShortcutsHelp_shortcutKeys__a0SnO",keyboardKey:"KeyboardShortcutsHelp_keyboardKey__1_LrC",keySeparator:"KeyboardShortcutsHelp_keySeparator__kU_ns",shortcutDescription:"KeyboardShortcutsHelp_shortcutDescription__qPcO6"}},96487:()=>{},99473:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>N});var s=r(60687),a=r(43210),i=r(16189);r(84245);var o=r(43649),l=r(85814),n=r.n(l),c=r(79440),d=r(77081),u=r.n(d),m=r(7203),p=r(26923),h=r(28141),_=r(14432),g=r(85231),x=r(79801),b=r(2188),v=r(53175);let f=({articleId:e})=>{let[t,r]=(0,a.useState)(""),[l,d]=(0,a.useState)(""),[f,y]=(0,a.useState)(""),[C,j]=(0,a.useState)(""),[N,S]=(0,a.useState)("published"),[A,K]=(0,a.useState)(!1),[F,B]=(0,a.useState)(!0),[w,k]=(0,a.useState)(""),[I,H]=(0,a.useState)(0),[L,P]=(0,a.useState)(""),[O,q]=(0,a.useState)(!1),[E,D]=(0,a.useState)(""),T=(0,a.useRef)(null),M=(0,i.useRouter)(),[U,G]=(0,a.useState)(!1),[R,$]=(0,a.useState)(""),W=["Use Cmd+B (Mac) or Ctrl+B (Windows) for bold text","Press Cmd+K (Mac) or Ctrl+K (Windows) to insert a link","You can create headings with Cmd+Option+1-3 (Mac) or Ctrl+Alt+1-3 (Windows)","Use bullet lists with Cmd+Shift+8 (Mac) or Ctrl+Shift+8 (Windows)","Press Cmd+Shift+I (Mac) or Ctrl+Shift+I (Windows) to insert an image"],V=(0,m.hG)({extensions:[p.A.configure({heading:{levels:[1,2,3]},bold:!1,italic:!1,code:!1}),h.Ay,_.Ay,g.Ay,x.Ay,b.N_.configure({openOnClick:!1})],content:"",onUpdate:({editor:e})=>{d(e.getHTML()),H(e.getText().length)},enableInputRules:!0,enablePasteRules:!0,immediatelyRender:!1});(0,a.useEffect)(()=>()=>{V?.destroy()},[V]),(0,a.useEffect)(()=>{"undefined"!=typeof navigator&&G(navigator.platform.toUpperCase().indexOf("MAC")>=0);let e=Math.floor(Math.random()*W.length);$(W[e])},[]),(0,a.useEffect)(()=>{let t=async()=>{try{B(!0);let t=await (0,c.zE)(e);r(t.title),d(t.body),V&&!V.isDestroyed&&V.commands.setContent(t.body),y(t.tags?.join(", ")||""),j(t.coverImage||""),S(t.status||"published"),P(t.slug||""),H(t.body.length)}catch(e){console.error("Error loading article:",e),k("Failed to load article data")}finally{B(!1)}};e&&V&&t()},[e,V]);let X=async r=>{if(r.preventDefault(),!t||!l)return void k("Title and content are required");if(!o.j2.currentUser)return void k("You must be logged in to edit an article");try{K(!0),k("");let r=f.split(",").map(e=>e.trim()).filter(e=>""!==e),s={title:t,body:l,tags:r,status:N};""!==C.trim()&&(s.coverImage=C);let a=await (0,c.iZ)(e,s);"published"===N?M.push(`/articles?slug=${a.slug}`):M.push("/my-thoughts")}catch(e){console.error("Error updating article:",e),k("Failed to update article. Please try again.")}finally{K(!1)}},z=(0,a.useCallback)(()=>{let e=window.prompt("URL");e&&V?.chain().focus().extendMarkRange("link").setLink({href:e}).run()},[V]),Y=(0,a.useCallback)(()=>{let e=window.prompt("Image URL");e&&V?.chain().focus().setImage({src:e}).run()},[V]),Q=(0,a.useCallback)(async e=>{if(V){e.preventDefault();let t=e.clipboardData.getData("text/html"),r=e.clipboardData.getData("text/plain");t&&t.trim()?D(t):D(r),q(!0)}},[V]),Z=(0,a.useCallback)(()=>{V&&E&&(E.includes("<"),V.commands.insertContent(E),q(!1))},[V,E]),J=(0,a.useCallback)(()=>{if(V&&E){let e=E;if(E.startsWith("<")){let t=document.createElement("div");t.innerHTML=E,e=t.textContent||t.innerText||""}V.commands.insertContent(e),q(!1)}},[V,E]),ee=(0,a.useCallback)(e=>{let t=U?e.metaKey:e.ctrlKey;t&&e.shiftKey&&"I"===e.key&&(e.preventDefault(),Y()),O&&E&&(t&&e.shiftKey&&"V"===e.key&&(e.preventDefault(),Z()),t&&e.shiftKey&&"X"===e.key&&(e.preventDefault(),J()))},[Y,O,E,Z,J,U]);return((0,a.useEffect)(()=>{let e=e=>{T.current&&!T.current.contains(e.target)&&q(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),F)?(0,s.jsx)("div",{className:u().articleFormContainer,children:(0,s.jsxs)("div",{className:u().loading,children:[(0,s.jsx)("div",{className:u().loadingSpinner}),(0,s.jsx)("span",{children:"Loading article data..."})]})}):(0,s.jsxs)("div",{className:u().articleFormContainer,children:[(0,s.jsxs)("div",{className:u().articleFormHeader,children:[(0,s.jsx)("h1",{className:u().articleFormTitle,children:"Edit Your Story"}),(0,s.jsx)("p",{className:u().articleFormSubtitle,children:"Refine your thoughts and make your article shine"})]}),w&&(0,s.jsxs)("div",{className:u().errorAlert,children:[(0,s.jsx)("span",{className:u().errorIcon,children:"⚠️"}),(0,s.jsx)("span",{children:w})]}),(0,s.jsxs)("form",{onSubmit:X,className:u().articleForm,children:[(0,s.jsxs)("div",{className:u().formGroup,children:[(0,s.jsx)("label",{htmlFor:"title",className:u().formLabel,children:"Title"}),(0,s.jsx)("input",{type:"text",id:"title",value:t,onChange:e=>r(e.target.value),required:!0,placeholder:"Enter a captivating title for your article...",className:u().formControl,maxLength:100}),(0,s.jsx)("div",{className:u().formHint,children:"A good title is clear, specific, and engaging"})]}),(0,s.jsxs)("div",{className:u().formGroup,children:[(0,s.jsxs)("label",{htmlFor:"coverImage",className:u().formLabel,children:["Cover Image URL ",(0,s.jsx)("span",{className:u().optionalLabel,children:"optional"})]}),(0,s.jsx)("input",{type:"url",id:"coverImage",value:C,onChange:e=>j(e.target.value),placeholder:"https://example.com/image.jpg",className:u().formControl}),(0,s.jsx)("div",{className:u().formHint,children:"A striking image can increase engagement with your article"}),C&&(0,s.jsx)("div",{className:u().imagePreview,children:(0,s.jsx)("img",{src:C,alt:"Cover preview"})})]}),(0,s.jsxs)("div",{className:u().formGroup,children:[(0,s.jsxs)("label",{htmlFor:"tags",className:u().formLabel,children:["Tags ",(0,s.jsx)("span",{className:u().optionalLabel,children:"comma separated"})]}),(0,s.jsx)("input",{type:"text",id:"tags",value:f,onChange:e=>y(e.target.value),placeholder:"technology, news, science, learning",className:u().formControl}),(0,s.jsx)("div",{className:u().formHint,children:"Tags help readers discover your content"}),f&&(0,s.jsx)("div",{className:u().tagsPreview,children:f.split(",").map((e,t)=>e.trim()&&(0,s.jsx)("span",{className:u().tag,children:e.trim()},t))})]}),(0,s.jsxs)("div",{className:`${u().formGroup} ${u().statusDropdown}`,children:[(0,s.jsx)("label",{htmlFor:"status",className:u().formLabel,children:"Status"}),(0,s.jsxs)("select",{id:"status",value:N,onChange:e=>S(e.target.value),className:u().formControl,children:[(0,s.jsx)("option",{value:"published",children:"Published (visible to everyone)"}),(0,s.jsx)("option",{value:"drafts",children:"Save as Draft (only visible to you)"})]}),(0,s.jsx)("div",{className:u().formHint,children:"published"===N?"Your article will be visible to all users":"Only you can see your draft until you publish it"})]}),(0,s.jsxs)("div",{className:u().formGroup,children:[(0,s.jsx)("label",{htmlFor:"body",className:u().formLabel,children:"Content"}),(0,s.jsxs)("div",{className:u().editorToolbar,children:[(0,s.jsx)("button",{type:"button",onClick:()=>V?.chain().focus().toggleHeading({level:1}).run(),className:V?.isActive("heading",{level:1})?u().activeButton:u().toolbarButton,title:`Heading 1 (${U?"⌘+Option+1":"Ctrl+Alt+1"})`,children:"H1"}),(0,s.jsx)("button",{type:"button",onClick:()=>V?.chain().focus().toggleHeading({level:2}).run(),className:V?.isActive("heading",{level:2})?u().activeButton:u().toolbarButton,title:`Heading 2 (${U?"⌘+Option+2":"Ctrl+Alt+2"})`,children:"H2"}),(0,s.jsx)("button",{type:"button",onClick:()=>V?.chain().focus().toggleHeading({level:3}).run(),className:V?.isActive("heading",{level:3})?u().activeButton:u().toolbarButton,title:`Heading 3 (${U?"⌘+Option+3":"Ctrl+Alt+3"})`,children:"H3"}),(0,s.jsx)("button",{type:"button",onClick:()=>V?.chain().focus().toggleBold().run(),className:V?.isActive("bold")?u().activeButton:u().toolbarButton,title:`Bold (${U?"⌘+B":"Ctrl+B"})`,children:"Bold"}),(0,s.jsx)("button",{type:"button",onClick:()=>V?.chain().focus().toggleItalic().run(),className:V?.isActive("italic")?u().activeButton:u().toolbarButton,title:`Italic (${U?"⌘+I":"Ctrl+I"})`,children:"Italic"}),(0,s.jsx)("button",{type:"button",onClick:()=>V?.chain().focus().toggleCode().run(),className:V?.isActive("code")?u().activeButton:u().toolbarButton,title:`Code (${U?"⌘+E":"Ctrl+E"})`,children:"Code"}),(0,s.jsx)("button",{type:"button",onClick:z,className:V?.isActive("link")?u().activeButton:u().toolbarButton,title:`Link (${U?"⌘+K":"Ctrl+K"})`,children:"Link"}),(0,s.jsx)("button",{type:"button",onClick:Y,className:u().toolbarButton,title:`Insert Image (${U?"⌘+Shift+I":"Ctrl+Shift+I"})`,children:"Image"}),(0,s.jsx)("button",{type:"button",onClick:()=>V?.chain().focus().toggleBulletList().run(),className:V?.isActive("bulletList")?u().activeButton:u().toolbarButton,title:`Bullet List (${U?"⌘+Shift+8":"Ctrl+Shift+8"})`,children:"Bullet List"}),(0,s.jsx)("button",{type:"button",onClick:()=>V?.chain().focus().toggleOrderedList().run(),className:V?.isActive("orderedList")?u().activeButton:u().toolbarButton,title:`Numbered List (${U?"⌘+Shift+7":"Ctrl+Shift+7"})`,children:"Numbered List"}),(0,s.jsx)("div",{className:u().toolbarSpacer}),(0,s.jsx)(v.A,{})]}),(0,s.jsx)(m.$Z,{editor:V,className:u().richTextEditor,onKeyDown:ee,onPaste:Q}),O&&(0,s.jsxs)("div",{ref:T,className:u().pasteOptionsContainer,children:[(0,s.jsx)("div",{className:u().pasteOptionsHeader,children:"Paste Options"}),(0,s.jsxs)("button",{type:"button",className:u().pasteOptionButton,onClick:Z,children:["Keep Formatting (",U?"⌘+Shift+V":"Ctrl+Shift+V",")"]}),(0,s.jsxs)("button",{type:"button",className:u().pasteOptionButton,onClick:J,children:["Paste as Plain Text (",U?"⌘+Shift+X":"Ctrl+Shift+X",")"]})]}),(0,s.jsx)("div",{className:u().characterCount,children:(0,s.jsxs)("span",{className:I>3e3?u().characterWarning:"",children:[I," characters"]})}),(0,s.jsx)("div",{className:u().formHint,children:(0,s.jsxs)("span",{children:["✨ Tip: ",R]})})]}),(0,s.jsxs)("div",{className:u().formActions,children:[(0,s.jsx)(n(),{href:"/my-thoughts",className:u().cancelButton,children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:u().submitButton,disabled:A,children:A?"Saving changes...":"Save changes"})]})]})]})};var y=r(5062),C=r.n(y);function j(){let e=(0,i.useSearchParams)(),t=e?.get("id")||"",[r,o]=(0,a.useState)(!1),[l,n]=(0,a.useState)(!0);return((0,i.useRouter)(),l)?(0,s.jsx)("div",{className:C().container,children:(0,s.jsx)("div",{className:C().loading,children:"Loading..."})}):r?t?(0,s.jsx)(f,{articleId:t}):(0,s.jsx)("div",{className:C().container,children:(0,s.jsx)("div",{className:C().loading,children:"No article ID provided."})}):(0,s.jsx)("div",{className:C().container,children:(0,s.jsx)("div",{className:C().loading,children:"Please log in to edit articles."})})}function N(){return(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)("div",{className:C().container,children:(0,s.jsx)("div",{className:C().loading,children:"Loading..."})}),children:(0,s.jsx)(j,{})})}}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[476,948,546,637,947],()=>r(78151));module.exports=s})();