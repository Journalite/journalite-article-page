(()=>{var e={};e.id=268,e.ids=[268],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3638:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>l,pages:()=>d,routeModule:()=>p,tree:()=>u});var i=t(65239),s=t(48088),a=t(88170),o=t.n(a),n=t(30893),c={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(r,c);let u={children:["",{children:["edit-article",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,6576)),"/Users/sirabdisalam/journalite-article-page/src/app/edit-article/page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,18955)),"/Users/sirabdisalam/journalite-article-page/src/app/edit-article/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,94431)),"/Users/sirabdisalam/journalite-article-page/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,54413)),"/Users/sirabdisalam/journalite-article-page/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["/Users/sirabdisalam/journalite-article-page/src/app/edit-article/page.tsx"],l={require:t,loadChunk:()=>Promise.resolve()},p=new i.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/edit-article/page",pathname:"/edit-article",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},6576:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i});let i=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/sirabdisalam/journalite-article-page/src/app/edit-article/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/sirabdisalam/journalite-article-page/src/app/edit-article/page.tsx","default")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16189:(e,r,t)=>{"use strict";var i=t(65773);t.o(i,"usePathname")&&t.d(r,{usePathname:function(){return i.usePathname}}),t.o(i,"useRouter")&&t.d(r,{useRouter:function(){return i.useRouter}}),t.o(i,"useSearchParams")&&t.d(r,{useSearchParams:function(){return i.useSearchParams}})},18955:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s,viewport:()=>i});let i={width:"device-width",initialScale:1};function s({children:e}){return e}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},22434:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>l});var i=t(60687),s=t(43210),a=t(16189);t(84245),t(43649);var o=t(91834),n=t(5062),c=t.n(n);let u=(0,s.cache)(()=>(0,a.useSearchParams)());function d(){let e=u(),r=e?.get("id")||"",[t,n]=(0,s.useState)(!1),[d,l]=(0,s.useState)(!0);return((0,a.useRouter)(),d)?(0,i.jsx)("div",{className:c().container,children:(0,i.jsx)("div",{className:c().loading,children:"Loading..."})}):t?r?(0,i.jsx)(o.A,{articleId:r}):(0,i.jsx)("div",{className:c().container,children:(0,i.jsx)("div",{className:c().loading,children:"No article ID provided."})}):(0,i.jsx)("div",{className:c().container,children:(0,i.jsx)("div",{className:c().loading,children:"Please log in to edit articles."})})}function l(){return(0,i.jsx)(s.Suspense,{fallback:(0,i.jsx)("div",{className:c().container,children:(0,i.jsx)("div",{className:c().loading,children:"Loading..."})}),children:(0,i.jsx)(d,{})})}},27910:e=>{"use strict";e.exports=require("stream")},28163:(e,r,t)=>{"use strict";t.d(r,{Hs:()=>d,N9:()=>a,Ss:()=>o,bA:()=>n,fP:()=>u,he:()=>c});var i=t(75535),s=t(43649);async function a(e,r,t,a){try{if(e===t)return null;let o={userId:e,type:"follow",read:!1,sourceId:t,sourceType:"user",message:`${r} (@${a}) started following you`,fromUser:{id:t,name:r,username:a},createdAt:i.Timestamp.now()};return{id:(await (0,i.addDoc)((0,i.collection)(s.db,"notifications"),o)).id,...o}}catch(e){return console.error("Error creating follow notification:",e),null}}async function o(e=!1){try{let r,t=s.j2.currentUser;if(!t)throw Error("User not authenticated");let a=(0,i.collection)(s.db,"notifications");r=e?(0,i.query)(a,(0,i.where)("userId","==",t.uid),(0,i.where)("read","==",!1),(0,i.orderBy)("createdAt","desc"),(0,i.limit)(100)):(0,i.query)(a,(0,i.where)("userId","==",t.uid),(0,i.orderBy)("createdAt","desc"),(0,i.limit)(100));let o=await (0,i.getDocs)(r),n=[];return o.forEach(e=>{n.push({id:e.id,...e.data()})}),n}catch(e){throw console.error("Error fetching notifications:",e),e}}async function n(e){try{let r=s.j2.currentUser;if(!r)throw Error("User not authenticated");let t=(0,i.doc)(s.db,"notifications",e),a=await (0,i.getDoc)(t);if(!a.exists())throw Error("Notification not found");if(a.data().userId!==r.uid)throw Error("Unauthorized access to notification");return await (0,i.updateDoc)(t,{read:!0}),{success:!0}}catch(e){throw console.error("Error marking notification as read:",e),e}}async function c(){try{let e=s.j2.currentUser;if(!e)throw Error("User not authenticated");let r=(0,i.collection)(s.db,"notifications"),t=(0,i.query)(r,(0,i.where)("userId","==",e.uid),(0,i.where)("read","==",!1)),a=await (0,i.getDocs)(t),o=a.docs.map(e=>(0,i.updateDoc)(e.ref,{read:!0}));return await Promise.all(o),{success:!0,count:a.size}}catch(e){throw console.error("Error marking all notifications as read:",e),e}}async function u(e){try{let r=s.j2.currentUser;if(!r)throw Error("User not authenticated");let t=(0,i.doc)(s.db,"notifications",e),a=await (0,i.getDoc)(t);if(!a.exists())throw Error("Notification not found");if(a.data().userId!==r.uid)throw Error("Unauthorized access to notification");return await (0,i.deleteDoc)(t),{success:!0}}catch(e){throw console.error("Error deleting notification:",e),e}}async function d(){try{let e=s.j2.currentUser;if(!e)return 0;let r=(0,i.collection)(s.db,"notifications"),t=(0,i.query)(r,(0,i.where)("userId","==",e.uid),(0,i.where)("read","==",!1));return(await (0,i.getDocs)(t)).size}catch(e){return console.error("Error counting unread notifications:",e),0}}},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37366:e=>{"use strict";e.exports=require("dns")},43649:(e,r,t)=>{"use strict";t.d(r,{db:()=>c,j2:()=>n});var i=t(67989);t(10178);var s=t(84245),a=t(75535);let o=(0,i.Wp)({apiKey:"AIzaSyCFpybhLt43iKUw6lNahU1n2zjYv0BXmf4",authDomain:"journalitev1.firebaseapp.com",projectId:"journalitev1",storageBucket:"journalitev1.firebasestorage.app",messagingSenderId:"897263211529",appId:"1:897263211529:web:bae4a00910a2236d6d54d8",measurementId:"G-ZYT8PRMT0D"}),n=(0,s.getAuth)(o),c=(0,a.getFirestore)(o)},45177:(e,r,t)=>{Promise.resolve().then(t.bind(t,22434))},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},78335:()=>{},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},92377:(e,r,t)=>{Promise.resolve().then(t.bind(t,6576))},94735:e=>{"use strict";e.exports=require("events")},96487:()=>{}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),i=r.X(0,[476,948,635,405,11,306,834],()=>t(3638));module.exports=i})();