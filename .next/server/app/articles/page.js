(()=>{var e={};e.id=292,e.ids=[292],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},6248:e=>{e.exports={commentSection:"comment_commentSection__SP_jS",commentSectionTitle:"comment_commentSectionTitle__F_Jxe",commentError:"comment_commentError__A2v6U",commentForm:"comment_commentForm__U8b7X",commentInputContainer:"comment_commentInputContainer__3WsSp",loginPromptContainer:"comment_loginPromptContainer__X4aZr",commentAvatar:"comment_commentAvatar__uav6Q",replyAvatar:"comment_replyAvatar__dIlrw",commentInput:"comment_commentInput__4DHa1",replyInput:"comment_replyInput__8t_ho",commentSubmit:"comment_commentSubmit__UfvUF",replySubmit:"comment_replySubmit__2eCP7",loginButton:"comment_loginButton__4encR",loginModalOverlay:"comment_loginModalOverlay__Pk_AM",loginModal:"comment_loginModal__n984X",loginModalClose:"comment_loginModalClose__v02Rx",loginModalTitle:"comment_loginModalTitle__nZpZB",loginModalText:"comment_loginModalText__XwRn6",loginModalButtons:"comment_loginModalButtons__XdVNl",loginModalButton:"comment_loginModalButton__d8Bnr",primary:"comment_primary__1UIRJ",secondary:"comment_secondary__zc89j",commentLoading:"comment_commentLoading___WYvK",loadingDots:"comment_loadingDots___Lw2B",loadingDot:"comment_loadingDot__skUEk",pulse:"comment_pulse__czQlg",noComments:"comment_noComments__U9FG6",commentsList:"comment_commentsList__ZRMbc",commentItem:"comment_commentItem__Vx48l",commentHeader:"comment_commentHeader__3oOD6",commentUser:"comment_commentUser__QP5pY",commentDate:"comment_commentDate__5zfpn",commentContent:"comment_commentContent__DiE8h",commentActions:"comment_commentActions___Wpzi",commentLikeBtn:"comment_commentLikeBtn__wAYZO",replyToggle:"comment_replyToggle__bCRZg",commentDeleteBtn:"comment_commentDeleteBtn__BnLQc",liked:"comment_liked__2yWZ9",repliesToggle:"comment_repliesToggle__yepDc",repliesToggleIcon:"comment_repliesToggleIcon__EZRkK",open:"comment_open__cpLDc",replySection:"comment_replySection__mAqn4",replyItem:"comment_replyItem__ndhqf",replyHeader:"comment_replyHeader__Y2bUK",replyUser:"comment_replyUser__rw4V8",replyDate:"comment_replyDate__4Jafb",replyContent:"comment_replyContent__uV2jp",replyForm:"comment_replyForm__aYyum",inThread:"comment_inThread__lUoKT",replyButtons:"comment_replyButtons__KRGyv",replyCancel:"comment_replyCancel__od7Vq"}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},18853:(e,t,r)=>{Promise.resolve().then(r.bind(r,60507))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},24596:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});let i=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/sirabdisalam/journalite-article-page/src/app/articles/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/sirabdisalam/journalite-article-page/src/app/articles/page.tsx","default")},24933:(e,t,r)=>{Promise.resolve().then(r.bind(r,24596))},27910:e=>{"use strict";e.exports=require("stream")},28250:e=>{e.exports={container:"MinimalNotificationBell_container__NGUf_",button:"MinimalNotificationBell_button__MAJkt",icon:"MinimalNotificationBell_icon__c6pW9",badge:"MinimalNotificationBell_badge___Di_K",dropdown:"MinimalNotificationBell_dropdown__PJtYq",header:"MinimalNotificationBell_header__zCiQJ",viewAll:"MinimalNotificationBell_viewAll__ZLWoU",list:"MinimalNotificationBell_list__MmsKd",item:"MinimalNotificationBell_item__flonv",unread:"MinimalNotificationBell_unread__278b3",content:"MinimalNotificationBell_content__31WKK",message:"MinimalNotificationBell_message__fnAua",time:"MinimalNotificationBell_time___76Fq",dot:"MinimalNotificationBell_dot__R2YqN",empty:"MinimalNotificationBell_empty__kDVAL",footer:"MinimalNotificationBell_footer__Pslwe",seeMore:"MinimalNotificationBell_seeMore__ggGUA"}},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},32031:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l,metadata:()=>n,viewport:()=>a});var i=r(37413);let n={title:"Articles | Journalite",description:"Explore the latest articles from Journalite"},a={width:"device-width",initialScale:1,maximumScale:1};function l({children:e}){return(0,i.jsx)(i.Fragment,{children:e})}},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},34738:e=>{e.exports={articleContainer:"ArticleWithHighlights_articleContainer__r1hgP",articleContent:"ArticleWithHighlights_articleContent__qrFhS",loadingContainer:"ArticleWithHighlights_loadingContainer__6cqbO",loadingIndicator:"ArticleWithHighlights_loadingIndicator__ymNyj",spin:"ArticleWithHighlights_spin__Olepl",errorContainer:"ArticleWithHighlights_errorContainer__njqpS",errorMessage:"ArticleWithHighlights_errorMessage__D4C7O"}},36012:e=>{e.exports={articlePageContainer:"ArticlePage_articlePageContainer__S9vO3",pageHeader:"ArticlePage_pageHeader__LpJc9",headerContainer:"ArticlePage_headerContainer__2_FTv",logoLink:"ArticlePage_logoLink__fMNNv",headerLogo:"ArticlePage_headerLogo__QZCOB",headerActions:"ArticlePage_headerActions__gK7Eo",profileMenu:"ArticlePage_profileMenu__LJeQ0",profileCircle:"ArticlePage_profileCircle__mpTwC",profileDropdown:"ArticlePage_profileDropdown__PnV9R",dropdownItem:"ArticlePage_dropdownItem__Lac2v",authButtons:"ArticlePage_authButtons__R_ANg",loginButton:"ArticlePage_loginButton__kpUQh",signupButton:"ArticlePage_signupButton__EvVWG",pageContainer:"ArticlePage_pageContainer__7QNUg",relatedTagsSection:"ArticlePage_relatedTagsSection__SvZ8y",relatedTagsHeading:"ArticlePage_relatedTagsHeading__Ys9Op",relatedTagsList:"ArticlePage_relatedTagsList__Xn3ds",relatedTag:"ArticlePage_relatedTag__DEwLe",writeButton:"ArticlePage_writeButton__yZp3x",articleHeader:"ArticlePage_articleHeader__LJolV",articleTitle:"ArticlePage_articleTitle__euOmw",articleMeta:"ArticlePage_articleMeta__LXXWl",authorInfo:"ArticlePage_authorInfo__nnMSs",authorAvatar:"ArticlePage_authorAvatar__1S1bM",authorDetails:"ArticlePage_authorDetails__65w4B",authorNameLink:"ArticlePage_authorNameLink__c6fCN",authorName:"ArticlePage_authorName__o2DdL",articleDetails:"ArticlePage_articleDetails__mK6k_",articleActions:"ArticlePage_articleActions__IZLcw",editButton:"ArticlePage_editButton__Yl62q",tagContainer:"ArticlePage_tagContainer__kI5Py",tag:"ArticlePage_tag__F5Z0e",likeButton:"ArticlePage_likeButton__V0q84",liked:"ArticlePage_liked__Mzzkj",likeIcon:"ArticlePage_likeIcon__zOA_O",commentsContainer:"ArticlePage_commentsContainer__rpCTJ",loadingContainer:"ArticlePage_loadingContainer__v7RVf",loadingIndicator:"ArticlePage_loadingIndicator__E2bt3",spin:"ArticlePage_spin__yRZnI",errorContainer:"ArticlePage_errorContainer__pxRgD",errorMessage:"ArticlePage_errorMessage__quACi"}},37366:e=>{"use strict";e.exports=require("dns")},55511:e=>{"use strict";e.exports=require("crypto")},60507:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>D});var i=r(60687),n=r(43210),a=r(85814),l=r.n(a),s=r(16189),o=r(36012),c=r.n(o),d=r(43649),m=r(84245),h=r(28163),u=r(28250),g=r.n(u);let p=()=>{let[e,t]=(0,n.useState)(0),[r,a]=(0,n.useState)([]),[s,o]=(0,n.useState)(!1),c=(0,n.useRef)(null);(0,n.useEffect)(()=>{let e=async()=>{t(await (0,h.Hs)())};e();let r=setInterval(e,6e4);return()=>clearInterval(r)},[]),(0,n.useEffect)(()=>{let e=e=>{c.current&&!c.current.contains(e.target)&&o(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,n.useEffect)(()=>{s&&d()},[s]);let d=async()=>{try{let e=await (0,h.Ss)(!1);a(e)}catch(e){console.error("Error fetching notifications:",e)}},m=async e=>{try{!e.read&&e.id&&(await (0,h.bA)(e.id),t(e=>Math.max(e-1,0)),a(t=>t.map(t=>t.id===e.id?{...t,read:!0}:t)))}catch(e){console.error("Error marking notification as read:",e)}},u=e=>{if(!e)return"";let t=e.toDate?e.toDate():new Date(e),r=Math.floor((new Date().getTime()-t.getTime())/6e4);if(r<1)return"Just now";if(r<60)return`${r}m ago`;let i=Math.floor(r/60);if(i<24)return`${i}h ago`;let n=Math.floor(i/24);return n<7?`${n}d ago`:t.toLocaleDateString()},p=e=>"follow"===e.type?e.fromUser?.username?`/user/${e.fromUser.username}`:"/notifications":e.articleSlug?`/articles?slug=${e.articleSlug}`:"/notifications";return(0,i.jsxs)("div",{className:g().container,ref:c,children:[(0,i.jsxs)("button",{className:g().button,onClick:()=>{o(!s)},"aria-label":"Notifications",children:[(0,i.jsxs)("svg",{className:g().icon,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,i.jsx)("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),(0,i.jsx)("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),e>0&&(0,i.jsx)("span",{className:g().badge,children:e})]}),s&&(0,i.jsxs)("div",{className:g().dropdown,children:[(0,i.jsxs)("div",{className:g().header,children:[(0,i.jsx)("h3",{children:"Notifications"}),r.length>0&&(0,i.jsx)(l(),{href:"/notifications",className:g().viewAll,children:"View All"})]}),(0,i.jsx)("div",{className:g().list,children:0===r.length?(0,i.jsx)("div",{className:g().empty,children:"No notifications yet"}):r.slice(0,5).map(e=>(0,i.jsxs)(l(),{href:p(e),className:`${g().item} ${!e.read?g().unread:""}`,onClick:()=>m(e),children:[(0,i.jsxs)("div",{className:g().content,children:[(0,i.jsx)("p",{className:g().message,children:e.message}),(0,i.jsx)("span",{className:g().time,children:u(e.createdAt)})]}),!e.read&&(0,i.jsx)("div",{className:g().dot})]},e.id))}),r.length>5&&(0,i.jsx)("div",{className:g().footer,children:(0,i.jsx)(l(),{href:"/notifications",className:g().seeMore,children:"See more notifications"})})]})]})};var _=r(75535);let x=async(e,t,r,i,n)=>{try{let a={articleId:e,userId:t,text:r,prefix:i,suffix:n,createdAt:(0,_.O5)(),comments:[]};return(await (0,_.gS)((0,_.rJ)(d.db,"highlights"),a)).id}catch(e){throw console.error("Error saving highlight:",e),e}},f=async e=>{try{let t=(0,_.P)((0,_.rJ)(d.db,"highlights"),(0,_._M)("articleId","==",e));return(await (0,_.GG)(t)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){return console.error("Error getting highlights:",e),[]}},j=async e=>{try{await (0,_.kd)((0,_.H9)(d.db,"highlights",e))}catch(e){throw console.error("Error deleting highlight:",e),e}},v=(0,n.createContext)(void 0),N=({children:e,articleId:t})=>{let[r,a]=(0,n.useState)([]),[l,s]=(0,n.useState)(!0),[o,c]=(0,n.useState)(null);(0,n.useEffect)(()=>{let e=d.j2.onAuthStateChanged(e=>{c(e)});return()=>e()},[]),(0,n.useEffect)(()=>{(async()=>{if(t){s(!0);try{let e=await f(t);a(e)}catch(e){console.error("Error loading highlights:",e)}finally{s(!1)}}})()},[t]);let m=async(e,t,r,i)=>{if(!o)return alert("You must be logged in to highlight text"),null;try{let n=await x(i,o.uid,e,t,r),l={id:n,articleId:i,userId:o.uid,text:e,prefix:t,suffix:r,createdAt:new Date};return a(e=>[...e,l]),n}catch(e){return console.error("Error saving highlight:",e),null}},h=async e=>{try{await j(e),a(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Error removing highlight:",e)}};return(0,i.jsx)(v.Provider,{value:{highlights:r,loading:l,saveHighlight:m,removeHighlight:h,highlightElement:e=>{let t=document.createElement("mark");t.className="article-highlight";try{e.surroundContents(t)}catch(i){console.error("Error highlighting range:",i);let r=e.extractContents();t.appendChild(r),e.insertNode(t)}}},children:e})},y=()=>{let e=(0,n.useContext)(v);if(void 0===e)throw Error("useHighlights must be used within a HighlightProvider");return e};r(51215);let w=({selection:e,onHighlight:t,onResponse:r,onShare:i,onAiAssist:a})=>{let[l,s]=(0,n.useState)({top:0,left:0}),[o,c]=(0,n.useState)(!1),d=(0,n.useRef)(null);return(0,n.useEffect)(()=>{if(!e||e.isCollapsed)return void c(!1);let t=e.getRangeAt(0).getBoundingClientRect();window.innerHeight;let r=d.current?.offsetHeight||40,i=t.top-r-10+window.scrollY,n=t.left+t.width/2;s({top:i<0?t.bottom+10+window.scrollY:i,left:n}),c(!0)},[e]),null},C=e=>{let t={prefix:"",suffix:""};if(!e||0===e.rangeCount)return t;let r=e.getRangeAt(0),i=r.toString();r.cloneRange();let n=r.commonAncestorContainer.textContent||"",a=n.indexOf(i);if(-1!==a){let e=Math.max(0,a-30),r=Math.min(n.length,a+i.length+30);t.prefix=n.substring(e,a),t.suffix=n.substring(a+i.length,r)}return t},k=(e,t)=>{e&&t&&(t.querySelectorAll(".article-highlight").forEach(e=>{let t=e.parentNode;if(t){let r=document.createTextNode(e.textContent||"");t.replaceChild(r,e),t.normalize()}}),e.forEach(e=>{let r=((e,r,i)=>{let n,a=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,null),l=(r+e+i).trim();for(;n=a.nextNode();){let t=(n.textContent||"").indexOf(l);if(-1!==t){let i=document.createRange(),a=r.trim().length;return i.setStart(n,t+a),i.setEnd(n,t+a+e.trim().length),i}}return null})(e.text,e.prefix,e.suffix);if(r)try{let t=document.createElement("mark");t.className="article-highlight",t.dataset.highlightId=e.id,r.surroundContents(t)}catch(e){console.error("Error applying highlight:",e)}}))},b=({articleId:e,children:t,onShare:r})=>{let[a,l]=(0,n.useState)(null),{highlights:s,saveHighlight:o,removeHighlight:c,highlightElement:d}=y(),[m,h]=(0,n.useState)(null),[u,g]=(0,n.useState)(!1),[p,_]=(0,n.useState)(""),[x,f]=(0,n.useState)(!1),[j,v]=(0,n.useState)(""),[N,b]=(0,n.useState)(null),[A,S]=(0,n.useState)(!1),[M,P]=(0,n.useState)(!1),[L,B]=(0,n.useState)({top:0,left:0}),E=(0,n.useCallback)(()=>{P(!0),setTimeout(()=>{S(!1),P(!1)},150)},[]),I=(0,n.useCallback)(()=>{if(A)return;let e=window.getSelection();e&&!e.isCollapsed&&""!==e.toString().trim()?l(e):l(null)},[A]),T=(0,n.useCallback)((t,r)=>{if(t&&r){let i=C(window.getSelection());o(t.trim(),i.prefix,i.suffix,e),d(r)}},[e,o,d]),D=(0,n.useCallback)(e=>{let t=e.target;if(t.classList.contains("article-highlight")){e.preventDefault(),e.stopPropagation();let r=t.dataset.highlightId,i=t.textContent||"";if(r){P(!1),b({id:r,text:i});let e=t.getBoundingClientRect();B({top:e.top-40+window.scrollY,left:e.left+e.width/2}),S(!0),l(null)}}else A&&(E(),b(null))},[A,E]),U=(0,n.useCallback)(()=>{if(N&&N.id){E();let e=N.id;if(b(null),c(e),m){let t=m.querySelector(`[data-highlight-id="${e}"]`);if(t&&t.parentNode){let e=document.createTextNode(t.textContent||"");t.parentNode.replaceChild(e,t),t.parentNode.normalize()}}}},[N,c,m,E]),H=(0,n.useCallback)(e=>{_(e),g(!0)},[]),$=(0,n.useCallback)(e=>{if(r)r(e);else{let t=`"${e}" — via Journalite`;navigator.share?navigator.share({text:t}).catch(e=>{console.error("Error sharing:",e),navigator.clipboard.writeText(t).then(()=>alert("Quote copied to clipboard!")).catch(e=>console.error("Failed to copy:",e))}):navigator.clipboard.writeText(t).then(()=>alert("Quote copied to clipboard!")).catch(e=>console.error("Failed to copy:",e))}},[r]),R=(0,n.useCallback)(e=>{v(e),f(!0)},[]);(0,n.useEffect)(()=>(document.addEventListener("selectionchange",I),()=>{document.removeEventListener("selectionchange",I)}),[I]),(0,n.useEffect)(()=>{if(m)return m.addEventListener("click",D),()=>{m.removeEventListener("click",D)}},[m,D]),(0,n.useEffect)(()=>{let e=e=>{if(A){let t=e.target;t.closest(".highlight-toolbar")||t.classList.contains("article-highlight")||(E(),b(null))}};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[A,E]),(0,n.useEffect)(()=>{m&&s.length>0&&k(s,m)},[s,m]);let q=(0,n.useCallback)(e=>{e&&h(e)},[]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(w,{selection:a,onHighlight:T,onResponse:H,onShare:$,onAiAssist:R}),A&&N&&(0,i.jsxs)("div",{className:`highlight-toolbar unhighlight-toolbar ${M?"hiding":""}`,style:{position:"absolute",top:`${L.top}px`,left:`${L.left}px`,transform:M?"translateY(-10px) translateX(-50%)":"translateX(-50%)",zIndex:1e3},children:[(0,i.jsxs)("button",{onClick:U,className:"highlight-btn highlight-btn-danger",children:[(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,i.jsx)("path",{d:"M21 4H8l-7 8 7 8h13a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"}),(0,i.jsx)("line",{x1:"18",y1:"9",x2:"12",y2:"15"}),(0,i.jsx)("line",{x1:"12",y1:"9",x2:"18",y2:"15"})]}),(0,i.jsx)("span",{children:"Unhighlight"})]}),(0,i.jsxs)("button",{onClick:()=>{$(N.text),E()},className:"highlight-btn",children:[(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,i.jsx)("circle",{cx:"18",cy:"5",r:"3"}),(0,i.jsx)("circle",{cx:"6",cy:"12",r:"3"}),(0,i.jsx)("circle",{cx:"18",cy:"19",r:"3"}),(0,i.jsx)("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),(0,i.jsx)("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),(0,i.jsx)("span",{children:"Share"})]}),(0,i.jsxs)("button",{onClick:()=>{H(N.text),E()},className:"highlight-btn",children:[(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,i.jsx)("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"})}),(0,i.jsx)("span",{children:"Response"})]})]}),(0,i.jsx)("div",{ref:q,className:"article-highlight-container",children:t}),u&&(0,i.jsx)("div",{className:"highlight-response-modal",children:(0,i.jsxs)("div",{className:"highlight-modal-content",children:[(0,i.jsx)("button",{className:"highlight-modal-close",onClick:()=>g(!1),children:"\xd7"}),(0,i.jsx)("h3",{children:"Respond to highlighted text"}),(0,i.jsxs)("div",{className:"highlight-selected-text",children:['"',p,'"']}),(0,i.jsx)("textarea",{className:"highlight-response-input",placeholder:"Write your response..."}),(0,i.jsx)("button",{className:"highlight-response-submit",children:"Submit"})]})}),x&&(0,i.jsx)("div",{className:"highlight-ai-modal",children:(0,i.jsxs)("div",{className:"highlight-modal-content",children:[(0,i.jsx)("button",{className:"highlight-modal-close",onClick:()=>f(!1),children:"\xd7"}),(0,i.jsx)("h3",{children:"Journa AI"}),(0,i.jsxs)("div",{className:"highlight-selected-text",children:['"',j,'"']}),(0,i.jsxs)("div",{className:"highlight-ai-options",children:[(0,i.jsx)("button",{children:"Explain this"}),(0,i.jsx)("button",{children:"Fact check"}),(0,i.jsx)("button",{children:"Provide context"}),(0,i.jsx)("button",{children:"Summarize"})]}),(0,i.jsx)("div",{className:"highlight-ai-response",children:(0,i.jsx)("div",{className:"highlight-ai-loading",children:"Journa AI is thinking..."})})]})})]})};var A=r(34738),S=r.n(A),M=r(79440),P=r(6621);let L=({articleId:e,initialHtml:t,documentModel:r})=>{let[a,l]=(0,n.useState)(null),[s,o]=(0,n.useState)(r||null),[c,d]=(0,n.useState)(!r&&!t),[m,h]=(0,n.useState)(""),u=(0,n.useRef)(null);return((0,n.useEffect)(()=>{r||t||a||(async()=>{try{d(!0);let t=await (0,M.zE)(e);if(!t)return void h("Article not found");let r=t.body.replace(/<div[^>]*>Content is loaded from HTML<\/div>/g,"").replace(/<h1[^>]*>Untitled Article<\/h1>/g,"");l({title:t.title,body:r})}catch(e){console.error("Error loading article:",e),h("Failed to load article")}finally{d(!1)}})()},[e,r,a,t]),(0,n.useEffect)(()=>{u.current&&s&&(P.A.initialize(u.current,s),P.A.fullRender(s))},[s]),(0,n.useEffect)(()=>{if(!u.current||s||!t)return;let e=t.replace(/<div[^>]*>Content is loaded from HTML<\/div>/g,"").replace(/<h1[^>]*>Untitled Article<\/h1>/g,"");u.current.innerHTML=e},[t,s]),c)?(0,i.jsxs)("div",{className:S().loadingContainer,children:[(0,i.jsx)("div",{className:S().loadingIndicator}),(0,i.jsx)("p",{children:"Loading article..."})]}):m?(0,i.jsx)("div",{className:S().errorContainer,children:(0,i.jsx)("p",{className:S().errorMessage,children:m})}):(0,i.jsx)(N,{articleId:e,children:(0,i.jsx)("article",{className:S().articleContainer,children:(0,i.jsx)(b,{articleId:e,onShare:t=>{if(navigator.share)navigator.share({title:a?.title||"Shared highlight",text:`"${t}" - from article ${e}`,url:window.location.href}).catch(e=>console.error("Error sharing:",e));else{let r=`"${t}" - from article ${e} ${window.location.href}`;navigator.clipboard.writeText(r).then(()=>alert("Highlight copied to clipboard!")).catch(e=>console.error("Error copying to clipboard:",e))}},children:(0,i.jsx)("div",{className:S().articleContent,ref:u,children:!s&&!t&&a&&(0,i.jsx)("div",{dangerouslySetInnerHTML:{__html:a.body}})})})})})};var B=r(6248),E=r.n(B);let I=({slug:e,articleId:t,isComplex:r})=>{let[a,s]=(0,n.useState)([]),[o,c]=(0,n.useState)(!0),[h,u]=(0,n.useState)(""),[g,p]=(0,n.useState)(""),[_,x]=(0,n.useState)(!1),[f,j]=(0,n.useState)(!1),[v,N]=(0,n.useState)(null),[y,w]=(0,n.useState)(""),[C,k]=(0,n.useState)(!1),[b,A]=(0,n.useState)({}),[S,P]=(0,n.useState)(!1),[L,B]=(0,n.useState)(!1),[I,T]=(0,n.useState)(t||null),[D,U]=(0,n.useState)({id:"",name:"Reader"});(0,n.useEffect)(()=>{let e=(0,m.hg)(d.j2,e=>{let t=!!e;P(t),t&&e?U({id:e.uid,name:e.displayName||e.email?.split("@")[0]||"User"}):U({id:"",name:"Reader"})});return()=>e()},[]),(0,n.useEffect)(()=>{if(t)return void T(t);e&&(async()=>{try{let t=await (0,M.l6)(e);t&&t.id&&T(t.id)}catch(e){console.error("Error fetching article:",e),u("Unable to load article details.")}})()},[e,t]),(0,n.useEffect)(()=>{I&&(c(!0),(async()=>{try{let e=await (0,M.fz)(I);setTimeout(()=>{s(e),c(!1)},800)}catch(e){console.error("Error fetching comments:",e),u("Unable to load discussions. Please refresh the page to try again."),c(!1)}})())},[I]);let H=async e=>{if(e.preventDefault(),g.trim()&&!_&&I){if(!S)return void B(!0);try{x(!0);let e=await (0,M.BC)(I,g);s(t=>[e,...t]),p(""),x(!1),j(!1)}catch(e){console.error("Error adding comment:",e),u("Your response could not be posted. Please try again."),x(!1)}}},$=async e=>{if(y.trim()&&!C&&I){if(!S)return void B(!0);try{k(!0);let t=await (0,M.Oe)(I,e,y);s(r=>r.map(r=>r.commentId===e||r.id===e?{...r,replies:[...r.replies||[],t]}:r)),w(""),N(null),k(!1),A(t=>({...t,[e]:!0}))}catch(e){console.error("Error adding reply:",e),k(!1)}}},R=async e=>{if(!S||!I)return void B(!0);try{let t=await (0,M.tT)(I,e);s(r=>r.map(r=>r.commentId===e||r.id===e?{...r,likes:t.likes}:r))}catch(e){console.error("Error liking comment:",e)}},q=async e=>{if(S&&I)try{await (0,M.Tu)(I,e),s(t=>t.filter(t=>t.commentId!==e&&t.id!==e))}catch(e){console.error("Error deleting comment:",e)}},W=e=>{A(t=>({...t,[e]:!t[e]}))},F=e=>{if(!e)return"Unknown date";let t=e.toDate?e.toDate():new Date(e),r=Math.floor((new Date().getTime()-t.getTime())/1e3);if(r<60)return"Just now";if(r<3600){let e=Math.floor(r/60);return`${e} ${1===e?"minute":"minutes"} ago`}if(r<86400){let e=Math.floor(r/3600);return`${e} ${1===e?"hour":"hours"} ago`}if(r<604800){let e=Math.floor(r/86400);return`${e} ${1===e?"day":"days"} ago`}try{return t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",timeZone:"UTC"})}catch(e){return console.error("Error formatting date:",e),"Unknown date"}},z=(e,t,r=!1)=>{let n=e?.charAt(0).toUpperCase()||"A",a=["#4f46e5","#0ea5e9","#10b981","#f59e0b","#ef4444"],l=t?Math.abs(t.charCodeAt(0)%a.length):0,s=a[l];return(0,i.jsx)("div",{className:r?E().replyAvatar:E().commentAvatar,style:{backgroundColor:s,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:r?"0.9rem":"1.2rem"},children:n})};return(0,i.jsxs)("section",{className:E().commentSection,children:[(0,i.jsx)("h2",{className:E().commentSectionTitle,children:"Join the Discussion"}),h&&(0,i.jsxs)("div",{className:E().commentError,children:[(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),(0,i.jsx)("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),h]}),(0,i.jsx)("form",{className:E().commentForm,onSubmit:H,children:(0,i.jsx)("div",{className:E().commentInputContainer,style:{opacity:f?1:.85},children:S?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:E().commentAvatar,children:z(D.name,D.id)}),(0,i.jsx)("textarea",{className:E().commentInput,placeholder:"Share your thoughts...",value:g,onChange:e=>p(e.target.value),onFocus:()=>j(!0),onBlur:()=>{g.trim()||j(!1)}}),(0,i.jsx)("button",{className:E().commentSubmit,type:"submit",disabled:!g.trim()||_,children:_?"Posting...":"Post"})]}):(0,i.jsxs)("div",{className:E().loginPromptContainer,onClick:()=>B(!0),children:[(0,i.jsx)("textarea",{className:E().commentInput,placeholder:"Login to join the discussion...",disabled:!0}),(0,i.jsx)("button",{className:`${E().commentSubmit} ${E().loginButton}`,type:"button",onClick:()=>B(!0),children:"Login to comment"})]})})}),L&&(0,i.jsx)("div",{className:E().loginModalOverlay,onClick:()=>B(!1),children:(0,i.jsxs)("div",{className:E().loginModal,onClick:e=>e.stopPropagation(),children:[(0,i.jsx)("button",{className:E().loginModalClose,onClick:()=>B(!1),children:"\xd7"}),(0,i.jsx)("h3",{className:E().loginModalTitle,children:"Join the conversation"}),(0,i.jsx)("p",{className:E().loginModalText,children:"Sign in to Journalite to share your thoughts and join the discussion."}),(0,i.jsxs)("div",{className:E().loginModalButtons,children:[(0,i.jsx)(l(),{href:"/login",className:`${E().loginModalButton} ${E().primary}`,children:"Log In"}),(0,i.jsx)(l(),{href:"/register",className:`${E().loginModalButton} ${E().secondary}`,children:"Create Account"})]})]})}),o?(0,i.jsxs)("div",{className:E().commentLoading,children:[(0,i.jsx)("p",{children:"Loading comments..."}),(0,i.jsxs)("div",{className:E().loadingDots,children:[(0,i.jsx)("div",{className:E().loadingDot}),(0,i.jsx)("div",{className:E().loadingDot}),(0,i.jsx)("div",{className:E().loadingDot})]})]}):0===a.length?(0,i.jsx)("div",{className:E().noComments,children:"Be the first to share your thoughts on this article."}):(0,i.jsx)("div",{className:E().commentsList,children:a.map(e=>{let t=e.commentId||e.id||"";return(0,i.jsxs)("div",{className:E().commentItem,children:[(0,i.jsxs)("div",{className:E().commentHeader,children:[z(e.userName,e.userId),(0,i.jsx)("span",{className:E().commentUser,children:e.userName}),(0,i.jsx)("span",{className:E().commentDate,children:F(e.createdAt)})]}),(0,i.jsx)("div",{className:E().commentContent,children:e.content}),(0,i.jsxs)("div",{className:E().commentActions,children:[(0,i.jsxs)("button",{className:`${E().commentLikeBtn} ${e.likes.includes(D.id)?E().liked:""}`,onClick:()=>R(t),"aria-pressed":e.likes.includes(D.id),"aria-label":e.likes.includes(D.id)?"Unlike comment":"Like comment",children:[e.likes.includes(D.id)?(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:(0,i.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}):(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-4 h-4",children:(0,i.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"})}),(0,i.jsx)("span",{children:e.likes.length>0?e.likes.length:""})]}),(0,i.jsxs)("button",{className:E().replyToggle,onClick:()=>{S?N(v===t?null:t):B(!0)},"aria-label":"Reply to comment",children:[(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-4 h-4",children:(0,i.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"})}),(0,i.jsx)("span",{children:"Reply"})]}),e.userId===D.id&&(0,i.jsxs)("button",{className:E().commentDeleteBtn,onClick:()=>q(t),"aria-label":"Delete comment",children:[(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-4 h-4",children:(0,i.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12.56 0c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09.996-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),(0,i.jsx)("span",{children:"Delete"})]})]}),e.replies&&e.replies.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("button",{className:E().repliesToggle,onClick:()=>W(t),children:[(0,i.jsx)("span",{className:`${E().repliesToggleIcon} ${b[t]?E().open:""}`,children:"▷"}),`${e.replies.length} ${1===e.replies.length?"reply":"replies"}`]}),b[t]&&(0,i.jsx)("div",{className:E().replySection,children:e.replies.map(e=>(0,i.jsxs)("div",{className:E().replyItem,children:[(0,i.jsxs)("div",{className:E().replyHeader,children:[z(e.userName,e.userId,!0),(0,i.jsx)("span",{className:E().replyUser,children:e.userName}),(0,i.jsx)("span",{className:E().replyDate,children:F(e.createdAt)})]}),(0,i.jsx)("div",{className:E().replyContent,children:e.content})]},e.replyId))})]}),v===t&&(0,i.jsxs)("div",{className:`${E().replyForm} ${e.replies&&e.replies.length>0?E().inThread:""}`,children:[(0,i.jsx)("textarea",{className:E().replyInput,placeholder:"Write a reply...",value:y,onChange:e=>w(e.target.value)}),(0,i.jsxs)("div",{className:E().replyButtons,children:[(0,i.jsx)("button",{className:E().replyCancel,onClick:()=>{N(null),w("")},children:"Cancel"}),(0,i.jsx)("button",{className:E().replySubmit,disabled:!y.trim()||C,onClick:()=>$(t),children:C?"Posting...":"Post Reply"})]})]})]},t)})})]})};function T(){let e=(0,s.useSearchParams)(),t=(0,s.useRouter)();e?.get("slug");let[r,a]=(0,n.useState)(null),[o,h]=(0,n.useState)(!0),[u,g]=(0,n.useState)(null),[_,x]=(0,n.useState)([]),[f,j]=(0,n.useState)(!1),[v,N]=(0,n.useState)(!0),[y,w]=(0,n.useState)(!1),[C,k]=(0,n.useState)(0),[b,A]=(0,n.useState)(null),[S,M]=(0,n.useState)([]),[P,B]=(0,n.useState)(!1),[E,T]=(0,n.useState)(null),D=async()=>{try{await (0,m.CI)(d.j2),w(!1)}catch(e){console.error("Error signing out:",e)}},U=async()=>{if(!E)return void alert("Please login to like articles");try{P?(M(S.filter(e=>e!==E.uid)),B(!1)):(M([...S,E.uid]),B(!0))}catch(e){console.error("Error updating like status:",e)}};return o?(0,i.jsxs)("div",{className:c().loadingContainer,children:[(0,i.jsx)("div",{className:c().loadingIndicator}),(0,i.jsx)("p",{children:"Loading article..."})]}):u?(0,i.jsx)("div",{className:c().errorContainer,children:(0,i.jsx)("p",{className:c().errorMessage,children:u})}):(0,i.jsx)("div",{className:c().articlePageContainer,children:r&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("header",{className:c().pageHeader,children:(0,i.jsxs)("div",{className:c().headerContainer,children:[(0,i.jsx)(l(),{href:"/",className:c().logoLink,children:(0,i.jsx)("div",{className:c().headerLogo,children:"Journalite"})}),(0,i.jsxs)("div",{className:c().headerActions,children:[f&&(0,i.jsx)(p,{}),(0,i.jsx)("div",{className:c().profileMenu,id:"profile-menu",children:f?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:c().profileCircle,onClick:()=>{w(!y)},id:"profile-button",children:E?.displayName?.charAt(0)||E?.email?.charAt(0)||"U"}),y&&(0,i.jsxs)("div",{className:c().profileDropdown,children:[(0,i.jsx)(l(),{href:"/",className:c().dropdownItem,children:"Home"}),(0,i.jsx)(l(),{href:"/my-thoughts",className:c().dropdownItem,children:"My Thoughts"}),(0,i.jsx)(l(),{href:"/dashboard",className:c().dropdownItem,children:"Dashboard"}),(0,i.jsx)(l(),{href:"/write",className:c().dropdownItem,children:"Write a story"}),(0,i.jsx)(l(),{href:"/create-article",className:c().dropdownItem,children:"Create Article"}),(0,i.jsx)(l(),{href:"/explore",className:c().dropdownItem,children:"Explore"}),(0,i.jsx)(l(),{href:"/profile",className:c().dropdownItem,children:"Profile"}),(0,i.jsx)(l(),{href:"/settings",className:c().dropdownItem,children:"Settings"}),(0,i.jsx)("button",{onClick:D,className:c().dropdownItem,children:"Sign out"})]})]}):(0,i.jsxs)("div",{className:c().authButtons,children:[(0,i.jsx)(l(),{href:"/login",className:c().loginButton,children:"Sign in"}),(0,i.jsx)(l(),{href:"/signup",className:c().signupButton,children:"Get started"})]})})]})]})}),(0,i.jsxs)("div",{className:c().pageContainer,children:[(0,i.jsxs)("header",{className:c().articleHeader,children:[(0,i.jsx)("h1",{className:c().articleTitle,children:r.title}),(0,i.jsxs)("div",{className:c().articleMeta,children:[(0,i.jsxs)("div",{className:c().authorInfo,children:[(0,i.jsx)("div",{className:c().authorAvatar,children:r.authorName.charAt(0)}),(0,i.jsxs)("div",{className:c().authorDetails,children:[(0,i.jsx)(l(),{href:`/user/${r.authorName.toLowerCase().replace(/\s+/g,"")}`,className:c().authorNameLink,children:(0,i.jsx)("div",{className:c().authorName,children:r.authorName})}),(0,i.jsxs)("div",{className:c().articleDetails,children:[r.createdAt," \xb7 ",r.readTime," min read"]})]})]}),(0,i.jsxs)("div",{className:c().articleActions,children:[(0,i.jsxs)("button",{className:`${c().likeButton} ${P?c().liked:""}`,onClick:U,"aria-label":P?"Unlike article":"Like article",children:[(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:P?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",className:c().likeIcon,children:(0,i.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),(0,i.jsx)("span",{children:S.length>0?S.length:""})]}),f&&r.authorId===E?.uid&&(0,i.jsx)("button",{className:c().editButton,onClick:()=>t.push(`/articles/${r.id}/edit`),children:"Edit"})]})]}),r.tags&&r.tags.length>0&&(0,i.jsx)("div",{className:c().tagContainer,children:r.tags.map((e,t)=>(0,i.jsx)("span",{className:c().tag,children:e},t))})]}),(0,i.jsx)(L,{articleId:r.id,initialHtml:b||void 0}),(0,i.jsx)("div",{className:c().commentsContainer,children:(0,i.jsx)(I,{articleId:r.id})}),(0,i.jsxs)("aside",{className:c().relatedTagsSection,children:[(0,i.jsx)("h2",{className:c().relatedTagsHeading,children:"Related Tags"}),(0,i.jsx)("div",{className:c().relatedTagsList,children:_.map(e=>(0,i.jsxs)(l(),{href:`/tag/${e.toLowerCase()}`,className:c().relatedTag,children:["# ",e]},e))}),(0,i.jsx)(l(),{href:"/write",className:c().writeButton,children:"Write"})]})]})]})})}function D(){return(0,i.jsx)(n.Suspense,{fallback:(0,i.jsx)("div",{children:"Loading article..."}),children:(0,i.jsx)(T,{})})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},78335:()=>{},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94455:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,pages:()=>d,routeModule:()=>h,tree:()=>c});var i=r(65239),n=r(48088),a=r(88170),l=r.n(a),s=r(30893),o={};for(let e in s)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>s[e]);r.d(t,o);let c={children:["",{children:["articles",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,24596)),"/Users/sirabdisalam/journalite-article-page/src/app/articles/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,32031)),"/Users/sirabdisalam/journalite-article-page/src/app/articles/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/Users/sirabdisalam/journalite-article-page/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,54413)),"/Users/sirabdisalam/journalite-article-page/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["/Users/sirabdisalam/journalite-article-page/src/app/articles/page.tsx"],m={require:r,loadChunk:()=>Promise.resolve()},h=new i.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/articles/page",pathname:"/articles",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},94735:e=>{"use strict";e.exports=require("events")},96487:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[476,948,845,232],()=>r(94455));module.exports=i})();