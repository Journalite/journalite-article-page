(()=>{var e={};e.id=292,e.ids=[292],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},18853:(e,t,r)=>{Promise.resolve().then(r.bind(r,52521))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},24596:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/sirabdisalam/journalite-article-page/src/app/articles/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/sirabdisalam/journalite-article-page/src/app/articles/page.tsx","default")},24933:(e,t,r)=>{Promise.resolve().then(r.bind(r,24596))},27910:e=>{"use strict";e.exports=require("stream")},28250:e=>{e.exports={container:"MinimalNotificationBell_container__NGUf_",button:"MinimalNotificationBell_button__MAJkt",icon:"MinimalNotificationBell_icon__c6pW9",badge:"MinimalNotificationBell_badge___Di_K",dropdown:"MinimalNotificationBell_dropdown__PJtYq",header:"MinimalNotificationBell_header__zCiQJ",viewAll:"MinimalNotificationBell_viewAll__ZLWoU",list:"MinimalNotificationBell_list__MmsKd",item:"MinimalNotificationBell_item__flonv",unread:"MinimalNotificationBell_unread__278b3",content:"MinimalNotificationBell_content__31WKK",message:"MinimalNotificationBell_message__fnAua",time:"MinimalNotificationBell_time___76Fq",dot:"MinimalNotificationBell_dot__R2YqN",empty:"MinimalNotificationBell_empty__kDVAL",footer:"MinimalNotificationBell_footer__Pslwe",seeMore:"MinimalNotificationBell_seeMore__ggGUA"}},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29318:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c});var s=r(65239),i=r(48088),a=r(88170),l=r.n(a),n=r(30893),o={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);r.d(t,o);let c={children:["",{children:["articles",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,24596)),"/Users/sirabdisalam/journalite-article-page/src/app/articles/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,32031)),"/Users/sirabdisalam/journalite-article-page/src/app/articles/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/Users/sirabdisalam/journalite-article-page/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,54413)),"/Users/sirabdisalam/journalite-article-page/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["/Users/sirabdisalam/journalite-article-page/src/app/articles/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/articles/page",pathname:"/articles",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37366:e=>{"use strict";e.exports=require("dns")},52521:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>_});var s=r(60687),i=r(43210),a=r(85814),l=r.n(a),n=r(16189),o=r(36012),c=r.n(o),d=r(43649),u=r(84245),m=r(28163),h=r(28250),p=r.n(h);let x=()=>{let[e,t]=(0,i.useState)(0),[r,a]=(0,i.useState)([]),[n,o]=(0,i.useState)(!1),c=(0,i.useRef)(null);(0,i.useEffect)(()=>{let e=async()=>{t(await (0,m.Hs)())};e();let r=setInterval(e,6e4);return()=>clearInterval(r)},[]),(0,i.useEffect)(()=>{let e=e=>{c.current&&!c.current.contains(e.target)&&o(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,i.useEffect)(()=>{n&&d()},[n]);let d=async()=>{try{let e=await (0,m.Ss)(!1);a(e)}catch(e){console.error("Error fetching notifications:",e)}},u=async e=>{try{!e.read&&e.id&&(await (0,m.bA)(e.id),t(e=>Math.max(e-1,0)),a(t=>t.map(t=>t.id===e.id?{...t,read:!0}:t)))}catch(e){console.error("Error marking notification as read:",e)}},h=e=>{if(!e)return"";let t=e.toDate?e.toDate():new Date(e),r=Math.floor((new Date().getTime()-t.getTime())/6e4);if(r<1)return"Just now";if(r<60)return`${r}m ago`;let s=Math.floor(r/60);if(s<24)return`${s}h ago`;let i=Math.floor(s/24);return i<7?`${i}d ago`:t.toLocaleDateString()},x=e=>"follow"===e.type?e.fromUser?.username?`/user/${e.fromUser.username}`:"/notifications":e.articleSlug?`/articles?slug=${e.articleSlug}`:"/notifications";return(0,s.jsxs)("div",{className:p().container,ref:c,children:[(0,s.jsxs)("button",{className:p().button,onClick:()=>{o(!n)},"aria-label":"Notifications",children:[(0,s.jsxs)("svg",{className:p().icon,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),(0,s.jsx)("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),e>0&&(0,s.jsx)("span",{className:p().badge,children:e})]}),n&&(0,s.jsxs)("div",{className:p().dropdown,children:[(0,s.jsxs)("div",{className:p().header,children:[(0,s.jsx)("h3",{children:"Notifications"}),r.length>0&&(0,s.jsx)(l(),{href:"/notifications",className:p().viewAll,children:"View All"})]}),(0,s.jsx)("div",{className:p().list,children:0===r.length?(0,s.jsx)("div",{className:p().empty,children:"No notifications yet"}):r.slice(0,5).map(e=>(0,s.jsxs)(l(),{href:x(e),className:`${p().item} ${!e.read?p().unread:""}`,onClick:()=>u(e),children:[(0,s.jsxs)("div",{className:p().content,children:[(0,s.jsx)("p",{className:p().message,children:e.message}),(0,s.jsx)("span",{className:p().time,children:h(e.createdAt)})]}),!e.read&&(0,s.jsx)("div",{className:p().dot})]},e.id))}),r.length>5&&(0,s.jsx)("div",{className:p().footer,children:(0,s.jsx)(l(),{href:"/notifications",className:p().seeMore,children:"See more notifications"})})]})]})};var g=r(51335),f=r(89404),j=r(55440),N=r(79440);function v(){let e=(0,n.useSearchParams)();(0,n.useRouter)();let t=e?.get("slug"),[a,o]=(0,i.useState)(null),[m,h]=(0,i.useState)(!0),[p,v]=(0,i.useState)(null),[_,w]=(0,i.useState)([]),[b,k]=(0,i.useState)(!1),[M,y]=(0,i.useState)(!0),[A,C]=(0,i.useState)(!1),[S,B]=(0,i.useState)(0),[I,q]=(0,i.useState)(null),[P,L]=(0,i.useState)([]),[E,U]=(0,i.useState)(!1),[D,T]=(0,i.useState)(null),[$,H]=(0,i.useState)(!1),R=async()=>{try{await (0,u.CI)(d.j2),C(!1)}catch(e){console.error("Error signing out:",e)}},G=async()=>{if(console.log("\uD83D\uDD25 LIKE BUTTON CLICKED!"),console.log("Current user:",D),console.log("Article ID:",a?.id),console.log("Is liked:",E),!D)return void alert("Please login to like articles");if(!a?.id)return void console.error("❌ No article ID found");try{let{doc:e,updateDoc:t,arrayUnion:s,arrayRemove:i}=await Promise.resolve().then(r.bind(r,75535)),{db:l}=await Promise.resolve().then(r.bind(r,43649));console.log("\uD83D\uDCDD Updating Firestore...");let n=e(l,"articles",a.id);E?(console.log("\uD83D\uDC4D Removing like..."),await t(n,{likes:i(D.uid)}),L(P.filter(e=>e!==D.uid)),U(!1),console.log("✅ Like removed successfully")):(console.log("❤️ Adding like..."),await t(n,{likes:s(D.uid)}),L([...P,D.uid]),U(!0),console.log("✅ Like added successfully"))}catch(e){console.error("❌ Error updating like status:",e),E?(L([...P,D.uid]),U(!0)):(L(P.filter(e=>e!==D.uid)),U(!1))}};return m?(0,s.jsxs)("div",{className:c().loadingContainer,children:[(0,s.jsx)("div",{className:c().loadingIndicator}),(0,s.jsx)("p",{children:"Loading article..."})]}):p?(0,s.jsx)("div",{className:c().errorContainer,children:(0,s.jsx)("p",{className:c().errorMessage,children:p})}):$&&a?(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:c().editingHeader,children:[(0,s.jsx)("button",{onClick:()=>H(!1),className:c().cancelButton,children:"← Back to Article"}),(0,s.jsxs)("h2",{children:["Editing: ",a.title]})]}),(0,s.jsx)(j.A,{articleId:a.id,onUpdateComplete:()=>{console.log("Article update complete"),h(!0),H(!1),a?.id?window.location.href=`/articles/${a.id}/view?updated=true&t=${Date.now()}`:window.location.reload(),(async()=>{try{let e=await (0,N.l6)(t||"");if(!e)return void v("Article not found");let r=e.body.replace(/<div[^>]*>Content is loaded from HTML<\/div>/g,"").replace(/<h1[^>]*>Untitled Article<\/h1>/g,"");q(r),L(e.likes||[]);let s=e.body.split(/\s+/).length,i=Math.ceil(s/200),a=e.createdAt?new Date(1e3*e.createdAt.seconds).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Unknown date";o({id:e.id,title:e.title,authorName:e.authorName||"Anonymous",authorId:e.authorId,createdAt:a,readTime:i,likes:e.likes||[],tags:e.tags||[],slug:t||""}),w(e.tags||[])}catch(e){console.error("Error refetching article:",e)}})()}})]}):(0,s.jsx)("div",{className:c().articlePageContainer,children:a&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("header",{className:c().pageHeader,children:(0,s.jsxs)("div",{className:c().headerContainer,children:[(0,s.jsx)(l(),{href:"/",className:c().logoLink,children:(0,s.jsx)("div",{className:c().headerLogo,children:"Journalite"})}),(0,s.jsxs)("div",{className:c().headerActions,children:[b&&(0,s.jsx)(x,{}),(0,s.jsx)("div",{className:c().profileMenu,id:"profile-menu",children:b?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:c().profileCircle,onClick:()=>{C(!A)},id:"profile-button",children:D?.displayName?.charAt(0)||D?.email?.charAt(0)||"U"}),A&&(0,s.jsxs)("div",{className:c().profileDropdown,children:[(0,s.jsx)(l(),{href:"/",className:c().dropdownItem,children:"Home"}),(0,s.jsx)(l(),{href:"/my-thoughts",className:c().dropdownItem,children:"My Thoughts"}),(0,s.jsx)(l(),{href:"/dashboard",className:c().dropdownItem,children:"Dashboard"}),(0,s.jsx)(l(),{href:"/write",className:c().dropdownItem,children:"Write a story"}),(0,s.jsx)(l(),{href:"/create-article",className:c().dropdownItem,children:"Create Article"}),(0,s.jsx)(l(),{href:"/explore",className:c().dropdownItem,children:"Explore"}),(0,s.jsx)(l(),{href:"/profile",className:c().dropdownItem,children:"Profile"}),(0,s.jsx)(l(),{href:"/settings",className:c().dropdownItem,children:"Settings"}),(0,s.jsx)("button",{onClick:R,className:c().dropdownItem,children:"Sign out"})]})]}):(0,s.jsxs)("div",{className:c().authButtons,children:[(0,s.jsx)(l(),{href:"/login",className:c().loginButton,children:"Sign in"}),(0,s.jsx)(l(),{href:"/signup",className:c().signupButton,children:"Get started"})]})})]})]})}),(0,s.jsxs)("div",{className:c().pageContainer,children:[(0,s.jsxs)("header",{className:c().articleHeader,children:[(0,s.jsx)("h1",{className:c().articleTitle,children:a.title}),(0,s.jsxs)("div",{className:c().articleMeta,children:[(0,s.jsxs)("div",{className:c().authorInfo,children:[(0,s.jsx)("div",{className:c().authorAvatar,children:a.authorName.charAt(0)}),(0,s.jsxs)("div",{className:c().authorDetails,children:[(0,s.jsx)(l(),{href:`/user/${a.authorName.toLowerCase().replace(/\s+/g,"")}`,className:c().authorNameLink,children:(0,s.jsx)("div",{className:c().authorName,children:a.authorName})}),(0,s.jsxs)("div",{className:c().articleDetails,children:[a.createdAt," \xb7 ",a.readTime," min read"]})]})]}),(0,s.jsxs)("div",{className:c().articleActions,children:[(0,s.jsxs)("button",{className:`${c().likeButton} ${E?c().liked:""}`,onClick:G,"aria-label":E?"Unlike article":"Like article",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:E?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",className:c().likeIcon,children:(0,s.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),(0,s.jsx)("span",{children:P.length>0?P.length:""})]}),b&&a.authorId===D?.uid&&(0,s.jsx)("button",{className:c().editButton,onClick:()=>H(!0),children:"Edit"})]})]}),a.tags&&a.tags.length>0&&(0,s.jsx)("div",{className:c().tagContainer,children:a.tags.map((e,t)=>(0,s.jsx)("span",{className:c().tag,children:e},t))})]}),(0,s.jsx)(g.A,{articleId:a.id,initialHtml:I||void 0}),(0,s.jsx)("div",{className:c().commentsContainer,children:(0,s.jsx)(f.A,{articleId:a.id})}),(0,s.jsxs)("aside",{className:c().relatedTagsSection,children:[(0,s.jsx)("h2",{className:c().relatedTagsHeading,children:"Related Tags"}),(0,s.jsx)("div",{className:c().relatedTagsList,children:_.map(e=>(0,s.jsxs)(l(),{href:`/tag/${e.toLowerCase()}`,className:c().relatedTag,children:["# ",e]},e))}),(0,s.jsx)(l(),{href:"/write",className:c().writeButton,children:"Write"})]})]})]})})}function _(){return(0,s.jsx)(i.Suspense,{fallback:(0,s.jsx)("div",{children:"Loading article..."}),children:(0,s.jsx)(v,{})})}},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[476,948,22,70,440,87],()=>r(29318));module.exports=s})();