exports.id=634,exports.ids=[634],exports.modules={6248:e=>{e.exports={commentSection:"comment_commentSection__SP_jS",commentSectionTitle:"comment_commentSectionTitle__F_Jxe",commentError:"comment_commentError__A2v6U",commentForm:"comment_commentForm__U8b7X",commentInputContainer:"comment_commentInputContainer__3WsSp",loginPromptContainer:"comment_loginPromptContainer__X4aZr",commentAvatar:"comment_commentAvatar__uav6Q",replyAvatar:"comment_replyAvatar__dIlrw",commentInput:"comment_commentInput__4DHa1",replyInput:"comment_replyInput__8t_ho",commentSubmit:"comment_commentSubmit__UfvUF",replySubmit:"comment_replySubmit__2eCP7",loginButton:"comment_loginButton__4encR",loginModalOverlay:"comment_loginModalOverlay__Pk_AM",loginModal:"comment_loginModal__n984X",loginModalClose:"comment_loginModalClose__v02Rx",loginModalTitle:"comment_loginModalTitle__nZpZB",loginModalText:"comment_loginModalText__XwRn6",loginModalButtons:"comment_loginModalButtons__XdVNl",loginModalButton:"comment_loginModalButton__d8Bnr",primary:"comment_primary__1UIRJ",secondary:"comment_secondary__zc89j",commentLoading:"comment_commentLoading___WYvK",loadingDots:"comment_loadingDots___Lw2B",loadingDot:"comment_loadingDot__skUEk",pulse:"comment_pulse__czQlg",noComments:"comment_noComments__U9FG6",commentsList:"comment_commentsList__ZRMbc",commentItem:"comment_commentItem__Vx48l",commentHeader:"comment_commentHeader__3oOD6",commentUser:"comment_commentUser__QP5pY",commentDate:"comment_commentDate__5zfpn",commentContent:"comment_commentContent__DiE8h",commentActions:"comment_commentActions___Wpzi",commentLikeBtn:"comment_commentLikeBtn__wAYZO",replyToggle:"comment_replyToggle__bCRZg",commentDeleteBtn:"comment_commentDeleteBtn__BnLQc",liked:"comment_liked__2yWZ9",repliesToggle:"comment_repliesToggle__yepDc",repliesToggleIcon:"comment_repliesToggleIcon__EZRkK",open:"comment_open__cpLDc",replySection:"comment_replySection__mAqn4",replyItem:"comment_replyItem__ndhqf",replyHeader:"comment_replyHeader__Y2bUK",replyUser:"comment_replyUser__rw4V8",replyDate:"comment_replyDate__4Jafb",replyContent:"comment_replyContent__uV2jp",replyForm:"comment_replyForm__aYyum",inThread:"comment_inThread__lUoKT",replyButtons:"comment_replyButtons__KRGyv",replyCancel:"comment_replyCancel__od7Vq"}},8775:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(60687),a=r(76180),i=r.n(a),o=r(43210),l=r(51215);let s=({isOpen:e,onClose:t,highlightText:r,articleTitle:a,shareUrl:s})=>{let[c,d]=(0,o.useState)(!1);(0,o.useEffect)(()=>{if(c){let e=setTimeout(()=>d(!1),3e3);return()=>clearTimeout(e)}},[c]),(0,o.useEffect)(()=>{let r=e=>{"Escape"===e.key&&t()};return e&&(document.addEventListener("keydown",r),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",r),document.body.style.overflow="unset"}},[e,t]);let g=async()=>{try{await navigator.clipboard.writeText(s),d(!0)}catch(e){console.error("Failed to copy link:",e)}};return e?(0,l.createPortal)((0,n.jsxs)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"1rem"},onClick:t,className:"jsx-8795408d21c696e",children:[(0,n.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"1rem",padding:"2rem",maxWidth:"500px",width:"100%",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",position:"relative",animation:"modalSlideIn 0.3s ease-out"},onClick:e=>e.stopPropagation(),className:"jsx-8795408d21c696e",children:[(0,n.jsx)("button",{onClick:t,style:{position:"absolute",top:"1rem",right:"1rem",background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#6B7280",padding:"0.25rem",borderRadius:"0.375rem",transition:"color 0.2s ease"},onMouseOver:e=>e.currentTarget.style.color="#374151",onMouseOut:e=>e.currentTarget.style.color="#6B7280",className:"jsx-8795408d21c696e",children:"\xd7"}),(0,n.jsxs)("div",{style:{marginBottom:"1.5rem"},className:"jsx-8795408d21c696e",children:[(0,n.jsx)("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"1.25rem",fontWeight:"600",color:"#1F2937"},className:"jsx-8795408d21c696e",children:"✨ Share Highlight"}),(0,n.jsxs)("p",{style:{margin:0,color:"#6B7280",fontSize:"0.875rem"},className:"jsx-8795408d21c696e",children:['Share this highlight from "',a,'"']})]}),(0,n.jsxs)("div",{style:{backgroundColor:"#F9FAFB",border:"2px solid #E5E7EB",borderRadius:"0.75rem",padding:"1.25rem",marginBottom:"1.5rem"},className:"jsx-8795408d21c696e",children:[(0,n.jsxs)("div",{style:{fontSize:"1rem",lineHeight:"1.6",color:"#374151",fontStyle:"italic",marginBottom:"0.75rem"},className:"jsx-8795408d21c696e",children:['"',r,'"']}),(0,n.jsxs)("div",{style:{fontSize:"0.875rem",color:"#6B7280",fontWeight:"500"},className:"jsx-8795408d21c696e",children:['— from "',a,'"']})]}),(0,n.jsxs)("div",{style:{marginBottom:"1.5rem"},className:"jsx-8795408d21c696e",children:[(0,n.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},className:"jsx-8795408d21c696e",children:"Share Link"}),(0,n.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},className:"jsx-8795408d21c696e",children:[(0,n.jsx)("input",{type:"text",value:s,readOnly:!0,style:{flex:1,padding:"0.75rem",border:"1px solid #D1D5DB",borderRadius:"0.5rem",fontSize:"0.875rem",backgroundColor:"#F9FAFB",fontFamily:"monospace"},className:"jsx-8795408d21c696e"}),(0,n.jsx)("button",{onClick:g,style:{padding:"0.75rem 1rem",backgroundColor:c?"#10B981":"#3B82F6",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",whiteSpace:"nowrap"},className:"jsx-8795408d21c696e",children:c?"✓ Copied!":"\uD83D\uDCCB Copy"})]})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},className:"jsx-8795408d21c696e",children:[!1,(0,n.jsx)("button",{onClick:t,style:{padding:"0.75rem 1.5rem",backgroundColor:"#F3F4F6",color:"#374151",border:"none",borderRadius:"0.5rem",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"background-color 0.2s ease"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#E5E7EB",onMouseOut:e=>e.currentTarget.style.backgroundColor="#F3F4F6",className:"jsx-8795408d21c696e",children:"Close"})]})]}),(0,n.jsx)(i(),{id:"8795408d21c696e",children:"@-webkit-keyframes modalSlideIn{from{opacity:0;-webkit-transform:translatey(-20px)scale(.95);transform:translatey(-20px)scale(.95)}to{opacity:1;-webkit-transform:translatey(0)scale(1);transform:translatey(0)scale(1)}}@-moz-keyframes modalSlideIn{from{opacity:0;-moz-transform:translatey(-20px)scale(.95);transform:translatey(-20px)scale(.95)}to{opacity:1;-moz-transform:translatey(0)scale(1);transform:translatey(0)scale(1)}}@-o-keyframes modalSlideIn{from{opacity:0;-o-transform:translatey(-20px)scale(.95);transform:translatey(-20px)scale(.95)}to{opacity:1;-o-transform:translatey(0)scale(1);transform:translatey(0)scale(1)}}@keyframes modalSlideIn{from{opacity:0;-webkit-transform:translatey(-20px)scale(.95);-moz-transform:translatey(-20px)scale(.95);-o-transform:translatey(-20px)scale(.95);transform:translatey(-20px)scale(.95)}to{opacity:1;-webkit-transform:translatey(0)scale(1);-moz-transform:translatey(0)scale(1);-o-transform:translatey(0)scale(1);transform:translatey(0)scale(1)}}"})]}),document.body):null}},18314:(e,t,r)=>{"use strict";r.d(t,{Q:()=>n});let n={joyful:{gradientStart:"#FFD700",gradientEnd:"#FF6B6B",accent:"#FF4757"},angry:{gradientStart:"#FF416C",gradientEnd:"#FF4B2B",accent:"#B71C1C"},energetic:{gradientStart:"#00F260",gradientEnd:"#0575E6",accent:"#1565C0"},peaceful:{gradientStart:"#A8E6CF",gradientEnd:"#88D8C0",accent:"#4CAF50"},reflective:{gradientStart:"#667eea",gradientEnd:"#764ba2",accent:"#5E35B1"},sad:{gradientStart:"#4facfe",gradientEnd:"#00f2fe",accent:"#0288D1"}}},32031:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o,metadata:()=>a,viewport:()=>i});var n=r(37413);let a={title:"Articles | Journalite",description:"Explore the latest articles from Journalite"},i={width:"device-width",initialScale:1,maximumScale:1};function o({children:e}){return(0,n.jsx)(n.Fragment,{children:e})}},34738:e=>{e.exports={articleContainer:"ArticleWithHighlights_articleContainer__r1hgP",articleContent:"ArticleWithHighlights_articleContent__qrFhS",loadingContainer:"ArticleWithHighlights_loadingContainer__6cqbO",loadingIndicator:"ArticleWithHighlights_loadingIndicator__ymNyj",spin:"ArticleWithHighlights_spin__Olepl",errorContainer:"ArticleWithHighlights_errorContainer__njqpS",errorMessage:"ArticleWithHighlights_errorMessage__D4C7O"}},36012:e=>{e.exports={articlePageContainer:"ArticlePage_articlePageContainer__S9vO3",pageHeader:"ArticlePage_pageHeader__LpJc9",headerContainer:"ArticlePage_headerContainer__2_FTv",logoLink:"ArticlePage_logoLink__fMNNv",headerLogo:"ArticlePage_headerLogo__QZCOB",headerActions:"ArticlePage_headerActions__gK7Eo",profileMenu:"ArticlePage_profileMenu__LJeQ0",profileCircle:"ArticlePage_profileCircle__mpTwC",profileDropdown:"ArticlePage_profileDropdown__PnV9R",dropdownItem:"ArticlePage_dropdownItem__Lac2v",authButtons:"ArticlePage_authButtons__R_ANg",loginButton:"ArticlePage_loginButton__kpUQh",signupButton:"ArticlePage_signupButton__EvVWG",pageContainer:"ArticlePage_pageContainer__7QNUg",relatedTagsSection:"ArticlePage_relatedTagsSection__SvZ8y",relatedTagsHeading:"ArticlePage_relatedTagsHeading__Ys9Op",relatedTagsList:"ArticlePage_relatedTagsList__Xn3ds",relatedTag:"ArticlePage_relatedTag__DEwLe",writeButton:"ArticlePage_writeButton__yZp3x",articleHeader:"ArticlePage_articleHeader__LJolV",articleTitle:"ArticlePage_articleTitle__euOmw",articleMeta:"ArticlePage_articleMeta__LXXWl",authorInfo:"ArticlePage_authorInfo__nnMSs",authorAvatar:"ArticlePage_authorAvatar__1S1bM",authorDetails:"ArticlePage_authorDetails__65w4B",authorNameLink:"ArticlePage_authorNameLink__c6fCN",authorName:"ArticlePage_authorName__o2DdL",articleDetails:"ArticlePage_articleDetails__mK6k_",articleActions:"ArticlePage_articleActions__IZLcw",editButton:"ArticlePage_editButton__Yl62q",tagContainer:"ArticlePage_tagContainer__kI5Py",tag:"ArticlePage_tag__F5Z0e",likeButton:"ArticlePage_likeButton__V0q84",liked:"ArticlePage_liked__Mzzkj",likeIcon:"ArticlePage_likeIcon__zOA_O",commentsContainer:"ArticlePage_commentsContainer__rpCTJ",loadingContainer:"ArticlePage_loadingContainer__v7RVf",loadingIndicator:"ArticlePage_loadingIndicator__E2bt3",spin:"ArticlePage_spin__yRZnI",errorContainer:"ArticlePage_errorContainer__pxRgD",errorMessage:"ArticlePage_errorMessage__quACi",editingHeader:"ArticlePage_editingHeader__nzcMi",cancelButton:"ArticlePage_cancelButton__V2ihM"}},54513:(e,t,r)=>{"use strict";r.d(t,{A:()=>k});var n=r(60687),a=r(43210),i=r(43649),o=r(75535);let l=async(e,t,r,n,a,l="insight")=>{try{let s={articleId:e,userId:t,text:r,prefix:n,suffix:a,tag:l,createdAt:(0,o.serverTimestamp)(),comments:[],reactions:{},userReactions:{}};return(await (0,o.addDoc)((0,o.collection)(i.db,"highlights"),s)).id}catch(e){throw console.error("Error saving highlight:",e),e}},s=async(e,t)=>{try{let r=(0,o.query)((0,o.collection)(i.db,"highlights"),(0,o.where)("articleId","==",e));return t&&(r=(0,o.query)((0,o.collection)(i.db,"highlights"),(0,o.where)("articleId","==",e),(0,o.where)("userId","==",t))),(await (0,o.getDocs)(r)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){return console.error("Error getting highlights:",e),[]}},c=async e=>{try{await (0,o.deleteDoc)((0,o.doc)(i.db,"highlights",e))}catch(e){throw console.error("Error deleting highlight:",e),e}},d=(e,t,r="")=>`${r}/articles?slug=${e}#highlight=${t}`,g=(0,a.createContext)(void 0),m=({children:e,articleId:t})=>{let[r,o]=(0,a.useState)([]),[d,m]=(0,a.useState)(!0),[u,h]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=i.j2.onAuthStateChanged(e=>{h(e)});return()=>e()},[]),(0,a.useEffect)(()=>{(async()=>{if(t&&u){m(!0);try{let e=await s(t,u.uid);o(e)}catch(e){console.error("Error loading highlights:",e)}finally{m(!1)}}else o([]),m(!1)})()},[t,u]);let p=async(e,t,r,n,a)=>{if(!u)return alert("You must be logged in to highlight text"),null;try{let i=await l(n,u.uid,e,t,r,a),s={id:i,articleId:n,userId:u.uid,text:e,prefix:t,suffix:r,tag:a,createdAt:new Date,reactions:{},userReactions:{}};return o(e=>[...e,s]),i}catch(e){return console.error("Error saving highlight:",e),null}},x=async e=>{try{await c(e),o(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Error removing highlight:",e)}};return(0,n.jsx)(g.Provider,{value:{highlights:r,loading:d,saveHighlight:p,removeHighlight:x,highlightElement:(e,t)=>{try{if(!e.toString().trim())return;let r=document.createRange();r.setStart(e.startContainer,e.startOffset),r.setEnd(e.endContainer,e.endOffset);let n=r.startContainer,a=r.endContainer;if(n.nodeType===Node.TEXT_NODE){let e=n.textContent||"",t=r.startOffset;for(;t>0&&/\S/.test(e.charAt(t-1));)t--;r.setStart(n,t)}if(a.nodeType===Node.TEXT_NODE){let e=a.textContent||"",t=r.endOffset;for(;t<e.length&&/\S/.test(e.charAt(t));)t++;r.setEnd(a,t)}let i=document.createElement("mark");i.className=`article-highlight highlight-${t}`;try{r.surroundContents(i)}catch(t){let e=r.extractContents();i.appendChild(e),r.insertNode(i)}window.getSelection()?.removeAllRanges()}catch(e){console.error("Error highlighting range:",e)}}},children:e})},u=()=>{let e=(0,a.useContext)(g);if(void 0===e)throw Error("useHighlights must be used within a HighlightProvider");return e};r(51215);let h=({selection:e,onHighlight:t,onResponse:r,onShare:n,onAiAssist:i})=>{let[o,l]=(0,a.useState)({top:0,left:0}),[s,c]=(0,a.useState)(!1),[d,g]=(0,a.useState)(!1),m=(0,a.useRef)(null);return(0,a.useEffect)(()=>{if(!e||e.isCollapsed){c(!1),g(!1);return}let t=e.getRangeAt(0).getBoundingClientRect();window.innerHeight;let r=m.current?.offsetHeight||40,n=t.top-r-10+window.scrollY,a=t.left+t.width/2;l({top:n<0?t.bottom+10+window.scrollY:n,left:a}),c(!0)},[e]),null};var p=r(8775);let x=e=>{let t={prefix:"",suffix:""};if(!e||0===e.rangeCount)return t;let r=e.getRangeAt(0),n=r.toString().trim(),a=r.commonAncestorContainer,i=a.nodeType===Node.TEXT_NODE?a.parentElement:a;if(!i)return t;let o=i.textContent||"",l=n.replace(/\s+/g," "),s=o.indexOf(l);if(-1!==s){let e=Math.max(0,s-50),r=Math.min(o.length,s+l.length+50),n=o.substring(e,s),a=o.substring(s+l.length,r);n=n.replace(/^\S*\s/,""),a=a.replace(/\s\S*$/,""),t.prefix=n,t.suffix=a}return t},b=(e,t)=>{e&&t&&(t.querySelectorAll(".article-highlight").forEach(e=>{let t=e.parentNode;if(t){let r=document.createTextNode(e.textContent||"");t.replaceChild(r,e),t.normalize()}}),e.forEach(e=>{let r=((e,r,n)=>{let a,i=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,null),o=(r+e+n).trim();for(;a=i.nextNode();){let t=(a.textContent||"").indexOf(o);if(-1!==t){let n=document.createRange(),i=r.trim().length;return n.setStart(a,t+i),n.setEnd(a,t+i+e.trim().length),n}}return null})(e.text,e.prefix,e.suffix);if(r)try{let t=document.createElement("mark");t.className=`article-highlight highlight-${e.tag||"insight"}`,t.dataset.highlightId=e.id,r.surroundContents(t)}catch(e){console.error("Error applying highlight:",e)}}))},f=({articleId:e,children:t,articleTitle:r="Article",articleSlug:i="",onShare:o})=>{let[l,s]=(0,a.useState)(null),{highlights:c,saveHighlight:g,removeHighlight:m,highlightElement:f}=u(),[y,_]=(0,a.useState)(null),[v,w]=(0,a.useState)(!1),[S,j]=(0,a.useState)(""),[k,C]=(0,a.useState)(!1),[N,A]=(0,a.useState)(""),[E,T]=(0,a.useState)(null),[F,$]=(0,a.useState)(!1),[B,M]=(0,a.useState)(!1),[I,L]=(0,a.useState)({top:0,left:0}),[P,z]=(0,a.useState)(!1),[Q,R]=(0,a.useState)(""),D=(0,a.useCallback)(()=>{M(!0),setTimeout(()=>{$(!1),M(!1)},150)},[]),W=(0,a.useCallback)(()=>{if(F)return;let e=window.getSelection();e&&!e.isCollapsed&&""!==e.toString().trim()?s(e):s(null)},[F]),H=(0,a.useCallback)((t,r,n)=>{if(t&&r){let a=x(window.getSelection());g(t.trim(),a.prefix,a.suffix,e,n),f(r,n)}},[e,g,f]),O=(0,a.useCallback)(e=>{let t=e.target;if(t.classList.contains("article-highlight")){e.preventDefault(),e.stopPropagation();let r=t.dataset.highlightId,n=t.textContent||"";if(r){M(!1),T({id:r,text:n});let e=t.getBoundingClientRect();L({top:e.top-40+window.scrollY,left:e.left+e.width/2}),$(!0),s(null)}}else F&&(D(),T(null))},[F,D]),U=(0,a.useCallback)(()=>{if(E&&E.id){D();let e=E.id;if(T(null),m(e),y){let t=y.querySelector(`[data-highlight-id="${e}"]`);if(t&&t.parentNode){let e=document.createTextNode(t.textContent||"");t.parentNode.replaceChild(e,t),t.parentNode.normalize()}}}},[E,m,y,D]),Y=(0,a.useCallback)(e=>{j(e),w(!0)},[]),q=(0,a.useCallback)(e=>{R(e),z(!0)},[]),X=(0,a.useCallback)(e=>{A(e),C(!0)},[]);(0,a.useEffect)(()=>(document.addEventListener("selectionchange",W),()=>{document.removeEventListener("selectionchange",W)}),[W]),(0,a.useEffect)(()=>{if(y)return y.addEventListener("click",O),()=>{y.removeEventListener("click",O)}},[y,O]),(0,a.useEffect)(()=>{let e=e=>{if(F){let t=e.target;t.closest(".highlight-toolbar")||t.classList.contains("article-highlight")||(D(),T(null))}};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[F,D]),(0,a.useEffect)(()=>{y&&c.length>0&&b(c,y)},[c,y]);let J=(0,a.useCallback)(e=>{e&&_(e)},[]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h,{selection:l,onHighlight:H,onResponse:Y,onShare:q,onAiAssist:X}),F&&E&&(0,n.jsxs)("div",{className:`highlight-toolbar unhighlight-toolbar ${B?"hiding":""}`,style:{position:"absolute",top:`${I.top}px`,left:`${I.left}px`,transform:B?"translateY(-10px) translateX(-50%)":"translateX(-50%)",zIndex:1e3},children:[(0,n.jsxs)("button",{onClick:U,className:"highlight-btn highlight-btn-danger",children:[(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("path",{d:"M21 4H8l-7 8 7 8h13a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"}),(0,n.jsx)("line",{x1:"18",y1:"9",x2:"12",y2:"15"}),(0,n.jsx)("line",{x1:"12",y1:"9",x2:"18",y2:"15"})]}),(0,n.jsx)("span",{children:"Unhighlight"})]}),(0,n.jsxs)("button",{onClick:()=>{q(E.text),D()},className:"highlight-btn",children:[(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("circle",{cx:"18",cy:"5",r:"3"}),(0,n.jsx)("circle",{cx:"6",cy:"12",r:"3"}),(0,n.jsx)("circle",{cx:"18",cy:"19",r:"3"}),(0,n.jsx)("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),(0,n.jsx)("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),(0,n.jsx)("span",{children:"Share"})]}),(0,n.jsxs)("button",{onClick:()=>{Y(E.text),D()},className:"highlight-btn",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,n.jsx)("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"})}),(0,n.jsx)("span",{children:"Response"})]})]}),(0,n.jsx)("div",{ref:J,className:"article-highlight-container",children:t}),v&&(0,n.jsx)("div",{className:"highlight-response-modal",children:(0,n.jsxs)("div",{className:"highlight-modal-content",children:[(0,n.jsx)("button",{className:"highlight-modal-close",onClick:()=>w(!1),children:"\xd7"}),(0,n.jsx)("h3",{children:"Respond to highlighted text"}),(0,n.jsxs)("div",{className:"highlight-selected-text",children:['"',S,'"']}),(0,n.jsx)("textarea",{className:"highlight-response-input",placeholder:"Write your response..."}),(0,n.jsx)("button",{className:"highlight-response-submit",children:"Submit"})]})}),k&&(0,n.jsx)("div",{className:"highlight-ai-modal",children:(0,n.jsxs)("div",{className:"highlight-modal-content",children:[(0,n.jsx)("button",{className:"highlight-modal-close",onClick:()=>C(!1),children:"\xd7"}),(0,n.jsx)("h3",{children:"Journa AI"}),(0,n.jsxs)("div",{className:"highlight-selected-text",children:['"',N,'"']}),(0,n.jsxs)("div",{className:"highlight-ai-options",children:[(0,n.jsx)("button",{children:"Explain this"}),(0,n.jsx)("button",{children:"Fact check"}),(0,n.jsx)("button",{children:"Provide context"}),(0,n.jsx)("button",{children:"Summarize"})]}),(0,n.jsx)("div",{className:"highlight-ai-response",children:(0,n.jsx)("div",{className:"highlight-ai-loading",children:"Journa AI is thinking..."})})]})}),P&&(0,n.jsx)(p.A,{isOpen:P,onClose:()=>z(!1),highlightText:Q,articleTitle:r,shareUrl:d(i,e)})]})};var y=r(34738),_=r.n(y);async function v(e){let t=`http://127.0.0.1:5001/api/prototype/v1/article/${e}`,r=await fetch(t);if(!r.ok)throw Error(`Failed to fetch article: ${r.status} ${r.statusText}`);return r.json()}function w(){return null}r(46997),r(57894),r(8990),r(68960),r(36014),r(71454),r(25865),r(92623),r(25119),r(29173),r(65848),r(88224),r(35630),r(14321),r(48541),r(83075),r(29731),r(34425),r(61707),r(11566),r(86908);var S=r(62475),j=r(18314);let k=({articleId:e,initialHtml:t,isAuthenticated:i=!1,moodFeatureEnabled:o=!0,onToggleMoodFeature:l,articleTitle:s="Article",articleSlug:c=""})=>{let[d,g]=(0,a.useState)(null),[u,h]=(0,a.useState)(!t),[p,x]=(0,a.useState)(""),[b,y]=(0,a.useState)(!1),[k,C]=(0,a.useState)(!1),[N,A]=(0,a.useState)(0),[E,T]=(0,a.useState)(""),[F,$]=(0,a.useState)(""),[B,M]=(0,a.useState)(!1),[I,L]=(0,a.useState)(!1),[P,z]=(0,a.useState)("reflective"),Q=(0,a.useRef)(null),R=["How does this make you feel?","What questions does this raise for you?","How does this connect to your own experiences?","What would you have done differently?","What surprises you most about this?","How might this change your perspective?","What emotions are you experiencing right now?","What does this remind you of?","If you could ask the author one question, what would it be?","How does this challenge your existing beliefs?"],D=e=>{let t=e.toLowerCase(),r=[];return(t.includes("technology")||t.includes("innovation")||t.includes("digital")||t.includes("business"))&&(r.push("How might this technology impact your daily life?"),r.push("What are the potential risks and benefits you see?")),(t.includes("government")||t.includes("policy")||t.includes("president")||t.includes("election"))&&(r.push("How do you think this policy might affect different communities?"),r.push("What would you propose as an alternative approach?")),(t.includes("health")||t.includes("medical")||t.includes("research")||t.includes("study"))&&(r.push("How reliable do you think this research is?"),r.push("How might this affect healthcare decisions?")),(t.includes("environment")||t.includes("climate")||t.includes("energy")||t.includes("sustainability"))&&(r.push("What actions could you personally take based on this information?"),r.push("How do you balance environmental concerns with other priorities?")),(t.includes("education")||t.includes("school")||t.includes("learning")||t.includes("student"))&&(r.push("How does this compare to your own educational experience?"),r.push("What changes would you make to improve this system?")),(t.includes("social")||t.includes("community")||t.includes("justice")||t.includes("equality"))&&(r.push("What role do you think individuals should play in addressing this issue?"),r.push("How might different communities view this differently?")),r},W=()=>[...R,...D(Y())],H=()=>{let e=W();return e[N%e.length]};(0,a.useEffect)(()=>{y(i)},[i]),(0,a.useEffect)(()=>{k&&!F&&$(H())},[k,N]),(0,a.useEffect)(()=>{Q.current&&(t||d)&&setTimeout(()=>{var e;Q.current&&Q.current},100)},[t,d]),(0,a.useEffect)(()=>{let e=Y();if(e){let t=e.replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim();t&&z((0,S.H)(t))}},[t,d]);let O=async()=>{if(E.trim()){L(!0);try{console.log("Starting reflection submission:",{articleId:e,currentPrompt:F,currentReflection:E,reflectionCount:N});let{saveReflectionResponse:t}=await Promise.resolve().then(r.bind(r,45306));await t(e,`prompt_${Date.now()}`,F,E,N,!0),console.log("Reflection saved successfully:",{articleId:e,prompt:F,response:E,count:N+1}),A(e=>e+1),T(""),$(""),M(!1),C(!1)}catch(e){console.error("Error saving reflection:",e),alert("Error saving reflection. Please try again.")}finally{L(!1)}}},U=()=>{M(!1)};(0,a.useEffect)(()=>{t||d||(async()=>{try{h(!0);let t=await v(e);if(!t)return void x("Article not found");let r="",n=("string"==typeof t.content?t.content:t.content.map(e=>`<p>${e.text}</p>`).join("\n")).replace(/<div[^>]*>Content is loaded from HTML<\/div>/g,"").replace(/<h1[^>]*>Untitled Article<\/h1>/g,"");g({title:t.title,body:n})}catch(e){console.error("Error loading article:",e),x("Failed to load article")}finally{h(!1)}})()},[e,d,t]);let Y=()=>t?t.replace(/<div[^>]*>Content is loaded from HTML<\/div>/g,"").replace(/<h1[^>]*>Untitled Article<\/h1>/g,""):d?.body||"";return u?(0,n.jsxs)("div",{className:_().loadingContainer,children:[(0,n.jsx)("div",{className:_().loadingIndicator}),(0,n.jsx)("p",{children:"Loading article..."})]}):p?(0,n.jsx)("div",{className:_().errorContainer,children:(0,n.jsx)("p",{className:_().errorMessage,children:p})}):(0,n.jsxs)(m,{articleId:e,children:[(0,n.jsx)(w,{}),(0,n.jsxs)("article",{className:_().articleContainer,children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem",margin:"1rem 0",padding:"1rem",backgroundImage:i?`linear-gradient(270deg, ${j.Q[P].gradientStart}, ${j.Q[P].gradientEnd})`:"linear-gradient(270deg, #9CA3AF, #6B7280)",backgroundSize:"200% 200%",animation:"slideGradient 8s ease infinite alternate",borderRadius:"20px",border:"1px solid rgba(255, 255, 255, 0.5)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)",fontSize:"0.875rem"},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,n.jsx)("span",{style:{color:"#F7FAFC",fontWeight:"500",fontSize:"0.875rem",opacity:.9},children:i?"\uD83C\uDFA8 Atmosphere adapted":"\uD83D\uDD12 Sign in for enhanced features"}),i&&(0,n.jsxs)("span",{style:{color:"#F7FAFC",fontWeight:"600",fontSize:"0.875rem"},children:["✨ Reflections saved: ",N]})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,n.jsx)("span",{style:{color:"#F7FAFC",fontWeight:"500",fontSize:"0.75rem"},children:"Mood Background"}),(0,n.jsx)("button",{onClick:i&&l?()=>l(!o):void 0,style:{padding:"0.4rem 0.8rem",border:"none",background:i&&o?"rgba(255, 255, 255, 0.9)":"rgba(255, 255, 255, 0.2)",color:i&&o?j.Q[P].accent:"#F7FAFC",borderRadius:"20px",fontSize:"0.7rem",fontWeight:"600",cursor:i?"pointer":"not-allowed",transition:"all 0.3s ease",boxShadow:i&&o?"0 2px 8px rgba(255, 255, 255, 0.3)":"0 1px 4px rgba(0, 0, 0, 0.1)",transform:"scale(1)",backdropFilter:"blur(10px)",opacity:i?1:.6},onMouseEnter:e=>{i&&(e.currentTarget.style.transform="scale(1.05)")},onMouseLeave:e=>{i&&(e.currentTarget.style.transform="scale(1)")},children:i&&o?"ON":"OFF"}),(0,n.jsx)("span",{style:{color:"#F7FAFC",fontWeight:"500"},children:"Interactive Reflections"}),(0,n.jsx)("button",{onClick:i?()=>y(!b):void 0,style:{padding:"0.6rem 1.2rem",border:"none",background:i&&b?"rgba(255, 255, 255, 0.9)":"rgba(255, 255, 255, 0.2)",color:i&&b?j.Q[P].accent:"#F7FAFC",borderRadius:"25px",fontSize:"0.75rem",fontWeight:"600",cursor:i?"pointer":"not-allowed",transition:"all 0.3s ease",boxShadow:i&&b?"0 4px 15px rgba(255, 255, 255, 0.3)":"0 2px 8px rgba(0, 0, 0, 0.1)",transform:"scale(1)",backdropFilter:"blur(10px)",opacity:i?1:.6},onMouseEnter:e=>{i&&(e.currentTarget.style.transform="scale(1.05)",e.currentTarget.style.background=b?"rgba(255, 255, 255, 1)":"rgba(255, 255, 255, 0.3)")},onMouseLeave:e=>{i&&(e.currentTarget.style.transform="scale(1)",e.currentTarget.style.background=b?"rgba(255, 255, 255, 0.9)":"rgba(255, 255, 255, 0.2)")},children:i&&b?"ON":"OFF"})]})]}),(0,n.jsxs)(f,{articleId:e,articleTitle:s,articleSlug:c,onShare:t=>{if(navigator.share)navigator.share({title:d?.title||"Shared highlight",text:`"${t}" - from article ${e}`,url:window.location.href}).catch(e=>console.error("Error sharing:",e));else{let r=`"${t}" - from article ${e} ${window.location.href}`;navigator.clipboard.writeText(r).then(()=>alert("Highlight copied to clipboard!")).catch(e=>console.error("Error copying to clipboard:",e))}},children:[(0,n.jsx)("div",{className:_().articleContent,children:(0,n.jsx)("div",{ref:Q,dangerouslySetInnerHTML:{__html:Y()}})}),b&&(0,n.jsx)("button",{onClick:()=>{b&&(C(!k),k||(T(""),$(H()),M(!1)))},style:{position:"fixed",bottom:"40px",right:"40px",width:"56px",height:"56px",borderRadius:"50%",background:k?"linear-gradient(135deg, #1d4ed8, #7c3aed)":"linear-gradient(135deg, #3b82f6, #8b5cf6)",border:"none",boxShadow:k?"0 8px 25px rgba(59, 130, 246, 0.4), 0 0 0 2px rgba(59, 130, 246, 0.2)":"0 6px 20px rgba(59, 130, 246, 0.3)",cursor:"pointer",zIndex:1e3,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",transform:k?"scale(1.05)":"scale(1)",backdropFilter:"blur(10px)"},onMouseEnter:e=>{e.currentTarget.style.transform="scale(1.1)",e.currentTarget.style.boxShadow="0 8px 30px rgba(59, 130, 246, 0.5), 0 0 0 3px rgba(59, 130, 246, 0.3)"},onMouseLeave:e=>{e.currentTarget.style.transform=k?"scale(1.05)":"scale(1)",e.currentTarget.style.boxShadow=k?"0 8px 25px rgba(59, 130, 246, 0.4), 0 0 0 2px rgba(59, 130, 246, 0.2)":"0 6px 20px rgba(59, 130, 246, 0.3)"},title:k?"Close reflection":"Open reflection",children:k?"✕":"✍️"}),k&&b&&(0,n.jsxs)("div",{style:{position:"fixed",bottom:"110px",right:"40px",width:"380px",maxHeight:"500px",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",borderRadius:"24px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.15), 0 0 0 1px rgba(255, 255, 255, 0.2)",border:"1px solid rgba(255, 255, 255, 0.3)",zIndex:999,animation:"gentleSlideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1)",padding:"24px",overflow:"hidden"},children:[(0,n.jsx)("style",{children:`
                  @keyframes gentleSlideUp {
                    from {
                      opacity: 0;
                      transform: translateY(20px) scale(0.98);
                    }
                    to {
                      opacity: 1;
                      transform: translateY(0) scale(1);
                    }
                  }
                `}),(0,n.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,height:"80px",background:"linear-gradient(135deg, rgba(59, 130, 246, 0.08), rgba(139, 92, 246, 0.08))",borderRadius:"24px 24px 0 0",zIndex:-1}}),(0,n.jsxs)("div",{style:{marginBottom:"20px",textAlign:"center"},children:[(0,n.jsx)("h3",{style:{margin:"0 0 12px 0",fontSize:"16px",fontWeight:"600",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Time to Reflect ✨"}),(0,n.jsx)("div",{style:{position:"relative"},children:B?(0,n.jsx)("input",{type:"text",value:F,onChange:e=>$(e.target.value),onBlur:U,onKeyDown:e=>{"Enter"===e.key&&U(),"Escape"===e.key&&($(H()),M(!1))},autoFocus:!0,style:{width:"100%",padding:"8px 12px",border:"2px solid #3b82f6",borderRadius:"12px",background:"white",fontSize:"14px",textAlign:"center",outline:"none"}}):(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",flexWrap:"wrap"},children:[(0,n.jsx)("p",{onClick:()=>{M(!0)},style:{margin:0,fontSize:"14px",color:"#64748b",fontWeight:"500",cursor:"pointer",padding:"4px 8px",borderRadius:"8px",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(59, 130, 246, 0.1)",e.currentTarget.style.color="#3b82f6"},onMouseLeave:e=>{e.currentTarget.style.background="transparent",e.currentTarget.style.color="#64748b"},title:"Click to edit question",children:F}),(0,n.jsx)("button",{onClick:()=>{let e=W(),t=Math.floor(Math.random()*e.length);$(e[t])},style:{background:"rgba(59, 130, 246, 0.1)",border:"none",borderRadius:"6px",padding:"4px 8px",fontSize:"12px",color:"#3b82f6",cursor:"pointer",fontWeight:"500"},title:"Get different question",children:"\uD83C\uDFB2"})]})})]}),(0,n.jsx)("textarea",{value:E,onChange:e=>T(e.target.value),placeholder:"Share your thoughts...",style:{width:"100%",height:"120px",padding:"16px",border:"2px solid transparent",borderRadius:"16px",background:"rgba(248, 250, 252, 0.8)",fontSize:"14px",fontFamily:"inherit",resize:"none",outline:"none",transition:"all 0.3s ease",boxShadow:"inset 0 2px 8px rgba(0, 0, 0, 0.05)",marginBottom:"20px"},onFocus:e=>{e.target.style.borderColor="#3b82f6",e.target.style.background="rgba(255, 255, 255, 0.9)",e.target.style.boxShadow="inset 0 2px 8px rgba(0, 0, 0, 0.05), 0 0 0 3px rgba(59, 130, 246, 0.1)"},onBlur:e=>{e.target.style.borderColor="transparent",e.target.style.background="rgba(248, 250, 252, 0.8)",e.target.style.boxShadow="inset 0 2px 8px rgba(0, 0, 0, 0.05)"}}),(0,n.jsxs)("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[(0,n.jsx)("button",{onClick:()=>C(!1),style:{padding:"10px 18px",border:"none",borderRadius:"16px",background:"rgba(148, 163, 184, 0.2)",color:"#64748b",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(148, 163, 184, 0.3)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(148, 163, 184, 0.2)"},children:"Skip"}),(0,n.jsx)("button",{onClick:O,disabled:!E.trim()||I,style:{padding:"10px 20px",border:"none",borderRadius:"16px",background:E.trim()?"linear-gradient(135deg, #3b82f6, #8b5cf6)":"rgba(148, 163, 184, 0.3)",color:"white",fontSize:"14px",fontWeight:"600",cursor:E.trim()?"pointer":"not-allowed",transition:"all 0.3s ease",boxShadow:E.trim()?"0 4px 15px rgba(59, 130, 246, 0.4)":"none",opacity:I?.7:1},onMouseEnter:e=>{E.trim()&&!I&&(e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 6px 20px rgba(59, 130, 246, 0.5)")},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow=E.trim()?"0 4px 15px rgba(59, 130, 246, 0.4)":"none"},children:I?"Saving...":"Save Reflection"})]})]})]})]})]})}},62475:(e,t,r)=>{"use strict";r.d(t,{H:()=>i});var n=r(85311),a=r.n(n);function i(e){let t=new(a())().analyze(e),r=e.toLowerCase(),n=["angry","furious","rage","mad","hate","disgusted","outraged","pissed","frustrated","livid","infuriated","enraged","trump","politician","corrupt","stupid","idiot","terrible","awful","worst","disgusting","pathetic"].filter(e=>r.includes(e)).length,i=["happy","joy","excited","amazing","wonderful","fantastic","great","awesome","brilliant","excellent","perfect","beautiful","love","celebrate","triumph","success","victory","delighted","cheerful","blissful"].filter(e=>r.includes(e)).length,o=["calm","peaceful","serene","tranquil","gentle","soothing","quiet","meditation","zen","harmony","balance","nature","garden","sunset","ocean","mindful","breathe","stillness"].filter(e=>r.includes(e)).length,l=["energy","power","strong","dynamic","intense","passionate","vibrant","bold","fierce","electric","explosive","powerful","charged","pumped","motivated","driven"].filter(e=>r.includes(e)).length,s=["sad","depressed","melancholy","grief","sorrow","tragic","heartbreak","crying","tears","lonely","despair","hopeless","miserable","devastated","broken"].filter(e=>r.includes(e)).length;return n>=2||n>=1&&t.score<-2?"angry":i>=2||i>=1&&t.score>3?"joyful":o>=2||o>=1&&t.score>0?"peaceful":l>=2||l>=1&&Math.abs(t.score)>2?"energetic":s>=2||s>=1&&t.score<-1?"sad":t.score>2?"joyful":t.score<-3?"angry":t.score<-1?"sad":"reflective"}},78335:()=>{},80726:(e,t,r)=>{var n={"./en/index":57415};function a(e){return r(i(e))}function i(e){if(!r.o(n,e)){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=i,e.exports=a,a.id=80726},89404:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(60687),a=r(43210),i=r(85814),o=r.n(i),l=r(43649),s=r(84245),c=r(79440),d=r(18314),g=r(6248),m=r.n(g);let u=({slug:e,articleId:t,isComplex:r,mood:i="reflective",moodFeatureEnabled:g=!1})=>{let[u,h]=(0,a.useState)([]),[p,x]=(0,a.useState)(!0),[b,f]=(0,a.useState)(""),[y,_]=(0,a.useState)(""),[v,w]=(0,a.useState)(!1),[S,j]=(0,a.useState)(!1),[k,C]=(0,a.useState)(null),[N,A]=(0,a.useState)(""),[E,T]=(0,a.useState)(!1),[F,$]=(0,a.useState)({}),[B,M]=(0,a.useState)(!1),[I,L]=(0,a.useState)(!1),[P,z]=(0,a.useState)(t||null),[Q,R]=(0,a.useState)({id:"",name:"Reader"});(0,a.useEffect)(()=>{let e=(0,s.hg)(l.j2,e=>{let t=!!e;M(t),t&&e?R({id:e.uid,name:e.displayName||e.email?.split("@")[0]||"User"}):R({id:"",name:"Reader"})});return()=>e()},[]),(0,a.useEffect)(()=>{if(t)return void z(t);e&&(async()=>{try{let t=await (0,c.l6)(e);t&&t.id&&z(t.id)}catch(e){console.error("Error fetching article:",e),f("Unable to load article details.")}})()},[e,t]),(0,a.useEffect)(()=>{P&&(x(!0),(async()=>{try{let e=await (0,c.fz)(P);setTimeout(()=>{h(e),x(!1)},800)}catch(e){console.error("Error fetching comments:",e),f("Unable to load discussions. Please refresh the page to try again."),x(!1)}})())},[P]);let D=async e=>{if(e.preventDefault(),y.trim()&&!v&&P){if(!B)return void L(!0);try{w(!0);let e=await (0,c.BC)(P,y);h(t=>[e,...t]),_(""),w(!1),j(!1)}catch(e){console.error("Error adding comment:",e),f("Your response could not be posted. Please try again."),w(!1)}}},W=async e=>{if(N.trim()&&!E&&P){if(!B)return void L(!0);try{T(!0);let t=await (0,c.Oe)(P,e,N);h(r=>r.map(r=>r.commentId===e||r.id===e?{...r,replies:[...r.replies||[],t]}:r)),A(""),C(null),T(!1),$(t=>({...t,[e]:!0}))}catch(e){console.error("Error adding reply:",e),T(!1)}}},H=async e=>{if(!B||!P)return void L(!0);try{let t=await (0,c.tT)(P,e);h(r=>r.map(r=>r.commentId===e||r.id===e?{...r,likes:t.likes}:r))}catch(e){console.error("Error liking comment:",e)}},O=async e=>{if(B&&P)try{await (0,c.Tu)(P,e),h(t=>t.filter(t=>t.commentId!==e&&t.id!==e))}catch(e){console.error("Error deleting comment:",e)}},U=e=>{$(t=>({...t,[e]:!t[e]}))},Y=e=>{if(!e)return"Unknown date";let t=e.toDate?e.toDate():new Date(e),r=Math.floor((new Date().getTime()-t.getTime())/1e3);if(r<60)return"Just now";if(r<3600){let e=Math.floor(r/60);return`${e} ${1===e?"minute":"minutes"} ago`}if(r<86400){let e=Math.floor(r/3600);return`${e} ${1===e?"hour":"hours"} ago`}if(r<604800){let e=Math.floor(r/86400);return`${e} ${1===e?"day":"days"} ago`}try{return t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",timeZone:"UTC"})}catch(e){return console.error("Error formatting date:",e),"Unknown date"}},q=(e,t,r=!1)=>{let a=e?.charAt(0).toUpperCase()||"A",i=["#4f46e5","#0ea5e9","#10b981","#f59e0b","#ef4444"],o=t?Math.abs(t.charCodeAt(0)%i.length):0,l=i[o];return(0,n.jsx)("div",{className:r?m().replyAvatar:m().commentAvatar,style:{backgroundColor:l,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:r?"0.9rem":"1.2rem"},children:a})};return(0,n.jsxs)("section",{className:m().commentSection,style:g?{background:`linear-gradient(160deg, 
          rgba(255, 255, 255, 0.1) 0%, 
          ${d.Q[i].gradientStart}08 30%, 
          ${d.Q[i].gradientEnd}06 70%, 
          rgba(255, 255, 255, 0.05) 100%)`,borderRadius:"32px",border:`1px solid ${d.Q[i].gradientStart}12`,boxShadow:`
          0 8px 32px -8px ${d.Q[i].gradientStart}08,
          inset 0 1px 0 rgba(255, 255, 255, 0.1)
        `,backdropFilter:"blur(20px) saturate(1.1)",transition:"all 0.8s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden",padding:"2rem"}:{},children:[g&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{style:{position:"absolute",top:"-50%",left:"-50%",right:"-50%",bottom:"-50%",background:`
                radial-gradient(circle at 30% 20%, ${d.Q[i].gradientStart}04, transparent 40%), 
                radial-gradient(circle at 70% 80%, ${d.Q[i].gradientEnd}03, transparent 40%),
                radial-gradient(circle at 20% 70%, ${d.Q[i].gradientStart}02, transparent 30%)
              `,animation:"moodFloat 20s ease-in-out infinite",pointerEvents:"none",zIndex:0}}),(0,n.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:"32px",background:`linear-gradient(45deg, 
                ${d.Q[i].gradientStart}05, 
                transparent, 
                ${d.Q[i].gradientEnd}05)`,filter:"blur(1px)",opacity:.6,pointerEvents:"none",zIndex:0}})]}),(0,n.jsxs)("div",{style:{position:"relative",zIndex:1},children:[(0,n.jsx)("h2",{className:m().commentSectionTitle,style:g?{color:d.Q[i].accent,fontWeight:"600",marginBottom:"1.5rem",textShadow:`0 0 20px ${d.Q[i].gradientStart}30, 0 0 40px ${d.Q[i].gradientStart}15`,transition:"all 0.3s ease"}:{fontWeight:"600",marginBottom:"1.5rem",color:"#333"},children:"\uD83D\uDCAC Join the Discussion"}),b&&(0,n.jsxs)("div",{className:m().commentError,children:[(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,n.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),(0,n.jsx)("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),b]}),(0,n.jsx)("form",{className:m().commentForm,onSubmit:D,children:(0,n.jsx)("div",{className:m().commentInputContainer,style:g?{background:`linear-gradient(135deg, 
              rgba(255, 255, 255, ${S?"0.15":"0.08"}), 
              ${d.Q[i].gradientStart}${S?"12":"06"}, 
              ${d.Q[i].gradientEnd}${S?"08":"04"})`,border:`1px solid ${d.Q[i].gradientStart}${S?"25":"15"}`,borderRadius:"24px",boxShadow:S?`0 8px 32px -4px ${d.Q[i].gradientStart}20, 
                 inset 0 1px 0 rgba(255, 255, 255, 0.2)`:`0 4px 16px -4px ${d.Q[i].gradientStart}10`,backdropFilter:"blur(12px)",transform:S?"translateY(-2px)":"translateY(0)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden"}:{opacity:S?1:.85,transition:"opacity 0.3s ease"},children:B?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:m().commentAvatar,children:q(Q.name,Q.id)}),(0,n.jsx)("textarea",{className:m().commentInput,placeholder:"Share your thoughts...",value:y,onChange:e=>_(e.target.value),onFocus:()=>j(!0),onBlur:()=>{y.trim()||j(!1)},style:g?{background:"rgba(255, 255, 255, 0.1)",border:"none",borderRadius:"20px",color:"#2d3748",fontSize:"1rem",padding:"1rem",resize:"vertical",minHeight:"120px",backdropFilter:"blur(8px)",transition:"all 0.3s ease"}:{}}),(0,n.jsx)("button",{className:m().commentSubmit,type:"submit",disabled:!y.trim()||v,style:g?{background:`linear-gradient(135deg, 
                    ${d.Q[i].accent}, 
                    ${d.Q[i].gradientEnd})`,border:"none",color:"white",borderRadius:"20px",fontWeight:"600",padding:"0.75rem 1.5rem",boxShadow:`0 4px 16px -4px ${d.Q[i].accent}40`,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:"translateY(0)",cursor:"pointer"}:{},onMouseEnter:g?e=>{e.currentTarget.disabled||(e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow=`0 8px 24px -4px ${d.Q[i].accent}60`)}:void 0,onMouseLeave:g?e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow=`0 4px 16px -4px ${d.Q[i].accent}40`}:void 0,children:v?"✨ Posting...":"\uD83D\uDCAC Post"})]}):(0,n.jsxs)("div",{className:m().loginPromptContainer,onClick:()=>L(!0),children:[(0,n.jsx)("textarea",{className:m().commentInput,placeholder:"Login to join the discussion...",disabled:!0}),(0,n.jsx)("button",{className:`${m().commentSubmit} ${m().loginButton}`,type:"button",onClick:()=>L(!0),children:"Login to comment"})]})})}),I&&(0,n.jsx)("div",{className:m().loginModalOverlay,onClick:()=>L(!1),children:(0,n.jsxs)("div",{className:m().loginModal,onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("button",{className:m().loginModalClose,onClick:()=>L(!1),children:"\xd7"}),(0,n.jsx)("h3",{className:m().loginModalTitle,children:"Join the conversation"}),(0,n.jsx)("p",{className:m().loginModalText,children:"Sign in to Journalite to share your thoughts and join the discussion."}),(0,n.jsxs)("div",{className:m().loginModalButtons,children:[(0,n.jsx)(o(),{href:"/login",className:`${m().loginModalButton} ${m().primary}`,children:"Log In"}),(0,n.jsx)(o(),{href:"/register",className:`${m().loginModalButton} ${m().secondary}`,children:"Create Account"})]})]})}),p?(0,n.jsxs)("div",{className:m().commentLoading,style:g?{background:`linear-gradient(135deg, 
              rgba(255, 255, 255, 0.1), 
              ${d.Q[i].gradientStart}06)`,borderRadius:"24px",padding:"2rem",backdropFilter:"blur(10px)",border:`1px solid ${d.Q[i].gradientStart}10`,textAlign:"center"}:{},children:[(0,n.jsx)("p",{style:g?{color:d.Q[i].accent,fontWeight:"500",marginBottom:"1rem"}:{},children:"✨ Loading comments..."}),(0,n.jsxs)("div",{className:m().loadingDots,children:[(0,n.jsx)("div",{className:m().loadingDot,style:g?{background:d.Q[i].gradientStart}:{}}),(0,n.jsx)("div",{className:m().loadingDot,style:g?{background:d.Q[i].accent}:{}}),(0,n.jsx)("div",{className:m().loadingDot,style:g?{background:d.Q[i].gradientEnd}:{}})]})]}):0===u.length?(0,n.jsx)("div",{className:m().noComments,style:g?{background:`linear-gradient(135deg, 
              rgba(255, 255, 255, 0.15) 0%, 
              ${d.Q[i].gradientStart}08 50%, 
              ${d.Q[i].gradientEnd}06 100%)`,border:`1px solid ${d.Q[i].gradientStart}12`,borderRadius:"24px",boxShadow:`
              0 6px 24px -8px ${d.Q[i].gradientStart}10,
              inset 0 1px 0 rgba(255, 255, 255, 0.12)
            `,backdropFilter:"blur(12px)",color:d.Q[i].accent,fontWeight:"500",padding:"2rem",textAlign:"center",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"}:{},children:"Be the first to share your thoughts on this article."}):(0,n.jsx)("div",{className:m().commentsList,children:u.map(e=>{let t=e.commentId||e.id||"";return(0,n.jsxs)("div",{className:m().commentItem,style:g?{background:`linear-gradient(135deg, 
                    rgba(255, 255, 255, 0.12) 0%, 
                    ${d.Q[i].gradientStart}06 50%, 
                    ${d.Q[i].gradientEnd}04 100%)`,border:`1px solid ${d.Q[i].gradientStart}10`,borderRadius:"24px",boxShadow:`
                    0 4px 20px -6px ${d.Q[i].gradientStart}08,
                    inset 0 1px 0 rgba(255, 255, 255, 0.1)
                  `,backdropFilter:"blur(10px)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden"}:{},onMouseEnter:g?e=>{e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow=`
                    0 8px 28px -6px ${d.Q[i].gradientStart}12,
                    inset 0 1px 0 rgba(255, 255, 255, 0.15)
                  `}:void 0,onMouseLeave:g?e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow=`
                    0 4px 20px -6px ${d.Q[i].gradientStart}08,
                    inset 0 1px 0 rgba(255, 255, 255, 0.1)
                  `}:void 0,children:[(0,n.jsxs)("div",{className:m().commentHeader,children:[q(e.userName,e.userId),(0,n.jsx)("span",{className:m().commentUser,children:e.userName}),(0,n.jsx)("span",{className:m().commentDate,children:Y(e.createdAt)})]}),(0,n.jsx)("div",{className:m().commentContent,children:e.content}),(0,n.jsxs)("div",{className:m().commentActions,children:[(0,n.jsxs)("button",{className:`${m().commentLikeBtn} ${e.likes.includes(Q.id)?m().liked:""}`,onClick:()=>H(t),"aria-pressed":e.likes.includes(Q.id),"aria-label":e.likes.includes(Q.id)?"Unlike comment":"Like comment",children:[e.likes.includes(Q.id)?(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:(0,n.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}):(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-4 h-4",children:(0,n.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"})}),(0,n.jsx)("span",{children:e.likes.length>0?e.likes.length:""})]}),(0,n.jsxs)("button",{className:m().replyToggle,onClick:()=>{B?C(k===t?null:t):L(!0)},"aria-label":"Reply to comment",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-4 h-4",children:(0,n.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"})}),(0,n.jsx)("span",{children:"Reply"})]}),e.userId===Q.id&&(0,n.jsxs)("button",{className:m().commentDeleteBtn,onClick:()=>O(t),"aria-label":"Delete comment",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-4 h-4",children:(0,n.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12.56 0c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09.996-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),(0,n.jsx)("span",{children:"Delete"})]})]}),e.replies&&e.replies.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("button",{className:m().repliesToggle,onClick:()=>U(t),children:[(0,n.jsx)("span",{className:`${m().repliesToggleIcon} ${F[t]?m().open:""}`,children:"▷"}),`${e.replies.length} ${1===e.replies.length?"reply":"replies"}`]}),F[t]&&(0,n.jsx)("div",{className:m().replySection,children:e.replies.map(e=>(0,n.jsxs)("div",{className:m().replyItem,style:g?{background:`linear-gradient(135deg, 
                                rgba(255, 255, 255, 0.08) 0%, 
                                ${d.Q[i].gradientStart}04 50%, 
                                ${d.Q[i].gradientEnd}03 100%)`,border:`1px solid ${d.Q[i].gradientStart}08`,borderRadius:"20px",boxShadow:`
                                0 2px 12px -4px ${d.Q[i].gradientStart}06,
                                inset 0 1px 0 rgba(255, 255, 255, 0.08)
                              `,backdropFilter:"blur(8px)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",margin:"0.75rem 0",padding:"1rem"}:{},onMouseEnter:g?e=>{e.currentTarget.style.transform="translateX(4px)",e.currentTarget.style.boxShadow=`
                                0 4px 16px -4px ${d.Q[i].gradientStart}10,
                                inset 0 1px 0 rgba(255, 255, 255, 0.12)
                              `}:void 0,onMouseLeave:g?e=>{e.currentTarget.style.transform="translateX(0)",e.currentTarget.style.boxShadow=`
                                0 2px 12px -4px ${d.Q[i].gradientStart}06,
                                inset 0 1px 0 rgba(255, 255, 255, 0.08)
                              `}:void 0,children:[(0,n.jsxs)("div",{className:m().replyHeader,children:[q(e.userName,e.userId,!0),(0,n.jsx)("span",{className:m().replyUser,children:e.userName}),(0,n.jsx)("span",{className:m().replyDate,children:Y(e.createdAt)})]}),(0,n.jsx)("div",{className:m().replyContent,children:e.content})]},e.replyId))})]}),k===t&&(0,n.jsxs)("div",{className:`${m().replyForm} ${e.replies&&e.replies.length>0?m().inThread:""}`,style:g?{background:`linear-gradient(135deg, 
                        rgba(255, 255, 255, 0.1) 0%, 
                        ${d.Q[i].gradientStart}06 50%, 
                        ${d.Q[i].gradientEnd}04 100%)`,border:`1px solid ${d.Q[i].gradientStart}12`,borderRadius:"20px",boxShadow:`0 3px 16px -4px ${d.Q[i].gradientStart}08`,backdropFilter:"blur(10px)",padding:"1.5rem",margin:"1rem 0"}:{},children:[(0,n.jsx)("textarea",{className:m().replyInput,placeholder:"Write a reply...",value:N,onChange:e=>A(e.target.value),style:g?{background:"rgba(255, 255, 255, 0.08)",border:`1px solid ${d.Q[i].gradientStart}10`,borderRadius:"16px",backdropFilter:"blur(6px)",color:"#2d3748",padding:"1rem",fontSize:"0.95rem"}:{}}),(0,n.jsxs)("div",{className:m().replyButtons,children:[(0,n.jsx)("button",{className:m().replyCancel,onClick:()=>{C(null),A("")},style:g?{background:"rgba(255, 255, 255, 0.1)",border:`1px solid ${d.Q[i].gradientStart}15`,borderRadius:"12px",color:d.Q[i].accent,padding:"0.5rem 1rem",transition:"all 0.3s ease"}:{},children:"Cancel"}),(0,n.jsx)("button",{className:m().replySubmit,disabled:!N.trim()||E,onClick:()=>W(t),style:g?{background:`linear-gradient(135deg, 
                            ${d.Q[i].accent}, 
                            ${d.Q[i].gradientEnd})`,border:"none",borderRadius:"12px",color:"white",fontWeight:"600",padding:"0.5rem 1rem",boxShadow:`0 2px 8px -2px ${d.Q[i].accent}40`,transition:"all 0.3s ease"}:{},children:E?"✨ Posting...":"\uD83D\uDCAC Post Reply"})]})]})]},t)})})]})]})}},96487:()=>{}};