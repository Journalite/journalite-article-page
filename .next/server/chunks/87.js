exports.id=87,exports.ids=[87],exports.modules={6248:e=>{e.exports={commentSection:"comment_commentSection__SP_jS",commentSectionTitle:"comment_commentSectionTitle__F_Jxe",commentError:"comment_commentError__A2v6U",commentForm:"comment_commentForm__U8b7X",commentInputContainer:"comment_commentInputContainer__3WsSp",loginPromptContainer:"comment_loginPromptContainer__X4aZr",commentAvatar:"comment_commentAvatar__uav6Q",replyAvatar:"comment_replyAvatar__dIlrw",commentInput:"comment_commentInput__4DHa1",replyInput:"comment_replyInput__8t_ho",commentSubmit:"comment_commentSubmit__UfvUF",replySubmit:"comment_replySubmit__2eCP7",loginButton:"comment_loginButton__4encR",loginModalOverlay:"comment_loginModalOverlay__Pk_AM",loginModal:"comment_loginModal__n984X",loginModalClose:"comment_loginModalClose__v02Rx",loginModalTitle:"comment_loginModalTitle__nZpZB",loginModalText:"comment_loginModalText__XwRn6",loginModalButtons:"comment_loginModalButtons__XdVNl",loginModalButton:"comment_loginModalButton__d8Bnr",primary:"comment_primary__1UIRJ",secondary:"comment_secondary__zc89j",commentLoading:"comment_commentLoading___WYvK",loadingDots:"comment_loadingDots___Lw2B",loadingDot:"comment_loadingDot__skUEk",pulse:"comment_pulse__czQlg",noComments:"comment_noComments__U9FG6",commentsList:"comment_commentsList__ZRMbc",commentItem:"comment_commentItem__Vx48l",commentHeader:"comment_commentHeader__3oOD6",commentUser:"comment_commentUser__QP5pY",commentDate:"comment_commentDate__5zfpn",commentContent:"comment_commentContent__DiE8h",commentActions:"comment_commentActions___Wpzi",commentLikeBtn:"comment_commentLikeBtn__wAYZO",replyToggle:"comment_replyToggle__bCRZg",commentDeleteBtn:"comment_commentDeleteBtn__BnLQc",liked:"comment_liked__2yWZ9",repliesToggle:"comment_repliesToggle__yepDc",repliesToggleIcon:"comment_repliesToggleIcon__EZRkK",open:"comment_open__cpLDc",replySection:"comment_replySection__mAqn4",replyItem:"comment_replyItem__ndhqf",replyHeader:"comment_replyHeader__Y2bUK",replyUser:"comment_replyUser__rw4V8",replyDate:"comment_replyDate__4Jafb",replyContent:"comment_replyContent__uV2jp",replyForm:"comment_replyForm__aYyum",inThread:"comment_inThread__lUoKT",replyButtons:"comment_replyButtons__KRGyv",replyCancel:"comment_replyCancel__od7Vq"}},32031:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l,metadata:()=>i,viewport:()=>o});var r=n(37413);let i={title:"Articles | Journalite",description:"Explore the latest articles from Journalite"},o={width:"device-width",initialScale:1,maximumScale:1};function l({children:e}){return(0,r.jsx)(r.Fragment,{children:e})}},34738:e=>{e.exports={articleContainer:"ArticleWithHighlights_articleContainer__r1hgP",articleContent:"ArticleWithHighlights_articleContent__qrFhS",loadingContainer:"ArticleWithHighlights_loadingContainer__6cqbO",loadingIndicator:"ArticleWithHighlights_loadingIndicator__ymNyj",spin:"ArticleWithHighlights_spin__Olepl",errorContainer:"ArticleWithHighlights_errorContainer__njqpS",errorMessage:"ArticleWithHighlights_errorMessage__D4C7O"}},36012:e=>{e.exports={articlePageContainer:"ArticlePage_articlePageContainer__S9vO3",pageHeader:"ArticlePage_pageHeader__LpJc9",headerContainer:"ArticlePage_headerContainer__2_FTv",logoLink:"ArticlePage_logoLink__fMNNv",headerLogo:"ArticlePage_headerLogo__QZCOB",headerActions:"ArticlePage_headerActions__gK7Eo",profileMenu:"ArticlePage_profileMenu__LJeQ0",profileCircle:"ArticlePage_profileCircle__mpTwC",profileDropdown:"ArticlePage_profileDropdown__PnV9R",dropdownItem:"ArticlePage_dropdownItem__Lac2v",authButtons:"ArticlePage_authButtons__R_ANg",loginButton:"ArticlePage_loginButton__kpUQh",signupButton:"ArticlePage_signupButton__EvVWG",pageContainer:"ArticlePage_pageContainer__7QNUg",relatedTagsSection:"ArticlePage_relatedTagsSection__SvZ8y",relatedTagsHeading:"ArticlePage_relatedTagsHeading__Ys9Op",relatedTagsList:"ArticlePage_relatedTagsList__Xn3ds",relatedTag:"ArticlePage_relatedTag__DEwLe",writeButton:"ArticlePage_writeButton__yZp3x",articleHeader:"ArticlePage_articleHeader__LJolV",articleTitle:"ArticlePage_articleTitle__euOmw",articleMeta:"ArticlePage_articleMeta__LXXWl",authorInfo:"ArticlePage_authorInfo__nnMSs",authorAvatar:"ArticlePage_authorAvatar__1S1bM",authorDetails:"ArticlePage_authorDetails__65w4B",authorNameLink:"ArticlePage_authorNameLink__c6fCN",authorName:"ArticlePage_authorName__o2DdL",articleDetails:"ArticlePage_articleDetails__mK6k_",articleActions:"ArticlePage_articleActions__IZLcw",editButton:"ArticlePage_editButton__Yl62q",tagContainer:"ArticlePage_tagContainer__kI5Py",tag:"ArticlePage_tag__F5Z0e",likeButton:"ArticlePage_likeButton__V0q84",liked:"ArticlePage_liked__Mzzkj",likeIcon:"ArticlePage_likeIcon__zOA_O",commentsContainer:"ArticlePage_commentsContainer__rpCTJ",loadingContainer:"ArticlePage_loadingContainer__v7RVf",loadingIndicator:"ArticlePage_loadingIndicator__E2bt3",spin:"ArticlePage_spin__yRZnI",errorContainer:"ArticlePage_errorContainer__pxRgD",errorMessage:"ArticlePage_errorMessage__quACi",editingHeader:"ArticlePage_editingHeader__nzcMi",cancelButton:"ArticlePage_cancelButton__V2ihM"}},51335:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var r=n(60687),i=n(43210),o=n(43649),l=n(75535);let a=async(e,t,n,r,i)=>{try{let a={articleId:e,userId:t,text:n,prefix:r,suffix:i,createdAt:(0,l.O5)(),comments:[]};return(await (0,l.gS)((0,l.rJ)(o.db,"highlights"),a)).id}catch(e){throw console.error("Error saving highlight:",e),e}},s=async e=>{try{let t=(0,l.P)((0,l.rJ)(o.db,"highlights"),(0,l._M)("articleId","==",e));return(await (0,l.GG)(t)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){return console.error("Error getting highlights:",e),[]}},c=async e=>{try{await (0,l.kd)((0,l.doc)(o.db,"highlights",e))}catch(e){throw console.error("Error deleting highlight:",e),e}},d=(0,i.createContext)(void 0),h=({children:e,articleId:t})=>{let[n,l]=(0,i.useState)([]),[h,g]=(0,i.useState)(!0),[m,u]=(0,i.useState)(null);(0,i.useEffect)(()=>{let e=o.j2.onAuthStateChanged(e=>{u(e)});return()=>e()},[]),(0,i.useEffect)(()=>{(async()=>{if(t){g(!0);try{let e=await s(t);l(e)}catch(e){console.error("Error loading highlights:",e)}finally{g(!1)}}})()},[t]);let p=async(e,t,n,r)=>{if(!m)return alert("You must be logged in to highlight text"),null;try{let i=await a(r,m.uid,e,t,n),o={id:i,articleId:r,userId:m.uid,text:e,prefix:t,suffix:n,createdAt:new Date};return l(e=>[...e,o]),i}catch(e){return console.error("Error saving highlight:",e),null}},x=async e=>{try{await c(e),l(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Error removing highlight:",e)}};return(0,r.jsx)(d.Provider,{value:{highlights:n,loading:h,saveHighlight:p,removeHighlight:x,highlightElement:e=>{let t=document.createElement("mark");t.className="article-highlight";try{e.surroundContents(t)}catch(r){console.error("Error highlighting range:",r);let n=e.extractContents();t.appendChild(n),e.insertNode(t)}}},children:e})},g=()=>{let e=(0,i.useContext)(d);if(void 0===e)throw Error("useHighlights must be used within a HighlightProvider");return e};n(51215);let m=({selection:e,onHighlight:t,onResponse:n,onShare:r,onAiAssist:o})=>{let[l,a]=(0,i.useState)({top:0,left:0}),[s,c]=(0,i.useState)(!1),d=(0,i.useRef)(null);return(0,i.useEffect)(()=>{if(!e||e.isCollapsed)return void c(!1);let t=e.getRangeAt(0).getBoundingClientRect();window.innerHeight;let n=d.current?.offsetHeight||40,r=t.top-n-10+window.scrollY,i=t.left+t.width/2;a({top:r<0?t.bottom+10+window.scrollY:r,left:i}),c(!0)},[e]),null},u=e=>{let t={prefix:"",suffix:""};if(!e||0===e.rangeCount)return t;let n=e.getRangeAt(0),r=n.toString();n.cloneRange();let i=n.commonAncestorContainer.textContent||"",o=i.indexOf(r);if(-1!==o){let e=Math.max(0,o-30),n=Math.min(i.length,o+r.length+30);t.prefix=i.substring(e,o),t.suffix=i.substring(o+r.length,n)}return t},p=(e,t)=>{e&&t&&(t.querySelectorAll(".article-highlight").forEach(e=>{let t=e.parentNode;if(t){let n=document.createTextNode(e.textContent||"");t.replaceChild(n,e),t.normalize()}}),e.forEach(e=>{let n=((e,n,r)=>{let i,o=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,null),l=(n+e+r).trim();for(;i=o.nextNode();){let t=(i.textContent||"").indexOf(l);if(-1!==t){let r=document.createRange(),o=n.trim().length;return r.setStart(i,t+o),r.setEnd(i,t+o+e.trim().length),r}}return null})(e.text,e.prefix,e.suffix);if(n)try{let t=document.createElement("mark");t.className="article-highlight",t.dataset.highlightId=e.id,n.surroundContents(t)}catch(e){console.error("Error applying highlight:",e)}}))},x=({articleId:e,children:t,onShare:n})=>{let[o,l]=(0,i.useState)(null),{highlights:a,saveHighlight:s,removeHighlight:c,highlightElement:d}=g(),[h,x]=(0,i.useState)(null),[_,f]=(0,i.useState)(!1),[y,b]=(0,i.useState)(""),[v,j]=(0,i.useState)(!1),[w,k]=(0,i.useState)(""),[C,S]=(0,i.useState)(null),[N,A]=(0,i.useState)(!1),[T,M]=(0,i.useState)(!1),[P,E]=(0,i.useState)({top:0,left:0}),I=(0,i.useCallback)(()=>{M(!0),setTimeout(()=>{A(!1),M(!1)},150)},[]),L=(0,i.useCallback)(()=>{if(N)return;let e=window.getSelection();e&&!e.isCollapsed&&""!==e.toString().trim()?l(e):l(null)},[N]),B=(0,i.useCallback)((t,n)=>{if(t&&n){let r=u(window.getSelection());s(t.trim(),r.prefix,r.suffix,e),d(n)}},[e,s,d]),H=(0,i.useCallback)(e=>{let t=e.target;if(t.classList.contains("article-highlight")){e.preventDefault(),e.stopPropagation();let n=t.dataset.highlightId,r=t.textContent||"";if(n){M(!1),S({id:n,text:r});let e=t.getBoundingClientRect();E({top:e.top-40+window.scrollY,left:e.left+e.width/2}),A(!0),l(null)}}else N&&(I(),S(null))},[N,I]),D=(0,i.useCallback)(()=>{if(C&&C.id){I();let e=C.id;if(S(null),c(e),h){let t=h.querySelector(`[data-highlight-id="${e}"]`);if(t&&t.parentNode){let e=document.createTextNode(t.textContent||"");t.parentNode.replaceChild(e,t),t.parentNode.normalize()}}}},[C,c,h,I]),R=(0,i.useCallback)(e=>{b(e),f(!0)},[]),W=(0,i.useCallback)(e=>{if(n)n(e);else{let t=`"${e}" — via Journalite`;navigator.share?navigator.share({text:t}).catch(e=>{console.error("Error sharing:",e),navigator.clipboard.writeText(t).then(()=>alert("Quote copied to clipboard!")).catch(e=>console.error("Failed to copy:",e))}):navigator.clipboard.writeText(t).then(()=>alert("Quote copied to clipboard!")).catch(e=>console.error("Failed to copy:",e))}},[n]),$=(0,i.useCallback)(e=>{k(e),j(!0)},[]);(0,i.useEffect)(()=>(document.addEventListener("selectionchange",L),()=>{document.removeEventListener("selectionchange",L)}),[L]),(0,i.useEffect)(()=>{if(h)return h.addEventListener("click",H),()=>{h.removeEventListener("click",H)}},[h,H]),(0,i.useEffect)(()=>{let e=e=>{if(N){let t=e.target;t.closest(".highlight-toolbar")||t.classList.contains("article-highlight")||(I(),S(null))}};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[N,I]),(0,i.useEffect)(()=>{h&&a.length>0&&p(a,h)},[a,h]);let z=(0,i.useCallback)(e=>{e&&x(e)},[]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m,{selection:o,onHighlight:B,onResponse:R,onShare:W,onAiAssist:$}),N&&C&&(0,r.jsxs)("div",{className:`highlight-toolbar unhighlight-toolbar ${T?"hiding":""}`,style:{position:"absolute",top:`${P.top}px`,left:`${P.left}px`,transform:T?"translateY(-10px) translateX(-50%)":"translateX(-50%)",zIndex:1e3},children:[(0,r.jsxs)("button",{onClick:D,className:"highlight-btn highlight-btn-danger",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M21 4H8l-7 8 7 8h13a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"}),(0,r.jsx)("line",{x1:"18",y1:"9",x2:"12",y2:"15"}),(0,r.jsx)("line",{x1:"12",y1:"9",x2:"18",y2:"15"})]}),(0,r.jsx)("span",{children:"Unhighlight"})]}),(0,r.jsxs)("button",{onClick:()=>{W(C.text),I()},className:"highlight-btn",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("circle",{cx:"18",cy:"5",r:"3"}),(0,r.jsx)("circle",{cx:"6",cy:"12",r:"3"}),(0,r.jsx)("circle",{cx:"18",cy:"19",r:"3"}),(0,r.jsx)("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),(0,r.jsx)("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),(0,r.jsx)("span",{children:"Share"})]}),(0,r.jsxs)("button",{onClick:()=>{R(C.text),I()},className:"highlight-btn",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"})}),(0,r.jsx)("span",{children:"Response"})]})]}),(0,r.jsx)("div",{ref:z,className:"article-highlight-container",children:t}),_&&(0,r.jsx)("div",{className:"highlight-response-modal",children:(0,r.jsxs)("div",{className:"highlight-modal-content",children:[(0,r.jsx)("button",{className:"highlight-modal-close",onClick:()=>f(!1),children:"\xd7"}),(0,r.jsx)("h3",{children:"Respond to highlighted text"}),(0,r.jsxs)("div",{className:"highlight-selected-text",children:['"',y,'"']}),(0,r.jsx)("textarea",{className:"highlight-response-input",placeholder:"Write your response..."}),(0,r.jsx)("button",{className:"highlight-response-submit",children:"Submit"})]})}),v&&(0,r.jsx)("div",{className:"highlight-ai-modal",children:(0,r.jsxs)("div",{className:"highlight-modal-content",children:[(0,r.jsx)("button",{className:"highlight-modal-close",onClick:()=>j(!1),children:"\xd7"}),(0,r.jsx)("h3",{children:"Journa AI"}),(0,r.jsxs)("div",{className:"highlight-selected-text",children:['"',w,'"']}),(0,r.jsxs)("div",{className:"highlight-ai-options",children:[(0,r.jsx)("button",{children:"Explain this"}),(0,r.jsx)("button",{children:"Fact check"}),(0,r.jsx)("button",{children:"Provide context"}),(0,r.jsx)("button",{children:"Summarize"})]}),(0,r.jsx)("div",{className:"highlight-ai-response",children:(0,r.jsx)("div",{className:"highlight-ai-loading",children:"Journa AI is thinking..."})})]})})]})};var _=n(34738),f=n.n(_);async function y(e){let t=`http://127.0.0.1:5001/api/prototype/v1/article/${e}`,n=await fetch(t);if(!n.ok)throw Error(`Failed to fetch article: ${n.status} ${n.statusText}`);return n.json()}let b=({articleId:e,initialHtml:t})=>{let[o,l]=(0,i.useState)(null),[a,s]=(0,i.useState)(!t),[c,d]=(0,i.useState)(""),[g,m]=(0,i.useState)(!0),[u,p]=(0,i.useState)(!1),[_,b]=(0,i.useState)(0),[v,j]=(0,i.useState)(""),[w,k]=(0,i.useState)(""),[C,S]=(0,i.useState)(!1),[N,A]=(0,i.useState)(!1),T=(0,i.useRef)(null),M=["How does this make you feel?","What questions does this raise for you?","How does this connect to your own experiences?","What would you have done differently?","What surprises you most about this?","How might this change your perspective?","What emotions are you experiencing right now?","What does this remind you of?","If you could ask the author one question, what would it be?","How does this challenge your existing beliefs?"],P=e=>{let t=e.toLowerCase(),n=[];return(t.includes("technology")||t.includes("innovation")||t.includes("digital")||t.includes("business"))&&(n.push("How might this technology impact your daily life?"),n.push("What are the potential risks and benefits you see?")),(t.includes("government")||t.includes("policy")||t.includes("president")||t.includes("election"))&&(n.push("How do you think this policy might affect different communities?"),n.push("What would you propose as an alternative approach?")),(t.includes("health")||t.includes("medical")||t.includes("research")||t.includes("study"))&&(n.push("How reliable do you think this research is?"),n.push("How might this affect healthcare decisions?")),(t.includes("environment")||t.includes("climate")||t.includes("energy")||t.includes("sustainability"))&&(n.push("What actions could you personally take based on this information?"),n.push("How do you balance environmental concerns with other priorities?")),(t.includes("education")||t.includes("school")||t.includes("learning")||t.includes("student"))&&(n.push("How does this compare to your own educational experience?"),n.push("What changes would you make to improve this system?")),(t.includes("social")||t.includes("community")||t.includes("justice")||t.includes("equality"))&&(n.push("What role do you think individuals should play in addressing this issue?"),n.push("How might different communities view this differently?")),n},E=()=>[...M,...P(H())],I=()=>{let e=E();return e[_%e.length]};(0,i.useEffect)(()=>{u&&!w&&k(I())},[u,_]);let L=async()=>{if(v.trim()){A(!0);try{console.log("Starting reflection submission:",{articleId:e,currentPrompt:w,currentReflection:v,reflectionCount:_});let{saveReflectionResponse:t}=await Promise.resolve().then(n.bind(n,45306));await t(e,`prompt_${Date.now()}`,w,v,_,!0),console.log("Reflection saved successfully:",{articleId:e,prompt:w,response:v,count:_+1}),b(e=>e+1),j(""),k(""),S(!1),p(!1)}catch(e){console.error("Error saving reflection:",e),alert("Error saving reflection. Please try again.")}finally{A(!1)}}},B=()=>{S(!1)};(0,i.useEffect)(()=>{t||o||(async()=>{try{s(!0);let t=await y(e);if(!t)return void d("Article not found");let n="",r=("string"==typeof t.content?t.content:t.content.map(e=>`<p>${e.text}</p>`).join("\n")).replace(/<div[^>]*>Content is loaded from HTML<\/div>/g,"").replace(/<h1[^>]*>Untitled Article<\/h1>/g,"");l({title:t.title,body:r})}catch(e){console.error("Error loading article:",e),d("Failed to load article")}finally{s(!1)}})()},[e,o,t]);let H=()=>t?t.replace(/<div[^>]*>Content is loaded from HTML<\/div>/g,"").replace(/<h1[^>]*>Untitled Article<\/h1>/g,""):o?.body||"";return a?(0,r.jsxs)("div",{className:f().loadingContainer,children:[(0,r.jsx)("div",{className:f().loadingIndicator}),(0,r.jsx)("p",{children:"Loading article..."})]}):c?(0,r.jsx)("div",{className:f().errorContainer,children:(0,r.jsx)("p",{className:f().errorMessage,children:c})}):(0,r.jsx)(h,{articleId:e,children:(0,r.jsxs)("article",{className:f().articleContainer,children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem",margin:"1rem 0",padding:"1rem",background:"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",borderRadius:"20px",border:"1px solid rgba(255, 255, 255, 0.5)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)",fontSize:"0.875rem"},children:[(0,r.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:(0,r.jsxs)("span",{style:{color:"#475569",fontWeight:"600",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:["✨ Reflections saved: ",_]})}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,r.jsx)("span",{style:{color:"#64748b",fontWeight:"500"},children:"Interactive Reflections"}),(0,r.jsx)("button",{onClick:()=>m(!g),style:{padding:"0.6rem 1.2rem",border:"none",background:g?"linear-gradient(135deg, #3b82f6, #8b5cf6)":"linear-gradient(135deg, #e2e8f0, #cbd5e1)",color:g?"white":"#64748b",borderRadius:"25px",fontSize:"0.75rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",boxShadow:g?"0 4px 15px rgba(59, 130, 246, 0.4)":"0 2px 8px rgba(0, 0, 0, 0.1)",transform:"scale(1)"},onMouseEnter:e=>{e.currentTarget.style.transform="scale(1.05)"},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1)"},children:g?"ON":"OFF"})]})]}),(0,r.jsxs)(x,{articleId:e,onShare:t=>{if(navigator.share)navigator.share({title:o?.title||"Shared highlight",text:`"${t}" - from article ${e}`,url:window.location.href}).catch(e=>console.error("Error sharing:",e));else{let n=`"${t}" - from article ${e} ${window.location.href}`;navigator.clipboard.writeText(n).then(()=>alert("Highlight copied to clipboard!")).catch(e=>console.error("Error copying to clipboard:",e))}},children:[(0,r.jsx)("div",{className:f().articleContent,children:(0,r.jsx)("div",{ref:T,dangerouslySetInnerHTML:{__html:H()}})}),g&&(0,r.jsx)("button",{onClick:()=>{g&&(p(!u),u||(j(""),k(I()),S(!1)))},style:{position:"fixed",bottom:"40px",right:"40px",width:"56px",height:"56px",borderRadius:"50%",background:u?"linear-gradient(135deg, #1d4ed8, #7c3aed)":"linear-gradient(135deg, #3b82f6, #8b5cf6)",border:"none",boxShadow:u?"0 8px 25px rgba(59, 130, 246, 0.4), 0 0 0 2px rgba(59, 130, 246, 0.2)":"0 6px 20px rgba(59, 130, 246, 0.3)",cursor:"pointer",zIndex:1e3,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",transform:u?"scale(1.05)":"scale(1)",backdropFilter:"blur(10px)"},onMouseEnter:e=>{e.currentTarget.style.transform="scale(1.1)",e.currentTarget.style.boxShadow="0 8px 30px rgba(59, 130, 246, 0.5), 0 0 0 3px rgba(59, 130, 246, 0.3)"},onMouseLeave:e=>{e.currentTarget.style.transform=u?"scale(1.05)":"scale(1)",e.currentTarget.style.boxShadow=u?"0 8px 25px rgba(59, 130, 246, 0.4), 0 0 0 2px rgba(59, 130, 246, 0.2)":"0 6px 20px rgba(59, 130, 246, 0.3)"},title:u?"Close reflection":"Open reflection",children:u?"✕":"✍️"}),u&&g&&(0,r.jsxs)("div",{style:{position:"fixed",bottom:"110px",right:"40px",width:"380px",maxHeight:"500px",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",borderRadius:"24px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.15), 0 0 0 1px rgba(255, 255, 255, 0.2)",border:"1px solid rgba(255, 255, 255, 0.3)",zIndex:999,animation:"gentleSlideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1)",padding:"24px",overflow:"hidden"},children:[(0,r.jsx)("style",{children:`
                  @keyframes gentleSlideUp {
                    from {
                      opacity: 0;
                      transform: translateY(20px) scale(0.98);
                    }
                    to {
                      opacity: 1;
                      transform: translateY(0) scale(1);
                    }
                  }
                `}),(0,r.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,height:"80px",background:"linear-gradient(135deg, rgba(59, 130, 246, 0.08), rgba(139, 92, 246, 0.08))",borderRadius:"24px 24px 0 0",zIndex:-1}}),(0,r.jsxs)("div",{style:{marginBottom:"20px",textAlign:"center"},children:[(0,r.jsx)("h3",{style:{margin:"0 0 12px 0",fontSize:"16px",fontWeight:"600",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Time to Reflect ✨"}),(0,r.jsx)("div",{style:{position:"relative"},children:C?(0,r.jsx)("input",{type:"text",value:w,onChange:e=>k(e.target.value),onBlur:B,onKeyDown:e=>{"Enter"===e.key&&B(),"Escape"===e.key&&(k(I()),S(!1))},autoFocus:!0,style:{width:"100%",padding:"8px 12px",border:"2px solid #3b82f6",borderRadius:"12px",background:"white",fontSize:"14px",textAlign:"center",outline:"none"}}):(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",flexWrap:"wrap"},children:[(0,r.jsx)("p",{onClick:()=>{S(!0)},style:{margin:0,fontSize:"14px",color:"#64748b",fontWeight:"500",cursor:"pointer",padding:"4px 8px",borderRadius:"8px",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(59, 130, 246, 0.1)",e.currentTarget.style.color="#3b82f6"},onMouseLeave:e=>{e.currentTarget.style.background="transparent",e.currentTarget.style.color="#64748b"},title:"Click to edit question",children:w}),(0,r.jsx)("button",{onClick:()=>{let e=E(),t=Math.floor(Math.random()*e.length);k(e[t])},style:{background:"rgba(59, 130, 246, 0.1)",border:"none",borderRadius:"6px",padding:"4px 8px",fontSize:"12px",color:"#3b82f6",cursor:"pointer",fontWeight:"500"},title:"Get different question",children:"\uD83C\uDFB2"})]})})]}),(0,r.jsx)("textarea",{value:v,onChange:e=>j(e.target.value),placeholder:"Share your thoughts...",style:{width:"100%",height:"120px",padding:"16px",border:"2px solid transparent",borderRadius:"16px",background:"rgba(248, 250, 252, 0.8)",fontSize:"14px",fontFamily:"inherit",resize:"none",outline:"none",transition:"all 0.3s ease",boxShadow:"inset 0 2px 8px rgba(0, 0, 0, 0.05)",marginBottom:"20px"},onFocus:e=>{e.target.style.borderColor="#3b82f6",e.target.style.background="rgba(255, 255, 255, 0.9)",e.target.style.boxShadow="inset 0 2px 8px rgba(0, 0, 0, 0.05), 0 0 0 3px rgba(59, 130, 246, 0.1)"},onBlur:e=>{e.target.style.borderColor="transparent",e.target.style.background="rgba(248, 250, 252, 0.8)",e.target.style.boxShadow="inset 0 2px 8px rgba(0, 0, 0, 0.05)"}}),(0,r.jsxs)("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[(0,r.jsx)("button",{onClick:()=>p(!1),style:{padding:"10px 18px",border:"none",borderRadius:"16px",background:"rgba(148, 163, 184, 0.2)",color:"#64748b",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(148, 163, 184, 0.3)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(148, 163, 184, 0.2)"},children:"Skip"}),(0,r.jsx)("button",{onClick:L,disabled:!v.trim()||N,style:{padding:"10px 20px",border:"none",borderRadius:"16px",background:v.trim()?"linear-gradient(135deg, #3b82f6, #8b5cf6)":"rgba(148, 163, 184, 0.3)",color:"white",fontSize:"14px",fontWeight:"600",cursor:v.trim()?"pointer":"not-allowed",transition:"all 0.3s ease",boxShadow:v.trim()?"0 4px 15px rgba(59, 130, 246, 0.4)":"none",opacity:N?.7:1},onMouseEnter:e=>{v.trim()&&!N&&(e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 6px 20px rgba(59, 130, 246, 0.5)")},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow=v.trim()?"0 4px 15px rgba(59, 130, 246, 0.4)":"none"},children:N?"Saving...":"Save Reflection"})]})]})]})]})})}},78335:()=>{},89404:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var r=n(60687),i=n(43210),o=n(85814),l=n.n(o),a=n(43649),s=n(84245),c=n(79440),d=n(6248),h=n.n(d);let g=({slug:e,articleId:t,isComplex:n})=>{let[o,d]=(0,i.useState)([]),[g,m]=(0,i.useState)(!0),[u,p]=(0,i.useState)(""),[x,_]=(0,i.useState)(""),[f,y]=(0,i.useState)(!1),[b,v]=(0,i.useState)(!1),[j,w]=(0,i.useState)(null),[k,C]=(0,i.useState)(""),[S,N]=(0,i.useState)(!1),[A,T]=(0,i.useState)({}),[M,P]=(0,i.useState)(!1),[E,I]=(0,i.useState)(!1),[L,B]=(0,i.useState)(t||null),[H,D]=(0,i.useState)({id:"",name:"Reader"});(0,i.useEffect)(()=>{let e=(0,s.hg)(a.j2,e=>{let t=!!e;P(t),t&&e?D({id:e.uid,name:e.displayName||e.email?.split("@")[0]||"User"}):D({id:"",name:"Reader"})});return()=>e()},[]),(0,i.useEffect)(()=>{if(t)return void B(t);e&&(async()=>{try{let t=await (0,c.l6)(e);t&&t.id&&B(t.id)}catch(e){console.error("Error fetching article:",e),p("Unable to load article details.")}})()},[e,t]),(0,i.useEffect)(()=>{L&&(m(!0),(async()=>{try{let e=await (0,c.fz)(L);setTimeout(()=>{d(e),m(!1)},800)}catch(e){console.error("Error fetching comments:",e),p("Unable to load discussions. Please refresh the page to try again."),m(!1)}})())},[L]);let R=async e=>{if(e.preventDefault(),x.trim()&&!f&&L){if(!M)return void I(!0);try{y(!0);let e=await (0,c.BC)(L,x);d(t=>[e,...t]),_(""),y(!1),v(!1)}catch(e){console.error("Error adding comment:",e),p("Your response could not be posted. Please try again."),y(!1)}}},W=async e=>{if(k.trim()&&!S&&L){if(!M)return void I(!0);try{N(!0);let t=await (0,c.Oe)(L,e,k);d(n=>n.map(n=>n.commentId===e||n.id===e?{...n,replies:[...n.replies||[],t]}:n)),C(""),w(null),N(!1),T(t=>({...t,[e]:!0}))}catch(e){console.error("Error adding reply:",e),N(!1)}}},$=async e=>{if(!M||!L)return void I(!0);try{let t=await (0,c.tT)(L,e);d(n=>n.map(n=>n.commentId===e||n.id===e?{...n,likes:t.likes}:n))}catch(e){console.error("Error liking comment:",e)}},z=async e=>{if(M&&L)try{await (0,c.Tu)(L,e),d(t=>t.filter(t=>t.commentId!==e&&t.id!==e))}catch(e){console.error("Error deleting comment:",e)}},F=e=>{T(t=>({...t,[e]:!t[e]}))},U=e=>{if(!e)return"Unknown date";let t=e.toDate?e.toDate():new Date(e),n=Math.floor((new Date().getTime()-t.getTime())/1e3);if(n<60)return"Just now";if(n<3600){let e=Math.floor(n/60);return`${e} ${1===e?"minute":"minutes"} ago`}if(n<86400){let e=Math.floor(n/3600);return`${e} ${1===e?"hour":"hours"} ago`}if(n<604800){let e=Math.floor(n/86400);return`${e} ${1===e?"day":"days"} ago`}try{return t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",timeZone:"UTC"})}catch(e){return console.error("Error formatting date:",e),"Unknown date"}},O=(e,t,n=!1)=>{let i=e?.charAt(0).toUpperCase()||"A",o=["#4f46e5","#0ea5e9","#10b981","#f59e0b","#ef4444"],l=t?Math.abs(t.charCodeAt(0)%o.length):0,a=o[l];return(0,r.jsx)("div",{className:n?h().replyAvatar:h().commentAvatar,style:{backgroundColor:a,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:n?"0.9rem":"1.2rem"},children:i})};return(0,r.jsxs)("section",{className:h().commentSection,children:[(0,r.jsx)("h2",{className:h().commentSectionTitle,children:"Join the Discussion"}),u&&(0,r.jsxs)("div",{className:h().commentError,children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,r.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),(0,r.jsx)("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),u]}),(0,r.jsx)("form",{className:h().commentForm,onSubmit:R,children:(0,r.jsx)("div",{className:h().commentInputContainer,style:{opacity:b?1:.85},children:M?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:h().commentAvatar,children:O(H.name,H.id)}),(0,r.jsx)("textarea",{className:h().commentInput,placeholder:"Share your thoughts...",value:x,onChange:e=>_(e.target.value),onFocus:()=>v(!0),onBlur:()=>{x.trim()||v(!1)}}),(0,r.jsx)("button",{className:h().commentSubmit,type:"submit",disabled:!x.trim()||f,children:f?"Posting...":"Post"})]}):(0,r.jsxs)("div",{className:h().loginPromptContainer,onClick:()=>I(!0),children:[(0,r.jsx)("textarea",{className:h().commentInput,placeholder:"Login to join the discussion...",disabled:!0}),(0,r.jsx)("button",{className:`${h().commentSubmit} ${h().loginButton}`,type:"button",onClick:()=>I(!0),children:"Login to comment"})]})})}),E&&(0,r.jsx)("div",{className:h().loginModalOverlay,onClick:()=>I(!1),children:(0,r.jsxs)("div",{className:h().loginModal,onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("button",{className:h().loginModalClose,onClick:()=>I(!1),children:"\xd7"}),(0,r.jsx)("h3",{className:h().loginModalTitle,children:"Join the conversation"}),(0,r.jsx)("p",{className:h().loginModalText,children:"Sign in to Journalite to share your thoughts and join the discussion."}),(0,r.jsxs)("div",{className:h().loginModalButtons,children:[(0,r.jsx)(l(),{href:"/login",className:`${h().loginModalButton} ${h().primary}`,children:"Log In"}),(0,r.jsx)(l(),{href:"/register",className:`${h().loginModalButton} ${h().secondary}`,children:"Create Account"})]})]})}),g?(0,r.jsxs)("div",{className:h().commentLoading,children:[(0,r.jsx)("p",{children:"Loading comments..."}),(0,r.jsxs)("div",{className:h().loadingDots,children:[(0,r.jsx)("div",{className:h().loadingDot}),(0,r.jsx)("div",{className:h().loadingDot}),(0,r.jsx)("div",{className:h().loadingDot})]})]}):0===o.length?(0,r.jsx)("div",{className:h().noComments,children:"Be the first to share your thoughts on this article."}):(0,r.jsx)("div",{className:h().commentsList,children:o.map(e=>{let t=e.commentId||e.id||"";return(0,r.jsxs)("div",{className:h().commentItem,children:[(0,r.jsxs)("div",{className:h().commentHeader,children:[O(e.userName,e.userId),(0,r.jsx)("span",{className:h().commentUser,children:e.userName}),(0,r.jsx)("span",{className:h().commentDate,children:U(e.createdAt)})]}),(0,r.jsx)("div",{className:h().commentContent,children:e.content}),(0,r.jsxs)("div",{className:h().commentActions,children:[(0,r.jsxs)("button",{className:`${h().commentLikeBtn} ${e.likes.includes(H.id)?h().liked:""}`,onClick:()=>$(t),"aria-pressed":e.likes.includes(H.id),"aria-label":e.likes.includes(H.id)?"Unlike comment":"Like comment",children:[e.likes.includes(H.id)?(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:(0,r.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}):(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-4 h-4",children:(0,r.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"})}),(0,r.jsx)("span",{children:e.likes.length>0?e.likes.length:""})]}),(0,r.jsxs)("button",{className:h().replyToggle,onClick:()=>{M?w(j===t?null:t):I(!0)},"aria-label":"Reply to comment",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-4 h-4",children:(0,r.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"})}),(0,r.jsx)("span",{children:"Reply"})]}),e.userId===H.id&&(0,r.jsxs)("button",{className:h().commentDeleteBtn,onClick:()=>z(t),"aria-label":"Delete comment",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-4 h-4",children:(0,r.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12.56 0c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09.996-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),(0,r.jsx)("span",{children:"Delete"})]})]}),e.replies&&e.replies.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("button",{className:h().repliesToggle,onClick:()=>F(t),children:[(0,r.jsx)("span",{className:`${h().repliesToggleIcon} ${A[t]?h().open:""}`,children:"▷"}),`${e.replies.length} ${1===e.replies.length?"reply":"replies"}`]}),A[t]&&(0,r.jsx)("div",{className:h().replySection,children:e.replies.map(e=>(0,r.jsxs)("div",{className:h().replyItem,children:[(0,r.jsxs)("div",{className:h().replyHeader,children:[O(e.userName,e.userId,!0),(0,r.jsx)("span",{className:h().replyUser,children:e.userName}),(0,r.jsx)("span",{className:h().replyDate,children:U(e.createdAt)})]}),(0,r.jsx)("div",{className:h().replyContent,children:e.content})]},e.replyId))})]}),j===t&&(0,r.jsxs)("div",{className:`${h().replyForm} ${e.replies&&e.replies.length>0?h().inThread:""}`,children:[(0,r.jsx)("textarea",{className:h().replyInput,placeholder:"Write a reply...",value:k,onChange:e=>C(e.target.value)}),(0,r.jsxs)("div",{className:h().replyButtons,children:[(0,r.jsx)("button",{className:h().replyCancel,onClick:()=>{w(null),C("")},children:"Cancel"}),(0,r.jsx)("button",{className:h().replySubmit,disabled:!k.trim()||S,onClick:()=>W(t),children:S?"Posting...":"Post Reply"})]})]})]},t)})})]})}},96487:()=>{}};