exports.id=353,exports.ids=[353],exports.modules={6248:e=>{e.exports={commentSection:"comment_commentSection__SP_jS",commentSectionTitle:"comment_commentSectionTitle__F_Jxe",commentError:"comment_commentError__A2v6U",commentForm:"comment_commentForm__U8b7X",commentInputContainer:"comment_commentInputContainer__3WsSp",loginPromptContainer:"comment_loginPromptContainer__X4aZr",commentAvatar:"comment_commentAvatar__uav6Q",replyAvatar:"comment_replyAvatar__dIlrw",commentInput:"comment_commentInput__4DHa1",replyInput:"comment_replyInput__8t_ho",commentSubmit:"comment_commentSubmit__UfvUF",replySubmit:"comment_replySubmit__2eCP7",loginButton:"comment_loginButton__4encR",loginModalOverlay:"comment_loginModalOverlay__Pk_AM",loginModal:"comment_loginModal__n984X",loginModalClose:"comment_loginModalClose__v02Rx",loginModalTitle:"comment_loginModalTitle__nZpZB",loginModalText:"comment_loginModalText__XwRn6",loginModalButtons:"comment_loginModalButtons__XdVNl",loginModalButton:"comment_loginModalButton__d8Bnr",primary:"comment_primary__1UIRJ",secondary:"comment_secondary__zc89j",commentLoading:"comment_commentLoading___WYvK",loadingDots:"comment_loadingDots___Lw2B",loadingDot:"comment_loadingDot__skUEk",pulse:"comment_pulse__czQlg",noComments:"comment_noComments__U9FG6",commentsList:"comment_commentsList__ZRMbc",commentItem:"comment_commentItem__Vx48l",commentHeader:"comment_commentHeader__3oOD6",commentUser:"comment_commentUser__QP5pY",commentDate:"comment_commentDate__5zfpn",commentContent:"comment_commentContent__DiE8h",commentActions:"comment_commentActions___Wpzi",commentLikeBtn:"comment_commentLikeBtn__wAYZO",replyToggle:"comment_replyToggle__bCRZg",commentDeleteBtn:"comment_commentDeleteBtn__BnLQc",liked:"comment_liked__2yWZ9",repliesToggle:"comment_repliesToggle__yepDc",repliesToggleIcon:"comment_repliesToggleIcon__EZRkK",open:"comment_open__cpLDc",replySection:"comment_replySection__mAqn4",replyItem:"comment_replyItem__ndhqf",replyHeader:"comment_replyHeader__Y2bUK",replyUser:"comment_replyUser__rw4V8",replyDate:"comment_replyDate__4Jafb",replyContent:"comment_replyContent__uV2jp",replyForm:"comment_replyForm__aYyum",inThread:"comment_inThread__lUoKT",replyButtons:"comment_replyButtons__KRGyv",replyCancel:"comment_replyCancel__od7Vq"}},32031:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o,metadata:()=>i,viewport:()=>l});var r=n(37413);let i={title:"Articles | Journalite",description:"Explore the latest articles from Journalite"},l={width:"device-width",initialScale:1,maximumScale:1};function o({children:e}){return(0,r.jsx)(r.Fragment,{children:e})}},34738:e=>{e.exports={articleContainer:"ArticleWithHighlights_articleContainer__r1hgP",articleContent:"ArticleWithHighlights_articleContent__qrFhS",loadingContainer:"ArticleWithHighlights_loadingContainer__6cqbO",loadingIndicator:"ArticleWithHighlights_loadingIndicator__ymNyj",spin:"ArticleWithHighlights_spin__Olepl",errorContainer:"ArticleWithHighlights_errorContainer__njqpS",errorMessage:"ArticleWithHighlights_errorMessage__D4C7O"}},36012:e=>{e.exports={articlePageContainer:"ArticlePage_articlePageContainer__S9vO3",pageHeader:"ArticlePage_pageHeader__LpJc9",headerContainer:"ArticlePage_headerContainer__2_FTv",logoLink:"ArticlePage_logoLink__fMNNv",headerLogo:"ArticlePage_headerLogo__QZCOB",headerActions:"ArticlePage_headerActions__gK7Eo",profileMenu:"ArticlePage_profileMenu__LJeQ0",profileCircle:"ArticlePage_profileCircle__mpTwC",profileDropdown:"ArticlePage_profileDropdown__PnV9R",dropdownItem:"ArticlePage_dropdownItem__Lac2v",authButtons:"ArticlePage_authButtons__R_ANg",loginButton:"ArticlePage_loginButton__kpUQh",signupButton:"ArticlePage_signupButton__EvVWG",pageContainer:"ArticlePage_pageContainer__7QNUg",relatedTagsSection:"ArticlePage_relatedTagsSection__SvZ8y",relatedTagsHeading:"ArticlePage_relatedTagsHeading__Ys9Op",relatedTagsList:"ArticlePage_relatedTagsList__Xn3ds",relatedTag:"ArticlePage_relatedTag__DEwLe",writeButton:"ArticlePage_writeButton__yZp3x",articleHeader:"ArticlePage_articleHeader__LJolV",articleTitle:"ArticlePage_articleTitle__euOmw",articleMeta:"ArticlePage_articleMeta__LXXWl",authorInfo:"ArticlePage_authorInfo__nnMSs",authorAvatar:"ArticlePage_authorAvatar__1S1bM",authorDetails:"ArticlePage_authorDetails__65w4B",authorNameLink:"ArticlePage_authorNameLink__c6fCN",authorName:"ArticlePage_authorName__o2DdL",articleDetails:"ArticlePage_articleDetails__mK6k_",articleActions:"ArticlePage_articleActions__IZLcw",editButton:"ArticlePage_editButton__Yl62q",tagContainer:"ArticlePage_tagContainer__kI5Py",tag:"ArticlePage_tag__F5Z0e",likeButton:"ArticlePage_likeButton__V0q84",liked:"ArticlePage_liked__Mzzkj",likeIcon:"ArticlePage_likeIcon__zOA_O",commentsContainer:"ArticlePage_commentsContainer__rpCTJ",loadingContainer:"ArticlePage_loadingContainer__v7RVf",loadingIndicator:"ArticlePage_loadingIndicator__E2bt3",spin:"ArticlePage_spin__yRZnI",errorContainer:"ArticlePage_errorContainer__pxRgD",errorMessage:"ArticlePage_errorMessage__quACi",editingHeader:"ArticlePage_editingHeader__nzcMi",cancelButton:"ArticlePage_cancelButton__V2ihM"}},40421:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var r=n(60687),i=n(43210),l=n(43649),o=n(75535);let a=async(e,t,n,r,i)=>{try{let a={articleId:e,userId:t,text:n,prefix:r,suffix:i,createdAt:(0,o.O5)(),comments:[]};return(await (0,o.gS)((0,o.rJ)(l.db,"highlights"),a)).id}catch(e){throw console.error("Error saving highlight:",e),e}},s=async e=>{try{let t=(0,o.P)((0,o.rJ)(l.db,"highlights"),(0,o._M)("articleId","==",e));return(await (0,o.GG)(t)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){return console.error("Error getting highlights:",e),[]}},c=async e=>{try{await (0,o.kd)((0,o.H9)(l.db,"highlights",e))}catch(e){throw console.error("Error deleting highlight:",e),e}},d=(0,i.createContext)(void 0),m=({children:e,articleId:t})=>{let[n,o]=(0,i.useState)([]),[m,h]=(0,i.useState)(!0),[g,u]=(0,i.useState)(null);(0,i.useEffect)(()=>{let e=l.j2.onAuthStateChanged(e=>{u(e)});return()=>e()},[]),(0,i.useEffect)(()=>{(async()=>{if(t){h(!0);try{let e=await s(t);o(e)}catch(e){console.error("Error loading highlights:",e)}finally{h(!1)}}})()},[t]);let _=async(e,t,n,r)=>{if(!g)return alert("You must be logged in to highlight text"),null;try{let i=await a(r,g.uid,e,t,n),l={id:i,articleId:r,userId:g.uid,text:e,prefix:t,suffix:n,createdAt:new Date};return o(e=>[...e,l]),i}catch(e){return console.error("Error saving highlight:",e),null}},p=async e=>{try{await c(e),o(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Error removing highlight:",e)}};return(0,r.jsx)(d.Provider,{value:{highlights:n,loading:m,saveHighlight:_,removeHighlight:p,highlightElement:e=>{let t=document.createElement("mark");t.className="article-highlight";try{e.surroundContents(t)}catch(r){console.error("Error highlighting range:",r);let n=e.extractContents();t.appendChild(n),e.insertNode(t)}}},children:e})},h=()=>{let e=(0,i.useContext)(d);if(void 0===e)throw Error("useHighlights must be used within a HighlightProvider");return e};n(51215);let g=({selection:e,onHighlight:t,onResponse:n,onShare:r,onAiAssist:l})=>{let[o,a]=(0,i.useState)({top:0,left:0}),[s,c]=(0,i.useState)(!1),d=(0,i.useRef)(null);return(0,i.useEffect)(()=>{if(!e||e.isCollapsed)return void c(!1);let t=e.getRangeAt(0).getBoundingClientRect();window.innerHeight;let n=d.current?.offsetHeight||40,r=t.top-n-10+window.scrollY,i=t.left+t.width/2;a({top:r<0?t.bottom+10+window.scrollY:r,left:i}),c(!0)},[e]),null},u=e=>{let t={prefix:"",suffix:""};if(!e||0===e.rangeCount)return t;let n=e.getRangeAt(0),r=n.toString();n.cloneRange();let i=n.commonAncestorContainer.textContent||"",l=i.indexOf(r);if(-1!==l){let e=Math.max(0,l-30),n=Math.min(i.length,l+r.length+30);t.prefix=i.substring(e,l),t.suffix=i.substring(l+r.length,n)}return t},_=(e,t)=>{e&&t&&(t.querySelectorAll(".article-highlight").forEach(e=>{let t=e.parentNode;if(t){let n=document.createTextNode(e.textContent||"");t.replaceChild(n,e),t.normalize()}}),e.forEach(e=>{let n=((e,n,r)=>{let i,l=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,null),o=(n+e+r).trim();for(;i=l.nextNode();){let t=(i.textContent||"").indexOf(o);if(-1!==t){let r=document.createRange(),l=n.trim().length;return r.setStart(i,t+l),r.setEnd(i,t+l+e.trim().length),r}}return null})(e.text,e.prefix,e.suffix);if(n)try{let t=document.createElement("mark");t.className="article-highlight",t.dataset.highlightId=e.id,n.surroundContents(t)}catch(e){console.error("Error applying highlight:",e)}}))},p=({articleId:e,children:t,onShare:n})=>{let[l,o]=(0,i.useState)(null),{highlights:a,saveHighlight:s,removeHighlight:c,highlightElement:d}=h(),[m,p]=(0,i.useState)(null),[x,f]=(0,i.useState)(!1),[v,y]=(0,i.useState)(""),[j,C]=(0,i.useState)(!1),[w,N]=(0,i.useState)(""),[k,A]=(0,i.useState)(null),[b,S]=(0,i.useState)(!1),[P,L]=(0,i.useState)(!1),[E,M]=(0,i.useState)({top:0,left:0}),I=(0,i.useCallback)(()=>{L(!0),setTimeout(()=>{S(!1),L(!1)},150)},[]),T=(0,i.useCallback)(()=>{if(b)return;let e=window.getSelection();e&&!e.isCollapsed&&""!==e.toString().trim()?o(e):o(null)},[b]),B=(0,i.useCallback)((t,n)=>{if(t&&n){let r=u(window.getSelection());s(t.trim(),r.prefix,r.suffix,e),d(n)}},[e,s,d]),D=(0,i.useCallback)(e=>{let t=e.target;if(t.classList.contains("article-highlight")){e.preventDefault(),e.stopPropagation();let n=t.dataset.highlightId,r=t.textContent||"";if(n){L(!1),A({id:n,text:r});let e=t.getBoundingClientRect();M({top:e.top-40+window.scrollY,left:e.left+e.width/2}),S(!0),o(null)}}else b&&(I(),A(null))},[b,I]),H=(0,i.useCallback)(()=>{if(k&&k.id){I();let e=k.id;if(A(null),c(e),m){let t=m.querySelector(`[data-highlight-id="${e}"]`);if(t&&t.parentNode){let e=document.createTextNode(t.textContent||"");t.parentNode.replaceChild(e,t),t.parentNode.normalize()}}}},[k,c,m,I]),$=(0,i.useCallback)(e=>{y(e),f(!0)},[]),R=(0,i.useCallback)(e=>{if(n)n(e);else{let t=`"${e}" — via Journalite`;navigator.share?navigator.share({text:t}).catch(e=>{console.error("Error sharing:",e),navigator.clipboard.writeText(t).then(()=>alert("Quote copied to clipboard!")).catch(e=>console.error("Failed to copy:",e))}):navigator.clipboard.writeText(t).then(()=>alert("Quote copied to clipboard!")).catch(e=>console.error("Failed to copy:",e))}},[n]),U=(0,i.useCallback)(e=>{N(e),C(!0)},[]);(0,i.useEffect)(()=>(document.addEventListener("selectionchange",T),()=>{document.removeEventListener("selectionchange",T)}),[T]),(0,i.useEffect)(()=>{if(m)return m.addEventListener("click",D),()=>{m.removeEventListener("click",D)}},[m,D]),(0,i.useEffect)(()=>{let e=e=>{if(b){let t=e.target;t.closest(".highlight-toolbar")||t.classList.contains("article-highlight")||(I(),A(null))}};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[b,I]),(0,i.useEffect)(()=>{m&&a.length>0&&_(a,m)},[a,m]);let F=(0,i.useCallback)(e=>{e&&p(e)},[]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g,{selection:l,onHighlight:B,onResponse:$,onShare:R,onAiAssist:U}),b&&k&&(0,r.jsxs)("div",{className:`highlight-toolbar unhighlight-toolbar ${P?"hiding":""}`,style:{position:"absolute",top:`${E.top}px`,left:`${E.left}px`,transform:P?"translateY(-10px) translateX(-50%)":"translateX(-50%)",zIndex:1e3},children:[(0,r.jsxs)("button",{onClick:H,className:"highlight-btn highlight-btn-danger",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M21 4H8l-7 8 7 8h13a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"}),(0,r.jsx)("line",{x1:"18",y1:"9",x2:"12",y2:"15"}),(0,r.jsx)("line",{x1:"12",y1:"9",x2:"18",y2:"15"})]}),(0,r.jsx)("span",{children:"Unhighlight"})]}),(0,r.jsxs)("button",{onClick:()=>{R(k.text),I()},className:"highlight-btn",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("circle",{cx:"18",cy:"5",r:"3"}),(0,r.jsx)("circle",{cx:"6",cy:"12",r:"3"}),(0,r.jsx)("circle",{cx:"18",cy:"19",r:"3"}),(0,r.jsx)("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),(0,r.jsx)("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),(0,r.jsx)("span",{children:"Share"})]}),(0,r.jsxs)("button",{onClick:()=>{$(k.text),I()},className:"highlight-btn",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"})}),(0,r.jsx)("span",{children:"Response"})]})]}),(0,r.jsx)("div",{ref:F,className:"article-highlight-container",children:t}),x&&(0,r.jsx)("div",{className:"highlight-response-modal",children:(0,r.jsxs)("div",{className:"highlight-modal-content",children:[(0,r.jsx)("button",{className:"highlight-modal-close",onClick:()=>f(!1),children:"\xd7"}),(0,r.jsx)("h3",{children:"Respond to highlighted text"}),(0,r.jsxs)("div",{className:"highlight-selected-text",children:['"',v,'"']}),(0,r.jsx)("textarea",{className:"highlight-response-input",placeholder:"Write your response..."}),(0,r.jsx)("button",{className:"highlight-response-submit",children:"Submit"})]})}),j&&(0,r.jsx)("div",{className:"highlight-ai-modal",children:(0,r.jsxs)("div",{className:"highlight-modal-content",children:[(0,r.jsx)("button",{className:"highlight-modal-close",onClick:()=>C(!1),children:"\xd7"}),(0,r.jsx)("h3",{children:"Journa AI"}),(0,r.jsxs)("div",{className:"highlight-selected-text",children:['"',w,'"']}),(0,r.jsxs)("div",{className:"highlight-ai-options",children:[(0,r.jsx)("button",{children:"Explain this"}),(0,r.jsx)("button",{children:"Fact check"}),(0,r.jsx)("button",{children:"Provide context"}),(0,r.jsx)("button",{children:"Summarize"})]}),(0,r.jsx)("div",{className:"highlight-ai-response",children:(0,r.jsx)("div",{className:"highlight-ai-loading",children:"Journa AI is thinking..."})})]})})]})};var x=n(34738),f=n.n(x),v=n(79440);let y=({articleId:e,initialHtml:t})=>{let[n,l]=(0,i.useState)(null),[o,a]=(0,i.useState)(!t),[s,c]=(0,i.useState)(""),d=(0,i.useRef)(null);return((0,i.useEffect)(()=>{t||n||(async()=>{try{a(!0);let t=await (0,v.zE)(e);if(!t)return void c("Article not found");let n=t.body.replace(/<div[^>]*>Content is loaded from HTML<\/div>/g,"").replace(/<h1[^>]*>Untitled Article<\/h1>/g,"");l({title:t.title,body:n})}catch(e){console.error("Error loading article:",e),c("Failed to load article")}finally{a(!1)}})()},[e,n,t]),o)?(0,r.jsxs)("div",{className:f().loadingContainer,children:[(0,r.jsx)("div",{className:f().loadingIndicator}),(0,r.jsx)("p",{children:"Loading article..."})]}):s?(0,r.jsx)("div",{className:f().errorContainer,children:(0,r.jsx)("p",{className:f().errorMessage,children:s})}):(0,r.jsx)(m,{articleId:e,children:(0,r.jsx)("article",{className:f().articleContainer,children:(0,r.jsx)(p,{articleId:e,onShare:t=>{if(navigator.share)navigator.share({title:n?.title||"Shared highlight",text:`"${t}" - from article ${e}`,url:window.location.href}).catch(e=>console.error("Error sharing:",e));else{let n=`"${t}" - from article ${e} ${window.location.href}`;navigator.clipboard.writeText(n).then(()=>alert("Highlight copied to clipboard!")).catch(e=>console.error("Error copying to clipboard:",e))}},children:(0,r.jsx)("div",{className:f().articleContent,ref:d,dangerouslySetInnerHTML:{__html:t?t.replace(/<div[^>]*>Content is loaded from HTML<\/div>/g,"").replace(/<h1[^>]*>Untitled Article<\/h1>/g,""):n?.body||""}})})})})}},78335:()=>{},89404:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var r=n(60687),i=n(43210),l=n(85814),o=n.n(l),a=n(43649),s=n(84245),c=n(79440),d=n(6248),m=n.n(d);let h=({slug:e,articleId:t,isComplex:n})=>{let[l,d]=(0,i.useState)([]),[h,g]=(0,i.useState)(!0),[u,_]=(0,i.useState)(""),[p,x]=(0,i.useState)(""),[f,v]=(0,i.useState)(!1),[y,j]=(0,i.useState)(!1),[C,w]=(0,i.useState)(null),[N,k]=(0,i.useState)(""),[A,b]=(0,i.useState)(!1),[S,P]=(0,i.useState)({}),[L,E]=(0,i.useState)(!1),[M,I]=(0,i.useState)(!1),[T,B]=(0,i.useState)(t||null),[D,H]=(0,i.useState)({id:"",name:"Reader"});(0,i.useEffect)(()=>{let e=(0,s.hg)(a.j2,e=>{let t=!!e;E(t),t&&e?H({id:e.uid,name:e.displayName||e.email?.split("@")[0]||"User"}):H({id:"",name:"Reader"})});return()=>e()},[]),(0,i.useEffect)(()=>{if(t)return void B(t);e&&(async()=>{try{let t=await (0,c.l6)(e);t&&t.id&&B(t.id)}catch(e){console.error("Error fetching article:",e),_("Unable to load article details.")}})()},[e,t]),(0,i.useEffect)(()=>{T&&(g(!0),(async()=>{try{let e=await (0,c.fz)(T);setTimeout(()=>{d(e),g(!1)},800)}catch(e){console.error("Error fetching comments:",e),_("Unable to load discussions. Please refresh the page to try again."),g(!1)}})())},[T]);let $=async e=>{if(e.preventDefault(),p.trim()&&!f&&T){if(!L)return void I(!0);try{v(!0);let e=await (0,c.BC)(T,p);d(t=>[e,...t]),x(""),v(!1),j(!1)}catch(e){console.error("Error adding comment:",e),_("Your response could not be posted. Please try again."),v(!1)}}},R=async e=>{if(N.trim()&&!A&&T){if(!L)return void I(!0);try{b(!0);let t=await (0,c.Oe)(T,e,N);d(n=>n.map(n=>n.commentId===e||n.id===e?{...n,replies:[...n.replies||[],t]}:n)),k(""),w(null),b(!1),P(t=>({...t,[e]:!0}))}catch(e){console.error("Error adding reply:",e),b(!1)}}},U=async e=>{if(!L||!T)return void I(!0);try{let t=await (0,c.tT)(T,e);d(n=>n.map(n=>n.commentId===e||n.id===e?{...n,likes:t.likes}:n))}catch(e){console.error("Error liking comment:",e)}},F=async e=>{if(L&&T)try{await (0,c.Tu)(T,e),d(t=>t.filter(t=>t.commentId!==e&&t.id!==e))}catch(e){console.error("Error deleting comment:",e)}},W=e=>{P(t=>({...t,[e]:!t[e]}))},z=e=>{if(!e)return"Unknown date";let t=e.toDate?e.toDate():new Date(e),n=Math.floor((new Date().getTime()-t.getTime())/1e3);if(n<60)return"Just now";if(n<3600){let e=Math.floor(n/60);return`${e} ${1===e?"minute":"minutes"} ago`}if(n<86400){let e=Math.floor(n/3600);return`${e} ${1===e?"hour":"hours"} ago`}if(n<604800){let e=Math.floor(n/86400);return`${e} ${1===e?"day":"days"} ago`}try{return t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",timeZone:"UTC"})}catch(e){return console.error("Error formatting date:",e),"Unknown date"}},O=(e,t,n=!1)=>{let i=e?.charAt(0).toUpperCase()||"A",l=["#4f46e5","#0ea5e9","#10b981","#f59e0b","#ef4444"],o=t?Math.abs(t.charCodeAt(0)%l.length):0,a=l[o];return(0,r.jsx)("div",{className:n?m().replyAvatar:m().commentAvatar,style:{backgroundColor:a,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:n?"0.9rem":"1.2rem"},children:i})};return(0,r.jsxs)("section",{className:m().commentSection,children:[(0,r.jsx)("h2",{className:m().commentSectionTitle,children:"Join the Discussion"}),u&&(0,r.jsxs)("div",{className:m().commentError,children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,r.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),(0,r.jsx)("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),u]}),(0,r.jsx)("form",{className:m().commentForm,onSubmit:$,children:(0,r.jsx)("div",{className:m().commentInputContainer,style:{opacity:y?1:.85},children:L?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:m().commentAvatar,children:O(D.name,D.id)}),(0,r.jsx)("textarea",{className:m().commentInput,placeholder:"Share your thoughts...",value:p,onChange:e=>x(e.target.value),onFocus:()=>j(!0),onBlur:()=>{p.trim()||j(!1)}}),(0,r.jsx)("button",{className:m().commentSubmit,type:"submit",disabled:!p.trim()||f,children:f?"Posting...":"Post"})]}):(0,r.jsxs)("div",{className:m().loginPromptContainer,onClick:()=>I(!0),children:[(0,r.jsx)("textarea",{className:m().commentInput,placeholder:"Login to join the discussion...",disabled:!0}),(0,r.jsx)("button",{className:`${m().commentSubmit} ${m().loginButton}`,type:"button",onClick:()=>I(!0),children:"Login to comment"})]})})}),M&&(0,r.jsx)("div",{className:m().loginModalOverlay,onClick:()=>I(!1),children:(0,r.jsxs)("div",{className:m().loginModal,onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("button",{className:m().loginModalClose,onClick:()=>I(!1),children:"\xd7"}),(0,r.jsx)("h3",{className:m().loginModalTitle,children:"Join the conversation"}),(0,r.jsx)("p",{className:m().loginModalText,children:"Sign in to Journalite to share your thoughts and join the discussion."}),(0,r.jsxs)("div",{className:m().loginModalButtons,children:[(0,r.jsx)(o(),{href:"/login",className:`${m().loginModalButton} ${m().primary}`,children:"Log In"}),(0,r.jsx)(o(),{href:"/register",className:`${m().loginModalButton} ${m().secondary}`,children:"Create Account"})]})]})}),h?(0,r.jsxs)("div",{className:m().commentLoading,children:[(0,r.jsx)("p",{children:"Loading comments..."}),(0,r.jsxs)("div",{className:m().loadingDots,children:[(0,r.jsx)("div",{className:m().loadingDot}),(0,r.jsx)("div",{className:m().loadingDot}),(0,r.jsx)("div",{className:m().loadingDot})]})]}):0===l.length?(0,r.jsx)("div",{className:m().noComments,children:"Be the first to share your thoughts on this article."}):(0,r.jsx)("div",{className:m().commentsList,children:l.map(e=>{let t=e.commentId||e.id||"";return(0,r.jsxs)("div",{className:m().commentItem,children:[(0,r.jsxs)("div",{className:m().commentHeader,children:[O(e.userName,e.userId),(0,r.jsx)("span",{className:m().commentUser,children:e.userName}),(0,r.jsx)("span",{className:m().commentDate,children:z(e.createdAt)})]}),(0,r.jsx)("div",{className:m().commentContent,children:e.content}),(0,r.jsxs)("div",{className:m().commentActions,children:[(0,r.jsxs)("button",{className:`${m().commentLikeBtn} ${e.likes.includes(D.id)?m().liked:""}`,onClick:()=>U(t),"aria-pressed":e.likes.includes(D.id),"aria-label":e.likes.includes(D.id)?"Unlike comment":"Like comment",children:[e.likes.includes(D.id)?(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:(0,r.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}):(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-4 h-4",children:(0,r.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"})}),(0,r.jsx)("span",{children:e.likes.length>0?e.likes.length:""})]}),(0,r.jsxs)("button",{className:m().replyToggle,onClick:()=>{L?w(C===t?null:t):I(!0)},"aria-label":"Reply to comment",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-4 h-4",children:(0,r.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"})}),(0,r.jsx)("span",{children:"Reply"})]}),e.userId===D.id&&(0,r.jsxs)("button",{className:m().commentDeleteBtn,onClick:()=>F(t),"aria-label":"Delete comment",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-4 h-4",children:(0,r.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12.56 0c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09.996-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),(0,r.jsx)("span",{children:"Delete"})]})]}),e.replies&&e.replies.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("button",{className:m().repliesToggle,onClick:()=>W(t),children:[(0,r.jsx)("span",{className:`${m().repliesToggleIcon} ${S[t]?m().open:""}`,children:"▷"}),`${e.replies.length} ${1===e.replies.length?"reply":"replies"}`]}),S[t]&&(0,r.jsx)("div",{className:m().replySection,children:e.replies.map(e=>(0,r.jsxs)("div",{className:m().replyItem,children:[(0,r.jsxs)("div",{className:m().replyHeader,children:[O(e.userName,e.userId,!0),(0,r.jsx)("span",{className:m().replyUser,children:e.userName}),(0,r.jsx)("span",{className:m().replyDate,children:z(e.createdAt)})]}),(0,r.jsx)("div",{className:m().replyContent,children:e.content})]},e.replyId))})]}),C===t&&(0,r.jsxs)("div",{className:`${m().replyForm} ${e.replies&&e.replies.length>0?m().inThread:""}`,children:[(0,r.jsx)("textarea",{className:m().replyInput,placeholder:"Write a reply...",value:N,onChange:e=>k(e.target.value)}),(0,r.jsxs)("div",{className:m().replyButtons,children:[(0,r.jsx)("button",{className:m().replyCancel,onClick:()=>{w(null),k("")},children:"Cancel"}),(0,r.jsx)("button",{className:m().replySubmit,disabled:!N.trim()||A,onClick:()=>R(t),children:A?"Posting...":"Post Reply"})]})]})]},t)})})]})}},96487:()=>{}};