"use strict";exports.id=275,exports.ids=[275],exports.modules={49048:(e,s,a)=>{a.d(s,{OQ:()=>l,VM:()=>c,Vz:()=>i,x5:()=>o});var n=a(75535),r=a(84245),t=a(43649);async function l(e){try{let s=(0,n.P)((0,n.rJ)(t.db,"users"),(0,n._M)("username","==",e.toLowerCase()));return!(await (0,n.GG)(s)).empty}catch(e){throw console.error("Error checking username:",e),e}}async function i(e,s){try{let a=await c(e);if(a){console.log("User profile already exists, updating instead of creating");let l=(0,n.H9)(t.db,"users",e);await (0,n.mZ)(l,{firstName:s.firstName,lastName:s.lastName,username:s.username.toLowerCase(),email:s.email.toLowerCase(),bio:s.bio||a.bio||""}),t.j2.currentUser&&await (0,r.r7)(t.j2.currentUser,{displayName:s.username});return}let i=(0,n.P)((0,n.rJ)(t.db,"users"),(0,n._M)("email","==",s.email.toLowerCase()));if(!(await (0,n.GG)(i)).empty)throw Error("Email is already associated with another account");if(await l(s.username))throw Error("Username is already taken");let o=(0,n.H9)(t.db,"users",e);await (0,n.BN)(o,{uid:e,firstName:s.firstName,lastName:s.lastName,username:s.username.toLowerCase(),email:s.email.toLowerCase(),bio:s.bio||"",createdAt:(0,n.O5)()}),t.j2.currentUser&&await (0,r.r7)(t.j2.currentUser,{displayName:s.username})}catch(e){throw console.error("Error creating user profile:",e),e}}async function c(e){try{let s=(0,n.H9)(t.db,"users",e),a=await (0,n.x7)(s);if(a.exists())return a.data();return null}catch(e){throw console.error("Error fetching user profile:",e),e}}async function o(e){try{if(!e||e.trim().length<2)return[];let s=e.toLowerCase().trim(),a=(0,n.rJ)(t.db,"users");return(await (0,n.GG)(a)).docs.map(e=>e.data()).filter(e=>{let a=e.username.toLowerCase(),n=e.firstName.toLowerCase(),r=e.lastName.toLowerCase(),t=`${n} ${r}`;return a.includes(s)||n.includes(s)||r.includes(s)||t.includes(s)})}catch(e){return console.error("Error searching users:",e),[]}}},89275:(e,s,a)=>{a.d(s,{A:()=>h});var n=a(60687),r=a(43210),t=a(85814),l=a.n(t),i=a(5062),c=a.n(i),o=a(49048);let m=()=>{let[e,s]=(0,r.useState)(""),[a,t]=(0,r.useState)([]),[i,m]=(0,r.useState)(!1),[d,h]=(0,r.useState)(!1),u=(0,r.useRef)(null),x=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let e=e=>{x.current&&!x.current.contains(e.target)&&u.current&&!u.current.contains(e.target)&&h(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,r.useEffect)(()=>{let s=setTimeout(async()=>{if(e.trim().length>=2){m(!0);try{let s=await (0,o.x5)(e);t(s),h(!0)}catch(e){console.error("Error searching users:",e)}finally{m(!1)}}else t([]),h(!1)},300);return()=>clearTimeout(s)},[e]),(0,n.jsxs)("div",{className:c().searchContainer,children:[(0,n.jsxs)("div",{className:c().searchInputWrapper,children:[(0,n.jsx)("input",{type:"text",ref:u,className:c().searchInput,placeholder:"Search users by name or username...",value:e,onChange:e=>{s(e.target.value)},onFocus:()=>{e.trim().length>=2&&a.length>0&&h(!0)}}),i&&(0,n.jsx)("div",{className:c().searchLoading,children:"Searching..."})]}),d&&a.length>0&&(0,n.jsx)("div",{ref:x,className:c().searchResults,children:a.map(e=>(0,n.jsxs)(l(),{href:`/user/${encodeURIComponent(e.username.toLowerCase())}`,className:c().searchResultItem,onClick:()=>h(!1),children:[(0,n.jsxs)("div",{className:c().userAvatar,children:[e.firstName.charAt(0),e.lastName.charAt(0)]}),(0,n.jsxs)("div",{className:c().userInfo,children:[(0,n.jsxs)("div",{className:c().userName,children:[e.firstName," ",e.lastName]}),(0,n.jsxs)("div",{className:c().userUsername,children:["@",e.username]})]})]},e.uid))}),d&&e.trim().length>=2&&0===a.length&&(0,n.jsx)("div",{className:c().searchResults,children:(0,n.jsxs)("div",{className:c().noResults,children:['No users found matching "',e,'"']})})]})},d=()=>(0,n.jsx)("div",{className:c().searchBarContainer,children:(0,n.jsx)(m,{})}),h=({isAuthenticated:e,handleLogout:s,toggleSidebar:a,isSidebarCollapsed:r})=>(0,n.jsxs)("aside",{className:`${c()["left-sidebar"]} ${r?c().collapsed:""}`,children:[(0,n.jsxs)("div",{className:c()["sidebar-header"],children:[(0,n.jsx)("div",{className:c().logo,children:"Journalite"}),(0,n.jsx)("button",{className:c()["toggle-button"],onClick:a,"aria-label":r?"Expand sidebar":"Collapse sidebar",children:r?"→":"←"})]}),(0,n.jsx)("div",{className:c().sidebarSearch,children:(0,n.jsx)(d,{})}),(0,n.jsx)("nav",{className:c()["vertical-nav"],children:e?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l(),{href:"/",className:`${c()["nav-link"]} ${c()["nav-home"]}`,children:[(0,n.jsx)("span",{className:c()["nav-icon"],children:"•"}),(0,n.jsx)("span",{className:c()["nav-text"],children:"Home"})]}),(0,n.jsxs)(l(),{href:"/my-thoughts",className:`${c()["nav-link"]} ${c()["nav-thoughts"]}`,children:[(0,n.jsx)("span",{className:c()["nav-icon"],children:"•"}),(0,n.jsx)("span",{className:c()["nav-text"],children:"My Thoughts"})]}),(0,n.jsxs)(l(),{href:"/create-article",className:`${c()["nav-link"]} ${c()["nav-create"]}`,children:[(0,n.jsx)("span",{className:c()["nav-icon"],children:"•"}),(0,n.jsx)("span",{className:c()["nav-text"],children:"Create Article"})]}),(0,n.jsxs)(l(),{href:"/explore",className:`${c()["nav-link"]} ${c()["nav-explore"]}`,children:[(0,n.jsx)("span",{className:c()["nav-icon"],children:"•"}),(0,n.jsx)("span",{className:c()["nav-text"],children:"Explore"})]}),(0,n.jsxs)(l(),{href:"/my-profile",className:`${c()["nav-link"]} ${c()["nav-profile"]}`,children:[(0,n.jsx)("span",{className:c()["nav-icon"],children:"•"}),(0,n.jsx)("span",{className:c()["nav-text"],children:"My Profile"})]}),(0,n.jsxs)(l(),{href:"/settings",className:`${c()["nav-link"]} ${c()["nav-settings"]}`,children:[(0,n.jsx)("span",{className:c()["nav-icon"],children:"•"}),(0,n.jsx)("span",{className:c()["nav-text"],children:"Settings"})]}),(0,n.jsxs)(l(),{href:"/notifications",className:`${c()["nav-link"]} ${c()["nav-notifications"]}`,children:[(0,n.jsx)("span",{className:c()["nav-icon"],children:"•"}),(0,n.jsx)("span",{className:c()["nav-text"],children:"Notifications"})]}),(0,n.jsxs)("button",{onClick:s,className:`${c()["nav-link"]} ${c()["nav-logout"]}`,children:[(0,n.jsx)("span",{className:c()["nav-icon"],children:"•"}),(0,n.jsx)("span",{className:c()["nav-text"],children:"Log out"})]})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l(),{href:"/",className:`${c()["nav-link"]} ${c()["nav-home"]}`,children:[(0,n.jsx)("span",{className:c()["nav-icon"],children:"•"}),(0,n.jsx)("span",{className:c()["nav-text"],children:"Home"})]}),(0,n.jsxs)(l(),{href:"/login",className:`${c()["nav-link"]} ${c()["nav-login"]}`,children:[(0,n.jsx)("span",{className:c()["nav-icon"],children:"•"}),(0,n.jsx)("span",{className:c()["nav-text"],children:"Login"})]}),(0,n.jsxs)(l(),{href:"/learn",className:`${c()["nav-link"]} ${c()["nav-learn"]}`,children:[(0,n.jsx)("span",{className:c()["nav-icon"],children:"•"}),(0,n.jsx)("span",{className:c()["nav-text"],children:"Learn More"})]}),(0,n.jsxs)(l(),{href:"/plans",className:`${c()["nav-link"]} ${c()["nav-plans"]}`,children:[(0,n.jsx)("span",{className:c()["nav-icon"],children:"•"}),(0,n.jsx)("span",{className:c()["nav-text"],children:"Plans"})]})]})})]})}};