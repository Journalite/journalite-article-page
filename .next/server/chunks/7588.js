"use strict";exports.id=7588,exports.ids=[7588],exports.modules={67588:(e,t,i)=>{i.d(t,{guardianService:()=>a});class r{constructor(){this.baseUrl="https://content.guardianapis.com",this.apiKey="c928b68e-9227-4e28-a734-63f37cbd301b",this.apiKey&&"YOUR_API_KEY_HERE"!==this.apiKey||console.warn("Guardian API key not configured. Please set NEXT_PUBLIC_GUARDIAN_API_KEY in your environment variables.")}async searchArticles(e="",t,i=1,r=10){if(!this.apiKey||"YOUR_API_KEY_HERE"===this.apiKey)throw Error("Guardian API key not configured");let a=new URLSearchParams({"api-key":this.apiKey,"show-fields":"headline,standfirst,body,main,thumbnail,byline,trailText,bodyText","show-tags":"contributor,keyword","show-elements":"image,video","page-size":r.toString(),page:i.toString(),"order-by":"newest"});e&&a.append("q",e),t&&a.append("section",t);let o=`${this.baseUrl}/search?${a.toString()}`,s=await fetch(o);if(!s.ok)throw Error(`HTTP error! status: ${s.status}`);return(await s.json()).response}async getArticleById(e){if(!this.apiKey||"YOUR_API_KEY_HERE"===this.apiKey)throw Error("Guardian API key not configured");let t=new URLSearchParams({"api-key":this.apiKey,"show-fields":"headline,standfirst,body,main,thumbnail,byline,trailText,bodyText","show-tags":"contributor,keyword","show-elements":"image,video"}),i=`${this.baseUrl}/${e}?${t.toString()}`,r=await fetch(i);if(!r.ok)throw Error(`HTTP error! status: ${r.status}`);return(await r.json()).response.content}async getSections(){if(!this.apiKey||"YOUR_API_KEY_HERE"===this.apiKey)throw Error("Guardian API key not configured");let e=`${this.baseUrl}/sections?api-key=${this.apiKey}`,t=await fetch(e);if(!t.ok)throw Error(`HTTP error! status: ${t.status}`);return(await t.json()).response.results}convertToArticleFormat(e){let t="";e.fields?.standfirst&&(t+=`<div class="article-standfirst" style="font-size: 1.2em; color: #666; font-weight: 400; line-height: 1.4; margin: 0 0 2em 0;">
        <strong>${e.fields.standfirst}</strong>
      </div>`);let i=e.fields?.body||e.fields?.bodyText||"";if(i&&(t+=i=(i=(i=(i=(i=i.replace(/<img([^>]*?)>/g,(e,t)=>`<img ${t} style="max-width: 100%; height: auto; margin: 2em auto; display: block; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);" />`)).replace(/<figure([^>]*?)>/g,(e,t)=>`<figure ${t} style="margin: 2em auto; text-align: center;">`)).replace(/<figcaption([^>]*?)>/g,(e,t)=>`<figcaption ${t} style="margin-top: 0.5em; font-size: 0.9em; color: #666; font-style: italic; text-align: center;">`)).replace(/<video([^>]*?)>/g,(e,t)=>`<video ${t} style="max-width: 100%; height: auto; margin: 2em auto; display: block; border-radius: 8px;" controls />`)).replace(/<p>\s*<\/p>/g,"")),!(t.includes("<img")||t.includes("<figure"))&&e.elements&&e.elements.length>0){let i=e.elements.find(e=>"image"===e.type&&e.assets&&e.assets.length>0);if(i){let r=i.assets.find(e=>"image"===e.type);if(r){let i=r.typeData.secureFile||r.file,a=r.typeData.alt||r.typeData.caption||e.webTitle,o=r.typeData.caption||"";t=`<figure style="margin: 0 0 2em 0; text-align: center;">
              <img src="${i}" alt="${a}" style="max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);" />
              ${o?`<figcaption style="margin-top: 0.5em; font-size: 0.9em; color: #666; font-style: italic;">${o}</figcaption>`:""}
            </figure>`+t}}}!e.fields?.main||t.includes("<img")||t.includes("<figure")||(t=`<figure style="margin: 0 0 2em 0; text-align: center;">
              <img src="${e.fields.main}" alt="${e.webTitle.replace(/"/g,"&quot;")}" style="max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);" />
            </figure>`+t),t+=`<div class="original-article-link" style="margin-top: 3em; padding: 1.5em; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-radius: 12px; border-left: 4px solid #0066cc; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
      <p style="margin: 0; color: #495057;"><em>ðŸ“° <strong>Read the complete article at:</strong> <a href="${e.webUrl}" target="_blank" rel="noopener noreferrer" style="color: #0066cc; font-weight: 600; text-decoration: none; border-bottom: 1px solid transparent; transition: border-bottom 0.2s ease;" onmouseover="this.style.borderBottom='1px solid #0066cc'" onmouseout="this.style.borderBottom='1px solid transparent'">The Guardian</a></em></p>
    </div>`;let r=e.fields?.byline||e.tags.find(e=>"contributor"===e.type)?.webTitle||"The Guardian",a=Math.ceil((e.fields?.body?e.fields.body.replace(/<[^>]*>/g,"").split(/\s+/).length:300)/200),o=[e.sectionName,e.pillarName,...e.tags.filter(e=>"keyword"===e.type).slice(0,3).map(e=>e.webTitle)].filter(Boolean);return{title:e.fields?.headline||e.webTitle,authorName:r,createdAt:(e=>{try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",timeZone:"UTC"})}catch(t){return console.error("Error formatting date:",t),e}})(e.webPublicationDate),readTime:a,tags:o,authorId:"guardian-api",hasReflectionRoom:!1,html:t}}isConfigured(){return!!(this.apiKey&&"YOUR_API_KEY_HERE"!==this.apiKey)}}let a=new r}};