{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/styles/home.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"active\": \"home-module__i0QXTG__active\",\n  \"activeTab\": \"home-module__i0QXTG__activeTab\",\n  \"adminAvatar\": \"home-module__i0QXTG__adminAvatar\",\n  \"alertInfo\": \"home-module__i0QXTG__alertInfo\",\n  \"alertSuccess\": \"home-module__i0QXTG__alertSuccess\",\n  \"alertWarning\": \"home-module__i0QXTG__alertWarning\",\n  \"article-card\": \"home-module__i0QXTG__article-card\",\n  \"article-container\": \"home-module__i0QXTG__article-container\",\n  \"article-content\": \"home-module__i0QXTG__article-content\",\n  \"article-cover-image\": \"home-module__i0QXTG__article-cover-image\",\n  \"article-excerpt\": \"home-module__i0QXTG__article-excerpt\",\n  \"article-grid\": \"home-module__i0QXTG__article-grid\",\n  \"article-header\": \"home-module__i0QXTG__article-header\",\n  \"article-image\": \"home-module__i0QXTG__article-image\",\n  \"article-meta\": \"home-module__i0QXTG__article-meta\",\n  \"article-page\": \"home-module__i0QXTG__article-page\",\n  \"article-paragraph\": \"home-module__i0QXTG__article-paragraph\",\n  \"article-tag\": \"home-module__i0QXTG__article-tag\",\n  \"article-tags\": \"home-module__i0QXTG__article-tags\",\n  \"article-title\": \"home-module__i0QXTG__article-title\",\n  \"articleForm\": \"home-module__i0QXTG__articleForm\",\n  \"articleFormContainer\": \"home-module__i0QXTG__articleFormContainer\",\n  \"articleFormHeader\": \"home-module__i0QXTG__articleFormHeader\",\n  \"articleFormSubtitle\": \"home-module__i0QXTG__articleFormSubtitle\",\n  \"articleFormTitle\": \"home-module__i0QXTG__articleFormTitle\",\n  \"author-avatar\": \"home-module__i0QXTG__author-avatar\",\n  \"author-info\": \"home-module__i0QXTG__author-info\",\n  \"author-name\": \"home-module__i0QXTG__author-name\",\n  \"avatarPlaceholder\": \"home-module__i0QXTG__avatarPlaceholder\",\n  \"back-link\": \"home-module__i0QXTG__back-link\",\n  \"backLink\": \"home-module__i0QXTG__backLink\",\n  \"backToAllButton\": \"home-module__i0QXTG__backToAllButton\",\n  \"cancelButton\": \"home-module__i0QXTG__cancelButton\",\n  \"cancelReplyButton\": \"home-module__i0QXTG__cancelReplyButton\",\n  \"center-column\": \"home-module__i0QXTG__center-column\",\n  \"clearSearchButton\": \"home-module__i0QXTG__clearSearchButton\",\n  \"closePromptButton\": \"home-module__i0QXTG__closePromptButton\",\n  \"codeBlock\": \"home-module__i0QXTG__codeBlock\",\n  \"codeBlockContainer\": \"home-module__i0QXTG__codeBlockContainer\",\n  \"codeContent\": \"home-module__i0QXTG__codeContent\",\n  \"codeLineNumbers\": \"home-module__i0QXTG__codeLineNumbers\",\n  \"collapsed\": \"home-module__i0QXTG__collapsed\",\n  \"comment\": \"home-module__i0QXTG__comment\",\n  \"commentActions\": \"home-module__i0QXTG__commentActions\",\n  \"commentAuthor\": \"home-module__i0QXTG__commentAuthor\",\n  \"commentAvatar\": \"home-module__i0QXTG__commentAvatar\",\n  \"commentContent\": \"home-module__i0QXTG__commentContent\",\n  \"commentControls\": \"home-module__i0QXTG__commentControls\",\n  \"commentDate\": \"home-module__i0QXTG__commentDate\",\n  \"commentForm\": \"home-module__i0QXTG__commentForm\",\n  \"commentHeader\": \"home-module__i0QXTG__commentHeader\",\n  \"commentInput\": \"home-module__i0QXTG__commentInput\",\n  \"commentInputContainer\": \"home-module__i0QXTG__commentInputContainer\",\n  \"commentInputWrapper\": \"home-module__i0QXTG__commentInputWrapper\",\n  \"commentItem\": \"home-module__i0QXTG__commentItem\",\n  \"commentMeta\": \"home-module__i0QXTG__commentMeta\",\n  \"commentsList\": \"home-module__i0QXTG__commentsList\",\n  \"container\": \"home-module__i0QXTG__container\",\n  \"copyButton\": \"home-module__i0QXTG__copyButton\",\n  \"cover-image\": \"home-module__i0QXTG__cover-image\",\n  \"cta-button\": \"home-module__i0QXTG__cta-button\",\n  \"deleteButton\": \"home-module__i0QXTG__deleteButton\",\n  \"developerAvatar\": \"home-module__i0QXTG__developerAvatar\",\n  \"discussionSection\": \"home-module__i0QXTG__discussionSection\",\n  \"discussionTitle\": \"home-module__i0QXTG__discussionTitle\",\n  \"docContent\": \"home-module__i0QXTG__docContent\",\n  \"docNav\": \"home-module__i0QXTG__docNav\",\n  \"docNavItem\": \"home-module__i0QXTG__docNavItem\",\n  \"docNavItemActive\": \"home-module__i0QXTG__docNavItemActive\",\n  \"docSearchContainer\": \"home-module__i0QXTG__docSearchContainer\",\n  \"docSearchInput\": \"home-module__i0QXTG__docSearchInput\",\n  \"docSidebar\": \"home-module__i0QXTG__docSidebar\",\n  \"docSubheading\": \"home-module__i0QXTG__docSubheading\",\n  \"docText\": \"home-module__i0QXTG__docText\",\n  \"docTitle\": \"home-module__i0QXTG__docTitle\",\n  \"docsContainer\": \"home-module__i0QXTG__docsContainer\",\n  \"documentationContainer\": \"home-module__i0QXTG__documentationContainer\",\n  \"edit-button\": \"home-module__i0QXTG__edit-button\",\n  \"emptyState\": \"home-module__i0QXTG__emptyState\",\n  \"errorAlert\": \"home-module__i0QXTG__errorAlert\",\n  \"errorIcon\": \"home-module__i0QXTG__errorIcon\",\n  \"errorMessage\": \"home-module__i0QXTG__errorMessage\",\n  \"expanded\": \"home-module__i0QXTG__expanded\",\n  \"fadeIn\": \"home-module__i0QXTG__fadeIn\",\n  \"feature-desc\": \"home-module__i0QXTG__feature-desc\",\n  \"feature-title\": \"home-module__i0QXTG__feature-title\",\n  \"featured-card\": \"home-module__i0QXTG__featured-card\",\n  \"featured-content\": \"home-module__i0QXTG__featured-content\",\n  \"featured-excerpt\": \"home-module__i0QXTG__featured-excerpt\",\n  \"featured-image\": \"home-module__i0QXTG__featured-image\",\n  \"featured-label\": \"home-module__i0QXTG__featured-label\",\n  \"featured-meta\": \"home-module__i0QXTG__featured-meta\",\n  \"featured-title\": \"home-module__i0QXTG__featured-title\",\n  \"features\": \"home-module__i0QXTG__features\",\n  \"follow-button\": \"home-module__i0QXTG__follow-button\",\n  \"footer\": \"home-module__i0QXTG__footer\",\n  \"formActions\": \"home-module__i0QXTG__formActions\",\n  \"formControl\": \"home-module__i0QXTG__formControl\",\n  \"formGroup\": \"home-module__i0QXTG__formGroup\",\n  \"formLabel\": \"home-module__i0QXTG__formLabel\",\n  \"formTextarea\": \"home-module__i0QXTG__formTextarea\",\n  \"function\": \"home-module__i0QXTG__function\",\n  \"header\": \"home-module__i0QXTG__header\",\n  \"hero\": \"home-module__i0QXTG__hero\",\n  \"hero-subtitle\": \"home-module__i0QXTG__hero-subtitle\",\n  \"hero-title\": \"home-module__i0QXTG__hero-title\",\n  \"highlight\": \"home-module__i0QXTG__highlight\",\n  \"imagePreview\": \"home-module__i0QXTG__imagePreview\",\n  \"keyword\": \"home-module__i0QXTG__keyword\",\n  \"left-sidebar\": \"home-module__i0QXTG__left-sidebar\",\n  \"likeButton\": \"home-module__i0QXTG__likeButton\",\n  \"liked\": \"home-module__i0QXTG__liked\",\n  \"loading\": \"home-module__i0QXTG__loading\",\n  \"loadingSpinner\": \"home-module__i0QXTG__loadingSpinner\",\n  \"loginButton\": \"home-module__i0QXTG__loginButton\",\n  \"loginLink\": \"home-module__i0QXTG__loginLink\",\n  \"loginPrompt\": \"home-module__i0QXTG__loginPrompt\",\n  \"loginPromptButtons\": \"home-module__i0QXTG__loginPromptButtons\",\n  \"logo\": \"home-module__i0QXTG__logo\",\n  \"main-grid\": \"home-module__i0QXTG__main-grid\",\n  \"menu-overlay\": \"home-module__i0QXTG__menu-overlay\",\n  \"nav-explore\": \"home-module__i0QXTG__nav-explore\",\n  \"nav-home\": \"home-module__i0QXTG__nav-home\",\n  \"nav-icon\": \"home-module__i0QXTG__nav-icon\",\n  \"nav-learn\": \"home-module__i0QXTG__nav-learn\",\n  \"nav-link\": \"home-module__i0QXTG__nav-link\",\n  \"nav-login\": \"home-module__i0QXTG__nav-login\",\n  \"nav-logout\": \"home-module__i0QXTG__nav-logout\",\n  \"nav-plans\": \"home-module__i0QXTG__nav-plans\",\n  \"nav-profile\": \"home-module__i0QXTG__nav-profile\",\n  \"nav-settings\": \"home-module__i0QXTG__nav-settings\",\n  \"nav-signup\": \"home-module__i0QXTG__nav-signup\",\n  \"nav-text\": \"home-module__i0QXTG__nav-text\",\n  \"nav-thoughts\": \"home-module__i0QXTG__nav-thoughts\",\n  \"no-results\": \"home-module__i0QXTG__no-results\",\n  \"noComments\": \"home-module__i0QXTG__noComments\",\n  \"noResults\": \"home-module__i0QXTG__noResults\",\n  \"number\": \"home-module__i0QXTG__number\",\n  \"operator\": \"home-module__i0QXTG__operator\",\n  \"optionalLabel\": \"home-module__i0QXTG__optionalLabel\",\n  \"profileAvatar\": \"home-module__i0QXTG__profileAvatar\",\n  \"profileBio\": \"home-module__i0QXTG__profileBio\",\n  \"profileContent\": \"home-module__i0QXTG__profileContent\",\n  \"profileHeader\": \"home-module__i0QXTG__profileHeader\",\n  \"profileInfo\": \"home-module__i0QXTG__profileInfo\",\n  \"profileName\": \"home-module__i0QXTG__profileName\",\n  \"profileUsername\": \"home-module__i0QXTG__profileUsername\",\n  \"prompt-banner\": \"home-module__i0QXTG__prompt-banner\",\n  \"prompt-button\": \"home-module__i0QXTG__prompt-button\",\n  \"prompt-icon\": \"home-module__i0QXTG__prompt-icon\",\n  \"prompt-text\": \"home-module__i0QXTG__prompt-text\",\n  \"quote-card\": \"home-module__i0QXTG__quote-card\",\n  \"quote-tag\": \"home-module__i0QXTG__quote-tag\",\n  \"reaction-bar\": \"home-module__i0QXTG__reaction-bar\",\n  \"reaction-button\": \"home-module__i0QXTG__reaction-button\",\n  \"reaction-icon\": \"home-module__i0QXTG__reaction-icon\",\n  \"read-link\": \"home-module__i0QXTG__read-link\",\n  \"repliesList\": \"home-module__i0QXTG__repliesList\",\n  \"replyActions\": \"home-module__i0QXTG__replyActions\",\n  \"replyAuthor\": \"home-module__i0QXTG__replyAuthor\",\n  \"replyAvatar\": \"home-module__i0QXTG__replyAvatar\",\n  \"replyButton\": \"home-module__i0QXTG__replyButton\",\n  \"replyContent\": \"home-module__i0QXTG__replyContent\",\n  \"replyDate\": \"home-module__i0QXTG__replyDate\",\n  \"replyForm\": \"home-module__i0QXTG__replyForm\",\n  \"replyHeader\": \"home-module__i0QXTG__replyHeader\",\n  \"replyInput\": \"home-module__i0QXTG__replyInput\",\n  \"replyInputContainer\": \"home-module__i0QXTG__replyInputContainer\",\n  \"replyItem\": \"home-module__i0QXTG__replyItem\",\n  \"replyMeta\": \"home-module__i0QXTG__replyMeta\",\n  \"right-sidebar\": \"home-module__i0QXTG__right-sidebar\",\n  \"roleSelect\": \"home-module__i0QXTG__roleSelect\",\n  \"roleTag\": \"home-module__i0QXTG__roleTag\",\n  \"searchBarContainer\": \"home-module__i0QXTG__searchBarContainer\",\n  \"searchContainer\": \"home-module__i0QXTG__searchContainer\",\n  \"searchInput\": \"home-module__i0QXTG__searchInput\",\n  \"searchInputWrapper\": \"home-module__i0QXTG__searchInputWrapper\",\n  \"searchResultAvatar\": \"home-module__i0QXTG__searchResultAvatar\",\n  \"searchResultInfo\": \"home-module__i0QXTG__searchResultInfo\",\n  \"searchResultItem\": \"home-module__i0QXTG__searchResultItem\",\n  \"searchResultName\": \"home-module__i0QXTG__searchResultName\",\n  \"searchResultRole\": \"home-module__i0QXTG__searchResultRole\",\n  \"searchResultRoleAdmin\": \"home-module__i0QXTG__searchResultRoleAdmin\",\n  \"searchResultRoleDeveloper\": \"home-module__i0QXTG__searchResultRoleDeveloper\",\n  \"searchResultRoleUser\": \"home-module__i0QXTG__searchResultRoleUser\",\n  \"searchResultUsername\": \"home-module__i0QXTG__searchResultUsername\",\n  \"searchResults\": \"home-module__i0QXTG__searchResults\",\n  \"searchResultsContainer\": \"home-module__i0QXTG__searchResultsContainer\",\n  \"searchResultsTitle\": \"home-module__i0QXTG__searchResultsTitle\",\n  \"section-title\": \"home-module__i0QXTG__section-title\",\n  \"sectionHeading\": \"home-module__i0QXTG__sectionHeading\",\n  \"sectionTitle\": \"home-module__i0QXTG__sectionTitle\",\n  \"sidebar-collapse-button\": \"home-module__i0QXTG__sidebar-collapse-button\",\n  \"sidebar-footer\": \"home-module__i0QXTG__sidebar-footer\",\n  \"sidebar-header\": \"home-module__i0QXTG__sidebar-header\",\n  \"sidebar-heading\": \"home-module__i0QXTG__sidebar-heading\",\n  \"sidebarSearch\": \"home-module__i0QXTG__sidebarSearch\",\n  \"sidebarSection\": \"home-module__i0QXTG__sidebarSection\",\n  \"spin\": \"home-module__i0QXTG__spin\",\n  \"statBox\": \"home-module__i0QXTG__statBox\",\n  \"statLabel\": \"home-module__i0QXTG__statLabel\",\n  \"statNumber\": \"home-module__i0QXTG__statNumber\",\n  \"statsContainer\": \"home-module__i0QXTG__statsContainer\",\n  \"string\": \"home-module__i0QXTG__string\",\n  \"submitButton\": \"home-module__i0QXTG__submitButton\",\n  \"submitReplyButton\": \"home-module__i0QXTG__submitReplyButton\",\n  \"tabButton\": \"home-module__i0QXTG__tabButton\",\n  \"tabContainer\": \"home-module__i0QXTG__tabContainer\",\n  \"tag\": \"home-module__i0QXTG__tag\",\n  \"tag-description\": \"home-module__i0QXTG__tag-description\",\n  \"tag-header\": \"home-module__i0QXTG__tag-header\",\n  \"tag-list\": \"home-module__i0QXTG__tag-list\",\n  \"tagsPreview\": \"home-module__i0QXTG__tagsPreview\",\n  \"three-column-layout\": \"home-module__i0QXTG__three-column-layout\",\n  \"toggle-button\": \"home-module__i0QXTG__toggle-button\",\n  \"toggleRepliesButton\": \"home-module__i0QXTG__toggleRepliesButton\",\n  \"topic-tag\": \"home-module__i0QXTG__topic-tag\",\n  \"topics\": \"home-module__i0QXTG__topics\",\n  \"trending-list\": \"home-module__i0QXTG__trending-list\",\n  \"trending-tag\": \"home-module__i0QXTG__trending-tag\",\n  \"type\": \"home-module__i0QXTG__type\",\n  \"userAvatar\": \"home-module__i0QXTG__userAvatar\",\n  \"userManagementContainer\": \"home-module__i0QXTG__userManagementContainer\",\n  \"userTableCell\": \"home-module__i0QXTG__userTableCell\",\n  \"usersTable\": \"home-module__i0QXTG__usersTable\",\n  \"usersTableContainer\": \"home-module__i0QXTG__usersTableContainer\",\n  \"variable\": \"home-module__i0QXTG__variable\",\n  \"vertical-nav\": \"home-module__i0QXTG__vertical-nav\",\n  \"write-button\": \"home-module__i0QXTG__write-button\",\n  \"writer-avatar\": \"home-module__i0QXTG__writer-avatar\",\n  \"writer-info\": \"home-module__i0QXTG__writer-info\",\n  \"writer-item\": \"home-module__i0QXTG__writer-item\",\n  \"writer-name\": \"home-module__i0QXTG__writer-name\",\n  \"writers\": \"home-module__i0QXTG__writers\",\n  \"writing-tip\": \"home-module__i0QXTG__writing-tip\",\n  \"writing-tips\": \"home-module__i0QXTG__writing-tips\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 370, "column": 0}, "map": {"version":3,"sources":["file:///Users/sirabdisalam/journalite-article-page/src/firebase/clientApp.ts"],"sourcesContent":["// Import the functions you need from the SDKs you need\nimport { initializeApp } from \"firebase/app\";\nimport { getAnalytics } from \"firebase/analytics\";\nimport { getAuth, connectAuthEmulator } from \"firebase/auth\";\nimport { getFirestore } from \"firebase/firestore\";\n// TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\n\n// Firebase configuration from environment variables\nconst firebaseConfig = {\n    apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n    authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n    projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n    storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n    messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n    appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n    measurementId: process.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID\n};\n///\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\n\n// Initialize Analytics only in browser environment\nlet analytics;\nif (typeof window !== 'undefined') {\n    try {\n        analytics = getAnalytics(app);\n    } catch (error) {\n        // Analytics initialization skipped in development\n    }\n}\n\n// Initialize Firebase Authentication\nconst auth = getAuth(app);\n\n// Initialize Firestore\nconst db = getFirestore(app);\n\n// Configure custom auth actions URL\nif (typeof window !== 'undefined') {\n    const actionCodeSettings = {\n        url: `${window.location.origin}/reset-password`,\n        handleCodeInApp: true,\n    };\n\n    // We need to update this in the forgot-password component when sending the reset email\n}\n\n// // Connect to Auth Emulator in development\n// if (process.env.NODE_ENV === 'development') {\n//     // connectAuthEmulator(auth, \"http://localhost:9099\", { disableWarnings: true });\n// }\n\n/////\n\nexport { app, analytics, auth, db };"],"names":[],"mappings":"AAAA,uDAAuD;;;;;;;AACvD;AAAA;AACA;AACA;AAAA;AACA;AAAA;;;;;AACA,4DAA4D;AAC5D,iEAAiE;AAEjE,oDAAoD;AACpD,MAAM,iBAAiB;IACnB,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;IACL,aAAa;AACjB;AACA,GAAG;AAEH,sBAAsB;AACtB,MAAM,MAAM,CAAA,GAAA,oLAAA,CAAA,gBAAa,AAAD,EAAE;AAE1B,mDAAmD;AACnD,IAAI;AACJ,uCAAmC;;AAMnC;AAEA,qCAAqC;AACrC,MAAM,OAAO,CAAA,GAAA,6MAAA,CAAA,UAAO,AAAD,EAAE;AAErB,uBAAuB;AACvB,MAAM,KAAK,CAAA,GAAA,iKAAA,CAAA,eAAY,AAAD,EAAE;AAExB,oCAAoC;AACpC,uCAAmC;;AAM/B,uFAAuF;AAC3F","debugId":null}},
    {"offset": {"line": 424, "column": 0}, "map": {"version":3,"sources":["file:///Users/sirabdisalam/journalite-article-page/src/firebase/notifications.ts"],"sourcesContent":["import {\n    collection,\n    addDoc,\n    getDocs,\n    getDoc,\n    doc,\n    query,\n    orderBy,\n    Timestamp,\n    where,\n    updateDoc,\n    deleteDoc,\n    limit\n} from 'firebase/firestore';\nimport { db, auth } from './clientApp';\n\n// Notification interface matching Firestore structure\nexport interface Notification {\n    id?: string;\n    userId: string;\n    type: 'comment' | 'reply' | 'like' | 'follow';\n    read: boolean;\n    sourceId: string; // ID of the article/comment\n    sourceType: 'article' | 'comment' | 'user';\n    message: string;\n    fromUser: {\n        id: string;\n        name: string;\n        username?: string; // Add username field for profile links\n    };\n    createdAt: Timestamp;\n    articleSlug?: string; // Optional slug to link directly to the article\n    articleTitle?: string; // Optional article title for context\n}\n\n/**\n * Create a new notification when someone comments on a user's post\n */\nexport async function createCommentNotification(\n    ownerId: string,\n    articleId: string,\n    articleSlug: string,\n    articleTitle: string,\n    commentId: string,\n    commentText: string\n) {\n    try {\n        // Skip if the owner is the commenter (don't notify yourself)\n        const currentUser = auth.currentUser;\n        if (!currentUser || currentUser.uid === ownerId) {\n            return null;\n        }\n\n        // Create notification object\n        const notification: Omit<Notification, 'id'> = {\n            userId: ownerId, // Who will receive the notification\n            type: 'comment',\n            read: false,\n            sourceId: commentId,\n            sourceType: 'comment',\n            message: `${currentUser.displayName || 'Someone'} commented on your article: \"${commentText.substring(0, 50)}${commentText.length > 50 ? '...' : ''}\"`,\n            fromUser: {\n                id: currentUser.uid,\n                name: currentUser.displayName || 'Anonymous'\n            },\n            createdAt: Timestamp.now(),\n            articleSlug,\n            articleTitle\n        };\n\n        // Add to Firestore\n        const docRef = await addDoc(collection(db, 'notifications'), notification);\n\n        return {\n            id: docRef.id,\n            ...notification\n        };\n    } catch (error) {\n        console.error('Error creating notification:', error);\n        return null;\n    }\n}\n\n/**\n * Create a new notification when someone follows a user\n */\nexport async function createFollowNotification(\n    targetUserId: string,\n    followerName: string,\n    followerId: string,\n    followerUsername: string\n) {\n    try {\n        // Skip if user is following themselves (shouldn't happen due to checks in followUser)\n        if (targetUserId === followerId) {\n            return null;\n        }\n\n        // Create notification object\n        const notification: Omit<Notification, 'id'> = {\n            userId: targetUserId, // Who will receive the notification\n            type: 'follow',\n            read: false,\n            sourceId: followerId,\n            sourceType: 'user',\n            message: `${followerName} (@${followerUsername}) started following you`,\n            fromUser: {\n                id: followerId,\n                name: followerName,\n                username: followerUsername\n            },\n            createdAt: Timestamp.now()\n        };\n\n        // Add to Firestore\n        const docRef = await addDoc(collection(db, 'notifications'), notification);\n\n        return {\n            id: docRef.id,\n            ...notification\n        };\n    } catch (error) {\n        console.error('Error creating follow notification:', error);\n        return null;\n    }\n}\n\n/**\n * Get all notifications for the current user\n */\nexport async function getUserNotifications(unreadOnly = false) {\n    try {\n        const currentUser = auth.currentUser;\n        if (!currentUser) {\n            throw new Error('User not authenticated');\n        }\n\n        // Create base query\n        const notificationsRef = collection(db, 'notifications');\n        let q;\n\n        if (unreadOnly) {\n            // Only fetch unread notifications\n            q = query(\n                notificationsRef,\n                where('userId', '==', currentUser.uid),\n                where('read', '==', false),\n                orderBy('createdAt', 'desc'),\n                limit(100)\n            );\n        } else {\n            // Fetch all notifications\n            q = query(\n                notificationsRef,\n                where('userId', '==', currentUser.uid),\n                orderBy('createdAt', 'desc'),\n                limit(100)\n            );\n        }\n\n        const querySnapshot = await getDocs(q);\n\n        const notifications: Notification[] = [];\n        querySnapshot.forEach((doc) => {\n            notifications.push({\n                id: doc.id,\n                ...doc.data() as Omit<Notification, 'id'>\n            });\n        });\n\n        return notifications;\n    } catch (error) {\n        console.error('Error fetching notifications:', error);\n        throw error;\n    }\n}\n\n/**\n * Mark a notification as read\n */\nexport async function markNotificationAsRead(notificationId: string) {\n    try {\n        const currentUser = auth.currentUser;\n        if (!currentUser) {\n            throw new Error('User not authenticated');\n        }\n\n        const notificationRef = doc(db, 'notifications', notificationId);\n        const notificationSnap = await getDoc(notificationRef);\n\n        if (!notificationSnap.exists()) {\n            throw new Error('Notification not found');\n        }\n\n        const notificationData = notificationSnap.data() as Notification;\n\n        // Check if the notification belongs to the current user\n        if (notificationData.userId !== currentUser.uid) {\n            throw new Error('Unauthorized access to notification');\n        }\n\n        // Update the read status\n        await updateDoc(notificationRef, {\n            read: true\n        });\n\n        return {\n            success: true\n        };\n    } catch (error) {\n        console.error('Error marking notification as read:', error);\n        throw error;\n    }\n}\n\n/**\n * Mark all notifications as read for the current user\n */\nexport async function markAllNotificationsAsRead() {\n    try {\n        const currentUser = auth.currentUser;\n        if (!currentUser) {\n            throw new Error('User not authenticated');\n        }\n\n        const notificationsRef = collection(db, 'notifications');\n        const q = query(\n            notificationsRef,\n            where('userId', '==', currentUser.uid),\n            where('read', '==', false)\n        );\n\n        const querySnapshot = await getDocs(q);\n\n        // Create an array of promises to update each notification\n        const updatePromises = querySnapshot.docs.map(doc =>\n            updateDoc(doc.ref, { read: true })\n        );\n\n        // Execute all updates in parallel\n        await Promise.all(updatePromises);\n\n        return {\n            success: true,\n            count: querySnapshot.size\n        };\n    } catch (error) {\n        console.error('Error marking all notifications as read:', error);\n        throw error;\n    }\n}\n\n/**\n * Delete a notification\n */\nexport async function deleteNotification(notificationId: string) {\n    try {\n        const currentUser = auth.currentUser;\n        if (!currentUser) {\n            throw new Error('User not authenticated');\n        }\n\n        const notificationRef = doc(db, 'notifications', notificationId);\n        const notificationSnap = await getDoc(notificationRef);\n\n        if (!notificationSnap.exists()) {\n            throw new Error('Notification not found');\n        }\n\n        const notificationData = notificationSnap.data() as Notification;\n\n        // Check if the notification belongs to the current user\n        if (notificationData.userId !== currentUser.uid) {\n            throw new Error('Unauthorized access to notification');\n        }\n\n        // Delete the notification\n        await deleteDoc(notificationRef);\n\n        return {\n            success: true\n        };\n    } catch (error) {\n        console.error('Error deleting notification:', error);\n        throw error;\n    }\n}\n\n/**\n * Get the count of unread notifications\n */\nexport async function getUnreadNotificationsCount() {\n    try {\n        const currentUser = auth.currentUser;\n        if (!currentUser) {\n            return 0;\n        }\n\n        const notificationsRef = collection(db, 'notifications');\n        const q = query(\n            notificationsRef,\n            where('userId', '==', currentUser.uid),\n            where('read', '==', false)\n        );\n\n        const querySnapshot = await getDocs(q);\n        return querySnapshot.size;\n    } catch (error) {\n        console.error('Error counting unread notifications:', error);\n        return 0;\n    }\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 633, "column": 0}, "map": {"version":3,"sources":["file:///Users/sirabdisalam/journalite-article-page/src/firebase/articles.ts"],"sourcesContent":["import { collection, addDoc, getDocs, getDoc, doc, query, orderBy, Timestamp, where, DocumentData, DocumentSnapshot, deleteDoc, updateDoc, arrayUnion, arrayRemove } from 'firebase/firestore';\nimport { db, auth } from './clientApp';\nimport { createCommentNotification } from './notifications';\n\n// Article interface matching our Firestore structure\nexport interface Article {\n    id?: string;\n    title: string;\n    body: string;\n    createdAt: Timestamp;\n    authorId: string;\n    authorName: string;\n    tags: string[];\n    coverImage?: string;\n    slug?: string;\n    status?: 'published' | 'drafts';\n}\n\n// Comment interfaces for Firestore\nexport interface ArticleComment {\n    id?: string;\n    commentId?: string;\n    userId: string;\n    userName: string;\n    content: string;\n    createdAt: Timestamp;\n    likes: string[];\n    replies: CommentReply[];\n}\n\nexport interface CommentReply {\n    replyId: string;\n    userId: string;\n    userName: string;\n    content: string;\n    createdAt: Timestamp;\n    likes: string[];\n}\n\n// Get all articles from Firestore, ordered by createdAt desc\nexport async function getArticles(includeDrafts = false) {\n    try {\n        const articlesRef = collection(db, 'articles');\n        let q;\n\n        if (includeDrafts) {\n            // Return all articles regardless of status\n            q = query(articlesRef, orderBy('createdAt', 'desc'));\n        } else {\n            // Only return published articles\n            q = query(\n                articlesRef,\n                orderBy('createdAt', 'desc')\n            );\n        }\n\n        const querySnapshot = await getDocs(q);\n\n        const articles: Article[] = [];\n        querySnapshot.forEach((doc) => {\n            const articleData = doc.data() as Omit<Article, 'id'>;\n\n            // Include documents where status is 'published' or not set at all\n            if (!includeDrafts && articleData.status === 'drafts') {\n                return;\n            }\n\n            // Include articles with status='published' or no status field\n            if (!includeDrafts && articleData.status !== undefined && articleData.status !== 'published') {\n                return;\n            }\n\n            articles.push({\n                id: doc.id,\n                ...articleData\n            });\n        });\n\n        return articles;\n    } catch (error) {\n        console.error('Error getting articles:', error);\n        throw error;\n    }\n}\n\n// Get a single article by ID\nexport async function getArticleById(id: string) {\n    try {\n        const docRef = doc(db, 'articles', id);\n        const docSnap = await getDoc(docRef);\n\n        if (docSnap.exists()) {\n            return {\n                id: docSnap.id,\n                ...docSnap.data() as Omit<Article, 'id'>\n            };\n        } else {\n            throw new Error('Article not found');\n        }\n    } catch (error) {\n        console.error('Error getting article:', error);\n        throw error;\n    }\n}\n\n// Get a single article by slug\nexport async function getArticleBySlug(slug: string) {\n    try {\n        const articlesRef = collection(db, 'articles');\n        const q = query(articlesRef, where('slug', '==', slug));\n        const querySnapshot = await getDocs(q);\n\n        if (querySnapshot.empty) {\n            throw new Error('Article not found');\n        }\n\n        const docSnap = querySnapshot.docs[0];\n        return {\n            id: docSnap.id,\n            ...docSnap.data() as Omit<Article, 'id'>\n        };\n    } catch (error) {\n        console.error('Error getting article by slug:', error);\n        throw error;\n    }\n}\n\n// Create a new article\nexport async function createArticle(article: Omit<Article, 'id' | 'createdAt' | 'authorId' | 'authorName'>) {\n    try {\n        const user = auth.currentUser;\n        if (!user) {\n            throw new Error('You must be logged in to create an article');\n        }\n\n        // Create the basic article object with required fields\n        const newArticle: any = {\n            title: article.title,\n            body: article.body,\n            slug: article.slug || article.title\n                .toLowerCase()\n                .replace(/[^\\w\\s]/gi, '')\n                .replace(/\\s+/g, '-'),\n            createdAt: Timestamp.now(),\n            authorId: user.uid,\n            authorName: user.displayName || 'Anonymous',\n            tags: article.tags || [],\n            status: article.status || 'published' // Default to published if not specified\n        };\n\n        // Only add optional fields if they exist and have values\n        if (article.coverImage) {\n            newArticle.coverImage = article.coverImage;\n        }\n\n        const docRef = await addDoc(collection(db, 'articles'), newArticle);\n        return {\n            id: docRef.id,\n            ...newArticle\n        };\n    } catch (error) {\n        console.error('Error creating article:', error);\n        throw error;\n    }\n}\n\n// Update an existing article\nexport async function updateArticle(articleId: string, articleData: Partial<Omit<Article, 'id' | 'createdAt' | 'authorId' | 'authorName'>>) {\n    try {\n        const user = auth.currentUser;\n        if (!user) {\n            throw new Error('You must be logged in to edit an article');\n        }\n\n        // First check if the article exists and belongs to the current user\n        const articleRef = doc(db, 'articles', articleId);\n        const articleSnap = await getDoc(articleRef);\n\n        if (!articleSnap.exists()) {\n            throw new Error('Article not found');\n        }\n\n        const articleData1 = articleSnap.data();\n        if (articleData1.authorId !== user.uid) {\n            throw new Error('You can only edit your own articles');\n        }\n\n        // Create the update object\n        const updateData: any = {};\n\n        // Only include fields that were provided\n        if (articleData.title !== undefined) {\n            updateData.title = articleData.title;\n\n            // If title changed, update slug as well (unless slug is explicitly provided)\n            if (articleData.slug === undefined) {\n                updateData.slug = articleData.title\n                    .toLowerCase()\n                    .replace(/[^\\w\\s]/gi, '')\n                    .replace(/\\s+/g, '-');\n            }\n        }\n\n        if (articleData.body !== undefined) {\n            updateData.body = articleData.body;\n        }\n\n        if (articleData.tags !== undefined) {\n            updateData.tags = articleData.tags;\n        }\n\n        if (articleData.status !== undefined) {\n            updateData.status = articleData.status;\n        }\n\n        if (articleData.coverImage !== undefined) {\n            updateData.coverImage = articleData.coverImage;\n        }\n\n        if (articleData.slug !== undefined) {\n            updateData.slug = articleData.slug;\n        }\n\n        // Update the article\n        await updateDoc(articleRef, updateData);\n\n        // Return the updated article\n        const updatedArticleSnap = await getDoc(articleRef);\n        return {\n            id: updatedArticleSnap.id,\n            ...updatedArticleSnap.data() as Omit<Article, 'id'>\n        };\n    } catch (error) {\n        console.error('Error updating article:', error);\n        throw error;\n    }\n}\n\n// Comments functions\nexport async function getArticleComments(articleId: string) {\n    try {\n        const commentsRef = collection(db, 'articles', articleId, 'comments');\n        const q = query(commentsRef, orderBy('createdAt', 'desc'));\n        const querySnapshot = await getDocs(q);\n\n        const comments: ArticleComment[] = [];\n        querySnapshot.forEach((doc) => {\n            const commentData = doc.data() as Omit<ArticleComment, 'id' | 'commentId'>;\n            comments.push({\n                id: doc.id,\n                commentId: doc.id, // Add commentId for compatibility with existing UI\n                ...commentData,\n                replies: commentData.replies || []\n            });\n        });\n\n        return comments;\n    } catch (error) {\n        console.error('Error getting comments:', error);\n        throw error;\n    }\n}\n\nexport async function addComment(articleId: string, content: string) {\n    try {\n        const user = auth.currentUser;\n        if (!user) {\n            throw new Error('You must be logged in to comment');\n        }\n\n        const newComment = {\n            userId: user.uid,\n            userName: user.displayName || user.email?.split('@')[0] || 'Anonymous',\n            content,\n            createdAt: Timestamp.now(),\n            likes: [],\n            replies: []\n        };\n\n        const docRef = await addDoc(collection(db, 'articles', articleId, 'comments'), newComment);\n\n        // Get article information for the notification\n        const articleRef = doc(db, 'articles', articleId);\n        const articleSnap = await getDoc(articleRef);\n\n        if (articleSnap.exists()) {\n            const articleData = articleSnap.data();\n            // Trigger notification to the article owner\n            await createCommentNotification(\n                articleData.authorId,\n                articleId,\n                articleData.slug || '',\n                articleData.title || 'Article',\n                docRef.id,\n                content\n            );\n        }\n\n        return {\n            id: docRef.id,\n            commentId: docRef.id, // Add commentId for compatibility\n            ...newComment\n        };\n    } catch (error) {\n        console.error('Error adding comment:', error);\n        throw error;\n    }\n}\n\nexport async function addReply(articleId: string, commentId: string, content: string) {\n    try {\n        const user = auth.currentUser;\n        if (!user) {\n            throw new Error('You must be logged in to reply');\n        }\n\n        const commentRef = doc(db, 'articles', articleId, 'comments', commentId);\n        const commentSnap = await getDoc(commentRef);\n\n        if (!commentSnap.exists()) {\n            throw new Error('Comment not found');\n        }\n\n        const newReply = {\n            replyId: Math.random().toString(36).substring(2, 15), // Generate a unique ID\n            userId: user.uid,\n            userName: user.displayName || user.email?.split('@')[0] || 'Anonymous',\n            content,\n            createdAt: Timestamp.now(),\n            likes: []\n        };\n\n        // Add the reply to the replies array\n        await updateDoc(commentRef, {\n            replies: arrayUnion(newReply)\n        });\n\n        return newReply;\n    } catch (error) {\n        console.error('Error adding reply:', error);\n        throw error;\n    }\n}\n\nexport async function likeComment(articleId: string, commentId: string) {\n    try {\n        const user = auth.currentUser;\n        if (!user) {\n            throw new Error('You must be logged in to like a comment');\n        }\n\n        const commentRef = doc(db, 'articles', articleId, 'comments', commentId);\n        const commentSnap = await getDoc(commentRef);\n\n        if (!commentSnap.exists()) {\n            throw new Error('Comment not found');\n        }\n\n        const commentData = commentSnap.data() as ArticleComment;\n        const userId = user.uid;\n\n        // Check if the user already liked the comment\n        const likes = commentData.likes || [];\n        const hasLiked = likes.includes(userId);\n\n        if (hasLiked) {\n            // Remove the like\n            await updateDoc(commentRef, {\n                likes: arrayRemove(userId)\n            });\n\n            // Get updated likes\n            const updatedSnap = await getDoc(commentRef);\n            const updatedData = updatedSnap.data() as ArticleComment;\n\n            return {\n                success: true,\n                action: 'unliked',\n                likes: updatedData.likes,\n                count: updatedData.likes.length\n            };\n        } else {\n            // Add the like\n            await updateDoc(commentRef, {\n                likes: arrayUnion(userId)\n            });\n\n            // Get updated likes\n            const updatedSnap = await getDoc(commentRef);\n            const updatedData = updatedSnap.data() as ArticleComment;\n\n            return {\n                success: true,\n                action: 'liked',\n                likes: updatedData.likes,\n                count: updatedData.likes.length\n            };\n        }\n    } catch (error) {\n        console.error('Error liking comment:', error);\n        throw error;\n    }\n}\n\nexport async function deleteComment(articleId: string, commentId: string) {\n    try {\n        const user = auth.currentUser;\n        if (!user) {\n            throw new Error('You must be logged in to delete a comment');\n        }\n\n        const commentRef = doc(db, 'articles', articleId, 'comments', commentId);\n        const commentSnap = await getDoc(commentRef);\n\n        if (!commentSnap.exists()) {\n            throw new Error('Comment not found');\n        }\n\n        const commentData = commentSnap.data() as ArticleComment;\n\n        // Check if the user is the comment author\n        if (commentData.userId !== user.uid) {\n            throw new Error('You can only delete your own comments');\n        }\n\n        await deleteDoc(commentRef);\n\n        return {\n            success: true,\n            message: 'Comment deleted successfully'\n        };\n    } catch (error) {\n        console.error('Error deleting comment:', error);\n        throw error;\n    }\n}\n\n// Delete an article\nexport async function deleteArticle(articleId: string) {\n    try {\n        const user = auth.currentUser;\n        if (!user) {\n            throw new Error('You must be logged in to delete an article');\n        }\n\n        // Get the article to check ownership\n        const articleDoc = await getDoc(doc(db, 'articles', articleId));\n\n        if (!articleDoc.exists()) {\n            throw new Error('Article not found');\n        }\n\n        const articleData = articleDoc.data();\n\n        // Only the author can delete their article\n        if (articleData.authorId !== user.uid) {\n            throw new Error('You can only delete your own articles');\n        }\n\n        // Delete the article\n        await deleteDoc(doc(db, 'articles', articleId));\n\n        return {\n            success: true,\n            message: 'Article deleted successfully'\n        };\n    } catch (error) {\n        console.error('Error deleting article:', error);\n        throw error;\n    }\n}\n\n// Get articles by tag\nexport async function getArticlesByTag(tag: string) {\n    try {\n        const articlesRef = collection(db, 'articles');\n\n        // Query for articles that have the specified tag and are published\n        const q = query(\n            articlesRef,\n            where('tags', 'array-contains', tag),\n            where('status', '==', 'published'),\n            orderBy('createdAt', 'desc')\n        );\n\n        const querySnapshot = await getDocs(q);\n\n        const articles: Article[] = [];\n        querySnapshot.forEach((doc) => {\n            const articleData = doc.data() as Omit<Article, 'id'>;\n            articles.push({\n                id: doc.id,\n                ...articleData\n            });\n        });\n\n        return articles;\n    } catch (error) {\n        console.error('Error getting articles by tag:', error);\n        throw error;\n    }\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1019, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/components/NotificationBell.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"bellButton\": \"NotificationBell-module__doceWq__bellButton\",\n  \"bellIcon\": \"NotificationBell-module__doceWq__bellIcon\",\n  \"emptyState\": \"NotificationBell-module__doceWq__emptyState\",\n  \"notificationContainer\": \"NotificationBell-module__doceWq__notificationContainer\",\n  \"notificationContent\": \"NotificationBell-module__doceWq__notificationContent\",\n  \"notificationDropdown\": \"NotificationBell-module__doceWq__notificationDropdown\",\n  \"notificationFooter\": \"NotificationBell-module__doceWq__notificationFooter\",\n  \"notificationHeader\": \"NotificationBell-module__doceWq__notificationHeader\",\n  \"notificationItem\": \"NotificationBell-module__doceWq__notificationItem\",\n  \"notificationList\": \"NotificationBell-module__doceWq__notificationList\",\n  \"notificationMessage\": \"NotificationBell-module__doceWq__notificationMessage\",\n  \"notificationTime\": \"NotificationBell-module__doceWq__notificationTime\",\n  \"seeMoreLink\": \"NotificationBell-module__doceWq__seeMoreLink\",\n  \"unread\": \"NotificationBell-module__doceWq__unread\",\n  \"unreadBadge\": \"NotificationBell-module__doceWq__unreadBadge\",\n  \"unreadDot\": \"NotificationBell-module__doceWq__unreadDot\",\n  \"viewAllLink\": \"NotificationBell-module__doceWq__viewAllLink\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 1044, "column": 0}, "map": {"version":3,"sources":["file:///Users/sirabdisalam/journalite-article-page/src/components/NotificationBell.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect, useRef } from 'react'\nimport Link from 'next/link'\nimport { getUnreadNotificationsCount, getUserNotifications, markNotificationAsRead, Notification } from '@/firebase/notifications'\nimport styles from './NotificationBell.module.css'\n\nconst NotificationBell = () => {\n  const [unreadCount, setUnreadCount] = useState<number>(0)\n  const [notifications, setNotifications] = useState<Notification[]>([])\n  const [isOpen, setIsOpen] = useState<boolean>(false)\n  const notificationRef = useRef<HTMLDivElement>(null)\n\n  // Fetch unread count on mount and set up interval\n  useEffect(() => {\n    const fetchUnreadCount = async () => {\n      const count = await getUnreadNotificationsCount()\n      setUnreadCount(count)\n    }\n\n    // Fetch immediately\n    fetchUnreadCount()\n\n    // Set up polling every 60 seconds\n    const interval = setInterval(fetchUnreadCount, 60000)\n\n    // Clear interval on unmount\n    return () => clearInterval(interval)\n  }, [])\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (notificationRef.current && !notificationRef.current.contains(event.target as Node)) {\n        setIsOpen(false)\n      }\n    }\n\n    document.addEventListener('mousedown', handleClickOutside)\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside)\n    }\n  }, [])\n\n  // Fetch notifications when dropdown is opened\n  useEffect(() => {\n    if (isOpen) {\n      fetchNotifications()\n    }\n  }, [isOpen])\n\n  const fetchNotifications = async () => {\n    try {\n      const fetchedNotifications = await getUserNotifications(false)\n      setNotifications(fetchedNotifications)\n    } catch (error) {\n      console.error('Error fetching notifications:', error)\n    }\n  }\n\n  const handleToggle = () => {\n    setIsOpen(!isOpen)\n  }\n\n  const handleNotificationClick = async (notification: Notification) => {\n    try {\n      if (!notification.read && notification.id) {\n        await markNotificationAsRead(notification.id)\n        \n        // Update local state\n        setUnreadCount(prev => Math.max(prev - 1, 0))\n        setNotifications(prev => \n          prev.map(n => \n            n.id === notification.id \n              ? { ...n, read: true } \n              : n\n          )\n        )\n      }\n    } catch (error) {\n      console.error('Error marking notification as read:', error)\n    }\n  }\n\n  const formatTime = (timestamp: any) => {\n    if (!timestamp) return ''\n    \n    const date = timestamp.toDate ? timestamp.toDate() : new Date(timestamp)\n    const now = new Date()\n    const diffMinutes = Math.floor((now.getTime() - date.getTime()) / (1000 * 60))\n    \n    if (diffMinutes < 1) return 'Just now'\n    if (diffMinutes < 60) return `${diffMinutes}m ago`\n    \n    const diffHours = Math.floor(diffMinutes / 60)\n    if (diffHours < 24) return `${diffHours}h ago`\n    \n    const diffDays = Math.floor(diffHours / 24)\n    if (diffDays < 7) return `${diffDays}d ago`\n    \n    return date.toLocaleDateString()\n  }\n\n  // Get the appropriate link for different notification types\n  const getNotificationLink = (notification: Notification) => {\n    if (notification.type === 'follow') {\n      // For follow notifications, link to the user's profile using the fromUser's username\n      if (notification.fromUser?.username) {\n        return `/user/${notification.fromUser.username}`;\n      }\n      // Fallback to notifications page if username is missing\n      return '/notifications';\n    } else if (notification.articleSlug) {\n      // For article-related notifications (comments, likes, etc.)\n      return `/articles?slug=${notification.articleSlug}`;\n    } else {\n      // Default to notifications page\n      return '/notifications';\n    }\n  }\n\n  return (\n    <div className={styles.notificationContainer} ref={notificationRef}>\n      <button className={styles.bellButton} onClick={handleToggle}>\n        <span className={styles.bellIcon}></span>\n        {unreadCount > 0 && (\n          <span className={styles.unreadBadge}>{unreadCount}</span>\n        )}\n      </button>\n      \n      {isOpen && (\n        <div className={styles.notificationDropdown}>\n          <div className={styles.notificationHeader}>\n            <h3>Notifications</h3>\n            {notifications.length > 0 && (\n              <Link href=\"/notifications\" className={styles.viewAllLink}>\n                View All\n              </Link>\n            )}\n          </div>\n          \n          <div className={styles.notificationList}>\n            {notifications.length === 0 ? (\n              <div className={styles.emptyState}>\n                No notifications yet\n              </div>\n            ) : (\n              notifications.slice(0, 5).map((notification) => (\n                <Link \n                  href={getNotificationLink(notification)} \n                  key={notification.id}\n                  className={`${styles.notificationItem} ${!notification.read ? styles.unread : ''}`}\n                  onClick={() => handleNotificationClick(notification)}\n                >\n                  <div className={styles.notificationContent}>\n                    <p className={styles.notificationMessage}>\n                      {notification.message}\n                    </p>\n                    <span className={styles.notificationTime}>\n                      {formatTime(notification.createdAt)}\n                    </span>\n                  </div>\n                  {!notification.read && (\n                    <div className={styles.unreadDot}></div>\n                  )}\n                </Link>\n              ))\n            )}\n          </div>\n          \n          {notifications.length > 5 && (\n            <div className={styles.notificationFooter}>\n              <Link href=\"/notifications\" className={styles.seeMoreLink}>\n                See more notifications\n              </Link>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default NotificationBell "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1303, "column": 0}, "map": {"version":3,"sources":["file:///Users/sirabdisalam/journalite-article-page/src/services/userService.ts"],"sourcesContent":["import {\n    doc,\n    setDoc,\n    getDoc,\n    query,\n    collection,\n    where,\n    getDocs,\n    serverTimestamp,\n    updateDoc,\n    arrayUnion,\n    arrayRemove,\n    increment,\n    limit,\n    deleteDoc\n} from 'firebase/firestore';\nimport { updateProfile, deleteUser as deleteFirebaseAuthUser } from 'firebase/auth';\nimport { auth, db } from '../firebase/clientApp';\nimport { createFollowNotification } from '../firebase/notifications';\n\nexport interface UserProfile {\n    uid: string;\n    firstName: string;\n    lastName: string;\n    username: string;\n    email: string;\n    bio?: string;\n    createdAt: any;\n    following?: string[];\n    followers?: string[];\n    followersCount?: number;\n    followingCount?: number;\n    interests?: string[];\n}\n\n/**\n * Checks if a username is already taken\n * @param username The username to check\n * @returns A promise that resolves to a boolean indicating if the username is taken\n */\nexport async function isUsernameTaken(username: string): Promise<boolean> {\n    try {\n        const usernameQuery = query(\n            collection(db, 'users'),\n            where('username', '==', username.toLowerCase())\n        );\n\n        const querySnapshot = await getDocs(usernameQuery);\n        return !querySnapshot.empty;\n    } catch (error) {\n        console.error('Error checking username:', error);\n        throw error;\n    }\n}\n\n/**\n * Creates a user profile in Firestore\n * @param uid User's Firebase Auth UID\n * @param profile User profile data\n */\nexport async function createUserProfile(uid: string, profile: Omit<UserProfile, 'uid' | 'createdAt'>): Promise<void> {\n    try {\n        // First check if this user ID already has a profile\n        const existingUserProfile = await getUserProfile(uid);\n        if (existingUserProfile) {\n            console.log('User profile already exists, updating instead of creating');\n\n            // Update existing profile\n            const userRef = doc(db, 'users', uid);\n            await updateDoc(userRef, {\n                firstName: profile.firstName,\n                lastName: profile.lastName,\n                username: profile.username.toLowerCase(),\n                email: profile.email.toLowerCase(),\n                bio: profile.bio || existingUserProfile.bio || ''\n            });\n\n            // Update the user's display name in Firebase Auth\n            if (auth.currentUser) {\n                await updateProfile(auth.currentUser, {\n                    displayName: profile.username\n                });\n            }\n\n            return;\n        }\n\n        // Check if email already exists in another profile\n        const emailQuery = query(\n            collection(db, 'users'),\n            where('email', '==', profile.email.toLowerCase())\n        );\n\n        const emailQuerySnapshot = await getDocs(emailQuery);\n        if (!emailQuerySnapshot.empty) {\n            throw new Error('Email is already associated with another account');\n        }\n\n        // Check if the username is already taken\n        const usernameTaken = await isUsernameTaken(profile.username);\n        if (usernameTaken) {\n            throw new Error('Username is already taken');\n        }\n\n        const userRef = doc(db, 'users', uid);\n\n        // Create the user profile\n        await setDoc(userRef, {\n            uid,\n            firstName: profile.firstName,\n            lastName: profile.lastName,\n            username: profile.username.toLowerCase(),\n            email: profile.email.toLowerCase(),\n            bio: profile.bio || '',\n            createdAt: serverTimestamp()\n        });\n\n        // Update the user's display name in Firebase Auth\n        if (auth.currentUser) {\n            await updateProfile(auth.currentUser, {\n                displayName: profile.username\n            });\n        }\n    } catch (error) {\n        console.error('Error creating user profile:', error);\n        throw error;\n    }\n}\n\n/**\n * Gets a user's profile from Firestore\n * @param uid User's Firebase Auth UID\n * @returns A promise that resolves to the user's profile or null if not found\n */\nexport async function getUserProfile(uid: string): Promise<UserProfile | null> {\n    try {\n        const userRef = doc(db, 'users', uid);\n        const userDoc = await getDoc(userRef);\n\n        if (userDoc.exists()) {\n            return userDoc.data() as UserProfile;\n        }\n\n        return null;\n    } catch (error) {\n        console.error('Error fetching user profile:', error);\n        throw error;\n    }\n}\n\n/**\n * Gets a user's profile from Firestore based on their email\n * @param email User's email address\n * @returns A promise that resolves to the user's profile or null if not found\n */\nexport async function getUserProfileByEmail(email: string): Promise<UserProfile | null> {\n    if (!email) return null;\n    try {\n        const emailQuery = query(\n            collection(db, 'users'),\n            where('email', '==', email.toLowerCase()),\n            limit(1)\n        );\n        const querySnapshot = await getDocs(emailQuery);\n        if (!querySnapshot.empty) {\n            // Should only be one user with a unique email\n            return querySnapshot.docs[0].data() as UserProfile;\n        }\n        return null;\n    } catch (error) {\n        console.error('Error fetching user profile by email:', error);\n        throw error; // Re-throw to be handled by the caller\n    }\n}\n\n/**\n * Updates a user's bio\n * @param uid User's Firebase Auth UID\n * @param bio User's new bio\n * @returns A promise that resolves when the bio is updated\n */\nexport async function updateUserBio(uid: string, bio: string): Promise<void> {\n    try {\n        const userRef = doc(db, 'users', uid);\n        await updateDoc(userRef, {\n            bio\n        });\n    } catch (error) {\n        console.error('Error updating user bio:', error);\n        throw error;\n    }\n}\n\n/**\n * Updates a user's selected interests\n * @param uid User's Firebase Auth UID\n * @param interests Array of selected interests\n * @returns A promise that resolves when the interests are updated\n */\nexport async function updateUserInterests(uid: string, interests: string[]): Promise<void> {\n    try {\n        const userRef = doc(db, 'users', uid);\n        await updateDoc(userRef, {\n            interests\n        });\n        console.log(`Interests updated for user ${uid}:`, interests);\n    } catch (error) {\n        console.error('Error updating user interests:', error);\n        throw error;\n    }\n}\n\n/**\n * Search for users by username or name\n * @param searchTerm The search term to find users\n * @returns Array of matching users\n */\nexport async function searchUsers(searchTerm: string): Promise<UserProfile[]> {\n    try {\n        if (!searchTerm || searchTerm.trim().length < 2) {\n            return [];\n        }\n\n        const searchTermLower = searchTerm.toLowerCase().trim();\n\n        // Create a query to find users whose username contains the search term\n        const usersRef = collection(db, 'users');\n        const usersSnapshot = await getDocs(usersRef);\n\n        // Filter users locally since Firestore doesn't support contains or regexp queries directly\n        const matchingUsers = usersSnapshot.docs\n            .map(doc => {\n                // Get all data from the document and ensure it has the correct UserProfile shape\n                const userData = doc.data() as UserProfile;\n                return userData;\n            })\n            .filter(user => {\n                const usernameLower = user.username.toLowerCase();\n                const firstNameLower = user.firstName.toLowerCase();\n                const lastNameLower = user.lastName.toLowerCase();\n                const fullNameLower = `${firstNameLower} ${lastNameLower}`;\n\n                return usernameLower.includes(searchTermLower) ||\n                    firstNameLower.includes(searchTermLower) ||\n                    lastNameLower.includes(searchTermLower) ||\n                    fullNameLower.includes(searchTermLower);\n            });\n\n        return matchingUsers;\n    } catch (error) {\n        console.error('Error searching users:', error);\n        return [];\n    }\n}\n\n/**\n * Follows a user\n * @param followerUid UID of the user who wants to follow\n * @param followingUid UID of the user to be followed\n * @returns A promise that resolves when the follow relationship is created\n */\nexport async function followUser(followerUid: string, followingUid: string): Promise<void> {\n    try {\n        // Don't allow users to follow themselves\n        if (followerUid === followingUid) {\n            throw new Error('You cannot follow yourself');\n        }\n\n        // Update the follower's following list\n        const followerRef = doc(db, 'users', followerUid);\n        await updateDoc(followerRef, {\n            following: arrayUnion(followingUid),\n            followingCount: increment(1)\n        });\n\n        // Update the following's followers list\n        const followingRef = doc(db, 'users', followingUid);\n        await updateDoc(followingRef, {\n            followers: arrayUnion(followerUid),\n            followersCount: increment(1)\n        });\n\n        // Get the follower's profile to use their name for the notification\n        const followerDoc = await getDoc(followerRef);\n        if (followerDoc.exists()) {\n            const followerData = followerDoc.data() as UserProfile;\n            // Create a notification for the user being followed\n            await createFollowNotification(\n                followingUid,\n                `${followerData.firstName} ${followerData.lastName}`,\n                followerUid,\n                followerData.username\n            );\n        }\n    } catch (error) {\n        console.error('Error following user:', error);\n        throw error;\n    }\n}\n\n/**\n * Unfollows a user\n * @param followerUid UID of the user who wants to unfollow\n * @param followingUid UID of the user to be unfollowed\n * @returns A promise that resolves when the follow relationship is removed\n */\nexport async function unfollowUser(followerUid: string, followingUid: string): Promise<void> {\n    try {\n        // Update the follower's following list\n        const followerRef = doc(db, 'users', followerUid);\n        await updateDoc(followerRef, {\n            following: arrayRemove(followingUid),\n            followingCount: increment(-1)\n        });\n\n        // Update the following's followers list\n        const followingRef = doc(db, 'users', followingUid);\n        await updateDoc(followingRef, {\n            followers: arrayRemove(followerUid),\n            followersCount: increment(-1)\n        });\n    } catch (error) {\n        console.error('Error unfollowing user:', error);\n        throw error;\n    }\n}\n\n/**\n * Checks if a user is following another user\n * @param followerUid UID of the potential follower\n * @param followingUid UID of the user who might be followed\n * @returns Promise resolving to a boolean indicating if follower follows following\n */\nexport async function isFollowing(followerUid: string, followingUid: string): Promise<boolean> {\n    try {\n        const followerRef = doc(db, 'users', followerUid);\n        const followerDoc = await getDoc(followerRef);\n\n        if (!followerDoc.exists()) {\n            return false;\n        }\n\n        const userData = followerDoc.data() as UserProfile;\n        return userData.following?.includes(followingUid) || false;\n    } catch (error) {\n        console.error('Error checking follow status:', error);\n        throw error;\n    }\n}\n\n/**\n * Gets a list of users that a user is following\n * @param uid User's Firebase Auth UID\n * @param maxLimit Maximum number of results to return\n * @returns Promise resolving to an array of user profiles\n */\nexport async function getFollowing(uid: string, maxLimit = 50): Promise<UserProfile[]> {\n    try {\n        // First get the user to access their following list\n        const userRef = doc(db, 'users', uid);\n        const userDoc = await getDoc(userRef);\n\n        if (!userDoc.exists()) {\n            return [];\n        }\n\n        const userData = userDoc.data() as UserProfile;\n        const followingList = userData.following || [];\n\n        if (followingList.length === 0) {\n            return [];\n        }\n\n        // Fetch each following user's profile\n        const followingUsers: UserProfile[] = [];\n        const batchLimit = Math.min(followingList.length, maxLimit);\n\n        for (let i = 0; i < batchLimit; i++) {\n            const followingId = followingList[i];\n            const followingUserRef = doc(db, 'users', followingId);\n            const followingUserDoc = await getDoc(followingUserRef);\n\n            if (followingUserDoc.exists()) {\n                followingUsers.push(followingUserDoc.data() as UserProfile);\n            }\n        }\n\n        return followingUsers;\n    } catch (error) {\n        console.error('Error getting following list:', error);\n        throw error;\n    }\n}\n\n/**\n * Gets a list of users following a user\n * @param uid User's Firebase Auth UID\n * @param maxLimit Maximum number of results to return\n * @returns Promise resolving to an array of user profiles\n */\nexport async function getFollowers(uid: string, maxLimit = 50): Promise<UserProfile[]> {\n    try {\n        // First get the user to access their followers list\n        const userRef = doc(db, 'users', uid);\n        const userDoc = await getDoc(userRef);\n\n        if (!userDoc.exists()) {\n            return [];\n        }\n\n        const userData = userDoc.data() as UserProfile;\n        const followersList = userData.followers || [];\n\n        if (followersList.length === 0) {\n            return [];\n        }\n\n        // Fetch each follower's profile\n        const followers: UserProfile[] = [];\n        const batchLimit = Math.min(followersList.length, maxLimit);\n\n        for (let i = 0; i < batchLimit; i++) {\n            const followerId = followersList[i];\n            const followerUserRef = doc(db, 'users', followerId);\n            const followerUserDoc = await getDoc(followerUserRef);\n\n            if (followerUserDoc.exists()) {\n                followers.push(followerUserDoc.data() as UserProfile);\n            }\n        }\n\n        return followers;\n    } catch (error) {\n        console.error('Error getting followers list:', error);\n        throw error;\n    }\n}\n\n/**\n * Deletes a user's account from Firebase Authentication and their profile from Firestore.\n * IMPORTANT: Deleting a user from Firebase Auth requires recent sign-in. \n * If this operation fails due to 'auth/requires-recent-login', \n * the client-side must handle re-authentication before retrying.\n * @param uid User's Firebase Auth UID\n * @returns A promise that resolves when the account and profile are deleted.\n */\nexport async function deleteUserAccount(uid: string): Promise<void> {\n    try {\n        // 1. Delete user profile from Firestore\n        const userProfileRef = doc(db, 'users', uid);\n        await deleteDoc(userProfileRef);\n        console.log(`User profile for UID ${uid} deleted from Firestore.`);\n\n        // 2. Delete user from Firebase Authentication\n        // This requires the current user to be the one being deleted.\n        // And the user must have signed in recently.\n        const currentUser = auth.currentUser;\n        if (currentUser && currentUser.uid === uid) {\n            await deleteFirebaseAuthUser(currentUser);\n            console.log(`User account for UID ${uid} deleted from Firebase Authentication.`);\n        } else if (!currentUser) {\n            console.error('No current user authenticated. Cannot delete Firebase Auth user.');\n            throw new Error('Authentication required to delete account.');\n        } else {\n            // This case (currentUser.uid !== uid) should ideally not happen if the function\n            // is called correctly from the client for the logged-in user.\n            console.error('Current authenticated user does not match UID to be deleted.');\n            throw new Error('Mismatch between authenticated user and account to be deleted.');\n        }\n\n    } catch (error: any) {\n        console.error('Error deleting user account:', error);\n        // Specific check for re-authentication requirement\n        if (error.code === 'auth/requires-recent-login') {\n            throw new Error('This operation is sensitive and requires recent authentication. Please sign out and sign back in, then try again.');\n        }\n        throw new Error('Failed to delete user account. ' + error.message);\n    }\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1633, "column": 0}, "map": {"version":3,"sources":["file:///Users/sirabdisalam/journalite-article-page/src/components/UserSearch.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport Link from 'next/link';\nimport { searchUsers, UserProfile } from '@/services/userService';\nimport styles from '@/styles/home.module.css';\n\nconst UserSearch: React.FC = () => {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [searchResults, setSearchResults] = useState<UserProfile[]>([]);\n  const [isSearching, setIsSearching] = useState(false);\n  const [showResults, setShowResults] = useState(false);\n  const searchInputRef = useRef<HTMLInputElement>(null);\n  const resultsRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    // Add click outside listener to close results\n    const handleClickOutside = (event: MouseEvent) => {\n      if (\n        resultsRef.current && \n        !resultsRef.current.contains(event.target as Node) &&\n        searchInputRef.current && \n        !searchInputRef.current.contains(event.target as Node)\n      ) {\n        setShowResults(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n\n  useEffect(() => {\n    const delayDebounceFn = setTimeout(async () => {\n      if (searchTerm.trim().length >= 2) {\n        setIsSearching(true);\n        try {\n          const results = await searchUsers(searchTerm);\n          setSearchResults(results);\n          setShowResults(true);\n        } catch (error) {\n          console.error('Error searching users:', error);\n        } finally {\n          setIsSearching(false);\n        }\n      } else {\n        setSearchResults([]);\n        setShowResults(false);\n      }\n    }, 300);\n\n    return () => clearTimeout(delayDebounceFn);\n  }, [searchTerm]);\n\n  const handleSearchChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setSearchTerm(e.target.value);\n  };\n\n  const handleFocus = () => {\n    if (searchTerm.trim().length >= 2 && searchResults.length > 0) {\n      setShowResults(true);\n    }\n  };\n\n  return (\n    <div className={styles.searchContainer}>\n      <div className={styles.searchInputWrapper}>\n        <input\n          type=\"text\"\n          ref={searchInputRef}\n          className={styles.searchInput}\n          placeholder=\"Search users by name or username...\"\n          value={searchTerm}\n          onChange={handleSearchChange}\n          onFocus={handleFocus}\n        />\n        {isSearching && <div className={styles.searchLoading}>Searching...</div>}\n      </div>\n      \n      {showResults && searchResults.length > 0 && (\n        <div ref={resultsRef} className={styles.searchResults}>\n          {searchResults.map((user) => (\n            <Link \n              key={user.uid} \n              href={`/user/${encodeURIComponent(user.username.toLowerCase())}`}\n              className={styles.searchResultItem}\n              onClick={() => setShowResults(false)}\n            >\n              <div className={styles.userAvatar}>\n                {user.firstName.charAt(0)}{user.lastName.charAt(0)}\n              </div>\n              <div className={styles.userInfo}>\n                <div className={styles.userName}>{user.firstName} {user.lastName}</div>\n                <div className={styles.userUsername}>@{user.username}</div>\n              </div>\n            </Link>\n          ))}\n        </div>\n      )}\n      \n      {showResults && searchTerm.trim().length >= 2 && searchResults.length === 0 && (\n        <div className={styles.searchResults}>\n          <div className={styles.noResults}>No users found matching \"{searchTerm}\"</div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default UserSearch; "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1824, "column": 0}, "map": {"version":3,"sources":["file:///Users/sirabdisalam/journalite-article-page/src/components/SearchBar.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport UserSearch from './UserSearch';\nimport styles from '@/styles/home.module.css';\n\nconst SearchBar: React.FC = () => {\n  return (\n    <div className={styles.searchBarContainer}>\n      <UserSearch />\n    </div>\n  );\n};\n\nexport default SearchBar; "],"names":[],"mappings":";;;;AAGA;AACA;AAJA;;;;AAMA,MAAM,YAAsB;IAC1B,qBACE,8OAAC;QAAI,WAAW,iIAAA,CAAA,UAAM,CAAC,kBAAkB;kBACvC,cAAA,8OAAC,gIAAA,CAAA,UAAU;;;;;;;;;;AAGjB;uCAEe","debugId":null}},
    {"offset": {"line": 1855, "column": 0}, "map": {"version":3,"sources":["file:///Users/sirabdisalam/journalite-article-page/src/components/LeftSidebar.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport Link from 'next/link';\nimport styles from '@/styles/home.module.css';\nimport SearchBar from './SearchBar';\n\ninterface LeftSidebarProps {\n  isAuthenticated: boolean;\n  handleLogout: () => void;\n  toggleSidebar: () => void;\n  isSidebarCollapsed: boolean;\n}\n\nconst LeftSidebar: React.FC<LeftSidebarProps> = ({\n  isAuthenticated,\n  handleLogout,\n  toggleSidebar,\n  isSidebarCollapsed\n}) => (\n  <aside className={`${styles['left-sidebar']} ${isSidebarCollapsed ? styles['collapsed'] : ''}`}>\n    <div className={styles['sidebar-header']}>\n      <div className={styles.logo}>Journalite</div>\n      <button\n        className={styles['toggle-button']}\n        onClick={toggleSidebar}\n        aria-label={isSidebarCollapsed ? \"Expand sidebar\" : \"Collapse sidebar\"}\n      >\n        {isSidebarCollapsed ? \"\" : \"\"}\n      </button>\n    </div>\n    \n    {/* Add search bar */}\n    <div className={styles.sidebarSearch}>\n      <SearchBar />\n    </div>\n    \n    <nav className={styles['vertical-nav']}>\n      {isAuthenticated ? (\n        // Navigation for authenticated users\n        <>\n          <Link \n            href=\"/\" \n            className={`${styles['nav-link']} ${styles['nav-home']}`}\n          >\n            <span className={styles['nav-icon']}></span>\n            <span className={styles['nav-text']}>Home</span>\n          </Link>\n          <Link \n            href=\"/my-thoughts\" \n            className={`${styles['nav-link']} ${styles['nav-thoughts']}`}\n          >\n            <span className={styles['nav-icon']}></span>\n            <span className={styles['nav-text']}>My Thoughts</span>\n          </Link>\n          <Link \n            href=\"/create-article\" \n            className={`${styles['nav-link']} ${styles['nav-create']}`}\n          >\n            <span className={styles['nav-icon']}></span>\n            <span className={styles['nav-text']}>Create Article</span>\n          </Link>\n          <Link \n            href=\"/explore\" \n            className={`${styles['nav-link']} ${styles['nav-explore']}`}\n          >\n            <span className={styles['nav-icon']}></span>\n            <span className={styles['nav-text']}>Explore</span>\n          </Link>\n          <Link \n            href=\"/my-profile\" \n            className={`${styles['nav-link']} ${styles['nav-profile']}`}\n          >\n            <span className={styles['nav-icon']}></span>\n            <span className={styles['nav-text']}>My Profile</span>\n          </Link>\n          <Link \n            href=\"/settings\" \n            className={`${styles['nav-link']} ${styles['nav-settings']}`}\n          >\n            <span className={styles['nav-icon']}></span>\n            <span className={styles['nav-text']}>Settings</span>\n          </Link>\n          <Link \n            href=\"/notifications\" \n            className={`${styles['nav-link']} ${styles['nav-notifications']}`}\n          >\n            <span className={styles['nav-icon']}></span>\n            <span className={styles['nav-text']}>Notifications</span>\n          </Link>\n          <Link \n            href=\"https://journalite.app/\" \n            className={`${styles['nav-link']} ${styles['nav-learn-more']}`}\n          >\n            <span className={styles['nav-icon']}></span>\n            <span className={styles['nav-text']}>Learn More</span>\n          </Link>\n          <button \n            onClick={handleLogout}\n            className={`${styles['nav-link']} ${styles['nav-logout']}`}\n          >\n            <span className={styles['nav-icon']}></span>\n            <span className={styles['nav-text']}>Log out</span>\n          </button>\n        </>\n      ) : (\n        // Navigation for non-authenticated users\n        <>\n          <Link \n            href=\"/\" \n            className={`${styles['nav-link']} ${styles['nav-home']}`}\n          >\n            <span className={styles['nav-icon']}></span>\n            <span className={styles['nav-text']}>Home</span>\n          </Link>\n          <Link \n            href=\"/login\" \n            className={`${styles['nav-link']} ${styles['nav-login']}`}\n          >\n            <span className={styles['nav-icon']}></span>\n            <span className={styles['nav-text']}>Login</span>\n          </Link>\n          <Link \n            href=\"https://journalite.app/\" \n            className={`${styles['nav-link']} ${styles['nav-learn-more']}`}\n          >\n            <span className={styles['nav-icon']}></span>\n            <span className={styles['nav-text']}>Learn More</span>\n          </Link>\n          <Link \n            href=\"/plans\" \n            className={`${styles['nav-link']} ${styles['nav-plans']}`}\n          >\n            <span className={styles['nav-icon']}></span>\n            <span className={styles['nav-text']}>Plans</span>\n          </Link>\n        </>\n      )}\n    </nav>\n  </aside>\n);\n\nexport default LeftSidebar; "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2276, "column": 0}, "map": {"version":3,"sources":["file:///Users/sirabdisalam/journalite-article-page/src/app/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from 'react'\nimport Link from 'next/link'\nimport Image from 'next/image'\nimport styles from '@/styles/home.module.css'\nimport { auth } from '../firebase/clientApp'\nimport { onAuthStateChanged, signOut } from 'firebase/auth'\nimport { getArticles, Article as FirestoreArticle } from '../firebase/articles'\nimport NotificationBell from '@/components/NotificationBell'\nimport LeftSidebar from '@/components/LeftSidebar'\n\n// Types for our article data based on actual API structure\ninterface Article {\n  _id: string;\n  title: string;\n  slug: string;\n  authorId: string;\n  authorName?: string;\n  excerpt?: string;\n  coverImageUrl?: string;\n  tags?: string[];\n  content: {\n    paragraphId: string;\n    text: string;\n    likes?: string[];\n    comments?: any[];\n  }[];\n  likes?: string[];\n  reposts?: string[];\n  comments?: any[];\n  viewCount?: number;\n  createdAt: string;\n  updatedAt: string;\n}\n\n// Author mapping for using authorId to display author name - legacy system\nconst authorMapping: {[key: string]: string} = {\n  \"84b2f82c-1e93-498a-983e-3b30a8379e63\": \"Samuel Green\",\n  \"user_002\": \"Alex Martinez\",\n  \"kristen-lee-id\": \"Kristen Lee\",\n  \"alex-wen-id\": \"Alex Wen\",\n  \"hannah-cole-id\": \"Hannah Cole\"\n};\n\n// Adapter function to convert Firestore articles to match our UI format\nconst adaptFirestoreArticle = (firestoreArticle: FirestoreArticle): Article => {\n  return {\n    _id: firestoreArticle.id || '',\n    title: firestoreArticle.title,\n    slug: firestoreArticle.slug || firestoreArticle.title.toLowerCase().replace(/[^\\w\\s]/gi, '').replace(/\\s+/g, '-'),\n    authorId: firestoreArticle.authorId,\n    authorName: firestoreArticle.authorName,\n    coverImageUrl: firestoreArticle.coverImage,\n    tags: firestoreArticle.tags,\n    content: [\n      {\n        paragraphId: 'p1',\n        text: firestoreArticle.body,\n        likes: [],\n        comments: []\n      }\n    ],\n    likes: [],\n    reposts: [],\n    comments: [],\n    createdAt: firestoreArticle.createdAt.toDate().toISOString(),\n    updatedAt: firestoreArticle.createdAt.toDate().toISOString()\n  };\n};\n\n// Fallback mock data only used when API is unavailable\nconst mockArticles: Article[] = [\n  {\n    _id: \"60e6cbb8f19a4b3d8c3a7f21\",\n    authorId: \"84b2f82c-1e93-498a-983e-3b30a8379e63\",\n    title: \"The Future of Artificial Intelligence: Transforming Our World\",\n    slug: \"updated-first-article\",\n    coverImageUrl: \"https://images.unsplash.com/photo-1677442136019-21780ecad995\",\n    tags: [\"AI\", \"Machine Learning\"],\n    content: [\n      { \n        paragraphId: \"p1\",\n        text: \"Artificial Intelligence (AI) stands at the forefront of technological innovation, promising to revolutionize every aspect of our lives. From healthcare to transportation, education to entertainment, AI's influence continues to grow exponentially.\"\n      }\n    ],\n    createdAt: \"2025-04-09T12:00:00.000Z\",\n    updatedAt: \"2025-04-09T14:00:00.000Z\"\n  },\n  {\n    _id: \"60e6cbb8f19a4b3d8c3a7f99\",\n    authorId: \"user_002\",\n    title: \"The Rise of Gen Z Creators\",\n    slug: \"gen-z-rise\",\n    coverImageUrl: \"https://images.unsplash.com/photo-1601908804492-7f3d9d42e1b3\",\n    tags: [\"Culture\", \"Youth\"],\n    content: [\n      {\n        paragraphId: \"p1\",\n        text: \"Gen Z is redefining creativity in the age of social media, turning platforms like TikTok and YouTube into launching pads for innovative voices around the globe.\"\n      }\n    ],\n    createdAt: \"2025-04-10T12:00:00.000Z\",\n    updatedAt: \"2025-04-10T13:00:00.000Z\"\n  },\n  {\n    _id: \"70f7d1e2a8b24d1fa2c1b8f3\",\n    authorId: \"kristen-lee-id\",\n    title: \"Unravelling the Ethics of AI\",\n    slug: \"unravelling-ethics-of-ai\",\n    coverImageUrl: \"https://images.unsplash.com/photo-1581091012184-7c07f32c2f32\",\n    tags: [\"Ethics\", \"AI\"],\n    content: [\n      {\n        paragraphId: \"p1\",\n        text: \"As artificial intelligence rapidly advances, we must confront moral questions around bias, privacy, and accountability. Who is responsible when an AI-powered system errs, and how do we ensure fair outcomes for all?\"\n      }\n    ],\n    createdAt: \"2025-04-12T09:00:00.000Z\",\n    updatedAt: \"2025-04-12T09:00:00.000Z\"\n  },\n  {\n    _id: \"81a8d2f3b9c35e2ab3d2c4e5\",\n    authorId: \"alex-wen-id\",\n    title: \"The Hidden Costs of Urbanization\",\n    slug: \"hidden-costs-of-urbanization\",\n    coverImageUrl: \"https://images.unsplash.com/photo-1541051646-784cfc8a2c21\",\n    tags: [\"Urbanization\", \"Society\"],\n    content: [\n      {\n        paragraphId: \"p1\",\n        text: \"Cities grow at breakneck speed, but beneath the skylines lie rising living costs, environmental strain, and widening inequality. How do we balance prosperity with sustainability in our everexpanding metropolises?\"\n      }\n    ],\n    createdAt: \"2025-04-12T09:15:00.000Z\",\n    updatedAt: \"2025-04-12T09:15:00.000Z\"\n  },\n  {\n    _id: \"92h9ffg3c41d7e6g1f6h0g54\",\n    authorId: \"hannah-cole-id\",\n    title: \"Justice and Equality in Modern Society\",\n    slug: \"justice-and-equality-in-modern-society\",\n    coverImageUrl: \"https://images.unsplash.com/photo-1529333166437-7750a6dd5a70\",\n    tags: [\"Justice\", \"Equality\"],\n    content: [\n      {\n        paragraphId: \"p1\",\n        text: \"In an age of rapid change, ensuring that every voice is heard and that rights are upheld remains the cornerstone of a just society. What steps can we take to close the gap between ideals and reality?\"\n      }\n    ],\n    createdAt: \"2025-04-12T09:30:00.000Z\",\n    updatedAt: \"2025-04-12T09:30:00.000Z\"\n  }\n];\n\nexport default function HomePage() {\n  // Initialize with empty arrays/null instead of stub objects\n  const [articles, setArticles] = useState<Article[]>([]);\n  const [featuredArticle, setFeaturedArticle] = useState<Article | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isSidebarCollapsed, setIsSidebarCollapsed] = useState(true); // Default to collapsed on mobile\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [windowWidth, setWindowWidth] = useState(typeof window !== 'undefined' ? window.innerWidth : 0);\n  \n  // Trending tags (static list, no need for state)\n  const tags = ['Journalism', 'Technology', 'Politics', 'Science', 'Culture'];\n\n  // Check authentication status on component mount\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, (user) => {\n      setIsAuthenticated(!!user);\n    });\n    \n    return () => unsubscribe();\n  }, []);\n\n  // Set up window resize listener\n  useEffect(() => {\n    const handleResize = () => {\n      setWindowWidth(window.innerWidth);\n    };\n    \n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Use different default sidebar state based on screen size\n  useEffect(() => {\n    setIsSidebarCollapsed(windowWidth < 768);\n  }, [windowWidth]);\n\n  useEffect(() => {\n    // Fetch articles data\n    const fetchArticles = async () => {\n      try {\n        setIsLoading(true);\n        \n        // Fetch from Firestore - don't include drafts for the homepage\n        const firestoreArticles = await getArticles();\n        \n        if (firestoreArticles && firestoreArticles.length > 0) {\n          const adaptedArticles = firestoreArticles.map(adaptFirestoreArticle);\n          \n          // Set the first article as featured\n          if (adaptedArticles.length > 0) {\n            setFeaturedArticle(adaptedArticles[0]);\n            // Set the rest as regular articles\n            setArticles(adaptedArticles.slice(1));\n          } else {\n            setArticles([]);\n          }\n        } else {\n          setArticles([]);\n        }\n      } catch (error) {\n        console.error('Error fetching articles:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    \n    fetchArticles();\n  }, []);\n\n  // Get author name from authorId, preferring the API-provided authorName if available\n  const getAuthorName = (article: Article): string => {\n    if (article.authorName) return article.authorName;\n    if (!article.authorId) return '';\n    return authorMapping[article.authorId] || '';\n  };\n\n  // Calculate estimated reading time based on content length\n  const getReadingTime = (content: Article['content']) => {\n    if (!content || !Array.isArray(content)) {\n      return 1; // Default to 1 minute if content is missing or not an array\n    }\n    \n    const wordCount = content.reduce((count: number, para: { text: string }) => {\n      return count + ((para && para.text) ? para.text.split(' ').length : 0);\n    }, 0);\n    \n    // Average reading speed: 200 words per minute\n    const minutes = Math.ceil(wordCount / 200) || 1; // Ensure at least 1 minute\n    return minutes;\n  };\n\n  // Use the API-provided excerpt if available, otherwise calculate from content\n  const getExcerpt = (article: Article, maxLength = 150) => {\n    // If the API provided an excerpt, use it\n    if (article.excerpt) return article.excerpt;\n    \n    // Otherwise calculate from content as a fallback\n    const content = article.content;\n    if (!content || !Array.isArray(content) || content.length === 0) {\n      return '';\n    }\n    \n    const text = content[0]?.text || '';\n    \n    // Handle HTML content by stripping tags\n    const stripHtml = (html: string) => {\n      const tempDiv = document.createElement('div');\n      tempDiv.innerHTML = html;\n      return tempDiv.textContent || tempDiv.innerText || '';\n    };\n    \n    // Strip HTML tags if the content appears to be HTML\n    const cleanText = text.includes('<') && text.includes('>') ? stripHtml(text) : text;\n    \n    if (cleanText.length <= maxLength) return cleanText;\n    \n    return cleanText.substring(0, maxLength).trim() + '...';\n  };\n\n  const toggleSidebar = () => {\n    setIsSidebarCollapsed(!isSidebarCollapsed);\n  };\n\n  // Handle user logout\n  const handleLogout = async () => {\n    try {\n      await signOut(auth);\n    } catch (error) {\n      // Error handling for logout failure\n    }\n  };\n\n  return (\n    <div className={styles['three-column-layout']}>\n      {/* Background overlay for mobile */}\n      {windowWidth < 768 && !isSidebarCollapsed && (\n        <div className={`${styles['menu-overlay']} ${styles['active']}`} onClick={toggleSidebar}></div>\n      )}\n    \n      {/* LEFT SIDEBAR */}\n      <LeftSidebar \n        isAuthenticated={isAuthenticated} \n        handleLogout={handleLogout} \n        toggleSidebar={toggleSidebar} \n        isSidebarCollapsed={isSidebarCollapsed}\n      />\n\n      {/* Mobile sidebar toggle button - only shown on mobile */}\n      {windowWidth < 768 && (\n        <button \n          className={styles['toggle-button']} \n          onClick={toggleSidebar}\n          aria-label={isSidebarCollapsed ? \"Expand sidebar\" : \"Collapse sidebar\"}\n        >\n          {isSidebarCollapsed ? \"\" : \"\"}\n        </button>\n      )}\n\n      {/* MAIN CONTENT */}\n      <main className={`${styles['center-column']} ${isSidebarCollapsed && windowWidth >= 768 ? styles['expanded'] : ''}`}>\n        {/* Daily Prompt Banner */}\n        <div className={styles['prompt-banner']}>\n          <div className={styles['prompt-icon']}></div>\n          <div className={styles['prompt-text']}>What's an idea that changed your life?</div>\n          <Link href=\"/write\" className={styles['prompt-button']}>\n            Write now \n          </Link>\n        </div>\n\n        {isLoading ? (\n          <div className={styles['loading']}>Loading articles...</div>\n        ) : (\n          <>\n            {/* Featured Thought */}\n            {featuredArticle && (\n              <article className={styles['featured-card']}>\n                <div className={styles['featured-content']}>\n                  <div className={styles['featured-label']}>FEATURED THOUGHT</div>\n                  <h2 className={styles['featured-title']}>{featuredArticle.title}</h2>\n                  <div className={styles['featured-meta']}>\n                    by {getAuthorName(featuredArticle)}  {getReadingTime(featuredArticle.content)} min read\n                  </div>\n                  <p className={styles['featured-excerpt']}>\n                    {getExcerpt(featuredArticle)}\n                  </p>\n                  <Link href={`/articles?slug=${encodeURIComponent(featuredArticle.slug)}`} className={styles['read-link']}>\n                    Read \n                  </Link>\n                </div>\n                {featuredArticle.coverImageUrl && (\n                  <div className={styles['featured-image']}>\n                    <img \n                      src={featuredArticle.coverImageUrl} \n                      alt={featuredArticle.title}\n                      className={styles['cover-image']}\n                    />\n                  </div>\n                )}\n              </article>\n            )}\n\n            {/* Article Grid */}\n            <div className={styles['article-grid']}>\n              {articles.map((article, index) => (\n                <article \n                  key={article._id || article.slug || `article-${index}`} \n                  className={styles['article-card']}\n                >\n                  <h3 className={styles['article-title']}>{article.title}</h3>\n                  <div className={styles['article-meta']}>\n                    by {getAuthorName(article)}  {getReadingTime(article.content)} min read\n                  </div>\n                  {(article.excerpt || (article.content && article.content.length > 0)) && (\n                    <p className={styles['article-excerpt']}>\n                      {getExcerpt(article)}\n                    </p>\n                  )}\n                  \n                  {/* Tags */}\n                  {article.tags && article.tags.length > 0 && (\n                    <div className={styles['article-tags']}>\n                      {article.tags.map((tag, tagIndex) => (\n                        <Link\n                          key={`${article.slug}-tag-${tagIndex}`}\n                          href={`/tag/${tag.toLowerCase()}`}\n                          className={styles['tag']}\n                        >\n                          #{tag}\n                        </Link>\n                      ))}\n                    </div>\n                  )}\n                  \n                  {/* Reaction Bar */}\n                  <div className={styles['reaction-bar']}>\n                    <button className={styles['reaction-button']}> Echo</button>\n                    <button className={styles['reaction-button']}> Resonate</button>\n                    <button className={styles['reaction-button']}> Comment</button>\n                    <Link href={`/articles?slug=${encodeURIComponent(article.slug)}`} className={styles['read-link']}>\n                      Read \n                    </Link>\n                  </div>\n                </article>\n              ))}\n            </div>\n          </>\n        )}\n      </main>\n\n      {/* RIGHT SIDEBAR */}\n      <aside className={styles['right-sidebar']}>\n        <h2 className={styles['sidebar-heading']}>Trending</h2>\n        {isAuthenticated && <NotificationBell />}\n        <div className={styles['tag-list']}>\n          {tags.map(tag => (\n            <Link key={tag} href={`/tag/${tag.toLowerCase()}`} className={styles['trending-tag']}>\n              # {tag}\n            </Link>\n          ))}\n        </div>\n        <Link href=\"/write\" className={styles['write-button']}>\n          Write\n        </Link>\n      </aside>\n    </div>\n  )\n}"],"names":[],"mappings":"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","debugId":null}}]
}