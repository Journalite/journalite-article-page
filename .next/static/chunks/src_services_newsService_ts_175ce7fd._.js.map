{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/sirabdisalam/journalite-article-page/src/services/newsService.ts"],"sourcesContent":["// NewsData.io interfaces (primary source)\nexport interface NewsDataArticle {\n    title: string;\n    link: string;\n    description: string;\n    content: string;\n    pubDate: string;\n    image_url: string;\n    source_id: string;\n    source_name: string;\n    creator: string[];\n    category: string[];\n    country: string[];\n    language: string;\n}\n\nexport interface NewsDataResponse {\n    status: string;\n    totalResults: number;\n    results: NewsDataArticle[];\n    nextPage?: string;\n}\n\n// Original NewsAPI.org interfaces (for fallback compatibility)\nexport interface NewsArticle {\n    title: string;\n    description: string;\n    content: string;\n    url: string;\n    urlToImage: string;\n    publishedAt: string;\n    source: {\n        name: string;\n    };\n    author: string;\n}\n\nexport interface NewsResponse {\n    status: string;\n    totalResults: number;\n    articles: NewsArticle[];\n}\n\nclass NewsService {\n    private newsDataApiKey: string;\n    private newsApiKey: string;\n    private newsDataBaseUrl = 'https://newsdata.io/api/1/news';\n    private newsApiBaseUrl = 'https://newsapi.org/v2';\n\n    constructor() {\n        // Primary: NewsData.io\n        this.newsDataApiKey = process.env.NEXT_PUBLIC_NEWSDATA_API_KEY || '';\n        // Fallback: NewsAPI.org  \n        this.newsApiKey = process.env.NEXT_PUBLIC_NEWS_API_KEY || '';\n\n        if (!this.newsDataApiKey || this.newsDataApiKey === 'YOUR_API_KEY_HERE') {\n            console.warn('NewsData.io API key not configured. Please set NEXT_PUBLIC_NEWSDATA_API_KEY in your environment variables.');\n        }\n\n        if (!this.newsApiKey || this.newsApiKey === 'YOUR_API_KEY_HERE') {\n            console.warn('NewsAPI.org key not configured. NewsData.io will be used exclusively.');\n        }\n    }\n\n    // Helper method to convert NewsData.io articles to standard format\n    private convertNewsDataToStandard(newsDataArticle: NewsDataArticle): NewsArticle {\n        return {\n            title: newsDataArticle.title,\n            description: newsDataArticle.description || '',\n            content: newsDataArticle.content || newsDataArticle.description || '',\n            url: newsDataArticle.link,\n            urlToImage: newsDataArticle.image_url || '',\n            publishedAt: newsDataArticle.pubDate,\n            source: {\n                name: newsDataArticle.source_name || newsDataArticle.source_id\n            },\n            author: newsDataArticle.creator?.[0] || newsDataArticle.source_name || 'Unknown'\n        };\n    }\n\n    async getTopHeadlines(category: string = 'general', country: string = 'us'): Promise<NewsResponse> {\n        // Try NewsData.io first (primary source)\n        if (this.newsDataApiKey && this.newsDataApiKey !== 'YOUR_API_KEY_HERE') {\n            try {\n                console.log('üì∞ Fetching from NewsData.io (primary)');\n                return await this.getNewsDataHeadlines(category, country);\n            } catch (error) {\n                console.warn('‚ö†Ô∏è NewsData.io failed, falling back to NewsAPI.org:', error);\n            }\n        }\n\n        // Fallback to NewsAPI.org\n        if (this.newsApiKey && this.newsApiKey !== 'YOUR_API_KEY_HERE') {\n            console.log('üì∞ Using NewsAPI.org (fallback)');\n            return await this.getNewsApiHeadlines(category, country);\n        }\n\n        throw new Error('No news API keys configured. Please set NEXT_PUBLIC_NEWSDATA_API_KEY or NEXT_PUBLIC_NEWS_API_KEY');\n    }\n\n    async searchArticles(query: string, sortBy: string = 'publishedAt'): Promise<NewsResponse> {\n        // Try NewsData.io first (primary source)\n        if (this.newsDataApiKey && this.newsDataApiKey !== 'YOUR_API_KEY_HERE') {\n            try {\n                console.log('üîç Searching with NewsData.io (primary)');\n                return await this.searchNewsDataArticles(query);\n            } catch (error) {\n                console.warn('‚ö†Ô∏è NewsData.io search failed, falling back to NewsAPI.org:', error);\n            }\n        }\n\n        // Fallback to NewsAPI.org\n        if (this.newsApiKey && this.newsApiKey !== 'YOUR_API_KEY_HERE') {\n            console.log('üîç Searching with NewsAPI.org (fallback)');\n            return await this.searchNewsApiArticles(query, sortBy);\n        }\n\n        throw new Error('No news API keys configured. Please set NEXT_PUBLIC_NEWSDATA_API_KEY or NEXT_PUBLIC_NEWS_API_KEY');\n    }\n\n    // NewsData.io implementation\n    private async getNewsDataHeadlines(category: string = 'general', country: string = 'us'): Promise<NewsResponse> {\n        const params = new URLSearchParams({\n            apikey: this.newsDataApiKey,\n            country: country,\n            language: 'en',\n            size: '10'\n        });\n\n        // Map categories to NewsData.io categories\n        const categoryMap: { [key: string]: string } = {\n            'general': 'top',\n            'business': 'business',\n            'technology': 'technology',\n            'science': 'science',\n            'health': 'health',\n            'sports': 'sports',\n            'entertainment': 'entertainment'\n        };\n\n        if (categoryMap[category]) {\n            params.append('category', categoryMap[category]);\n        }\n\n        const url = `${this.newsDataBaseUrl}?${params.toString()}`;\n        const response = await fetch(url);\n\n        if (!response.ok) {\n            throw new Error(`NewsData.io HTTP error! status: ${response.status}`);\n        }\n\n        const data: NewsDataResponse = await response.json();\n\n        // Convert to standard format\n        return {\n            status: data.status,\n            totalResults: data.totalResults,\n            articles: data.results.map(article => this.convertNewsDataToStandard(article))\n        };\n    }\n\n    private async searchNewsDataArticles(query: string): Promise<NewsResponse> {\n        const params = new URLSearchParams({\n            apikey: this.newsDataApiKey,\n            q: query,\n            language: 'en',\n            size: '10'\n        });\n\n        const url = `${this.newsDataBaseUrl}?${params.toString()}`;\n        const response = await fetch(url);\n\n        if (!response.ok) {\n            throw new Error(`NewsData.io search HTTP error! status: ${response.status}`);\n        }\n\n        const data: NewsDataResponse = await response.json();\n\n        // Convert to standard format\n        return {\n            status: data.status,\n            totalResults: data.totalResults,\n            articles: data.results.map(article => this.convertNewsDataToStandard(article))\n        };\n    }\n\n    // NewsAPI.org fallback implementation\n    private async getNewsApiHeadlines(category: string = 'general', country: string = 'us'): Promise<NewsResponse> {\n        const url = `${this.newsApiBaseUrl}/top-headlines?category=${category}&country=${country}&apiKey=${this.newsApiKey}`;\n        const response = await fetch(url);\n\n        if (!response.ok) {\n            throw new Error(`NewsAPI.org HTTP error! status: ${response.status}`);\n        }\n\n        return response.json();\n    }\n\n    private async searchNewsApiArticles(query: string, sortBy: string = 'publishedAt'): Promise<NewsResponse> {\n        const url = `${this.newsApiBaseUrl}/everything?q=${encodeURIComponent(query)}&sortBy=${sortBy}&apiKey=${this.newsApiKey}`;\n        const response = await fetch(url);\n\n        if (!response.ok) {\n            throw new Error(`NewsAPI.org search HTTP error! status: ${response.status}`);\n        }\n\n        return response.json();\n    }\n\n    isConfigured(): boolean {\n        return !!(\n            (this.newsDataApiKey && this.newsDataApiKey !== 'YOUR_API_KEY_HERE') ||\n            (this.newsApiKey && this.newsApiKey !== 'YOUR_API_KEY_HERE')\n        );\n    }\n\n    getConfiguredServices(): string[] {\n        const services = [];\n        if (this.newsDataApiKey && this.newsDataApiKey !== 'YOUR_API_KEY_HERE') {\n            services.push('NewsData.io (Primary)');\n        }\n        if (this.newsApiKey && this.newsApiKey !== 'YOUR_API_KEY_HERE') {\n            services.push('NewsAPI.org (Fallback)');\n        }\n        return services;\n    }\n\n    getCurrentProvider(): string {\n        if (this.newsDataApiKey && this.newsDataApiKey !== 'YOUR_API_KEY_HERE') {\n            return 'NewsData.io';\n        }\n        if (this.newsApiKey && this.newsApiKey !== 'YOUR_API_KEY_HERE') {\n            return 'NewsAPI.org';\n        }\n        return 'None configured';\n    }\n}\n\nexport const newsService = new NewsService(); "],"names":[],"mappings":"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","debugId":null}}]
}