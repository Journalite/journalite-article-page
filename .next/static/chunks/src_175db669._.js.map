{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/styles/home.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"active\": \"home-module__i0QXTG__active\",\n  \"activeTab\": \"home-module__i0QXTG__activeTab\",\n  \"article-card\": \"home-module__i0QXTG__article-card\",\n  \"article-container\": \"home-module__i0QXTG__article-container\",\n  \"article-content\": \"home-module__i0QXTG__article-content\",\n  \"article-cover-image\": \"home-module__i0QXTG__article-cover-image\",\n  \"article-excerpt\": \"home-module__i0QXTG__article-excerpt\",\n  \"article-grid\": \"home-module__i0QXTG__article-grid\",\n  \"article-header\": \"home-module__i0QXTG__article-header\",\n  \"article-image\": \"home-module__i0QXTG__article-image\",\n  \"article-meta\": \"home-module__i0QXTG__article-meta\",\n  \"article-page\": \"home-module__i0QXTG__article-page\",\n  \"article-paragraph\": \"home-module__i0QXTG__article-paragraph\",\n  \"article-tag\": \"home-module__i0QXTG__article-tag\",\n  \"article-tags\": \"home-module__i0QXTG__article-tags\",\n  \"article-title\": \"home-module__i0QXTG__article-title\",\n  \"articleForm\": \"home-module__i0QXTG__articleForm\",\n  \"articleFormContainer\": \"home-module__i0QXTG__articleFormContainer\",\n  \"articleFormHeader\": \"home-module__i0QXTG__articleFormHeader\",\n  \"articleFormSubtitle\": \"home-module__i0QXTG__articleFormSubtitle\",\n  \"articleFormTitle\": \"home-module__i0QXTG__articleFormTitle\",\n  \"author-avatar\": \"home-module__i0QXTG__author-avatar\",\n  \"author-info\": \"home-module__i0QXTG__author-info\",\n  \"author-name\": \"home-module__i0QXTG__author-name\",\n  \"avatarPlaceholder\": \"home-module__i0QXTG__avatarPlaceholder\",\n  \"backLink\": \"home-module__i0QXTG__backLink\",\n  \"cancelButton\": \"home-module__i0QXTG__cancelButton\",\n  \"cancelReplyButton\": \"home-module__i0QXTG__cancelReplyButton\",\n  \"center-column\": \"home-module__i0QXTG__center-column\",\n  \"closePromptButton\": \"home-module__i0QXTG__closePromptButton\",\n  \"collapsed\": \"home-module__i0QXTG__collapsed\",\n  \"commentActions\": \"home-module__i0QXTG__commentActions\",\n  \"commentAuthor\": \"home-module__i0QXTG__commentAuthor\",\n  \"commentAvatar\": \"home-module__i0QXTG__commentAvatar\",\n  \"commentContent\": \"home-module__i0QXTG__commentContent\",\n  \"commentControls\": \"home-module__i0QXTG__commentControls\",\n  \"commentDate\": \"home-module__i0QXTG__commentDate\",\n  \"commentForm\": \"home-module__i0QXTG__commentForm\",\n  \"commentHeader\": \"home-module__i0QXTG__commentHeader\",\n  \"commentInput\": \"home-module__i0QXTG__commentInput\",\n  \"commentInputContainer\": \"home-module__i0QXTG__commentInputContainer\",\n  \"commentInputWrapper\": \"home-module__i0QXTG__commentInputWrapper\",\n  \"commentItem\": \"home-module__i0QXTG__commentItem\",\n  \"commentMeta\": \"home-module__i0QXTG__commentMeta\",\n  \"commentsList\": \"home-module__i0QXTG__commentsList\",\n  \"container\": \"home-module__i0QXTG__container\",\n  \"cover-image\": \"home-module__i0QXTG__cover-image\",\n  \"cta-button\": \"home-module__i0QXTG__cta-button\",\n  \"deleteButton\": \"home-module__i0QXTG__deleteButton\",\n  \"discussionSection\": \"home-module__i0QXTG__discussionSection\",\n  \"discussionTitle\": \"home-module__i0QXTG__discussionTitle\",\n  \"docsContainer\": \"home-module__i0QXTG__docsContainer\",\n  \"edit-button\": \"home-module__i0QXTG__edit-button\",\n  \"emptyState\": \"home-module__i0QXTG__emptyState\",\n  \"errorAlert\": \"home-module__i0QXTG__errorAlert\",\n  \"errorIcon\": \"home-module__i0QXTG__errorIcon\",\n  \"errorMessage\": \"home-module__i0QXTG__errorMessage\",\n  \"expanded\": \"home-module__i0QXTG__expanded\",\n  \"fadeIn\": \"home-module__i0QXTG__fadeIn\",\n  \"feature-desc\": \"home-module__i0QXTG__feature-desc\",\n  \"feature-title\": \"home-module__i0QXTG__feature-title\",\n  \"featured-card\": \"home-module__i0QXTG__featured-card\",\n  \"featured-content\": \"home-module__i0QXTG__featured-content\",\n  \"featured-excerpt\": \"home-module__i0QXTG__featured-excerpt\",\n  \"featured-image\": \"home-module__i0QXTG__featured-image\",\n  \"featured-label\": \"home-module__i0QXTG__featured-label\",\n  \"featured-meta\": \"home-module__i0QXTG__featured-meta\",\n  \"featured-title\": \"home-module__i0QXTG__featured-title\",\n  \"features\": \"home-module__i0QXTG__features\",\n  \"follow-button\": \"home-module__i0QXTG__follow-button\",\n  \"footer\": \"home-module__i0QXTG__footer\",\n  \"formActions\": \"home-module__i0QXTG__formActions\",\n  \"formControl\": \"home-module__i0QXTG__formControl\",\n  \"formGroup\": \"home-module__i0QXTG__formGroup\",\n  \"formLabel\": \"home-module__i0QXTG__formLabel\",\n  \"formTextarea\": \"home-module__i0QXTG__formTextarea\",\n  \"header\": \"home-module__i0QXTG__header\",\n  \"hero\": \"home-module__i0QXTG__hero\",\n  \"hero-subtitle\": \"home-module__i0QXTG__hero-subtitle\",\n  \"hero-title\": \"home-module__i0QXTG__hero-title\",\n  \"imagePreview\": \"home-module__i0QXTG__imagePreview\",\n  \"left-sidebar\": \"home-module__i0QXTG__left-sidebar\",\n  \"likeButton\": \"home-module__i0QXTG__likeButton\",\n  \"liked\": \"home-module__i0QXTG__liked\",\n  \"loading\": \"home-module__i0QXTG__loading\",\n  \"loadingSpinner\": \"home-module__i0QXTG__loadingSpinner\",\n  \"loginButton\": \"home-module__i0QXTG__loginButton\",\n  \"loginLink\": \"home-module__i0QXTG__loginLink\",\n  \"loginPrompt\": \"home-module__i0QXTG__loginPrompt\",\n  \"loginPromptButtons\": \"home-module__i0QXTG__loginPromptButtons\",\n  \"logo\": \"home-module__i0QXTG__logo\",\n  \"main-grid\": \"home-module__i0QXTG__main-grid\",\n  \"menu-overlay\": \"home-module__i0QXTG__menu-overlay\",\n  \"nav-explore\": \"home-module__i0QXTG__nav-explore\",\n  \"nav-home\": \"home-module__i0QXTG__nav-home\",\n  \"nav-icon\": \"home-module__i0QXTG__nav-icon\",\n  \"nav-learn\": \"home-module__i0QXTG__nav-learn\",\n  \"nav-link\": \"home-module__i0QXTG__nav-link\",\n  \"nav-login\": \"home-module__i0QXTG__nav-login\",\n  \"nav-logout\": \"home-module__i0QXTG__nav-logout\",\n  \"nav-plans\": \"home-module__i0QXTG__nav-plans\",\n  \"nav-profile\": \"home-module__i0QXTG__nav-profile\",\n  \"nav-settings\": \"home-module__i0QXTG__nav-settings\",\n  \"nav-signup\": \"home-module__i0QXTG__nav-signup\",\n  \"nav-text\": \"home-module__i0QXTG__nav-text\",\n  \"nav-thoughts\": \"home-module__i0QXTG__nav-thoughts\",\n  \"noComments\": \"home-module__i0QXTG__noComments\",\n  \"noResults\": \"home-module__i0QXTG__noResults\",\n  \"optionalLabel\": \"home-module__i0QXTG__optionalLabel\",\n  \"profileAvatar\": \"home-module__i0QXTG__profileAvatar\",\n  \"profileBio\": \"home-module__i0QXTG__profileBio\",\n  \"profileContent\": \"home-module__i0QXTG__profileContent\",\n  \"profileHeader\": \"home-module__i0QXTG__profileHeader\",\n  \"profileInfo\": \"home-module__i0QXTG__profileInfo\",\n  \"profileName\": \"home-module__i0QXTG__profileName\",\n  \"profileUsername\": \"home-module__i0QXTG__profileUsername\",\n  \"prompt-banner\": \"home-module__i0QXTG__prompt-banner\",\n  \"prompt-button\": \"home-module__i0QXTG__prompt-button\",\n  \"prompt-icon\": \"home-module__i0QXTG__prompt-icon\",\n  \"prompt-text\": \"home-module__i0QXTG__prompt-text\",\n  \"quote-card\": \"home-module__i0QXTG__quote-card\",\n  \"quote-tag\": \"home-module__i0QXTG__quote-tag\",\n  \"reaction-bar\": \"home-module__i0QXTG__reaction-bar\",\n  \"reaction-button\": \"home-module__i0QXTG__reaction-button\",\n  \"reaction-icon\": \"home-module__i0QXTG__reaction-icon\",\n  \"read-link\": \"home-module__i0QXTG__read-link\",\n  \"repliesList\": \"home-module__i0QXTG__repliesList\",\n  \"replyActions\": \"home-module__i0QXTG__replyActions\",\n  \"replyAuthor\": \"home-module__i0QXTG__replyAuthor\",\n  \"replyAvatar\": \"home-module__i0QXTG__replyAvatar\",\n  \"replyButton\": \"home-module__i0QXTG__replyButton\",\n  \"replyContent\": \"home-module__i0QXTG__replyContent\",\n  \"replyDate\": \"home-module__i0QXTG__replyDate\",\n  \"replyForm\": \"home-module__i0QXTG__replyForm\",\n  \"replyHeader\": \"home-module__i0QXTG__replyHeader\",\n  \"replyInput\": \"home-module__i0QXTG__replyInput\",\n  \"replyInputContainer\": \"home-module__i0QXTG__replyInputContainer\",\n  \"replyItem\": \"home-module__i0QXTG__replyItem\",\n  \"replyMeta\": \"home-module__i0QXTG__replyMeta\",\n  \"right-sidebar\": \"home-module__i0QXTG__right-sidebar\",\n  \"roleSelect\": \"home-module__i0QXTG__roleSelect\",\n  \"searchBarContainer\": \"home-module__i0QXTG__searchBarContainer\",\n  \"searchContainer\": \"home-module__i0QXTG__searchContainer\",\n  \"searchInput\": \"home-module__i0QXTG__searchInput\",\n  \"section-title\": \"home-module__i0QXTG__section-title\",\n  \"sectionHeading\": \"home-module__i0QXTG__sectionHeading\",\n  \"sectionTitle\": \"home-module__i0QXTG__sectionTitle\",\n  \"sidebar-collapse-button\": \"home-module__i0QXTG__sidebar-collapse-button\",\n  \"sidebar-footer\": \"home-module__i0QXTG__sidebar-footer\",\n  \"sidebar-header\": \"home-module__i0QXTG__sidebar-header\",\n  \"sidebar-heading\": \"home-module__i0QXTG__sidebar-heading\",\n  \"sidebarSearch\": \"home-module__i0QXTG__sidebarSearch\",\n  \"sidebarSection\": \"home-module__i0QXTG__sidebarSection\",\n  \"spin\": \"home-module__i0QXTG__spin\",\n  \"statBox\": \"home-module__i0QXTG__statBox\",\n  \"statLabel\": \"home-module__i0QXTG__statLabel\",\n  \"statNumber\": \"home-module__i0QXTG__statNumber\",\n  \"statsContainer\": \"home-module__i0QXTG__statsContainer\",\n  \"submitButton\": \"home-module__i0QXTG__submitButton\",\n  \"submitReplyButton\": \"home-module__i0QXTG__submitReplyButton\",\n  \"tabButton\": \"home-module__i0QXTG__tabButton\",\n  \"tabContainer\": \"home-module__i0QXTG__tabContainer\",\n  \"tag\": \"home-module__i0QXTG__tag\",\n  \"tag-list\": \"home-module__i0QXTG__tag-list\",\n  \"tagsPreview\": \"home-module__i0QXTG__tagsPreview\",\n  \"three-column-layout\": \"home-module__i0QXTG__three-column-layout\",\n  \"toggle-button\": \"home-module__i0QXTG__toggle-button\",\n  \"toggleRepliesButton\": \"home-module__i0QXTG__toggleRepliesButton\",\n  \"topic-tag\": \"home-module__i0QXTG__topic-tag\",\n  \"topics\": \"home-module__i0QXTG__topics\",\n  \"trending-list\": \"home-module__i0QXTG__trending-list\",\n  \"trending-tag\": \"home-module__i0QXTG__trending-tag\",\n  \"userManagementContainer\": \"home-module__i0QXTG__userManagementContainer\",\n  \"usersTable\": \"home-module__i0QXTG__usersTable\",\n  \"usersTableContainer\": \"home-module__i0QXTG__usersTableContainer\",\n  \"vertical-nav\": \"home-module__i0QXTG__vertical-nav\",\n  \"write-button\": \"home-module__i0QXTG__write-button\",\n  \"writer-avatar\": \"home-module__i0QXTG__writer-avatar\",\n  \"writer-info\": \"home-module__i0QXTG__writer-info\",\n  \"writer-item\": \"home-module__i0QXTG__writer-item\",\n  \"writer-name\": \"home-module__i0QXTG__writer-name\",\n  \"writers\": \"home-module__i0QXTG__writers\",\n  \"writing-tip\": \"home-module__i0QXTG__writing-tip\",\n  \"writing-tips\": \"home-module__i0QXTG__writing-tips\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 198, "column": 0}, "map": {"version":3,"sources":["file:///Users/sirabdisalam/journalite-article-page/src/firebase/clientApp.ts"],"sourcesContent":["// Import the functions you need from the SDKs you need\nimport { initializeApp } from \"firebase/app\";\nimport { getAnalytics } from \"firebase/analytics\";\nimport { getAuth, connectAuthEmulator } from \"firebase/auth\";\nimport { getFirestore } from \"firebase/firestore\";\n// TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\n\n// Firebase configuration from environment variables\nconst firebaseConfig = {\n    apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n    authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n    projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n    storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n    messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n    appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n    measurementId: process.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID\n};\n///\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\n\n// Initialize Analytics only in browser environment\nlet analytics;\nif (typeof window !== 'undefined') {\n    try {\n        analytics = getAnalytics(app);\n    } catch (error) {\n        // Analytics initialization skipped in development\n    }\n}\n\n// Initialize Firebase Authentication\nconst auth = getAuth(app);\n\n// Initialize Firestore\nconst db = getFirestore(app);\n\n// Configure custom auth actions URL\nif (typeof window !== 'undefined') {\n    const actionCodeSettings = {\n        url: `${window.location.origin}/reset-password`,\n        handleCodeInApp: true,\n    };\n\n    // We need to update this in the forgot-password component when sending the reset email\n}\n\n// // Connect to Auth Emulator in development\n// if (process.env.NODE_ENV === 'development') {\n//     // connectAuthEmulator(auth, \"http://localhost:9099\", { disableWarnings: true });\n// }\n\n/////\n\nexport { app, analytics, auth, db };"],"names":[],"mappings":"AAAA,uDAAuD;;;;;;;AAU3C;AATZ;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;;;;;AACA,4DAA4D;AAC5D,iEAAiE;AAEjE,oDAAoD;AACpD,MAAM,iBAAiB;IACnB,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;IACL,aAAa;AACjB;AACA,GAAG;AAEH,sBAAsB;AACtB,MAAM,MAAM,CAAA,GAAA,uLAAA,CAAA,gBAAa,AAAD,EAAE;AAE1B,mDAAmD;AACnD,IAAI;AACJ,wCAAmC;IAC/B,IAAI;QACA,YAAY,CAAA,GAAA,6KAAA,CAAA,eAAY,AAAD,EAAE;IAC7B,EAAE,OAAO,OAAO;IACZ,kDAAkD;IACtD;AACJ;AAEA,qCAAqC;AACrC,MAAM,OAAO,CAAA,GAAA,6MAAA,CAAA,UAAO,AAAD,EAAE;AAErB,uBAAuB;AACvB,MAAM,KAAK,CAAA,GAAA,sKAAA,CAAA,eAAY,AAAD,EAAE;AAExB,oCAAoC;AACpC,wCAAmC;IAC/B,MAAM,qBAAqB;QACvB,KAAK,GAAG,OAAO,QAAQ,CAAC,MAAM,CAAC,eAAe,CAAC;QAC/C,iBAAiB;IACrB;AAEA,uFAAuF;AAC3F","debugId":null}},
    {"offset": {"line": 264, "column": 0}, "map": {"version":3,"sources":["file:///Users/sirabdisalam/journalite-article-page/src/firebase/notifications.ts"],"sourcesContent":["import {\n    collection,\n    addDoc,\n    getDocs,\n    getDoc,\n    doc,\n    query,\n    orderBy,\n    Timestamp,\n    where,\n    updateDoc,\n    deleteDoc,\n    limit\n} from 'firebase/firestore';\nimport { db, auth } from './clientApp';\n\n// Notification interface matching Firestore structure\nexport interface Notification {\n    id?: string;\n    userId: string;\n    type: 'comment' | 'reply' | 'like';\n    read: boolean;\n    sourceId: string; // ID of the article/comment\n    sourceType: 'article' | 'comment';\n    message: string;\n    fromUser: {\n        id: string;\n        name: string;\n    };\n    createdAt: Timestamp;\n    articleSlug?: string; // Optional slug to link directly to the article\n    articleTitle?: string; // Optional article title for context\n}\n\n/**\n * Create a new notification when someone comments on a user's post\n */\nexport async function createCommentNotification(\n    ownerId: string,\n    articleId: string,\n    articleSlug: string,\n    articleTitle: string,\n    commentId: string,\n    commentText: string\n) {\n    try {\n        // Skip if the owner is the commenter (don't notify yourself)\n        const currentUser = auth.currentUser;\n        if (!currentUser || currentUser.uid === ownerId) {\n            return null;\n        }\n\n        // Create notification object\n        const notification: Omit<Notification, 'id'> = {\n            userId: ownerId, // Who will receive the notification\n            type: 'comment',\n            read: false,\n            sourceId: commentId,\n            sourceType: 'comment',\n            message: `${currentUser.displayName || 'Someone'} commented on your article: \"${commentText.substring(0, 50)}${commentText.length > 50 ? '...' : ''}\"`,\n            fromUser: {\n                id: currentUser.uid,\n                name: currentUser.displayName || 'Anonymous'\n            },\n            createdAt: Timestamp.now(),\n            articleSlug,\n            articleTitle\n        };\n\n        // Add to Firestore\n        const docRef = await addDoc(collection(db, 'notifications'), notification);\n\n        return {\n            id: docRef.id,\n            ...notification\n        };\n    } catch (error) {\n        console.error('Error creating notification:', error);\n        return null;\n    }\n}\n\n/**\n * Get all notifications for the current user\n */\nexport async function getUserNotifications(unreadOnly = false) {\n    try {\n        const currentUser = auth.currentUser;\n        if (!currentUser) {\n            throw new Error('User not authenticated');\n        }\n\n        // Create base query\n        const notificationsRef = collection(db, 'notifications');\n        let q;\n\n        if (unreadOnly) {\n            // Only fetch unread notifications\n            q = query(\n                notificationsRef,\n                where('userId', '==', currentUser.uid),\n                where('read', '==', false),\n                orderBy('createdAt', 'desc'),\n                limit(100)\n            );\n        } else {\n            // Fetch all notifications\n            q = query(\n                notificationsRef,\n                where('userId', '==', currentUser.uid),\n                orderBy('createdAt', 'desc'),\n                limit(100)\n            );\n        }\n\n        const querySnapshot = await getDocs(q);\n\n        const notifications: Notification[] = [];\n        querySnapshot.forEach((doc) => {\n            notifications.push({\n                id: doc.id,\n                ...doc.data() as Omit<Notification, 'id'>\n            });\n        });\n\n        return notifications;\n    } catch (error) {\n        console.error('Error fetching notifications:', error);\n        throw error;\n    }\n}\n\n/**\n * Mark a notification as read\n */\nexport async function markNotificationAsRead(notificationId: string) {\n    try {\n        const currentUser = auth.currentUser;\n        if (!currentUser) {\n            throw new Error('User not authenticated');\n        }\n\n        const notificationRef = doc(db, 'notifications', notificationId);\n        const notificationSnap = await getDoc(notificationRef);\n\n        if (!notificationSnap.exists()) {\n            throw new Error('Notification not found');\n        }\n\n        const notificationData = notificationSnap.data() as Notification;\n\n        // Check if the notification belongs to the current user\n        if (notificationData.userId !== currentUser.uid) {\n            throw new Error('Unauthorized access to notification');\n        }\n\n        // Update the read status\n        await updateDoc(notificationRef, {\n            read: true\n        });\n\n        return {\n            success: true\n        };\n    } catch (error) {\n        console.error('Error marking notification as read:', error);\n        throw error;\n    }\n}\n\n/**\n * Mark all notifications as read for the current user\n */\nexport async function markAllNotificationsAsRead() {\n    try {\n        const currentUser = auth.currentUser;\n        if (!currentUser) {\n            throw new Error('User not authenticated');\n        }\n\n        const notificationsRef = collection(db, 'notifications');\n        const q = query(\n            notificationsRef,\n            where('userId', '==', currentUser.uid),\n            where('read', '==', false)\n        );\n\n        const querySnapshot = await getDocs(q);\n\n        // Create an array of promises to update each notification\n        const updatePromises = querySnapshot.docs.map(doc =>\n            updateDoc(doc.ref, { read: true })\n        );\n\n        // Execute all updates in parallel\n        await Promise.all(updatePromises);\n\n        return {\n            success: true,\n            count: querySnapshot.size\n        };\n    } catch (error) {\n        console.error('Error marking all notifications as read:', error);\n        throw error;\n    }\n}\n\n/**\n * Delete a notification\n */\nexport async function deleteNotification(notificationId: string) {\n    try {\n        const currentUser = auth.currentUser;\n        if (!currentUser) {\n            throw new Error('User not authenticated');\n        }\n\n        const notificationRef = doc(db, 'notifications', notificationId);\n        const notificationSnap = await getDoc(notificationRef);\n\n        if (!notificationSnap.exists()) {\n            throw new Error('Notification not found');\n        }\n\n        const notificationData = notificationSnap.data() as Notification;\n\n        // Check if the notification belongs to the current user\n        if (notificationData.userId !== currentUser.uid) {\n            throw new Error('Unauthorized access to notification');\n        }\n\n        // Delete the notification\n        await deleteDoc(notificationRef);\n\n        return {\n            success: true\n        };\n    } catch (error) {\n        console.error('Error deleting notification:', error);\n        throw error;\n    }\n}\n\n/**\n * Get the count of unread notifications\n */\nexport async function getUnreadNotificationsCount() {\n    try {\n        const currentUser = auth.currentUser;\n        if (!currentUser) {\n            return 0;\n        }\n\n        const notificationsRef = collection(db, 'notifications');\n        const q = query(\n            notificationsRef,\n            where('userId', '==', currentUser.uid),\n            where('read', '==', false)\n        );\n\n        const querySnapshot = await getDocs(q);\n        return querySnapshot.size;\n    } catch (error) {\n        console.error('Error counting unread notifications:', error);\n        return 0;\n    }\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 442, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/components/NotificationBell.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"bellButton\": \"NotificationBell-module__doceWq__bellButton\",\n  \"bellIcon\": \"NotificationBell-module__doceWq__bellIcon\",\n  \"emptyState\": \"NotificationBell-module__doceWq__emptyState\",\n  \"notificationContainer\": \"NotificationBell-module__doceWq__notificationContainer\",\n  \"notificationContent\": \"NotificationBell-module__doceWq__notificationContent\",\n  \"notificationDropdown\": \"NotificationBell-module__doceWq__notificationDropdown\",\n  \"notificationFooter\": \"NotificationBell-module__doceWq__notificationFooter\",\n  \"notificationHeader\": \"NotificationBell-module__doceWq__notificationHeader\",\n  \"notificationItem\": \"NotificationBell-module__doceWq__notificationItem\",\n  \"notificationList\": \"NotificationBell-module__doceWq__notificationList\",\n  \"notificationMessage\": \"NotificationBell-module__doceWq__notificationMessage\",\n  \"notificationTime\": \"NotificationBell-module__doceWq__notificationTime\",\n  \"seeMoreLink\": \"NotificationBell-module__doceWq__seeMoreLink\",\n  \"unread\": \"NotificationBell-module__doceWq__unread\",\n  \"unreadBadge\": \"NotificationBell-module__doceWq__unreadBadge\",\n  \"unreadDot\": \"NotificationBell-module__doceWq__unreadDot\",\n  \"viewAllLink\": \"NotificationBell-module__doceWq__viewAllLink\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 467, "column": 0}, "map": {"version":3,"sources":["file:///Users/sirabdisalam/journalite-article-page/src/components/NotificationBell.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect, useRef } from 'react'\nimport Link from 'next/link'\nimport { getUnreadNotificationsCount, getUserNotifications, markNotificationAsRead, Notification } from '@/firebase/notifications'\nimport styles from './NotificationBell.module.css'\n\nconst NotificationBell = () => {\n  const [unreadCount, setUnreadCount] = useState<number>(0)\n  const [notifications, setNotifications] = useState<Notification[]>([])\n  const [isOpen, setIsOpen] = useState<boolean>(false)\n  const notificationRef = useRef<HTMLDivElement>(null)\n\n  // Fetch unread count on mount and set up interval\n  useEffect(() => {\n    const fetchUnreadCount = async () => {\n      const count = await getUnreadNotificationsCount()\n      setUnreadCount(count)\n    }\n\n    // Fetch immediately\n    fetchUnreadCount()\n\n    // Set up polling every 60 seconds\n    const interval = setInterval(fetchUnreadCount, 60000)\n\n    // Clear interval on unmount\n    return () => clearInterval(interval)\n  }, [])\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (notificationRef.current && !notificationRef.current.contains(event.target as Node)) {\n        setIsOpen(false)\n      }\n    }\n\n    document.addEventListener('mousedown', handleClickOutside)\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside)\n    }\n  }, [])\n\n  // Fetch notifications when dropdown is opened\n  useEffect(() => {\n    if (isOpen) {\n      fetchNotifications()\n    }\n  }, [isOpen])\n\n  const fetchNotifications = async () => {\n    try {\n      const fetchedNotifications = await getUserNotifications(false)\n      setNotifications(fetchedNotifications)\n    } catch (error) {\n      console.error('Error fetching notifications:', error)\n    }\n  }\n\n  const handleToggle = () => {\n    setIsOpen(!isOpen)\n  }\n\n  const handleNotificationClick = async (notification: Notification) => {\n    try {\n      if (!notification.read && notification.id) {\n        await markNotificationAsRead(notification.id)\n        \n        // Update local state\n        setUnreadCount(prev => Math.max(prev - 1, 0))\n        setNotifications(prev => \n          prev.map(n => \n            n.id === notification.id \n              ? { ...n, read: true } \n              : n\n          )\n        )\n      }\n    } catch (error) {\n      console.error('Error marking notification as read:', error)\n    }\n  }\n\n  const formatTime = (timestamp: any) => {\n    if (!timestamp) return ''\n    \n    const date = timestamp.toDate ? timestamp.toDate() : new Date(timestamp)\n    const now = new Date()\n    const diffMinutes = Math.floor((now.getTime() - date.getTime()) / (1000 * 60))\n    \n    if (diffMinutes < 1) return 'Just now'\n    if (diffMinutes < 60) return `${diffMinutes}m ago`\n    \n    const diffHours = Math.floor(diffMinutes / 60)\n    if (diffHours < 24) return `${diffHours}h ago`\n    \n    const diffDays = Math.floor(diffHours / 24)\n    if (diffDays < 7) return `${diffDays}d ago`\n    \n    return date.toLocaleDateString()\n  }\n\n  return (\n    <div className={styles.notificationContainer} ref={notificationRef}>\n      <button className={styles.bellButton} onClick={handleToggle}>\n        <span className={styles.bellIcon}>🔔</span>\n        {unreadCount > 0 && (\n          <span className={styles.unreadBadge}>{unreadCount}</span>\n        )}\n      </button>\n      \n      {isOpen && (\n        <div className={styles.notificationDropdown}>\n          <div className={styles.notificationHeader}>\n            <h3>Notifications</h3>\n            {notifications.length > 0 && (\n              <Link href=\"/notifications\" className={styles.viewAllLink}>\n                View All\n              </Link>\n            )}\n          </div>\n          \n          <div className={styles.notificationList}>\n            {notifications.length === 0 ? (\n              <div className={styles.emptyState}>\n                No notifications yet\n              </div>\n            ) : (\n              notifications.slice(0, 5).map((notification) => (\n                <Link \n                  href={`/articles?slug=${notification.articleSlug}`} \n                  key={notification.id}\n                  className={`${styles.notificationItem} ${!notification.read ? styles.unread : ''}`}\n                  onClick={() => handleNotificationClick(notification)}\n                >\n                  <div className={styles.notificationContent}>\n                    <p className={styles.notificationMessage}>\n                      {notification.message}\n                    </p>\n                    <span className={styles.notificationTime}>\n                      {formatTime(notification.createdAt)}\n                    </span>\n                  </div>\n                  {!notification.read && (\n                    <div className={styles.unreadDot}></div>\n                  )}\n                </Link>\n              ))\n            )}\n          </div>\n          \n          {notifications.length > 5 && (\n            <div className={styles.notificationFooter}>\n              <Link href=\"/notifications\" className={styles.seeMoreLink}>\n                See more notifications\n              </Link>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default NotificationBell "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 732, "column": 0}, "map": {"version":3,"sources":["file:///Users/sirabdisalam/journalite-article-page/src/services/userService.ts"],"sourcesContent":["import {\n    doc,\n    setDoc,\n    getDoc,\n    query,\n    collection,\n    where,\n    getDocs,\n    serverTimestamp,\n    updateDoc\n} from 'firebase/firestore';\nimport { updateProfile } from 'firebase/auth';\nimport { auth, db } from '../firebase/clientApp';\n\nexport interface UserProfile {\n    uid: string;\n    firstName: string;\n    lastName: string;\n    username: string;\n    email: string;\n    bio?: string;\n    createdAt: any;\n}\n\n/**\n * Checks if a username is already taken\n * @param username The username to check\n * @returns A promise that resolves to a boolean indicating if the username is taken\n */\nexport async function isUsernameTaken(username: string): Promise<boolean> {\n    try {\n        const usernameQuery = query(\n            collection(db, 'users'),\n            where('username', '==', username.toLowerCase())\n        );\n\n        const querySnapshot = await getDocs(usernameQuery);\n        return !querySnapshot.empty;\n    } catch (error) {\n        console.error('Error checking username:', error);\n        throw error;\n    }\n}\n\n/**\n * Creates a user profile in Firestore\n * @param uid User's Firebase Auth UID\n * @param profile User profile data\n */\nexport async function createUserProfile(uid: string, profile: Omit<UserProfile, 'uid' | 'createdAt'>): Promise<void> {\n    try {\n        // First check if this user ID already has a profile\n        const existingUserProfile = await getUserProfile(uid);\n        if (existingUserProfile) {\n            console.log('User profile already exists, updating instead of creating');\n\n            // Update existing profile\n            const userRef = doc(db, 'users', uid);\n            await updateDoc(userRef, {\n                firstName: profile.firstName,\n                lastName: profile.lastName,\n                username: profile.username.toLowerCase(),\n                email: profile.email.toLowerCase(),\n                bio: profile.bio || existingUserProfile.bio || ''\n            });\n\n            // Update the user's display name in Firebase Auth\n            if (auth.currentUser) {\n                await updateProfile(auth.currentUser, {\n                    displayName: profile.username\n                });\n            }\n\n            return;\n        }\n\n        // Check if email already exists in another profile\n        const emailQuery = query(\n            collection(db, 'users'),\n            where('email', '==', profile.email.toLowerCase())\n        );\n\n        const emailQuerySnapshot = await getDocs(emailQuery);\n        if (!emailQuerySnapshot.empty) {\n            throw new Error('Email is already associated with another account');\n        }\n\n        // Check if the username is already taken\n        const usernameTaken = await isUsernameTaken(profile.username);\n        if (usernameTaken) {\n            throw new Error('Username is already taken');\n        }\n\n        const userRef = doc(db, 'users', uid);\n\n        // Create the user profile\n        await setDoc(userRef, {\n            uid,\n            firstName: profile.firstName,\n            lastName: profile.lastName,\n            username: profile.username.toLowerCase(),\n            email: profile.email.toLowerCase(),\n            bio: profile.bio || '',\n            createdAt: serverTimestamp()\n        });\n\n        // Update the user's display name in Firebase Auth\n        if (auth.currentUser) {\n            await updateProfile(auth.currentUser, {\n                displayName: profile.username\n            });\n        }\n    } catch (error) {\n        console.error('Error creating user profile:', error);\n        throw error;\n    }\n}\n\n/**\n * Gets a user's profile from Firestore\n * @param uid User's Firebase Auth UID\n * @returns A promise that resolves to the user's profile or null if not found\n */\nexport async function getUserProfile(uid: string): Promise<UserProfile | null> {\n    try {\n        const userRef = doc(db, 'users', uid);\n        const userDoc = await getDoc(userRef);\n\n        if (userDoc.exists()) {\n            return userDoc.data() as UserProfile;\n        }\n\n        return null;\n    } catch (error) {\n        console.error('Error fetching user profile:', error);\n        throw error;\n    }\n}\n\n/**\n * Updates a user's bio\n * @param uid User's Firebase Auth UID\n * @param bio User's new bio\n * @returns A promise that resolves when the bio is updated\n */\nexport async function updateUserBio(uid: string, bio: string): Promise<void> {\n    try {\n        const userRef = doc(db, 'users', uid);\n        await updateDoc(userRef, {\n            bio\n        });\n    } catch (error) {\n        console.error('Error updating user bio:', error);\n        throw error;\n    }\n}\n\n/**\n * Search for users by username or name\n * @param searchTerm The search term to find users\n * @returns Array of matching users\n */\nexport async function searchUsers(searchTerm: string): Promise<UserProfile[]> {\n    try {\n        if (!searchTerm || searchTerm.trim().length < 2) {\n            return [];\n        }\n\n        const searchTermLower = searchTerm.toLowerCase().trim();\n\n        // Create a query to find users whose username contains the search term\n        const usersRef = collection(db, 'users');\n        const usersSnapshot = await getDocs(usersRef);\n\n        // Filter users locally since Firestore doesn't support contains or regexp queries directly\n        const matchingUsers = usersSnapshot.docs\n            .map(doc => {\n                // Get all data from the document and ensure it has the correct UserProfile shape\n                const userData = doc.data() as UserProfile;\n                return userData;\n            })\n            .filter(user => {\n                const usernameLower = user.username.toLowerCase();\n                const firstNameLower = user.firstName.toLowerCase();\n                const lastNameLower = user.lastName.toLowerCase();\n                const fullNameLower = `${firstNameLower} ${lastNameLower}`;\n\n                return usernameLower.includes(searchTermLower) ||\n                    firstNameLower.includes(searchTermLower) ||\n                    lastNameLower.includes(searchTermLower) ||\n                    fullNameLower.includes(searchTermLower);\n            });\n\n        return matchingUsers;\n    } catch (error) {\n        console.error('Error searching users:', error);\n        return [];\n    }\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 873, "column": 0}, "map": {"version":3,"sources":["file:///Users/sirabdisalam/journalite-article-page/src/components/UserSearch.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport Link from 'next/link';\nimport { searchUsers, UserProfile } from '@/services/userService';\nimport styles from '@/styles/home.module.css';\n\nconst UserSearch: React.FC = () => {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [searchResults, setSearchResults] = useState<UserProfile[]>([]);\n  const [isSearching, setIsSearching] = useState(false);\n  const [showResults, setShowResults] = useState(false);\n  const searchInputRef = useRef<HTMLInputElement>(null);\n  const resultsRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    // Add click outside listener to close results\n    const handleClickOutside = (event: MouseEvent) => {\n      if (\n        resultsRef.current && \n        !resultsRef.current.contains(event.target as Node) &&\n        searchInputRef.current && \n        !searchInputRef.current.contains(event.target as Node)\n      ) {\n        setShowResults(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n\n  useEffect(() => {\n    const delayDebounceFn = setTimeout(async () => {\n      if (searchTerm.trim().length >= 2) {\n        setIsSearching(true);\n        try {\n          const results = await searchUsers(searchTerm);\n          setSearchResults(results);\n          setShowResults(true);\n        } catch (error) {\n          console.error('Error searching users:', error);\n        } finally {\n          setIsSearching(false);\n        }\n      } else {\n        setSearchResults([]);\n        setShowResults(false);\n      }\n    }, 300);\n\n    return () => clearTimeout(delayDebounceFn);\n  }, [searchTerm]);\n\n  const handleSearchChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setSearchTerm(e.target.value);\n  };\n\n  const handleFocus = () => {\n    if (searchTerm.trim().length >= 2 && searchResults.length > 0) {\n      setShowResults(true);\n    }\n  };\n\n  return (\n    <div className={styles.searchContainer}>\n      <div className={styles.searchInputWrapper}>\n        <input\n          type=\"text\"\n          ref={searchInputRef}\n          className={styles.searchInput}\n          placeholder=\"Search users by name or username...\"\n          value={searchTerm}\n          onChange={handleSearchChange}\n          onFocus={handleFocus}\n        />\n        {isSearching && <div className={styles.searchLoading}>Searching...</div>}\n      </div>\n      \n      {showResults && searchResults.length > 0 && (\n        <div ref={resultsRef} className={styles.searchResults}>\n          {searchResults.map((user) => (\n            <Link \n              key={user.uid} \n              href={`/user/${encodeURIComponent(user.username.toLowerCase())}`}\n              className={styles.searchResultItem}\n              onClick={() => setShowResults(false)}\n            >\n              <div className={styles.userAvatar}>\n                {user.firstName.charAt(0)}{user.lastName.charAt(0)}\n              </div>\n              <div className={styles.userInfo}>\n                <div className={styles.userName}>{user.firstName} {user.lastName}</div>\n                <div className={styles.userUsername}>@{user.username}</div>\n              </div>\n            </Link>\n          ))}\n        </div>\n      )}\n      \n      {showResults && searchTerm.trim().length >= 2 && searchResults.length === 0 && (\n        <div className={styles.searchResults}>\n          <div className={styles.noResults}>No users found matching \"{searchTerm}\"</div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default UserSearch; "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1085, "column": 0}, "map": {"version":3,"sources":["file:///Users/sirabdisalam/journalite-article-page/src/components/SearchBar.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport UserSearch from './UserSearch';\nimport styles from '@/styles/home.module.css';\n\nconst SearchBar: React.FC = () => {\n  return (\n    <div className={styles.searchBarContainer}>\n      <UserSearch />\n    </div>\n  );\n};\n\nexport default SearchBar; "],"names":[],"mappings":";;;;AAGA;AACA;AAJA;;;;AAMA,MAAM,YAAsB;IAC1B,qBACE,6LAAC;QAAI,WAAW,oIAAA,CAAA,UAAM,CAAC,kBAAkB;kBACvC,cAAA,6LAAC,mIAAA,CAAA,UAAU;;;;;;;;;;AAGjB;KANM;uCAQS","debugId":null}},
    {"offset": {"line": 1122, "column": 0}, "map": {"version":3,"sources":["file:///Users/sirabdisalam/journalite-article-page/src/components/LeftSidebar.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport Link from 'next/link';\nimport styles from '@/styles/home.module.css';\nimport SearchBar from './SearchBar';\n\ninterface LeftSidebarProps {\n  isAuthenticated: boolean;\n  handleLogout: () => void;\n  toggleSidebar: () => void;\n  isSidebarCollapsed: boolean;\n}\n\nconst LeftSidebar: React.FC<LeftSidebarProps> = ({\n  isAuthenticated,\n  handleLogout,\n  toggleSidebar,\n  isSidebarCollapsed\n}) => (\n  <aside className={`${styles['left-sidebar']} ${isSidebarCollapsed ? styles['collapsed'] : ''}`}>\n    <div className={styles['sidebar-header']}>\n      <div className={styles.logo}>Journalite</div>\n      <button\n        className={styles['toggle-button']}\n        onClick={toggleSidebar}\n        aria-label={isSidebarCollapsed ? \"Expand sidebar\" : \"Collapse sidebar\"}\n      >\n        {isSidebarCollapsed ? \"→\" : \"←\"}\n      </button>\n    </div>\n    \n    {/* Add search bar */}\n    <div className={styles.sidebarSearch}>\n      <SearchBar />\n    </div>\n    \n    <nav className={styles['vertical-nav']}>\n      {isAuthenticated ? (\n        // Navigation for authenticated users\n        <>\n          <Link \n            href=\"/\" \n            className={`${styles['nav-link']} ${styles['nav-home']}`}\n          >\n            <span className={styles['nav-icon']}>•</span>\n            <span className={styles['nav-text']}>Home</span>\n          </Link>\n          <Link \n            href=\"/my-thoughts\" \n            className={`${styles['nav-link']} ${styles['nav-thoughts']}`}\n          >\n            <span className={styles['nav-icon']}>•</span>\n            <span className={styles['nav-text']}>My Thoughts</span>\n          </Link>\n          <Link \n            href=\"/create-article\" \n            className={`${styles['nav-link']} ${styles['nav-create']}`}\n          >\n            <span className={styles['nav-icon']}>•</span>\n            <span className={styles['nav-text']}>Create Article</span>\n          </Link>\n          <Link \n            href=\"/explore\" \n            className={`${styles['nav-link']} ${styles['nav-explore']}`}\n          >\n            <span className={styles['nav-icon']}>•</span>\n            <span className={styles['nav-text']}>Explore</span>\n          </Link>\n          <Link \n            href=\"/my-profile\" \n            className={`${styles['nav-link']} ${styles['nav-profile']}`}\n          >\n            <span className={styles['nav-icon']}>•</span>\n            <span className={styles['nav-text']}>My Profile</span>\n          </Link>\n          <Link \n            href=\"/settings\" \n            className={`${styles['nav-link']} ${styles['nav-settings']}`}\n          >\n            <span className={styles['nav-icon']}>•</span>\n            <span className={styles['nav-text']}>Settings</span>\n          </Link>\n          <Link \n            href=\"/notifications\" \n            className={`${styles['nav-link']} ${styles['nav-notifications']}`}\n          >\n            <span className={styles['nav-icon']}>•</span>\n            <span className={styles['nav-text']}>Notifications</span>\n          </Link>\n          <button \n            onClick={handleLogout}\n            className={`${styles['nav-link']} ${styles['nav-logout']}`}\n          >\n            <span className={styles['nav-icon']}>•</span>\n            <span className={styles['nav-text']}>Log out</span>\n          </button>\n        </>\n      ) : (\n        // Navigation for non-authenticated users\n        <>\n          <Link \n            href=\"/\" \n            className={`${styles['nav-link']} ${styles['nav-home']}`}\n          >\n            <span className={styles['nav-icon']}>•</span>\n            <span className={styles['nav-text']}>Home</span>\n          </Link>\n          <Link \n            href=\"/login\" \n            className={`${styles['nav-link']} ${styles['nav-login']}`}\n          >\n            <span className={styles['nav-icon']}>•</span>\n            <span className={styles['nav-text']}>Login</span>\n          </Link>\n          <Link \n            href=\"/learn\" \n            className={`${styles['nav-link']} ${styles['nav-learn']}`}\n          >\n            <span className={styles['nav-icon']}>•</span>\n            <span className={styles['nav-text']}>Learn More</span>\n          </Link>\n          <Link \n            href=\"/plans\" \n            className={`${styles['nav-link']} ${styles['nav-plans']}`}\n          >\n            <span className={styles['nav-icon']}>•</span>\n            <span className={styles['nav-text']}>Plans</span>\n          </Link>\n        </>\n      )}\n    </nav>\n  </aside>\n);\n\nexport default LeftSidebar; "],"names":[],"mappings":";;;;AAGA;AACA;AACA;AALA;;;;;AAcA,MAAM,cAA0C,CAAC,EAC/C,eAAe,EACf,YAAY,EACZ,aAAa,EACb,kBAAkB,EACnB,iBACC,6LAAC;QAAM,WAAW,GAAG,oIAAA,CAAA,UAAM,CAAC,eAAe,CAAC,CAAC,EAAE,qBAAqB,oIAAA,CAAA,UAAM,CAAC,YAAY,GAAG,IAAI;;0BAC5F,6LAAC;gBAAI,WAAW,oIAAA,CAAA,UAAM,CAAC,iBAAiB;;kCACtC,6LAAC;wBAAI,WAAW,oIAAA,CAAA,UAAM,CAAC,IAAI;kCAAE;;;;;;kCAC7B,6LAAC;wBACC,WAAW,oIAAA,CAAA,UAAM,CAAC,gBAAgB;wBAClC,SAAS;wBACT,cAAY,qBAAqB,mBAAmB;kCAEnD,qBAAqB,MAAM;;;;;;;;;;;;0BAKhC,6LAAC;gBAAI,WAAW,oIAAA,CAAA,UAAM,CAAC,aAAa;0BAClC,cAAA,6LAAC,kIAAA,CAAA,UAAS;;;;;;;;;;0BAGZ,6LAAC;gBAAI,WAAW,oIAAA,CAAA,UAAM,CAAC,eAAe;0BACnC,kBACC,qCAAqC;8BACrC;;sCACE,6LAAC,+JAAA,CAAA,UAAI;4BACH,MAAK;4BACL,WAAW,GAAG,oIAAA,CAAA,UAAM,CAAC,WAAW,CAAC,CAAC,EAAE,oIAAA,CAAA,UAAM,CAAC,WAAW,EAAE;;8CAExD,6LAAC;oCAAK,WAAW,oIAAA,CAAA,UAAM,CAAC,WAAW;8CAAE;;;;;;8CACrC,6LAAC;oCAAK,WAAW,oIAAA,CAAA,UAAM,CAAC,WAAW;8CAAE;;;;;;;;;;;;sCAEvC,6LAAC,+JAAA,CAAA,UAAI;4BACH,MAAK;4BACL,WAAW,GAAG,oIAAA,CAAA,UAAM,CAAC,WAAW,CAAC,CAAC,EAAE,oIAAA,CAAA,UAAM,CAAC,eAAe,EAAE;;8CAE5D,6LAAC;oCAAK,WAAW,oIAAA,CAAA,UAAM,CAAC,WAAW;8CAAE;;;;;;8CACrC,6LAAC;oCAAK,WAAW,oIAAA,CAAA,UAAM,CAAC,WAAW;8CAAE;;;;;;;;;;;;sCAEvC,6LAAC,+JAAA,CAAA,UAAI;4BACH,MAAK;4BACL,WAAW,GAAG,oIAAA,CAAA,UAAM,CAAC,WAAW,CAAC,CAAC,EAAE,oIAAA,CAAA,UAAM,CAAC,aAAa,EAAE;;8CAE1D,6LAAC;oCAAK,WAAW,oIAAA,CAAA,UAAM,CAAC,WAAW;8CAAE;;;;;;8CACrC,6LAAC;oCAAK,WAAW,oIAAA,CAAA,UAAM,CAAC,WAAW;8CAAE;;;;;;;;;;;;sCAEvC,6LAAC,+JAAA,CAAA,UAAI;4BACH,MAAK;4BACL,WAAW,GAAG,oIAAA,CAAA,UAAM,CAAC,WAAW,CAAC,CAAC,EAAE,oIAAA,CAAA,UAAM,CAAC,cAAc,EAAE;;8CAE3D,6LAAC;oCAAK,WAAW,oIAAA,CAAA,UAAM,CAAC,WAAW;8CAAE;;;;;;8CACrC,6LAAC;oCAAK,WAAW,oIAAA,CAAA,UAAM,CAAC,WAAW;8CAAE;;;;;;;;;;;;sCAEvC,6LAAC,+JAAA,CAAA,UAAI;4BACH,MAAK;4BACL,WAAW,GAAG,oIAAA,CAAA,UAAM,CAAC,WAAW,CAAC,CAAC,EAAE,oIAAA,CAAA,UAAM,CAAC,cAAc,EAAE;;8CAE3D,6LAAC;oCAAK,WAAW,oIAAA,CAAA,UAAM,CAAC,WAAW;8CAAE;;;;;;8CACrC,6LAAC;oCAAK,WAAW,oIAAA,CAAA,UAAM,CAAC,WAAW;8CAAE;;;;;;;;;;;;sCAEvC,6LAAC,+JAAA,CAAA,UAAI;4BACH,MAAK;4BACL,WAAW,GAAG,oIAAA,CAAA,UAAM,CAAC,WAAW,CAAC,CAAC,EAAE,oIAAA,CAAA,UAAM,CAAC,eAAe,EAAE;;8CAE5D,6LAAC;oCAAK,WAAW,oIAAA,CAAA,UAAM,CAAC,WAAW;8CAAE;;;;;;8CACrC,6LAAC;oCAAK,WAAW,oIAAA,CAAA,UAAM,CAAC,WAAW;8CAAE;;;;;;;;;;;;sCAEvC,6LAAC,+JAAA,CAAA,UAAI;4BACH,MAAK;4BACL,WAAW,GAAG,oIAAA,CAAA,UAAM,CAAC,WAAW,CAAC,CAAC,EAAE,oIAAA,CAAA,UAAM,CAAC,oBAAoB,EAAE;;8CAEjE,6LAAC;oCAAK,WAAW,oIAAA,CAAA,UAAM,CAAC,WAAW;8CAAE;;;;;;8CACrC,6LAAC;oCAAK,WAAW,oIAAA,CAAA,UAAM,CAAC,WAAW;8CAAE;;;;;;;;;;;;sCAEvC,6LAAC;4BACC,SAAS;4BACT,WAAW,GAAG,oIAAA,CAAA,UAAM,CAAC,WAAW,CAAC,CAAC,EAAE,oIAAA,CAAA,UAAM,CAAC,aAAa,EAAE;;8CAE1D,6LAAC;oCAAK,WAAW,oIAAA,CAAA,UAAM,CAAC,WAAW;8CAAE;;;;;;8CACrC,6LAAC;oCAAK,WAAW,oIAAA,CAAA,UAAM,CAAC,WAAW;8CAAE;;;;;;;;;;;;;mCAIzC,yCAAyC;8BACzC;;sCACE,6LAAC,+JAAA,CAAA,UAAI;4BACH,MAAK;4BACL,WAAW,GAAG,oIAAA,CAAA,UAAM,CAAC,WAAW,CAAC,CAAC,EAAE,oIAAA,CAAA,UAAM,CAAC,WAAW,EAAE;;8CAExD,6LAAC;oCAAK,WAAW,oIAAA,CAAA,UAAM,CAAC,WAAW;8CAAE;;;;;;8CACrC,6LAAC;oCAAK,WAAW,oIAAA,CAAA,UAAM,CAAC,WAAW;8CAAE;;;;;;;;;;;;sCAEvC,6LAAC,+JAAA,CAAA,UAAI;4BACH,MAAK;4BACL,WAAW,GAAG,oIAAA,CAAA,UAAM,CAAC,WAAW,CAAC,CAAC,EAAE,oIAAA,CAAA,UAAM,CAAC,YAAY,EAAE;;8CAEzD,6LAAC;oCAAK,WAAW,oIAAA,CAAA,UAAM,CAAC,WAAW;8CAAE;;;;;;8CACrC,6LAAC;oCAAK,WAAW,oIAAA,CAAA,UAAM,CAAC,WAAW;8CAAE;;;;;;;;;;;;sCAEvC,6LAAC,+JAAA,CAAA,UAAI;4BACH,MAAK;4BACL,WAAW,GAAG,oIAAA,CAAA,UAAM,CAAC,WAAW,CAAC,CAAC,EAAE,oIAAA,CAAA,UAAM,CAAC,YAAY,EAAE;;8CAEzD,6LAAC;oCAAK,WAAW,oIAAA,CAAA,UAAM,CAAC,WAAW;8CAAE;;;;;;8CACrC,6LAAC;oCAAK,WAAW,oIAAA,CAAA,UAAM,CAAC,WAAW;8CAAE;;;;;;;;;;;;sCAEvC,6LAAC,+JAAA,CAAA,UAAI;4BACH,MAAK;4BACL,WAAW,GAAG,oIAAA,CAAA,UAAM,CAAC,WAAW,CAAC,CAAC,EAAE,oIAAA,CAAA,UAAM,CAAC,YAAY,EAAE;;8CAEzD,6LAAC;oCAAK,WAAW,oIAAA,CAAA,UAAM,CAAC,WAAW;8CAAE;;;;;;8CACrC,6LAAC;oCAAK,WAAW,oIAAA,CAAA,UAAM,CAAC,WAAW;8CAAE;;;;;;;;;;;;;;;;;;;;;;;;;KAjH3C;uCAyHS","debugId":null}},
    {"offset": {"line": 1523, "column": 0}, "map": {"version":3,"sources":["file:///Users/sirabdisalam/journalite-article-page/src/firebase/articles.ts"],"sourcesContent":["import { collection, addDoc, getDocs, getDoc, doc, query, orderBy, Timestamp, where, DocumentData, DocumentSnapshot, deleteDoc, updateDoc, arrayUnion, arrayRemove } from 'firebase/firestore';\nimport { db, auth } from './clientApp';\nimport { createCommentNotification } from './notifications';\n\n// Article interface matching our Firestore structure\nexport interface Article {\n    id?: string;\n    title: string;\n    body: string;\n    createdAt: Timestamp;\n    authorId: string;\n    authorName: string;\n    tags: string[];\n    coverImage?: string;\n    slug?: string;\n    status?: 'published' | 'drafts';\n}\n\n// Comment interfaces for Firestore\nexport interface ArticleComment {\n    id?: string;\n    commentId?: string;\n    userId: string;\n    userName: string;\n    content: string;\n    createdAt: Timestamp;\n    likes: string[];\n    replies: CommentReply[];\n}\n\nexport interface CommentReply {\n    replyId: string;\n    userId: string;\n    userName: string;\n    content: string;\n    createdAt: Timestamp;\n    likes: string[];\n}\n\n// Get all articles from Firestore, ordered by createdAt desc\nexport async function getArticles(includeDrafts = false) {\n    try {\n        const articlesRef = collection(db, 'articles');\n        let q;\n\n        if (includeDrafts) {\n            // Return all articles regardless of status\n            q = query(articlesRef, orderBy('createdAt', 'desc'));\n        } else {\n            // Only return published articles\n            q = query(\n                articlesRef,\n                orderBy('createdAt', 'desc')\n            );\n        }\n\n        const querySnapshot = await getDocs(q);\n\n        const articles: Article[] = [];\n        querySnapshot.forEach((doc) => {\n            const articleData = doc.data() as Omit<Article, 'id'>;\n\n            // Include documents where status is 'published' or not set at all\n            if (!includeDrafts && articleData.status === 'drafts') {\n                return;\n            }\n\n            // Include articles with status='published' or no status field\n            if (!includeDrafts && articleData.status !== undefined && articleData.status !== 'published') {\n                return;\n            }\n\n            articles.push({\n                id: doc.id,\n                ...articleData\n            });\n        });\n\n        return articles;\n    } catch (error) {\n        console.error('Error getting articles:', error);\n        throw error;\n    }\n}\n\n// Get a single article by ID\nexport async function getArticleById(id: string) {\n    try {\n        const docRef = doc(db, 'articles', id);\n        const docSnap = await getDoc(docRef);\n\n        if (docSnap.exists()) {\n            return {\n                id: docSnap.id,\n                ...docSnap.data() as Omit<Article, 'id'>\n            };\n        } else {\n            throw new Error('Article not found');\n        }\n    } catch (error) {\n        console.error('Error getting article:', error);\n        throw error;\n    }\n}\n\n// Get a single article by slug\nexport async function getArticleBySlug(slug: string) {\n    try {\n        const articlesRef = collection(db, 'articles');\n        const q = query(articlesRef, where('slug', '==', slug));\n        const querySnapshot = await getDocs(q);\n\n        if (querySnapshot.empty) {\n            throw new Error('Article not found');\n        }\n\n        const docSnap = querySnapshot.docs[0];\n        return {\n            id: docSnap.id,\n            ...docSnap.data() as Omit<Article, 'id'>\n        };\n    } catch (error) {\n        console.error('Error getting article by slug:', error);\n        throw error;\n    }\n}\n\n// Create a new article\nexport async function createArticle(article: Omit<Article, 'id' | 'createdAt' | 'authorId' | 'authorName'>) {\n    try {\n        const user = auth.currentUser;\n        if (!user) {\n            throw new Error('You must be logged in to create an article');\n        }\n\n        // Create the basic article object with required fields\n        const newArticle: any = {\n            title: article.title,\n            body: article.body,\n            slug: article.slug || article.title\n                .toLowerCase()\n                .replace(/[^\\w\\s]/gi, '')\n                .replace(/\\s+/g, '-'),\n            createdAt: Timestamp.now(),\n            authorId: user.uid,\n            authorName: user.displayName || 'Anonymous',\n            tags: article.tags || [],\n            status: article.status || 'published' // Default to published if not specified\n        };\n\n        // Only add optional fields if they exist and have values\n        if (article.coverImage) {\n            newArticle.coverImage = article.coverImage;\n        }\n\n        const docRef = await addDoc(collection(db, 'articles'), newArticle);\n        return {\n            id: docRef.id,\n            ...newArticle\n        };\n    } catch (error) {\n        console.error('Error creating article:', error);\n        throw error;\n    }\n}\n\n// Update an existing article\nexport async function updateArticle(articleId: string, articleData: Partial<Omit<Article, 'id' | 'createdAt' | 'authorId' | 'authorName'>>) {\n    try {\n        const user = auth.currentUser;\n        if (!user) {\n            throw new Error('You must be logged in to edit an article');\n        }\n\n        // First check if the article exists and belongs to the current user\n        const articleRef = doc(db, 'articles', articleId);\n        const articleSnap = await getDoc(articleRef);\n\n        if (!articleSnap.exists()) {\n            throw new Error('Article not found');\n        }\n\n        const articleData1 = articleSnap.data();\n        if (articleData1.authorId !== user.uid) {\n            throw new Error('You can only edit your own articles');\n        }\n\n        // Create the update object\n        const updateData: any = {};\n\n        // Only include fields that were provided\n        if (articleData.title !== undefined) {\n            updateData.title = articleData.title;\n\n            // If title changed, update slug as well (unless slug is explicitly provided)\n            if (articleData.slug === undefined) {\n                updateData.slug = articleData.title\n                    .toLowerCase()\n                    .replace(/[^\\w\\s]/gi, '')\n                    .replace(/\\s+/g, '-');\n            }\n        }\n\n        if (articleData.body !== undefined) {\n            updateData.body = articleData.body;\n        }\n\n        if (articleData.tags !== undefined) {\n            updateData.tags = articleData.tags;\n        }\n\n        if (articleData.status !== undefined) {\n            updateData.status = articleData.status;\n        }\n\n        if (articleData.coverImage !== undefined) {\n            updateData.coverImage = articleData.coverImage;\n        }\n\n        if (articleData.slug !== undefined) {\n            updateData.slug = articleData.slug;\n        }\n\n        // Update the article\n        await updateDoc(articleRef, updateData);\n\n        // Return the updated article\n        const updatedArticleSnap = await getDoc(articleRef);\n        return {\n            id: updatedArticleSnap.id,\n            ...updatedArticleSnap.data() as Omit<Article, 'id'>\n        };\n    } catch (error) {\n        console.error('Error updating article:', error);\n        throw error;\n    }\n}\n\n// Comments functions\nexport async function getArticleComments(articleId: string) {\n    try {\n        const commentsRef = collection(db, 'articles', articleId, 'comments');\n        const q = query(commentsRef, orderBy('createdAt', 'desc'));\n        const querySnapshot = await getDocs(q);\n\n        const comments: ArticleComment[] = [];\n        querySnapshot.forEach((doc) => {\n            const commentData = doc.data() as Omit<ArticleComment, 'id' | 'commentId'>;\n            comments.push({\n                id: doc.id,\n                commentId: doc.id, // Add commentId for compatibility with existing UI\n                ...commentData,\n                replies: commentData.replies || []\n            });\n        });\n\n        return comments;\n    } catch (error) {\n        console.error('Error getting comments:', error);\n        throw error;\n    }\n}\n\nexport async function addComment(articleId: string, content: string) {\n    try {\n        const user = auth.currentUser;\n        if (!user) {\n            throw new Error('You must be logged in to comment');\n        }\n\n        const newComment = {\n            userId: user.uid,\n            userName: user.displayName || user.email?.split('@')[0] || 'Anonymous',\n            content,\n            createdAt: Timestamp.now(),\n            likes: [],\n            replies: []\n        };\n\n        const docRef = await addDoc(collection(db, 'articles', articleId, 'comments'), newComment);\n\n        // Get article information for the notification\n        const articleRef = doc(db, 'articles', articleId);\n        const articleSnap = await getDoc(articleRef);\n\n        if (articleSnap.exists()) {\n            const articleData = articleSnap.data();\n            // Trigger notification to the article owner\n            await createCommentNotification(\n                articleData.authorId,\n                articleId,\n                articleData.slug || '',\n                articleData.title || 'Article',\n                docRef.id,\n                content\n            );\n        }\n\n        return {\n            id: docRef.id,\n            commentId: docRef.id, // Add commentId for compatibility\n            ...newComment\n        };\n    } catch (error) {\n        console.error('Error adding comment:', error);\n        throw error;\n    }\n}\n\nexport async function addReply(articleId: string, commentId: string, content: string) {\n    try {\n        const user = auth.currentUser;\n        if (!user) {\n            throw new Error('You must be logged in to reply');\n        }\n\n        const commentRef = doc(db, 'articles', articleId, 'comments', commentId);\n        const commentSnap = await getDoc(commentRef);\n\n        if (!commentSnap.exists()) {\n            throw new Error('Comment not found');\n        }\n\n        const newReply = {\n            replyId: Math.random().toString(36).substring(2, 15), // Generate a unique ID\n            userId: user.uid,\n            userName: user.displayName || user.email?.split('@')[0] || 'Anonymous',\n            content,\n            createdAt: Timestamp.now(),\n            likes: []\n        };\n\n        // Add the reply to the replies array\n        await updateDoc(commentRef, {\n            replies: arrayUnion(newReply)\n        });\n\n        return newReply;\n    } catch (error) {\n        console.error('Error adding reply:', error);\n        throw error;\n    }\n}\n\nexport async function likeComment(articleId: string, commentId: string) {\n    try {\n        const user = auth.currentUser;\n        if (!user) {\n            throw new Error('You must be logged in to like a comment');\n        }\n\n        const commentRef = doc(db, 'articles', articleId, 'comments', commentId);\n        const commentSnap = await getDoc(commentRef);\n\n        if (!commentSnap.exists()) {\n            throw new Error('Comment not found');\n        }\n\n        const commentData = commentSnap.data() as ArticleComment;\n        const userId = user.uid;\n\n        // Check if the user already liked the comment\n        const likes = commentData.likes || [];\n        const hasLiked = likes.includes(userId);\n\n        if (hasLiked) {\n            // Remove the like\n            await updateDoc(commentRef, {\n                likes: arrayRemove(userId)\n            });\n\n            // Get updated likes\n            const updatedSnap = await getDoc(commentRef);\n            const updatedData = updatedSnap.data() as ArticleComment;\n\n            return {\n                success: true,\n                action: 'unliked',\n                likes: updatedData.likes,\n                count: updatedData.likes.length\n            };\n        } else {\n            // Add the like\n            await updateDoc(commentRef, {\n                likes: arrayUnion(userId)\n            });\n\n            // Get updated likes\n            const updatedSnap = await getDoc(commentRef);\n            const updatedData = updatedSnap.data() as ArticleComment;\n\n            return {\n                success: true,\n                action: 'liked',\n                likes: updatedData.likes,\n                count: updatedData.likes.length\n            };\n        }\n    } catch (error) {\n        console.error('Error liking comment:', error);\n        throw error;\n    }\n}\n\nexport async function deleteComment(articleId: string, commentId: string) {\n    try {\n        const user = auth.currentUser;\n        if (!user) {\n            throw new Error('You must be logged in to delete a comment');\n        }\n\n        const commentRef = doc(db, 'articles', articleId, 'comments', commentId);\n        const commentSnap = await getDoc(commentRef);\n\n        if (!commentSnap.exists()) {\n            throw new Error('Comment not found');\n        }\n\n        const commentData = commentSnap.data() as ArticleComment;\n\n        // Check if the user is the comment author\n        if (commentData.userId !== user.uid) {\n            throw new Error('You can only delete your own comments');\n        }\n\n        await deleteDoc(commentRef);\n\n        return {\n            success: true,\n            message: 'Comment deleted successfully'\n        };\n    } catch (error) {\n        console.error('Error deleting comment:', error);\n        throw error;\n    }\n}\n\n// Delete an article\nexport async function deleteArticle(articleId: string) {\n    try {\n        const user = auth.currentUser;\n        if (!user) {\n            throw new Error('You must be logged in to delete an article');\n        }\n\n        // Get the article to check ownership\n        const articleDoc = await getDoc(doc(db, 'articles', articleId));\n\n        if (!articleDoc.exists()) {\n            throw new Error('Article not found');\n        }\n\n        const articleData = articleDoc.data();\n\n        // Only the author can delete their article\n        if (articleData.authorId !== user.uid) {\n            throw new Error('You can only delete your own articles');\n        }\n\n        // Delete the article\n        await deleteDoc(doc(db, 'articles', articleId));\n\n        return {\n            success: true,\n            message: 'Article deleted successfully'\n        };\n    } catch (error) {\n        console.error('Error deleting article:', error);\n        throw error;\n    }\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1891, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/styles/comment.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"commentActions\": \"comment-module__H_rXLG__commentActions\",\n  \"commentAvatar\": \"comment-module__H_rXLG__commentAvatar\",\n  \"commentContent\": \"comment-module__H_rXLG__commentContent\",\n  \"commentDate\": \"comment-module__H_rXLG__commentDate\",\n  \"commentDeleteBtn\": \"comment-module__H_rXLG__commentDeleteBtn\",\n  \"commentError\": \"comment-module__H_rXLG__commentError\",\n  \"commentForm\": \"comment-module__H_rXLG__commentForm\",\n  \"commentHeader\": \"comment-module__H_rXLG__commentHeader\",\n  \"commentInput\": \"comment-module__H_rXLG__commentInput\",\n  \"commentInputContainer\": \"comment-module__H_rXLG__commentInputContainer\",\n  \"commentItem\": \"comment-module__H_rXLG__commentItem\",\n  \"commentLikeBtn\": \"comment-module__H_rXLG__commentLikeBtn\",\n  \"commentLoading\": \"comment-module__H_rXLG__commentLoading\",\n  \"commentSection\": \"comment-module__H_rXLG__commentSection\",\n  \"commentSectionTitle\": \"comment-module__H_rXLG__commentSectionTitle\",\n  \"commentSubmit\": \"comment-module__H_rXLG__commentSubmit\",\n  \"commentUser\": \"comment-module__H_rXLG__commentUser\",\n  \"commentsList\": \"comment-module__H_rXLG__commentsList\",\n  \"inThread\": \"comment-module__H_rXLG__inThread\",\n  \"liked\": \"comment-module__H_rXLG__liked\",\n  \"loadingDot\": \"comment-module__H_rXLG__loadingDot\",\n  \"loadingDots\": \"comment-module__H_rXLG__loadingDots\",\n  \"loginButton\": \"comment-module__H_rXLG__loginButton\",\n  \"loginModal\": \"comment-module__H_rXLG__loginModal\",\n  \"loginModalButton\": \"comment-module__H_rXLG__loginModalButton\",\n  \"loginModalButtons\": \"comment-module__H_rXLG__loginModalButtons\",\n  \"loginModalClose\": \"comment-module__H_rXLG__loginModalClose\",\n  \"loginModalOverlay\": \"comment-module__H_rXLG__loginModalOverlay\",\n  \"loginModalText\": \"comment-module__H_rXLG__loginModalText\",\n  \"loginModalTitle\": \"comment-module__H_rXLG__loginModalTitle\",\n  \"loginPromptContainer\": \"comment-module__H_rXLG__loginPromptContainer\",\n  \"noComments\": \"comment-module__H_rXLG__noComments\",\n  \"open\": \"comment-module__H_rXLG__open\",\n  \"primary\": \"comment-module__H_rXLG__primary\",\n  \"pulse\": \"comment-module__H_rXLG__pulse\",\n  \"repliesToggle\": \"comment-module__H_rXLG__repliesToggle\",\n  \"repliesToggleIcon\": \"comment-module__H_rXLG__repliesToggleIcon\",\n  \"replyAvatar\": \"comment-module__H_rXLG__replyAvatar\",\n  \"replyButtons\": \"comment-module__H_rXLG__replyButtons\",\n  \"replyCancel\": \"comment-module__H_rXLG__replyCancel\",\n  \"replyContent\": \"comment-module__H_rXLG__replyContent\",\n  \"replyDate\": \"comment-module__H_rXLG__replyDate\",\n  \"replyForm\": \"comment-module__H_rXLG__replyForm\",\n  \"replyHeader\": \"comment-module__H_rXLG__replyHeader\",\n  \"replyInput\": \"comment-module__H_rXLG__replyInput\",\n  \"replyItem\": \"comment-module__H_rXLG__replyItem\",\n  \"replySection\": \"comment-module__H_rXLG__replySection\",\n  \"replySubmit\": \"comment-module__H_rXLG__replySubmit\",\n  \"replyToggle\": \"comment-module__H_rXLG__replyToggle\",\n  \"replyUser\": \"comment-module__H_rXLG__replyUser\",\n  \"secondary\": \"comment-module__H_rXLG__secondary\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 1950, "column": 0}, "map": {"version":3,"sources":["file:///Users/sirabdisalam/journalite-article-page/src/components/CommentSection.tsx"],"sourcesContent":["'use client'\n\nimport React, { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport { auth } from '@/firebase/clientApp';\nimport { onAuthStateChanged } from 'firebase/auth';\nimport { \n  getArticleComments, \n  addComment, \n  addReply,\n  likeComment,\n  deleteComment,\n  getArticleBySlug,\n  ArticleComment as FirestoreComment,\n  CommentReply as FirestoreReply\n} from '@/firebase/articles';\nimport styles from '@/styles/comment.module.css';\n\ninterface CommentSectionProps {\n  slug: string;\n}\n\nconst CommentSection: React.FC<CommentSectionProps> = ({ slug }) => {\n  const [comments, setComments] = useState<FirestoreComment[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [newComment, setNewComment] = useState('');\n  const [submitting, setSubmitting] = useState(false);\n  const [focusState, setFocusState] = useState(false);\n  const [replyingTo, setReplyingTo] = useState<string | null>(null);\n  const [replyContent, setReplyContent] = useState('');\n  const [submittingReply, setSubmittingReply] = useState(false);\n  const [expandedReplies, setExpandedReplies] = useState<Record<string, boolean>>({});\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [showLoginPrompt, setShowLoginPrompt] = useState(false);\n  const [articleId, setArticleId] = useState<string | null>(null);\n  \n  // This user object will be updated when authenticated\n  const [currentUser, setCurrentUser] = useState({ id: '', name: 'Reader' });\n\n  useEffect(() => {\n    // Check authentication status\n    const unsubscribe = onAuthStateChanged(auth, (user) => {\n      const isAuth = !!user;\n      setIsAuthenticated(isAuth);\n      \n      if (isAuth && user) {\n        setCurrentUser({\n          id: user.uid,\n          name: user.displayName || user.email?.split('@')[0] || 'User'\n        });\n      } else {\n        setCurrentUser({ id: '', name: 'Reader' });\n      }\n    });\n    \n    return () => unsubscribe();\n  }, []);\n\n  // First, get the article ID from the slug\n  useEffect(() => {\n    if (!slug) return;\n\n    const fetchArticleId = async () => {\n      try {\n        const article = await getArticleBySlug(slug);\n        if (article && article.id) {\n          setArticleId(article.id);\n        }\n      } catch (err) {\n        console.error('Error fetching article:', err);\n        setError('Unable to load article details.');\n      }\n    };\n\n    fetchArticleId();\n  }, [slug]);\n\n  // Then, fetch comments when we have the articleId\n  useEffect(() => {\n    if (!articleId) return;\n    \n    setLoading(true);\n    const fetchComments = async () => {\n      try {\n        const commentsData = await getArticleComments(articleId);\n        \n        // Add a small delay to show loading animation\n        setTimeout(() => {\n          setComments(commentsData);\n          setLoading(false);\n        }, 800);\n      } catch (err) {\n        console.error('Error fetching comments:', err);\n        setError('Unable to load discussions. Please refresh the page to try again.');\n        setLoading(false);\n      }\n    };\n\n    fetchComments();\n  }, [articleId]);\n\n  const handleCommentSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!newComment.trim() || submitting || !articleId) return;\n    \n    if (!isAuthenticated) {\n      setShowLoginPrompt(true);\n      return;\n    }\n    \n    try {\n      setSubmitting(true);\n      const comment = await addComment(articleId, newComment);\n      setComments(prev => [comment, ...prev]);\n      setNewComment('');\n      setSubmitting(false);\n      setFocusState(false); // Reset focus state after submission\n    } catch (err) {\n      console.error('Error adding comment:', err);\n      setError('Your response could not be posted. Please try again.');\n      setSubmitting(false);\n    }\n  };\n\n  const handleReplySubmit = async (commentId: string) => {\n    if (!replyContent.trim() || submittingReply || !articleId) return;\n    \n    if (!isAuthenticated) {\n      setShowLoginPrompt(true);\n      return;\n    }\n    \n    try {\n      setSubmittingReply(true);\n      const reply = await addReply(articleId, commentId, replyContent);\n      \n      // Update the local state with the new reply\n      setComments(prev => \n        prev.map(comment => \n          comment.commentId === commentId || comment.id === commentId\n            ? { \n                ...comment, \n                replies: [...(comment.replies || []), reply]\n              }\n            : comment\n        )\n      );\n      \n      // Reset reply state\n      setReplyContent('');\n      setReplyingTo(null);\n      setSubmittingReply(false);\n      \n      // Ensure replies for this comment are expanded\n      setExpandedReplies(prev => ({\n        ...prev,\n        [commentId]: true\n      }));\n    } catch (err) {\n      console.error('Error adding reply:', err);\n      setSubmittingReply(false);\n    }\n  };\n\n  const handleLikeComment = async (commentId: string) => {\n    if (!isAuthenticated || !articleId) {\n      setShowLoginPrompt(true);\n      return;\n    }\n    \n    try {\n      const result = await likeComment(articleId, commentId);\n      \n      // Update local state\n      setComments(prev => \n        prev.map(comment => \n          comment.commentId === commentId || comment.id === commentId\n            ? { ...comment, likes: result.likes } \n            : comment\n        )\n      );\n    } catch (err) {\n      console.error('Error liking comment:', err);\n    }\n  };\n\n  const handleDeleteComment = async (commentId: string) => {\n    if (!isAuthenticated || !articleId) {\n      return;\n    }\n    \n    try {\n      await deleteComment(articleId, commentId);\n      \n      // Remove comment from local state\n      setComments(prev => \n        prev.filter(comment => \n          comment.commentId !== commentId && comment.id !== commentId\n        )\n      );\n    } catch (err) {\n      console.error('Error deleting comment:', err);\n    }\n  };\n\n  const toggleReplies = (commentId: string) => {\n    setExpandedReplies(prev => ({\n      ...prev,\n      [commentId]: !prev[commentId]\n    }));\n  };\n\n  // Helper to format dates\n  const formatDate = (timestamp: any) => {\n    if (!timestamp) return 'Unknown date';\n    \n    const date = timestamp.toDate ? timestamp.toDate() : new Date(timestamp);\n    const now = new Date();\n    const diffInSeconds = Math.floor((now.getTime() - date.getTime()) / 1000);\n    \n    // For recent dates, use relative time (which is less prone to hydration issues)\n    if (diffInSeconds < 60) {\n      return 'Just now';\n    } else if (diffInSeconds < 3600) {\n      const minutes = Math.floor(diffInSeconds / 60);\n      return `${minutes} ${minutes === 1 ? 'minute' : 'minutes'} ago`;\n    } else if (diffInSeconds < 86400) {\n      const hours = Math.floor(diffInSeconds / 3600);\n      return `${hours} ${hours === 1 ? 'hour' : 'hours'} ago`;\n    } else if (diffInSeconds < 604800) {\n      const days = Math.floor(diffInSeconds / 86400);\n      return `${days} ${days === 1 ? 'day' : 'days'} ago`;\n    } else {\n      // Use consistent UTC timezone and locale for older dates\n      try {\n        const options: Intl.DateTimeFormatOptions = { \n          year: 'numeric', \n          month: 'short', \n          day: 'numeric',\n          timeZone: 'UTC'\n        };\n        \n        return date.toLocaleDateString('en-US', options);\n      } catch (error) {\n        console.error('Error formatting date:', error);\n        return 'Unknown date';\n      }\n    }\n  };\n\n  // Generate a user avatar with initial\n  const getUserAvatar = (name: string, userId: string, isReply = false) => {\n    const initial = name?.charAt(0).toUpperCase() || 'A';\n    const colors = ['#4f46e5', '#0ea5e9', '#10b981', '#f59e0b', '#ef4444'];\n    const colorIndex = userId ? Math.abs(userId.charCodeAt(0) % colors.length) : 0;\n    const bgColor = colors[colorIndex];\n    \n    return (\n      <div \n        className={isReply ? styles.replyAvatar : styles.commentAvatar} \n        style={{ \n          backgroundColor: bgColor, \n          display: 'flex', \n          alignItems: 'center', \n          justifyContent: 'center',\n          color: 'white',\n          fontWeight: 'bold',\n          fontSize: isReply ? '0.9rem' : '1.2rem'\n        }}\n      >\n        {initial}\n      </div>\n    );\n  };\n\n  return (\n    <section className={styles.commentSection}>\n      <h2 className={styles.commentSectionTitle}>\n        Join the Discussion\n      </h2>\n      \n      {error && (\n        <div className={styles.commentError}>\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n            <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n            <line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"12\"></line>\n            <line x1=\"12\" y1=\"16\" x2=\"12.01\" y2=\"16\"></line>\n          </svg>\n          {error}\n        </div>\n      )}\n      \n      <form className={styles.commentForm} onSubmit={handleCommentSubmit}>\n        <div\n          className={styles.commentInputContainer}\n          style={{ opacity: focusState ? 1 : 0.85 }}\n        >\n          {isAuthenticated ? (\n            <>\n              <div className={styles.commentAvatar}>\n                {getUserAvatar(currentUser.name, currentUser.id)}\n              </div>\n              <textarea\n                className={styles.commentInput}\n                placeholder=\"Share your thoughts...\"\n                value={newComment}\n                onChange={e => setNewComment(e.target.value)}\n                onFocus={() => setFocusState(true)}\n                onBlur={() => {\n                  if (!newComment.trim()) {\n                    setFocusState(false);\n                  }\n                }}\n              />\n              <button \n                className={styles.commentSubmit}\n                type=\"submit\" \n                disabled={!newComment.trim() || submitting}\n              >\n                {submitting ? 'Posting...' : 'Post'}\n              </button>\n            </>\n          ) : (\n            <div className={styles.loginPromptContainer} onClick={() => setShowLoginPrompt(true)}>\n              <textarea\n                className={styles.commentInput}\n                placeholder=\"Login to join the discussion...\"\n                disabled\n              />\n              <button\n                className={`${styles.commentSubmit} ${styles.loginButton}`}\n                type=\"button\"\n                onClick={() => setShowLoginPrompt(true)}\n              >\n                Login to comment\n              </button>\n            </div>\n          )}\n        </div>\n      </form>\n\n      {/* Login Prompt Modal */}\n      {showLoginPrompt && (\n        <div className={styles.loginModalOverlay} onClick={() => setShowLoginPrompt(false)}>\n          <div className={styles.loginModal} onClick={e => e.stopPropagation()}>\n            <button className={styles.loginModalClose} onClick={() => setShowLoginPrompt(false)}>×</button>\n            <h3 className={styles.loginModalTitle}>Join the conversation</h3>\n            <p className={styles.loginModalText}>\n              Sign in to Journalite to share your thoughts and join the discussion.\n            </p>\n            <div className={styles.loginModalButtons}>\n              <Link href=\"/login\" className={`${styles.loginModalButton} ${styles.primary}`}>\n                Log In\n              </Link>\n              <Link href=\"/register\" className={`${styles.loginModalButton} ${styles.secondary}`}>\n                Create Account\n              </Link>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {loading ? (\n        <div className={styles.commentLoading}>\n          <p>Loading comments...</p>\n          <div className={styles.loadingDots}>\n            <div className={styles.loadingDot}></div>\n            <div className={styles.loadingDot}></div>\n            <div className={styles.loadingDot}></div>\n          </div>\n        </div>\n      ) : comments.length === 0 ? (\n        <div className={styles.noComments}>\n          Be the first to share your thoughts on this article.\n        </div>\n      ) : (\n        <div className={styles.commentsList}>\n          {comments.map(comment => {\n            const commentId = comment.commentId || comment.id || '';\n            return (\n              <div key={commentId} className={styles.commentItem}>\n                <div className={styles.commentHeader}>\n                  {getUserAvatar(comment.userName, comment.userId)}\n                  <span className={styles.commentUser}>{comment.userName}</span>\n                  <span className={styles.commentDate}>{formatDate(comment.createdAt)}</span>\n                </div>\n                <div className={styles.commentContent}>\n                  {comment.content}\n                </div>\n                <div className={styles.commentActions}>\n                  <button \n                    className={`${styles.commentLikeBtn} ${comment.likes.includes(currentUser.id) ? styles.liked : ''}`}\n                    onClick={() => handleLikeComment(commentId)}\n                  >\n                    <span>❤</span>\n                    <span>{comment.likes.length || ''}</span>\n                  </button>\n                  \n                  <button \n                    className={styles.replyToggle}\n                    onClick={() => {\n                      if (isAuthenticated) {\n                        setReplyingTo(replyingTo === commentId ? null : commentId);\n                      } else {\n                        setShowLoginPrompt(true);\n                      }\n                    }}\n                  >\n                    <span>↩</span>\n                    <span>Reply</span>\n                  </button>\n                  \n                  {/* Only show delete button for the user's own comments */}\n                  {comment.userId === currentUser.id && (\n                    <button \n                      className={styles.commentDeleteBtn}\n                      onClick={() => handleDeleteComment(commentId)}\n                    >\n                      <span>🗑</span>\n                      <span>Delete</span>\n                    </button>\n                  )}\n                </div>\n                \n                {/* Replies */}\n                {comment.replies && comment.replies.length > 0 && (\n                  <>\n                    <button\n                      className={styles.repliesToggle}\n                      onClick={() => toggleReplies(commentId)}\n                    >\n                      <span className={`${styles.repliesToggleIcon} ${expandedReplies[commentId] ? styles.open : ''}`}>\n                        ▷\n                      </span>\n                      {`${comment.replies.length} ${comment.replies.length === 1 ? 'reply' : 'replies'}`}\n                    </button>\n                    \n                    {expandedReplies[commentId] && (\n                      <div className={styles.replySection}>\n                        {comment.replies.map(reply => (\n                          <div key={reply.replyId} className={styles.replyItem}>\n                            <div className={styles.replyHeader}>\n                              {getUserAvatar(reply.userName, reply.userId, true)}\n                              <span className={styles.replyUser}>{reply.userName}</span>\n                              <span className={styles.replyDate}>{formatDate(reply.createdAt)}</span>\n                            </div>\n                            <div className={styles.replyContent}>\n                              {reply.content}\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    )}\n                  </>\n                )}\n                \n                {/* Reply form */}\n                {replyingTo === commentId && (\n                  <div className={`${styles.replyForm} ${comment.replies && comment.replies.length > 0 ? styles.inThread : ''}`}>\n                    <textarea\n                      className={styles.replyInput}\n                      placeholder=\"Write a reply...\"\n                      value={replyContent}\n                      onChange={e => setReplyContent(e.target.value)}\n                    />\n                    <div className={styles.replyButtons}>\n                      <button \n                        className={styles.replyCancel}\n                        onClick={() => {\n                          setReplyingTo(null);\n                          setReplyContent('');\n                        }}\n                      >\n                        Cancel\n                      </button>\n                      <button \n                        className={styles.replySubmit}\n                        disabled={!replyContent.trim() || submittingReply}\n                        onClick={() => handleReplySubmit(commentId)}\n                      >\n                        {submittingReply ? 'Posting...' : 'Post Reply'}\n                      </button>\n                    </div>\n                  </div>\n                )}\n              </div>\n            );\n          })}\n        </div>\n      )}\n    </section>\n  );\n};\n\nexport default CommentSection; "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2774, "column": 0}, "map": {"version":3,"sources":["file:///Users/sirabdisalam/journalite-article-page/src/components/RenderArticle.tsx"],"sourcesContent":["// src/components/RenderArticle.tsx\nimport React, { useState, useEffect, useRef } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport Link from 'next/link';\nimport Image from 'next/image';\nimport { Article as ArticleService } from '@/services/articleService';\nimport CommentSection from '@/components/CommentSection';\nimport '@/styles/article.css';  \n\ninterface Comment {\n  userId: string;\n  content: string;\n  createdAt: string;\n}\n\ninterface Paragraph {\n  paragraphId: string;\n  text: string;\n  likes: string[];\n  comments: Comment[];\n}\n\ninterface ComplexArticle {\n  _id: string;\n  authorId: string;\n  authorName?: string;\n  title: string;\n  slug: string;\n  coverImageUrl?: string;\n  tags: string[];\n  content: Paragraph[];\n  likes: string[];\n  reposts: string[];\n  viewCount: number;\n  createdAt: string;\n  updatedAt: string;\n}\n\ninterface RenderArticleProps {\n  article: ArticleService | ComplexArticle;\n}\n\n// Format date in a consistent way that doesn't depend on user's locale\nconst formatDate = (dateString: string): string => {\n  try {\n    // Create a date object\n    const date = new Date(dateString);\n    \n    // Use fixed options for consistent formatting\n    // Important: We use 'en-US' locale explicitly to avoid locale-based hydration mismatches\n    const options: Intl.DateTimeFormatOptions = { \n      year: 'numeric', \n      month: 'long', \n      day: 'numeric',\n      timeZone: 'UTC' // Use UTC to avoid timezone differences\n    };\n    \n    return date.toLocaleDateString('en-US', options);\n  } catch (error) {\n    console.error('Error formatting date:', error);\n    return dateString; // Return the original string if there's an error\n  }\n};\n\n// Prepare username for URL to ensure consistent casing between client and server\nconst prepareUsernameForUrl = (name: string): string => {\n  // Ensure the name is trimmed and lowercase for consistent URLs\n  return encodeURIComponent(name.trim().toLowerCase());\n};\n\nconst RenderArticle: React.FC<RenderArticleProps> = ({ article }) => {\n  const [visibleParagraphs, setVisibleParagraphs] = useState<Record<string, boolean>>({});\n  const paragraphRefs = useRef<Record<string, HTMLDivElement | null>>({});\n\n  // IntersectionObserver for fade‑in\n  useEffect(() => {\n    if (!Array.isArray((article as ComplexArticle).content)) return;\n\n    const observer = new IntersectionObserver(\n      entries => {\n        entries.forEach(entry => {\n          const id = entry.target.getAttribute('data-paragraph-id');\n          if (id && entry.isIntersecting) {\n            setVisibleParagraphs(prev => ({ ...prev, [id]: true }));\n          }\n        });\n      },\n      { threshold: 0.3, rootMargin: '-30px 0px' }\n    );\n\n    // Store the refs to avoid closure issues in cleanup\n    const currentRefs = paragraphRefs.current;\n\n    // observe each paragraph\n    Object.values(currentRefs).forEach(el => {\n      if (el) observer.observe(el);\n    });\n\n    return () => {\n      // Use the stored refs for cleanup\n      Object.values(currentRefs).forEach(el => {\n        if (el) observer.unobserve(el);\n      });\n    };\n  }, [article]);\n\n  const isComplex = (a: unknown): a is ComplexArticle => \n    a !== null && \n    typeof a === 'object' && \n    'content' in a && \n    Array.isArray((a as ComplexArticle).content);\n    \n  if (!isComplex(article)) return null;\n\n  const authorName = article.authorName || \"Unknown Author\";\n  // Pre-compute URL-safe username\n  const urlUsername = prepareUsernameForUrl(authorName);\n  // Pre-format the date to ensure it's consistent between server and client\n  const formattedDate = formatDate(article.createdAt);\n\n  return (\n    <article className=\"article-container\">\n      <div className=\"article-main\">\n        <header className=\"article-header\">\n          <h1 className=\"article-title\">{article.title}</h1>\n          <div className=\"article-meta\">\n            {/* Replace img with Next.js Image component */}\n            <div className=\"author-image-container\">\n              <Image\n                src=\"https://images.unsplash.com/photo-1494790108377-be9c29b29330\"\n                alt=\"Author\"\n                width={40}\n                height={40}\n                className=\"author-image\"\n              />\n            </div>\n            <Link href={`/user/${urlUsername}`} className=\"author-link\">\n              By {authorName}\n            </Link>\n            <span className=\"separator\">•</span>\n            <span className=\"date\">{formattedDate}</span>\n          </div>\n          <div className=\"article-tags\">\n            {article.tags.map(tag => (\n              <span key={tag} className=\"tag\">\n                {tag}\n              </span>\n            ))}\n          </div>\n        </header>\n\n        <section className=\"article-content\">\n          {article.content.map(para => (\n            <div\n              key={para.paragraphId}\n              data-paragraph-id={para.paragraphId}\n              ref={el => {\n                paragraphRefs.current[para.paragraphId] = el\n              }}\n              className={`paragraph-block ${\n                visibleParagraphs[para.paragraphId] ? 'visible' : ''\n              }`}\n            >\n              <div className=\"paragraph-text\">\n                <ReactMarkdown>{para.text}</ReactMarkdown>\n              </div>\n            </div>\n          ))}\n        </section>\n\n        <CommentSection slug={article.slug} />\n      </div>\n    </article>\n  );\n};\n\nexport default RenderArticle;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3030, "column": 0}, "map": {"version":3,"sources":["file:///Users/sirabdisalam/journalite-article-page/src/app/articles/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport Link from 'next/link'\nimport { useSearchParams } from 'next/navigation'\nimport { Suspense } from 'react'\nimport styles from '@/styles/home.module.css'\nimport { auth } from '@/firebase/clientApp'\nimport { onAuthStateChanged, signOut } from 'firebase/auth'\nimport NotificationBell from '@/components/NotificationBell'\nimport LeftSidebar from '@/components/LeftSidebar'\n\n// Import Firestore article service\nimport { getArticleBySlug, Article as FirestoreArticle } from '@/firebase/articles'\nimport RenderArticle from '@/components/RenderArticle'\n\n// Author mapping from homepage for consistency\nconst authorMapping: { [key: string]: string } = {\n  '84b2f82c-1e93-498a-983e-3b30a8379e63': 'Samuel Green',\n  user_002: 'Alex Martinez',\n  'kristen-lee-id': 'Kristen Lee',\n  'alex-wen-id': 'Alex Wen',\n  'hannah-cole-id': 'Hannah Cole'\n}\n\n// Convert Firestore article to UI format\nconst adaptFirestoreArticle = (firestoreArticle: FirestoreArticle): any => {\n  return {\n    _id: firestoreArticle.id || '',\n    title: firestoreArticle.title,\n    slug: firestoreArticle.slug || '',\n    authorId: firestoreArticle.authorId,\n    authorName: firestoreArticle.authorName || 'Unknown Author',\n    coverImageUrl: firestoreArticle.coverImage,\n    tags: firestoreArticle.tags,\n    status: firestoreArticle.status || 'published',\n    content: [\n      {\n        paragraphId: 'p1',\n        text: firestoreArticle.body,\n        likes: [],\n        comments: []\n      }\n    ],\n    likes: [],\n    reposts: [],\n    comments: [],\n    createdAt: firestoreArticle.createdAt.toDate().toISOString(),\n    updatedAt: firestoreArticle.createdAt.toDate().toISOString()\n  };\n};\n\nfunction Article () {\n  const params = useSearchParams()\n  const slug = params?.get('slug')\n  \n  const [article, setArticle] = useState<any>(null)\n  const [isLoading, setIsLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [tags, setTags] = useState<string[]>([])\n  const [isAuthenticated, setIsAuthenticated] = useState(false)\n  const [isSidebarCollapsed, setIsSidebarCollapsed] = useState(false)\n  const [windowWidth, setWindowWidth] = useState(window.innerWidth)\n  \n  // Check if user is authenticated\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, (user) => {\n      setIsAuthenticated(!!user)\n    })\n    \n    return () => unsubscribe()\n  }, [])\n  \n  // Fetch article data\n  useEffect(() => {\n    const fetchArticle = async () => {\n      if (!slug) {\n        setError('No article slug provided')\n        setIsLoading(false)\n        return\n      }\n      \n      try {\n        const firestoreArticle = await getArticleBySlug(slug)\n        \n        if (!firestoreArticle) {\n          setError('Article not found')\n          setIsLoading(false)\n          return\n        }\n        \n        // Transform the data format for the RenderArticle component\n        const transformedArticle = adaptFirestoreArticle(firestoreArticle)\n        \n        setArticle(transformedArticle)\n        setTags(firestoreArticle.tags || [])\n        setIsLoading(false)\n      } catch (error) {\n        console.error('Error fetching article:', error)\n        setError('Failed to load article')\n        setIsLoading(false)\n      }\n    }\n    \n    fetchArticle()\n  }, [slug])\n  \n  const handleSignOut = async () => {\n    try {\n      await signOut(auth)\n    } catch (error) {\n      console.error('Error signing out:', error)\n    }\n  }\n  \n  const toggleSidebar = () => {\n    setIsSidebarCollapsed(!isSidebarCollapsed)\n  }\n\n  // Add resize listener for responsive behavior\n  useEffect(() => {\n    const handleResize = () => {\n      setWindowWidth(window.innerWidth);\n      // Auto-collapse on small screens\n      if (window.innerWidth < 768) {\n        setIsSidebarCollapsed(true);\n      }\n    };\n\n    window.addEventListener('resize', handleResize);\n    // Initial check\n    handleResize();\n    \n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []);\n\n  return (\n    <div className={styles['three-column-layout']}>\n      {/* Background overlay for mobile */}\n      {windowWidth < 768 && !isSidebarCollapsed && (\n        <div className={`${styles['menu-overlay']} ${styles['active']}`} onClick={toggleSidebar}></div>\n      )}\n      \n      {/* LEFT SIDEBAR */}\n      <LeftSidebar \n        isAuthenticated={isAuthenticated} \n        handleLogout={handleSignOut} \n        toggleSidebar={toggleSidebar} \n        isSidebarCollapsed={isSidebarCollapsed}\n      />\n\n      {/* Mobile sidebar toggle button - only shown on mobile */}\n      {windowWidth < 768 && (\n        <button \n          className={styles['toggle-button']} \n          onClick={toggleSidebar}\n          aria-label={isSidebarCollapsed ? \"Expand sidebar\" : \"Collapse sidebar\"}\n        >\n          {isSidebarCollapsed ? \"☰\" : \"✕\"}\n        </button>\n      )}\n\n      {/* CENTER COLUMN - Use the original RenderArticle component */}\n      <main className={styles['center-column']}>\n        {isLoading ? (\n          <div className={styles['loading']}>Loading article...</div>\n        ) : error ? (\n          <div className={styles['loading']}>Error: {error}</div>\n        ) : article ? (\n          <RenderArticle article={article} />\n        ) : (\n          <div className={styles['loading']}>Article not found</div>\n        )}\n      </main>\n\n      {/* RIGHT SIDEBAR - Same structure as homepage */}\n      <aside className={styles['right-sidebar']}>\n        <h2 className={styles['sidebar-heading']}>Related Tags</h2>\n        {isAuthenticated && <NotificationBell />}\n        <div className={styles['tag-list']}>\n          {tags.map(tag => (\n            <Link\n              key={tag}\n              href={`/tag/${tag.toLowerCase()}`}\n              className={styles['trending-tag']}\n            >\n              # {tag}\n            </Link>\n          ))}\n        </div>\n        \n        {/* Show Edit button only if user is the author */}\n        {isAuthenticated && article && auth.currentUser?.uid === article.authorId && (\n          <Link \n            href={`/edit-article?id=${article._id}`} \n            className={styles['edit-button']}\n          >\n            Edit Article\n          </Link>\n        )}\n        \n        <Link href='/write' className={styles['write-button']}>\n          Write\n        </Link>\n      </aside>\n    </div>\n  )\n}\n\nexport default function ArticlePage () {\n  return (\n    <Suspense fallback={<div>Loading article...</div>}>\n      <Article />\n    </Suspense>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}