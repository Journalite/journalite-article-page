(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5314],{3347:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var s=a(5155),r=a(2115),l=a(6874),c=a.n(l),i=a(8163),n=a.n(i),o=a(3201),d=a(6203),u=a(9210),h=a(350),m=a(9478),g=a(9576);let x=e=>({_id:e.id||"",title:e.title,slug:e.slug||e.title.toLowerCase().replace(/[^\w\s]/gi,"").replace(/\s+/g,"-"),authorId:e.authorId,authorName:e.authorName,coverImageUrl:e.coverImage||null,tags:e.tags,content:[{paragraphId:"p1",text:e.body,likes:[],comments:[]}],likes:e.likes||[],reposts:e.reposts||[],comments:e.comments||[],viewCount:e.viewCount||0,createdAt:e.createdAt.toDate().toISOString(),updatedAt:e.updatedAt?e.updatedAt.toDate().toISOString():e.createdAt.toDate().toISOString()});function p(){let[e,t]=(0,r.useState)([]),[a,l]=(0,r.useState)(!0),[i,p]=(0,r.useState)(!0),[v,j]=(0,r.useState)(!1),[N,w]=(0,r.useState)(window.innerWidth),f=["Technology","Writing","Design","Politics","Health","Science"],[b,C]=(0,r.useState)(f[0]),[y,A]=(0,r.useState)(!1),[S,I]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=(0,d.hg)(o.j2,e=>{j(!!e)});return()=>e()},[]),(0,r.useEffect)(()=>{let e=()=>{w(window.innerWidth)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,r.useEffect)(()=>{p(N<768)},[N]),(0,r.useEffect)(()=>{(async()=>{try{l(!0);let e=await (0,u.GE)({limit:30});if(console.log("Articles fetched from Firestore:",e.length),e&&e.length>0){let a=e.map(x),s=[{id:"featured",name:"Featured Stories",articles:a.slice(0,4)},{id:"trending",name:"Trending Now",articles:[...a].sort((e,t)=>{var a,s;return(t.viewCount||0)+((null==(a=t.likes)?void 0:a.length)||0)-((e.viewCount||0)+((null==(s=e.likes)?void 0:s.length)||0))}).slice(0,6)},{id:"recent",name:"Recently Published",articles:[...a].sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()).slice(0,8)}];t(s),await E(b)}}catch(e){console.error("Error fetching articles:",e)}finally{l(!1)}})()},[b]);let E=async e=>{try{let a=await (0,u.zE)(e,{limit:6});if(a&&a.length>0){let s=a.map(x);t(t=>{let a=t.findIndex(e=>"byTag"===e.id);if(!(a>=0))return[...t,{id:"byTag",name:"".concat(e," Articles"),articles:s}];{let r=[...t];return r[a]={...r[a],name:"".concat(e," Articles"),articles:s},r}})}}catch(t){console.error("Error fetching articles for tag ".concat(e,":"),t)}},k=e=>e.authorName||"",L=e=>e&&Array.isArray(e)&&Math.ceil(e.reduce((e,t)=>e+(t&&t.text?t.text.split(" ").length:0),0)/200)||1,T=function(e){var t;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:150;if(e.excerpt)return e.excerpt;let s=e.content;if(!s||!Array.isArray(s)||0===s.length)return"";let r=(null==(t=s[0])?void 0:t.text)||"",l=r.includes("<")&&r.includes(">")?(e=>{let t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""})(r):r;return l.length<=a?l:l.substring(0,a).trim()+"..."},U=()=>{p(!i)},_=async()=>{try{await (0,d.CI)(o.j2)}catch(e){}},D=e=>{I({title:e.title,slug:e.slug,coverImageUrl:e.coverImageUrl,excerpt:T(e,100)}),A(!0)},O=e=>{C(e),E(e)};return(0,s.jsxs)("div",{className:n()["three-column-layout"],children:[N<768&&!i&&(0,s.jsx)("div",{className:"".concat(n()["menu-overlay"]," ").concat(n().active),onClick:U}),(0,s.jsx)(m.A,{isAuthenticated:v,handleLogout:_,toggleSidebar:U,isSidebarCollapsed:i}),N<768&&(0,s.jsx)("button",{className:n()["toggle-button"],onClick:U,"aria-label":i?"Expand sidebar":"Collapse sidebar",children:i?"☰":"✕"}),(0,s.jsxs)("main",{className:"".concat(n()["center-column"]," ").concat(i&&N>=768?n().expanded:""),children:[(0,s.jsxs)("div",{className:n()["explore-header"],children:[(0,s.jsx)("h1",{className:n()["explore-title"],children:"Explore"}),(0,s.jsx)("p",{className:n()["explore-subtitle"],children:"Discover stories, ideas, and insights from Journalite writers"})]}),a?(0,s.jsx)("div",{className:n().loading,children:"Loading articles..."}):(0,s.jsxs)("div",{className:n()["explore-container"],children:[e.map(e=>(0,s.jsxs)("section",{className:n()["explore-section"],children:[(0,s.jsx)("h2",{className:n()["section-title"],children:e.name}),(0,s.jsx)("div",{className:"featured"===e.id?n()["featured-articles-grid"]:n()["article-grid"],children:e.articles.map((t,a)=>(0,s.jsxs)("article",{className:"featured"===e.id&&0===a?n()["feature-large"]:n()["article-card"],children:[t.coverImageUrl&&(0,s.jsx)("div",{className:n()["article-image"],children:(0,s.jsx)("img",{src:t.coverImageUrl,alt:t.title,className:n()["cover-image"]})}),(0,s.jsxs)("div",{className:n()["article-content"],children:[(0,s.jsx)("h3",{className:n()["article-title"],children:t.title}),(0,s.jsxs)("div",{className:n()["article-meta"],children:["by ",k(t)," • ",L(t.content)," min read"]}),(t.excerpt||t.content&&t.content.length>0)&&(0,s.jsx)("p",{className:n()["article-excerpt"],children:T(t)}),t.tags&&t.tags.length>0&&(0,s.jsx)("div",{className:n()["article-tags"],children:t.tags.map((e,a)=>(0,s.jsxs)(c(),{href:"/tag/".concat(e.toLowerCase()),className:n().tag,children:["#",e]},"".concat(t.slug,"-tag-").concat(a)))}),(0,s.jsxs)("div",{className:n()["reaction-bar"],children:[(0,s.jsx)("button",{className:n()["reaction-button"],"aria-label":"Like article",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:(0,s.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})}),(0,s.jsx)("button",{className:n()["reaction-button"],"aria-label":"Share article",onClick:()=>D(t),children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:(0,s.jsx)("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z"})})}),(0,s.jsx)(c(),{href:"/articles?slug=".concat(encodeURIComponent(t.slug)),className:n()["read-link"],children:"Read →"})]})]})]},"".concat(e.id,"-").concat(t._id||t.slug||a)))})]},e.id)),(0,s.jsxs)("section",{className:n()["explore-section"],children:[(0,s.jsx)("h2",{className:n()["section-title"],children:"Explore by Topic"}),(0,s.jsx)("div",{className:n()["tags-selector"],children:f.map(e=>(0,s.jsx)("button",{className:"".concat(n()["tag-button"]," ").concat(b===e?n()["tag-button-active"]:""),onClick:()=>O(e),children:e},e))})]})]})]}),(0,s.jsxs)("aside",{className:n()["right-sidebar"],children:[(0,s.jsx)("h2",{className:n()["sidebar-heading"],children:"Popular Tags"}),v&&(0,s.jsx)(h.A,{}),(0,s.jsx)("div",{className:n()["tag-list"],children:f.map(e=>(0,s.jsxs)(c(),{href:"/tag/".concat(e.toLowerCase()),className:n()["trending-tag"],children:["# ",e]},e))}),(0,s.jsx)(c(),{href:"/write",className:n()["write-button"],children:"Write"})]}),S&&(0,s.jsx)(g.A,{isOpen:y,onClose:()=>{A(!1),I(null)},articleTitle:S.title,articleUrl:"https://mvp.journalite.app/articles?slug=".concat(encodeURIComponent(S.slug)),coverImageUrl:S.coverImageUrl,excerpt:S.excerpt})]})}function v(){return(0,s.jsx)(p,{})}},5959:(e,t,a)=>{Promise.resolve().then(a.bind(a,3347))}},e=>{var t=t=>e(e.s=t);e.O(0,[1708,8669,2992,7158,7117,6874,4744,1251,4765,8441,1684,7358],()=>t(5959)),_N_E=e.O()}]);