(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5314],{3347:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y});var a=r(5155),s=r(6121),l=r(6874),n=r.n(l),o=r(8163),i=r.n(o),c=r(3201),d=r(6203),m=r(9210),u=r(350),g=r(6201),h=r(4859),x=r(9576);let p=e=>({_id:e.id||"",title:e.title,slug:e.slug||e.title.toLowerCase().replace(/[^\w\s]/gi,"").replace(/\s+/g,"-"),authorId:e.authorId,authorName:e.authorName,coverImageUrl:e.coverImage||null,tags:e.tags,content:[{paragraphId:"p1",text:e.body,likes:[],comments:[]}],likes:e.likes||[],reposts:e.reposts||[],comments:e.comments||[],viewCount:e.viewCount||0,createdAt:e.createdAt.toDate().toISOString(),updatedAt:e.updatedAt?e.updatedAt.toDate().toISOString():e.createdAt.toDate().toISOString()});function f(){let[e,t]=(0,s.J0)([]),[r,l]=(0,s.J0)(!0),[o,f]=(0,s.J0)(!0),[y,j]=(0,s.J0)(!1),[b,v]=(0,s.J0)(window.innerWidth),N=["Technology","Writing","Design","Politics","Health","Science"],[w,k]=(0,s.J0)(N[0]),[C,S]=(0,s.J0)(!1),[E,A]=(0,s.J0)(null);(0,s.vJ)(()=>{let e=(0,d.onAuthStateChanged)(c.j2,e=>{j(!!e)});return()=>e()},[]),(0,s.vJ)(()=>{let e=()=>{v(window.innerWidth)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,s.vJ)(()=>{f(b<768)},[b]),(0,s.vJ)(()=>{(async()=>{try{l(!0);let e=await (0,m.GE)({limit:30});if(console.log("Articles fetched from Firestore:",e.length),e&&e.length>0){let r=e.map(p),a=[{id:"featured",name:"Featured Stories",articles:r.slice(0,4)},{id:"trending",name:"Trending Now",articles:[...r].sort((e,t)=>{var r,a;return(t.viewCount||0)+((null==(r=t.likes)?void 0:r.length)||0)-((e.viewCount||0)+((null==(a=e.likes)?void 0:a.length)||0))}).slice(0,6)},{id:"recent",name:"Recently Published",articles:[...r].sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()).slice(0,8)}];t(a),await I(w)}}catch(e){console.error("Error fetching articles:",e)}finally{l(!1)}})()},[w]);let I=async e=>{try{let r=await (0,m.zE)(e,{limit:6});if(r&&r.length>0){let a=r.map(p);t(t=>{let r=t.findIndex(e=>"byTag"===e.id);if(!(r>=0))return[...t,{id:"byTag",name:"".concat(e," Articles"),articles:a}];{let s=[...t];return s[r]={...s[r],name:"".concat(e," Articles"),articles:a},s}})}}catch(t){console.error("Error fetching articles for tag ".concat(e,":"),t)}},z=e=>e.authorName||"",T=e=>e&&Array.isArray(e)&&Math.ceil(e.reduce((e,t)=>e+(t&&t.text?t.text.split(" ").length:0),0)/200)||1,B=function(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:150;if(e.excerpt)return e.excerpt;let a=e.content;if(!a||!Array.isArray(a)||0===a.length)return"";let s=(null==(t=a[0])?void 0:t.text)||"",l=s.includes("<")&&s.includes(">")?(e=>{let t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""})(s):s;return l.length<=r?l:l.substring(0,r).trim()+"..."},F=()=>{f(!o)},L=async()=>{try{await (0,d.signOut)(c.j2)}catch(e){}},J=e=>{A({title:e.title,slug:e.slug,coverImageUrl:e.coverImageUrl,excerpt:B(e,100)}),S(!0)},O=e=>{k(e),I(e)};return(0,a.jsxs)("div",{className:i()["three-column-layout"],children:[b<768&&!o&&(0,a.jsx)("div",{className:"".concat(i()["menu-overlay"]," ").concat(i().active),onClick:F}),(0,a.jsx)(h.A,{}),(0,a.jsx)(g.A,{isAuthenticated:y,handleLogout:L,toggleSidebar:F,isSidebarCollapsed:o}),b<768&&(0,a.jsx)("button",{className:i()["toggle-button"],onClick:F,"aria-label":o?"Expand sidebar":"Collapse sidebar",children:o?"☰":"✕"}),(0,a.jsxs)("main",{className:"".concat(i()["center-column"]," ").concat(o&&b>=768?i().expanded:""),children:[(0,a.jsxs)("div",{className:i()["explore-header"],children:[(0,a.jsx)("h1",{className:i()["explore-title"],children:"Explore"}),(0,a.jsx)("p",{className:i()["explore-subtitle"],children:"Discover stories, ideas, and insights from Journalite writers"})]}),r?(0,a.jsx)("div",{className:i().loading,children:"Loading articles..."}):(0,a.jsxs)("div",{className:i()["explore-container"],children:[e.map(e=>(0,a.jsxs)("section",{className:i()["explore-section"],children:[(0,a.jsx)("h2",{className:i()["section-title"],children:e.name}),(0,a.jsx)("div",{className:"featured"===e.id?i()["featured-articles-grid"]:i()["article-grid"],children:e.articles.map((t,r)=>(0,a.jsxs)("article",{className:"featured"===e.id&&0===r?i()["feature-large"]:i()["article-card"],children:[t.coverImageUrl&&(0,a.jsx)("div",{className:i()["article-image"],children:(0,a.jsx)("img",{src:t.coverImageUrl,alt:t.title,className:i()["cover-image"]})}),(0,a.jsxs)("div",{className:i()["article-content"],children:[(0,a.jsx)("h3",{className:i()["article-title"],children:t.title}),(0,a.jsxs)("div",{className:i()["article-meta"],children:["by ",z(t)," • ",T(t.content)," min read"]}),(t.excerpt||t.content&&t.content.length>0)&&(0,a.jsx)("p",{className:i()["article-excerpt"],children:B(t)}),t.tags&&t.tags.length>0&&(0,a.jsx)("div",{className:i()["article-tags"],children:t.tags.map((e,r)=>(0,a.jsxs)(n(),{href:"/tag/".concat(e.toLowerCase()),className:i().tag,children:["#",e]},"".concat(t.slug,"-tag-").concat(r)))}),(0,a.jsxs)("div",{className:i()["reaction-bar"],children:[(0,a.jsx)("button",{className:i()["reaction-button"],"aria-label":"Like article",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:(0,a.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})}),(0,a.jsx)("button",{className:i()["reaction-button"],"aria-label":"Share article",onClick:()=>J(t),children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:(0,a.jsx)("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z"})})}),(0,a.jsx)(n(),{href:"/articles?slug=".concat(encodeURIComponent(t.slug)),className:i()["read-link"],children:"Read →"})]})]})]},"".concat(e.id,"-").concat(t._id||t.slug||r)))})]},e.id)),(0,a.jsxs)("section",{className:i()["explore-section"],children:[(0,a.jsx)("h2",{className:i()["section-title"],children:"Explore by Topic"}),(0,a.jsx)("div",{className:i()["tags-selector"],children:N.map(e=>(0,a.jsx)("button",{className:"".concat(i()["tag-button"]," ").concat(w===e?i()["tag-button-active"]:""),onClick:()=>O(e),children:e},e))})]})]})]}),(0,a.jsxs)("aside",{className:i()["right-sidebar"],children:[(0,a.jsx)("h2",{className:i()["sidebar-heading"],children:"Popular Tags"}),y&&(0,a.jsx)(u.A,{}),(0,a.jsx)("div",{className:i()["tag-list"],children:N.map(e=>(0,a.jsxs)(n(),{href:"/tag/".concat(e.toLowerCase()),className:i()["trending-tag"],children:["# ",e]},e))}),(0,a.jsx)(n(),{href:"/write",className:i()["write-button"],children:"Write"})]}),E&&(0,a.jsx)(x.A,{isOpen:C,onClose:()=>{S(!1),A(null)},highlightText:E.excerpt||"Check out this article",articleTitle:E.title,shareUrl:"https://mvp.journalite.app/articles?slug=".concat(encodeURIComponent(E.slug))})]})}function y(){return(0,a.jsx)(f,{})}},4859:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(5155);r(2115);var s=r(6874),l=r.n(s),n=r(8163),o=r.n(n);let i=()=>(0,a.jsx)(l(),{href:"/",className:o()["top-left-logo"],children:"Journalite"})},5959:(e,t,r)=>{Promise.resolve().then(r.bind(r,3347))},6648:(e,t,r)=>{"use strict";r.d(t,{d5:()=>a.createPortal});var a=r(7650)},9576:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var a=r(5155),s=r(9137),l=r.n(s),n=r(2115),o=r(4814),i=r(6648);let c=e=>{let{isOpen:t,onClose:r,highlightText:s,articleTitle:c,shareUrl:d}=e,[m,u]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(m){let e=setTimeout(()=>u(!1),3e3);return()=>clearTimeout(e)}},[m]),(0,n.useEffect)(()=>{let e=e=>{"Escape"===e.key&&r()};return t&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[t,r]);let g=async()=>{try{await navigator.clipboard.writeText(d),u(!0)}catch(e){console.error("Failed to copy link:",e)}},h=async()=>{if(navigator.share)try{await navigator.share({title:'Highlight from "'.concat(c,'"'),text:'"'.concat(s,'" - from "').concat(c,'"'),url:d}),r()}catch(e){"AbortError"!==e.name&&console.error("Error sharing:",e)}};return t?(0,i.d5)((0,a.jsxs)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"1rem"},onClick:r,className:"jsx-8795408d21c696e",children:[(0,a.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"1rem",padding:"2rem",maxWidth:"500px",width:"100%",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",position:"relative",animation:"modalSlideIn 0.3s ease-out"},onClick:e=>e.stopPropagation(),className:"jsx-8795408d21c696e",children:[(0,a.jsx)("button",{onClick:r,style:{position:"absolute",top:"1rem",right:"1rem",background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#6B7280",padding:"0.25rem",borderRadius:"0.375rem",transition:"color 0.2s ease"},onMouseOver:e=>e.currentTarget.style.color="#374151",onMouseOut:e=>e.currentTarget.style.color="#6B7280",className:"jsx-8795408d21c696e",children:"\xd7"}),(0,a.jsxs)("div",{style:{marginBottom:"1.5rem"},className:"jsx-8795408d21c696e",children:[(0,a.jsxs)("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"1.25rem",fontWeight:"600",color:"#1F2937"},className:"jsx-8795408d21c696e",children:[(0,a.jsx)(o.uQ,{size:20,color:"#3b82f6"}),"Share Highlight"]}),(0,a.jsxs)("p",{style:{margin:0,color:"#6B7280",fontSize:"0.875rem"},className:"jsx-8795408d21c696e",children:['Share this highlight from "',c,'"']})]}),(0,a.jsxs)("div",{style:{backgroundColor:"#F9FAFB",border:"2px solid #E5E7EB",borderRadius:"0.75rem",padding:"1.25rem",marginBottom:"1.5rem"},className:"jsx-8795408d21c696e",children:[(0,a.jsxs)("div",{style:{fontSize:"1rem",lineHeight:"1.6",color:"#374151",fontStyle:"italic",marginBottom:"0.75rem"},className:"jsx-8795408d21c696e",children:['"',s,'"']}),(0,a.jsxs)("div",{style:{fontSize:"0.875rem",color:"#6B7280",fontWeight:"500"},className:"jsx-8795408d21c696e",children:['— from "',c,'"']})]}),(0,a.jsxs)("div",{style:{marginBottom:"1.5rem"},className:"jsx-8795408d21c696e",children:[(0,a.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},className:"jsx-8795408d21c696e",children:"Share Link"}),(0,a.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},className:"jsx-8795408d21c696e",children:[(0,a.jsx)("input",{type:"text",value:d,readOnly:!0,style:{flex:1,padding:"0.75rem",border:"1px solid #D1D5DB",borderRadius:"0.5rem",fontSize:"0.875rem",backgroundColor:"#F9FAFB",fontFamily:"monospace"},className:"jsx-8795408d21c696e"}),(0,a.jsx)("button",{onClick:g,style:{padding:"0.75rem 1rem",backgroundColor:m?"#10B981":"#3B82F6",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",whiteSpace:"nowrap"},className:"jsx-8795408d21c696e",children:m?"✓ Copied!":"\uD83D\uDCCB Copy"})]})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},className:"jsx-8795408d21c696e",children:["undefined"!=typeof navigator&&"share"in navigator&&(0,a.jsx)("button",{onClick:h,style:{padding:"0.75rem 1.5rem",backgroundColor:"#6366F1",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"background-color 0.2s ease",display:"flex",alignItems:"center",gap:"0.5rem"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#5B21B6",onMouseOut:e=>e.currentTarget.style.backgroundColor="#6366F1",className:"jsx-8795408d21c696e",children:"\uD83D\uDCE4 Share"}),(0,a.jsx)("button",{onClick:r,style:{padding:"0.75rem 1.5rem",backgroundColor:"#F3F4F6",color:"#374151",border:"none",borderRadius:"0.5rem",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"background-color 0.2s ease"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#E5E7EB",onMouseOut:e=>e.currentTarget.style.backgroundColor="#F3F4F6",className:"jsx-8795408d21c696e",children:"Close"})]})]}),(0,a.jsx)(l(),{id:"8795408d21c696e",children:"@-webkit-keyframes modalSlideIn{from{opacity:0;-webkit-transform:translatey(-20px)scale(.95);transform:translatey(-20px)scale(.95)}to{opacity:1;-webkit-transform:translatey(0)scale(1);transform:translatey(0)scale(1)}}@-moz-keyframes modalSlideIn{from{opacity:0;-moz-transform:translatey(-20px)scale(.95);transform:translatey(-20px)scale(.95)}to{opacity:1;-moz-transform:translatey(0)scale(1);transform:translatey(0)scale(1)}}@-o-keyframes modalSlideIn{from{opacity:0;-o-transform:translatey(-20px)scale(.95);transform:translatey(-20px)scale(.95)}to{opacity:1;-o-transform:translatey(0)scale(1);transform:translatey(0)scale(1)}}@keyframes modalSlideIn{from{opacity:0;-webkit-transform:translatey(-20px)scale(.95);-moz-transform:translatey(-20px)scale(.95);-o-transform:translatey(-20px)scale(.95);transform:translatey(-20px)scale(.95)}to{opacity:1;-webkit-transform:translatey(0)scale(1);-moz-transform:translatey(0)scale(1);-o-transform:translatey(0)scale(1);transform:translatey(0)scale(1)}}"})]}),document.body):null}}},e=>{var t=t=>e(e.s=t);e.O(0,[1708,2691,7267,2992,7158,7117,6874,3593,4744,2800,8883,9953,3249,8441,1684,7358],()=>t(5959)),_N_E=e.O()}]);