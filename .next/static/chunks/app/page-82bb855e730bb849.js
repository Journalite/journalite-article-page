(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{350:(e,a,n)=>{"use strict";n.d(a,{A:()=>d});var t=n(5155),s=n(2115),i=n(6874),c=n.n(i),l=n(9995),r=n(912),o=n.n(r);let d=()=>{let[e,a]=(0,s.useState)(0),[n,i]=(0,s.useState)([]),[r,d]=(0,s.useState)(!1),h=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=async()=>{a(await (0,l.Hs)())};e();let n=setInterval(e,6e4);return()=>clearInterval(n)},[]),(0,s.useEffect)(()=>{let e=e=>{h.current&&!h.current.contains(e.target)&&d(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,s.useEffect)(()=>{r&&m()},[r]);let m=async()=>{try{let e=await (0,l.Ss)(!1);i(e)}catch(e){console.error("Error fetching notifications:",e)}},x=async e=>{try{!e.read&&e.id&&(await (0,l.bA)(e.id),a(e=>Math.max(e-1,0)),i(a=>a.map(a=>a.id===e.id?{...a,read:!0}:a)))}catch(e){console.error("Error marking notification as read:",e)}},u=e=>{if(!e)return"";let a=e.toDate?e.toDate():new Date(e),n=Math.floor((new Date().getTime()-a.getTime())/6e4);if(n<1)return"Just now";if(n<60)return"".concat(n,"m ago");let t=Math.floor(n/60);if(t<24)return"".concat(t,"h ago");let s=Math.floor(t/24);return s<7?"".concat(s,"d ago"):a.toLocaleDateString()};return(0,t.jsxs)("div",{className:o().notificationContainer,ref:h,children:[(0,t.jsxs)("button",{className:o().bellButton,onClick:()=>{d(!r)},children:[(0,t.jsx)("span",{className:o().bellIcon,children:"\uD83D\uDD14"}),e>0&&(0,t.jsx)("span",{className:o().unreadBadge,children:e})]}),r&&(0,t.jsxs)("div",{className:o().notificationDropdown,children:[(0,t.jsxs)("div",{className:o().notificationHeader,children:[(0,t.jsx)("h3",{children:"Notifications"}),n.length>0&&(0,t.jsx)(c(),{href:"/notifications",className:o().viewAllLink,children:"View All"})]}),(0,t.jsx)("div",{className:o().notificationList,children:0===n.length?(0,t.jsx)("div",{className:o().emptyState,children:"No notifications yet"}):n.slice(0,5).map(e=>(0,t.jsxs)(c(),{href:"/articles?slug=".concat(e.articleSlug),className:"".concat(o().notificationItem," ").concat(e.read?"":o().unread),onClick:()=>x(e),children:[(0,t.jsxs)("div",{className:o().notificationContent,children:[(0,t.jsx)("p",{className:o().notificationMessage,children:e.message}),(0,t.jsx)("span",{className:o().notificationTime,children:u(e.createdAt)})]}),!e.read&&(0,t.jsx)("div",{className:o().unreadDot})]},e.id))}),n.length>5&&(0,t.jsx)("div",{className:o().notificationFooter,children:(0,t.jsx)(c(),{href:"/notifications",className:o().seeMoreLink,children:"See more notifications"})})]})]})}},912:e=>{e.exports={notificationContainer:"NotificationBell_notificationContainer__TFGqP",bellButton:"NotificationBell_bellButton__PKB6r",bellIcon:"NotificationBell_bellIcon__ALAAB",unreadBadge:"NotificationBell_unreadBadge__cOn_b",notificationDropdown:"NotificationBell_notificationDropdown__p8Mv4",notificationHeader:"NotificationBell_notificationHeader__cPSyI",viewAllLink:"NotificationBell_viewAllLink__une1x",notificationList:"NotificationBell_notificationList__SBbvK",notificationItem:"NotificationBell_notificationItem__MW9MC",unread:"NotificationBell_unread__9c4op",notificationContent:"NotificationBell_notificationContent__2upmA",notificationMessage:"NotificationBell_notificationMessage__aqMDB",notificationTime:"NotificationBell_notificationTime__JQ2O9",unreadDot:"NotificationBell_unreadDot__qaEb7",notificationFooter:"NotificationBell_notificationFooter__l28sD",seeMoreLink:"NotificationBell_seeMoreLink__eh2qR",emptyState:"NotificationBell_emptyState___y1V2"}},3792:(e,a,n)=>{"use strict";n.r(a),n.d(a,{default:()=>f});var t=n(5155),s=n(2115),i=n(6874),c=n.n(i),l=n(8163),r=n.n(l),o=n(3201),d=n(6203),h=n(9210),m=n(350);let x={"84b2f82c-1e93-498a-983e-3b30a8379e63":"Samuel Green",user_002:"Alex Martinez","kristen-lee-id":"Kristen Lee","alex-wen-id":"Alex Wen","hannah-cole-id":"Hannah Cole"},u=e=>({_id:e.id||"",title:e.title,slug:e.slug||e.title.toLowerCase().replace(/[^\w\s]/gi,"").replace(/\s+/g,"-"),authorId:e.authorId,authorName:e.authorName,coverImageUrl:e.coverImage,tags:e.tags,content:[{paragraphId:"p1",text:e.body,likes:[],comments:[]}],likes:[],reposts:[],comments:[],createdAt:e.createdAt.toDate().toISOString(),updatedAt:e.createdAt.toDate().toISOString()});function f(){let[e,a]=(0,s.useState)([]),[n,i]=(0,s.useState)(null),[l,f]=(0,s.useState)(!0),[N,v]=(0,s.useState)(!0),[j,g]=(0,s.useState)(!1),[p,_]=(0,s.useState)(window.innerWidth);(0,s.useEffect)(()=>{let e=(0,d.hg)(o.j2,e=>{g(!!e)});return()=>e()},[]),(0,s.useEffect)(()=>{let e=()=>{_(window.innerWidth)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,s.useEffect)(()=>{v(p<768)},[p]),(0,s.useEffect)(()=>{(async()=>{try{f(!0);let e=await (0,h.GE)();if(e&&e.length>0){let n=e.map(u);n.length>0?(i(n[0]),a(n.slice(1))):a([])}else a([])}catch(e){console.error("Error fetching articles:",e)}finally{f(!1)}})()},[]);let b=e=>e.authorName?e.authorName:e.authorId&&x[e.authorId]||"",w=e=>e&&Array.isArray(e)&&Math.ceil(e.reduce((e,a)=>e+(a&&a.text?a.text.split(" ").length:0),0)/200)||1,k=function(e){var a;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:150;if(e.excerpt)return e.excerpt;let t=e.content;if(!t||!Array.isArray(t)||0===t.length)return"";let s=(null==(a=t[0])?void 0:a.text)||"";return s.length<=n?s:s.substring(0,n).trim()+"..."},y=()=>{v(!N)},D=async()=>{try{await (0,d.CI)(o.j2)}catch(e){}};return(0,t.jsxs)("div",{className:r()["three-column-layout"],children:[p<768&&!N&&(0,t.jsx)("div",{className:"".concat(r()["menu-overlay"]," ").concat(r().active),onClick:y}),(0,t.jsxs)("aside",{className:"".concat(r()["left-sidebar"]," ").concat(N?r().collapsed:""),children:[(0,t.jsxs)("div",{className:r()["sidebar-header"],children:[(0,t.jsx)("div",{className:r().logo,children:"Journalite"}),p>=768&&(0,t.jsx)("button",{className:r()["toggle-button"],onClick:y,"aria-label":N?"Expand sidebar":"Collapse sidebar",children:N?"→":"←"})]}),(0,t.jsx)("nav",{className:r()["vertical-nav"],children:j?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(c(),{href:"/",className:"".concat(r()["nav-link"]," ").concat(r()["nav-home"]),children:[(0,t.jsx)("span",{className:r()["nav-icon"],children:"•"}),(0,t.jsx)("span",{className:r()["nav-text"],children:"Home"})]}),(0,t.jsxs)(c(),{href:"/my-thoughts",className:"".concat(r()["nav-link"]," ").concat(r()["nav-thoughts"]),children:[(0,t.jsx)("span",{className:r()["nav-icon"],children:"•"}),(0,t.jsx)("span",{className:r()["nav-text"],children:"My Thoughts"})]}),(0,t.jsxs)(c(),{href:"/create-article",className:"".concat(r()["nav-link"]," ").concat(r()["nav-create"]),children:[(0,t.jsx)("span",{className:r()["nav-icon"],children:"•"}),(0,t.jsx)("span",{className:r()["nav-text"],children:"Create Article"})]}),(0,t.jsxs)(c(),{href:"/explore",className:"".concat(r()["nav-link"]," ").concat(r()["nav-explore"]),children:[(0,t.jsx)("span",{className:r()["nav-icon"],children:"•"}),(0,t.jsx)("span",{className:r()["nav-text"],children:"Explore"})]}),(0,t.jsxs)(c(),{href:"/my-profile",className:"".concat(r()["nav-link"]," ").concat(r()["nav-profile"]),children:[(0,t.jsx)("span",{className:r()["nav-icon"],children:"•"}),(0,t.jsx)("span",{className:r()["nav-text"],children:"My Profile"})]}),(0,t.jsxs)(c(),{href:"/settings",className:"".concat(r()["nav-link"]," ").concat(r()["nav-settings"]),children:[(0,t.jsx)("span",{className:r()["nav-icon"],children:"•"}),(0,t.jsx)("span",{className:r()["nav-text"],children:"Settings"})]}),(0,t.jsxs)(c(),{href:"/notifications",className:"".concat(r()["nav-link"]," ").concat(r()["nav-notifications"]),children:[(0,t.jsx)("span",{className:r()["nav-icon"],children:"•"}),(0,t.jsx)("span",{className:r()["nav-text"],children:"Notifications"})]}),(0,t.jsxs)("button",{onClick:D,className:"".concat(r()["nav-link"]," ").concat(r()["nav-logout"]),children:[(0,t.jsx)("span",{className:r()["nav-icon"],children:"•"}),(0,t.jsx)("span",{className:r()["nav-text"],children:"Log out"})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(c(),{href:"/",className:"".concat(r()["nav-link"]," ").concat(r()["nav-home"]),children:[(0,t.jsx)("span",{className:r()["nav-icon"],children:"•"}),(0,t.jsx)("span",{className:r()["nav-text"],children:"Home"})]}),(0,t.jsxs)(c(),{href:"/login",className:"".concat(r()["nav-link"]," ").concat(r()["nav-login"]),children:[(0,t.jsx)("span",{className:r()["nav-icon"],children:"•"}),(0,t.jsx)("span",{className:r()["nav-text"],children:"Login"})]}),(0,t.jsxs)(c(),{href:"/learn",className:"".concat(r()["nav-link"]," ").concat(r()["nav-learn"]),children:[(0,t.jsx)("span",{className:r()["nav-icon"],children:"•"}),(0,t.jsx)("span",{className:r()["nav-text"],children:"Learn More"})]}),(0,t.jsxs)(c(),{href:"/plans",className:"".concat(r()["nav-link"]," ").concat(r()["nav-plans"]),children:[(0,t.jsx)("span",{className:r()["nav-icon"],children:"•"}),(0,t.jsx)("span",{className:r()["nav-text"],children:"Plans"})]})]})})]}),p<768&&(0,t.jsx)("button",{className:r()["toggle-button"],onClick:y,"aria-label":N?"Expand sidebar":"Collapse sidebar",children:N?"☰":"✕"}),(0,t.jsxs)("main",{className:"".concat(r()["center-column"]," ").concat(N&&p>=768?r().expanded:""),children:[(0,t.jsxs)("div",{className:r()["prompt-banner"],children:[(0,t.jsx)("div",{className:r()["prompt-icon"],children:"\uD83D\uDCA1"}),(0,t.jsx)("div",{className:r()["prompt-text"],children:"What's an idea that changed your life?"}),(0,t.jsx)(c(),{href:"/write",className:r()["prompt-button"],children:"Write now →"})]}),l?(0,t.jsx)("div",{className:r().loading,children:"Loading articles..."}):(0,t.jsxs)(t.Fragment,{children:[n&&(0,t.jsxs)("article",{className:r()["featured-card"],children:[(0,t.jsxs)("div",{className:r()["featured-content"],children:[(0,t.jsx)("div",{className:r()["featured-label"],children:"FEATURED THOUGHT"}),(0,t.jsx)("h2",{className:r()["featured-title"],children:n.title}),(0,t.jsxs)("div",{className:r()["featured-meta"],children:["by ",b(n)," • ",w(n.content)," min read"]}),(0,t.jsx)("p",{className:r()["featured-excerpt"],children:k(n)}),(0,t.jsx)(c(),{href:"/articles?slug=".concat(encodeURIComponent(n.slug)),className:r()["read-link"],children:"Read →"})]}),n.coverImageUrl&&(0,t.jsx)("div",{className:r()["featured-image"],children:(0,t.jsx)("img",{src:n.coverImageUrl,alt:n.title,className:r()["cover-image"]})})]}),(0,t.jsx)("div",{className:r()["article-grid"],children:e.map((e,a)=>(0,t.jsxs)("article",{className:r()["article-card"],children:[(0,t.jsx)("h3",{className:r()["article-title"],children:e.title}),(0,t.jsxs)("div",{className:r()["article-meta"],children:["by ",b(e)," • ",w(e.content)," min read"]}),(e.excerpt||e.content&&e.content.length>0)&&(0,t.jsx)("p",{className:r()["article-excerpt"],children:k(e)}),e.tags&&e.tags.length>0&&(0,t.jsx)("div",{className:r()["article-tags"],children:e.tags.map((a,n)=>(0,t.jsx)("span",{className:r().tag,children:a},"".concat(e.slug,"-tag-").concat(n)))}),(0,t.jsxs)("div",{className:r()["reaction-bar"],children:[(0,t.jsx)("button",{className:r()["reaction-button"],children:"❤️ Echo"}),(0,t.jsx)("button",{className:r()["reaction-button"],children:"\uD83D\uDD01 Resonate"}),(0,t.jsx)("button",{className:r()["reaction-button"],children:"\uD83D\uDCAC Comment"}),(0,t.jsx)(c(),{href:"/articles?slug=".concat(encodeURIComponent(e.slug)),className:r()["read-link"],children:"Read →"})]})]},e._id||e.slug||"article-".concat(a)))})]})]}),(0,t.jsxs)("aside",{className:r()["right-sidebar"],children:[(0,t.jsx)("h2",{className:r()["sidebar-heading"],children:"Trending"}),j&&(0,t.jsx)(m.A,{}),(0,t.jsx)("div",{className:r()["tag-list"],children:["Journalism","Technology","Politics","Science","Culture"].map(e=>(0,t.jsxs)(c(),{href:"/tag/".concat(e.toLowerCase()),className:r()["trending-tag"],children:["# ",e]},e))}),(0,t.jsx)(c(),{href:"/write",className:r()["write-button"],children:"Write"})]})]})}},5689:(e,a,n)=>{Promise.resolve().then(n.bind(n,3792))}},e=>{var a=a=>e(e.s=a);e.O(0,[697,992,158,874,117,692,441,684,358],()=>a(5689)),_N_E=e.O()}]);