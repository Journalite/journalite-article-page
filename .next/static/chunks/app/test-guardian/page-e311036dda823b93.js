(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3172,4745],{238:(e,t,a)=>{Promise.resolve().then(a.bind(a,6319))},3172:(e,t,a)=>{"use strict";a.d(t,{guardianService:()=>r});class i{async searchArticles(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;if(!this.apiKey||"YOUR_API_KEY_HERE"===this.apiKey)throw Error("Guardian API key not configured");let r=new URLSearchParams({"api-key":this.apiKey,"show-fields":"headline,standfirst,body,main,thumbnail,byline,trailText,bodyText","show-tags":"contributor,keyword","show-elements":"image,video","page-size":i.toString(),page:a.toString(),"order-by":"newest"});e&&r.append("q",e),t&&r.append("section",t);let s="".concat(this.baseUrl,"/search?").concat(r.toString()),n=await fetch(s);if(!n.ok)throw Error("HTTP error! status: ".concat(n.status));return(await n.json()).response}async getArticleById(e){if(!this.apiKey||"YOUR_API_KEY_HERE"===this.apiKey)throw Error("Guardian API key not configured");let t=new URLSearchParams({"api-key":this.apiKey,"show-fields":"headline,standfirst,body,main,thumbnail,byline,trailText,bodyText","show-tags":"contributor,keyword","show-elements":"image,video"}),a="".concat(this.baseUrl,"/").concat(e,"?").concat(t.toString()),i=await fetch(a);if(!i.ok)throw Error("HTTP error! status: ".concat(i.status));return(await i.json()).response.content}async getSections(){if(!this.apiKey||"YOUR_API_KEY_HERE"===this.apiKey)throw Error("Guardian API key not configured");let e="".concat(this.baseUrl,"/sections?api-key=").concat(this.apiKey),t=await fetch(e);if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));return(await t.json()).response.results}convertToArticleFormat(e){var t,a,i,r,s,n,o,l;let c="";(null==(t=e.fields)?void 0:t.standfirst)&&(c+='<div class="article-standfirst" style="font-size: 1.2em; color: #666; font-weight: 400; line-height: 1.4; margin: 0 0 2em 0;">\n        <strong>'.concat(e.fields.standfirst,"</strong>\n      </div>"));let d=(null==(a=e.fields)?void 0:a.body)||(null==(i=e.fields)?void 0:i.bodyText)||"";if(d&&(c+=d=(d=(d=(d=(d=d.replace(/<img([^>]*?)>/g,(e,t)=>"<img ".concat(t,' style="max-width: 100%; height: auto; margin: 2em auto; display: block; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);" />'))).replace(/<figure([^>]*?)>/g,(e,t)=>"<figure ".concat(t,' style="margin: 2em auto; text-align: center;">'))).replace(/<figcaption([^>]*?)>/g,(e,t)=>"<figcaption ".concat(t,' style="margin-top: 0.5em; font-size: 0.9em; color: #666; font-style: italic; text-align: center;">'))).replace(/<video([^>]*?)>/g,(e,t)=>"<video ".concat(t,' style="max-width: 100%; height: auto; margin: 2em auto; display: block; border-radius: 8px;" controls />'))).replace(/<p>\s*<\/p>/g,"")),!(c.includes("<img")||c.includes("<figure"))&&e.elements&&e.elements.length>0){let t=e.elements.find(e=>"image"===e.type&&e.assets&&e.assets.length>0);if(t){let a=t.assets.find(e=>"image"===e.type);if(a){let t=a.typeData.secureFile||a.file,i=a.typeData.alt||a.typeData.caption||e.webTitle,r=a.typeData.caption||"";c='<figure style="margin: 0 0 2em 0; text-align: center;">\n              <img src="'.concat(t,'" alt="').concat(i,'" style="max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);" />\n              ').concat(r?'<figcaption style="margin-top: 0.5em; font-size: 0.9em; color: #666; font-style: italic;">'.concat(r,"</figcaption>"):"","\n            </figure>")+c}}}(null==(r=e.fields)?void 0:r.main)&&!c.includes("<img")&&!c.includes("<figure")&&(c='<figure style="margin: 0 0 2em 0; text-align: center;">\n              <img src="'.concat(e.fields.main,'" alt="').concat(e.webTitle.replace(/"/g,"&quot;"),'" style="max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);" />\n            </figure>')+c),c+='<div class="original-article-link" style="margin-top: 3em; padding: 1.5em; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-radius: 12px; border-left: 4px solid #0066cc; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">\n      <p style="margin: 0; color: #495057;"><em>\uD83D\uDCF0 <strong>Read the complete article at:</strong> <a href="'.concat(e.webUrl,'" target="_blank" rel="noopener noreferrer" style="color: #0066cc; font-weight: 600; text-decoration: none; border-bottom: 1px solid transparent; transition: border-bottom 0.2s ease;" onmouseover="this.style.borderBottom=\'1px solid #0066cc\'" onmouseout="this.style.borderBottom=\'1px solid transparent\'">The Guardian</a></em></p>\n    </div>');let u=(null==(s=e.fields)?void 0:s.byline)||(null==(n=e.tags.find(e=>"contributor"===e.type))?void 0:n.webTitle)||"The Guardian",g=Math.ceil(((null==(o=e.fields)?void 0:o.body)?e.fields.body.replace(/<[^>]*>/g,"").split(/\s+/).length:300)/200),h=[e.sectionName,e.pillarName,...e.tags.filter(e=>"keyword"===e.type).slice(0,3).map(e=>e.webTitle)].filter(Boolean);return{title:(null==(l=e.fields)?void 0:l.headline)||e.webTitle,authorName:u,createdAt:(e=>{try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",timeZone:"UTC"})}catch(t){return console.error("Error formatting date:",t),e}})(e.webPublicationDate),readTime:g,tags:h,authorId:"guardian-api",hasReflectionRoom:!1,html:c}}isConfigured(){return!!(this.apiKey&&"YOUR_API_KEY_HERE"!==this.apiKey)}constructor(){this.baseUrl="https://content.guardianapis.com",this.apiKey="c928b68e-9227-4e28-a734-63f37cbd301b",this.apiKey&&"YOUR_API_KEY_HERE"!==this.apiKey||console.warn("Guardian API key not configured. Please set NEXT_PUBLIC_GUARDIAN_API_KEY in your environment variables.")}}let r=new i},6319:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var i=a(5155),r=a(2115),s=a(3172);function n(){let[e,t]=(0,r.useState)("loading"),[a,n]=(0,r.useState)(""),[o,l]=(0,r.useState)([]);return(0,r.useEffect)(()=>{!async function(){try{if(!s.guardianService.isConfigured()){t("error"),n("Guardian API key not configured. Please add NEXT_PUBLIC_GUARDIAN_API_KEY to your .env.local file.");return}let e=await s.guardianService.searchArticles("technology",void 0,1,5);t("success"),n("✅ Guardian API working! Found ".concat(e.total," articles.")),l(e.results.slice(0,3))}catch(e){t("error"),n("❌ Error: ".concat(e instanceof Error?e.message:"Unknown error"))}}()},[]),(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,i.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Guardian API Test"}),(0,i.jsxs)("div",{className:"p-6 rounded-lg mb-8 ".concat("loading"===e?"bg-blue-100 text-blue-800":"success"===e?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:["loading"===e&&"\uD83D\uDD04 Testing Guardian API connection...",(0,i.jsx)("p",{className:"font-semibold",children:a})]}),"success"===e&&o.length>0&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Sample Articles:"}),(0,i.jsx)("div",{className:"space-y-4",children:o.map(e=>{var t,a;return(0,i.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:(null==(t=e.fields)?void 0:t.headline)||e.webTitle}),(0,i.jsxs)("p",{className:"text-gray-600 text-sm mb-2",children:["Section: ",e.sectionName," | Published: ",new Date(e.webPublicationDate).toLocaleDateString()]}),(null==(a=e.fields)?void 0:a.standfirst)&&(0,i.jsx)("p",{className:"text-gray-700 text-sm",children:e.fields.standfirst})]},e.id)})})]}),"error"===e&&(0,i.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Troubleshooting Steps:"}),(0,i.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-gray-700",children:[(0,i.jsxs)("li",{children:["Make sure you've created a ",(0,i.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded",children:".env.local"})," file in your project root"]}),(0,i.jsxs)("li",{children:["Add your API key: ",(0,i.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"NEXT_PUBLIC_GUARDIAN_API_KEY=your_key_here"})]}),(0,i.jsxs)("li",{children:["Restart your development server: ",(0,i.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"npm run dev"})]}),(0,i.jsxs)("li",{children:["Make sure your API key is valid (test it at ",(0,i.jsx)("a",{href:"https://open-platform.theguardian.com/",target:"_blank",className:"text-blue-600 hover:underline",children:"Guardian Open Platform"}),")"]})]})]}),(0,i.jsx)("div",{className:"mt-8 text-center",children:(0,i.jsx)("a",{href:"/guardian-news",className:"inline-block px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Go to Guardian News Page"})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[8096,7358],()=>t(238)),_N_E=e.O()}]);