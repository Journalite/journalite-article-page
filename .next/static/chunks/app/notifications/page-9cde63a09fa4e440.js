(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6173],{4859:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});var a=t(5155);t(2115);var n=t(6874),i=t.n(n),l=t(8163),c=t.n(l);let r=()=>(0,a.jsx)(i(),{href:"/",className:c()["top-left-logo"],children:"Journalite"})},5814:(e,s,t)=>{Promise.resolve().then(t.bind(t,7435))},7435:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>g});var a=t(5155),n=t(6121),i=t(5695),l=t(6874),c=t.n(l),r=t(6203),o=t(3201),d=t(9995),m=t(4814),x=t(8163),h=t.n(x),u=t(6201),f=t(4859);function g(){let[e,s]=(0,n.J0)(!1),[l,x]=(0,n.J0)(!0),[g,j]=(0,n.J0)([]),[N,b]=(0,n.J0)(!1),p=(0,i.useRouter)();(0,n.vJ)(()=>{let e=(0,r.onAuthStateChanged)(o.j2,e=>{let t=!!e;s(t),t?y():p.push("/login?redirect=/notifications")});return()=>e()},[p]);let y=async()=>{try{x(!0);let e=await (0,d.Ss)(!1);j(e)}catch(e){console.error("Error fetching notifications:",e)}finally{x(!1)}},v=async e=>{if(e.id&&!e.read)try{await (0,d.bA)(e.id),j(s=>s.map(s=>s.id===e.id?{...s,read:!0}:s))}catch(e){console.error("Error marking notification as read:",e)}},w=async()=>{try{await (0,d.he)(),j(e=>e.map(e=>({...e,read:!0})))}catch(e){console.error("Error marking all notifications as read:",e)}},k=async e=>{if(e)try{await (0,d.fP)(e),j(s=>s.filter(s=>s.id!==e))}catch(e){console.error("Error deleting notification:",e)}},S=async()=>{try{await Promise.resolve().then(t.bind(t,6203)).then(e=>{let{signOut:s}=e;return s(o.j2)}),p.push("/")}catch(e){console.error("Error signing out:",e)}},A=e=>{if(!e)return"";try{return(e.toDate?e.toDate():new Date(e)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(e){return"Invalid date"}},C=e=>{if("follow"===e.type){var s;if(null==(s=e.fromUser)?void 0:s.username)return"/user/".concat(e.fromUser.username);let t=e.message.match(/@([a-zA-Z0-9_]+)/);return t?"/user/".concat(t[1]):"/notifications"}return e.articleSlug?"/articles?slug=".concat(e.articleSlug):"#"};return l?(0,a.jsx)("div",{className:h().container,children:(0,a.jsx)("div",{className:h().loading,children:"Loading notifications..."})}):(0,a.jsxs)("div",{className:h()["three-column-layout"],children:[(0,a.jsx)(f.A,{}),(0,a.jsx)(u.A,{isAuthenticated:e,handleLogout:S,toggleSidebar:()=>{b(!N)},isSidebarCollapsed:N}),(0,a.jsxs)("main",{className:h()["center-column"],children:[(0,a.jsxs)("div",{className:"".concat(h()["glass-container"]," mb-8 p-8"),children:[(0,a.jsx)("div",{className:h()["glass-highlight"]}),(0,a.jsx)("div",{className:h()["glass-content"],children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-stone-800 mb-2 font-serif",children:"Notifications"}),(0,a.jsx)("p",{className:"text-stone-600 text-lg",children:"Stay updated with your latest activities"})]}),g.length>0&&(0,a.jsx)("button",{className:"".concat(h()["glass-button"]," ").concat(h()["glass-button-success"]," flex items-center gap-2 px-6 py-3 font-semibold"),onClick:w,children:"Mark all as read"})]})})]}),0===g.length?(0,a.jsxs)("div",{className:h()["glass-empty-state"],children:[(0,a.jsx)("div",{className:"w-16 h-16 mx-auto mb-6 rounded-full flex items-center justify-center",style:{background:"rgba(156, 163, 175, 0.2)",backdropFilter:"blur(10px)"},children:(0,a.jsx)(m.He,{size:32,color:"#9ca3af"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-stone-800 mb-4 font-serif",children:"No notifications yet"}),(0,a.jsx)("p",{className:"text-stone-600 text-lg",children:"When you receive notifications, they'll appear here."})]}):(0,a.jsx)("div",{className:"space-y-4",children:g.map(e=>(0,a.jsxs)("div",{className:"".concat(h()["glass-card"]," ").concat(e.read?h()["glass-notification-read"]:h()["glass-notification-unread"]," p-6"),children:[(0,a.jsx)("div",{className:h()["glass-card-highlight"]}),!e.read&&(0,a.jsx)("div",{className:"absolute top-4 left-4 w-3 h-3 rounded-full",style:{background:"rgba(59, 130, 246, 0.8)",boxShadow:"0 0 8px rgba(59, 130, 246, 0.4)"}}),(0,a.jsxs)("div",{className:"relative z-10 flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",style:{marginLeft:e.read?"0":"1rem"},children:[(0,a.jsx)("p",{className:"text-stone-800 mb-2 text-base leading-relaxed font-medium",children:e.message}),(0,a.jsx)("p",{className:"text-stone-500 text-sm",children:A(e.createdAt)})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 ml-6",children:[(0,a.jsx)(c(),{href:C(e),className:"".concat(h()["glass-button"]," ").concat(h()["glass-button-primary"]," px-4 py-2 text-sm font-medium"),onClick:()=>v(e),children:"View"}),!e.read&&(0,a.jsx)("button",{className:"".concat(h()["glass-button"]," ").concat(h()["glass-button-success"]," px-4 py-2 text-sm font-medium"),onClick:()=>v(e),children:"Mark as read"}),(0,a.jsx)("button",{className:"".concat(h()["glass-button"]," ").concat(h()["glass-button-danger"]," px-4 py-2 text-sm font-medium"),onClick:()=>e.id&&k(e.id),children:"Delete"})]})]})]},e.id))})]}),(0,a.jsx)("aside",{className:h()["right-sidebar"],children:(0,a.jsxs)("div",{className:"".concat(h()["glass-container"]," mb-6 p-6"),children:[(0,a.jsx)("div",{className:h()["glass-highlight"]}),(0,a.jsxs)("div",{className:h()["glass-content"],children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-stone-800 mb-4 font-serif",children:"Notifications Summary"}),g.length>0?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-stone-600",children:"Unread"}),(0,a.jsx)("span",{className:"text-2xl font-bold text-blue-600",children:g.filter(e=>!e.read).length})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-stone-600",children:"Total"}),(0,a.jsx)("span",{className:"text-2xl font-bold text-stone-600",children:g.length})]})]}):(0,a.jsx)("p",{className:"text-stone-500 text-center",children:"No notifications yet"})]})]})})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[1708,7267,2992,7158,7117,6874,3593,4744,2800,8883,9953,8441,1684,7358],()=>s(5814)),_N_E=e.O()}]);