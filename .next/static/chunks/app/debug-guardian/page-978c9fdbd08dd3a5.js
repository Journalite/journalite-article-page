(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3172,3266],{369:(e,t,a)=>{Promise.resolve().then(a.bind(a,4156))},3172:(e,t,a)=>{"use strict";a.d(t,{guardianService:()=>r});class i{async searchArticles(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;if(!this.apiKey||"YOUR_API_KEY_HERE"===this.apiKey)throw Error("Guardian API key not configured");let r=new URLSearchParams({"api-key":this.apiKey,"show-fields":"headline,standfirst,body,main,thumbnail,byline,trailText,bodyText","show-tags":"contributor,keyword","show-elements":"image,video","page-size":i.toString(),page:a.toString(),"order-by":"newest"});e&&r.append("q",e),t&&r.append("section",t);let s="".concat(this.baseUrl,"/search?").concat(r.toString()),n=await fetch(s);if(!n.ok)throw Error("HTTP error! status: ".concat(n.status));return(await n.json()).response}async getArticleById(e){if(!this.apiKey||"YOUR_API_KEY_HERE"===this.apiKey)throw Error("Guardian API key not configured");let t=new URLSearchParams({"api-key":this.apiKey,"show-fields":"headline,standfirst,body,main,thumbnail,byline,trailText,bodyText","show-tags":"contributor,keyword","show-elements":"image,video"}),a="".concat(this.baseUrl,"/").concat(e,"?").concat(t.toString()),i=await fetch(a);if(!i.ok)throw Error("HTTP error! status: ".concat(i.status));return(await i.json()).response.content}async getSections(){if(!this.apiKey||"YOUR_API_KEY_HERE"===this.apiKey)throw Error("Guardian API key not configured");let e="".concat(this.baseUrl,"/sections?api-key=").concat(this.apiKey),t=await fetch(e);if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));return(await t.json()).response.results}convertToArticleFormat(e){var t,a,i,r,s,n,l,o;let c="";(null==(t=e.fields)?void 0:t.standfirst)&&(c+='<div class="article-standfirst" style="font-size: 1.2em; color: #666; font-weight: 400; line-height: 1.4; margin: 0 0 2em 0;">\n        <strong>'.concat(e.fields.standfirst,"</strong>\n      </div>"));let d=(null==(a=e.fields)?void 0:a.body)||(null==(i=e.fields)?void 0:i.bodyText)||"";if(d&&(c+=d=(d=(d=(d=(d=d.replace(/<img([^>]*?)>/g,(e,t)=>"<img ".concat(t,' style="max-width: 100%; height: auto; margin: 2em auto; display: block; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);" />'))).replace(/<figure([^>]*?)>/g,(e,t)=>"<figure ".concat(t,' style="margin: 2em auto; text-align: center;">'))).replace(/<figcaption([^>]*?)>/g,(e,t)=>"<figcaption ".concat(t,' style="margin-top: 0.5em; font-size: 0.9em; color: #666; font-style: italic; text-align: center;">'))).replace(/<video([^>]*?)>/g,(e,t)=>"<video ".concat(t,' style="max-width: 100%; height: auto; margin: 2em auto; display: block; border-radius: 8px;" controls />'))).replace(/<p>\s*<\/p>/g,"")),!(c.includes("<img")||c.includes("<figure"))&&e.elements&&e.elements.length>0){let t=e.elements.find(e=>"image"===e.type&&e.assets&&e.assets.length>0);if(t){let a=t.assets.find(e=>"image"===e.type);if(a){let t=a.typeData.secureFile||a.file,i=a.typeData.alt||a.typeData.caption||e.webTitle,r=a.typeData.caption||"";c='<figure style="margin: 0 0 2em 0; text-align: center;">\n              <img src="'.concat(t,'" alt="').concat(i,'" style="max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);" />\n              ').concat(r?'<figcaption style="margin-top: 0.5em; font-size: 0.9em; color: #666; font-style: italic;">'.concat(r,"</figcaption>"):"","\n            </figure>")+c}}}(null==(r=e.fields)?void 0:r.main)&&!c.includes("<img")&&!c.includes("<figure")&&(c='<figure style="margin: 0 0 2em 0; text-align: center;">\n              <img src="'.concat(e.fields.main,'" alt="').concat(e.webTitle.replace(/"/g,"&quot;"),'" style="max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);" />\n            </figure>')+c),c+='<div class="original-article-link" style="margin-top: 3em; padding: 1.5em; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-radius: 12px; border-left: 4px solid #0066cc; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">\n      <p style="margin: 0; color: #495057;"><em>\uD83D\uDCF0 <strong>Read the complete article at:</strong> <a href="'.concat(e.webUrl,'" target="_blank" rel="noopener noreferrer" style="color: #0066cc; font-weight: 600; text-decoration: none; border-bottom: 1px solid transparent; transition: border-bottom 0.2s ease;" onmouseover="this.style.borderBottom=\'1px solid #0066cc\'" onmouseout="this.style.borderBottom=\'1px solid transparent\'">The Guardian</a></em></p>\n    </div>');let h=(null==(s=e.fields)?void 0:s.byline)||(null==(n=e.tags.find(e=>"contributor"===e.type))?void 0:n.webTitle)||"The Guardian",m=Math.ceil(((null==(l=e.fields)?void 0:l.body)?e.fields.body.replace(/<[^>]*>/g,"").split(/\s+/).length:300)/200),u=[e.sectionName,e.pillarName,...e.tags.filter(e=>"keyword"===e.type).slice(0,3).map(e=>e.webTitle)].filter(Boolean);return{title:(null==(o=e.fields)?void 0:o.headline)||e.webTitle,authorName:h,createdAt:(e=>{try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",timeZone:"UTC"})}catch(t){return console.error("Error formatting date:",t),e}})(e.webPublicationDate),readTime:m,tags:u,authorId:"guardian-api",hasReflectionRoom:!1,html:c}}isConfigured(){return!!(this.apiKey&&"YOUR_API_KEY_HERE"!==this.apiKey)}constructor(){this.baseUrl="https://content.guardianapis.com",this.apiKey="c928b68e-9227-4e28-a734-63f37cbd301b",this.apiKey&&"YOUR_API_KEY_HERE"!==this.apiKey||console.warn("Guardian API key not configured. Please set NEXT_PUBLIC_GUARDIAN_API_KEY in your environment variables.")}}let r=new i},4156:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var i=a(5155),r=a(2115),s=a(3172);function n(){var e,t,a;let[n,l]=(0,r.useState)(null),[o,c]=(0,r.useState)(!1),[d,h]=(0,r.useState)(""),m=async()=>{try{c(!0),h("");let e=await s.guardianService.searchArticles("","sport",1,1);e.results.length>0?l(e.results[0]):h("No articles found")}catch(e){h(e instanceof Error?e.message:"Unknown error")}finally{c(!1)}};return((0,r.useEffect)(()=>{s.guardianService.isConfigured()&&m()},[]),s.guardianService.isConfigured())?(0,i.jsxs)("div",{className:"p-8 max-w-4xl mx-auto",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Guardian API Debug"}),(0,i.jsx)("button",{onClick:m,className:"mb-6 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:o,children:o?"Loading...":"Fetch Sample Article"}),d&&(0,i.jsxs)("div",{className:"mb-6 p-4 bg-red-100 text-red-800 rounded",children:["Error: ",d]}),n&&(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"bg-gray-100 p-4 rounded",children:[(0,i.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Article Title:"}),(0,i.jsx)("p",{children:n.webTitle})]}),(0,i.jsxs)("div",{className:"bg-gray-100 p-4 rounded",children:[(0,i.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Available Fields:"}),(0,i.jsx)("pre",{className:"text-sm overflow-auto",children:JSON.stringify(Object.keys(n.fields||{}),null,2)})]}),(0,i.jsxs)("div",{className:"bg-gray-100 p-4 rounded",children:[(0,i.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Body Content (first 500 chars):"}),(0,i.jsx)("pre",{className:"text-sm overflow-auto whitespace-pre-wrap",children:(null==(e=n.fields)?void 0:e.body)?n.fields.body.substring(0,500)+"...":"No body content"})]}),(0,i.jsxs)("div",{className:"bg-gray-100 p-4 rounded",children:[(0,i.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Main Image:"}),(0,i.jsx)("p",{children:(null==(t=n.fields)?void 0:t.main)||"No main image"}),(null==(a=n.fields)?void 0:a.main)&&(0,i.jsx)("img",{src:n.fields.main,alt:"Main",className:"mt-2 max-w-xs"})]}),(0,i.jsxs)("div",{className:"bg-gray-100 p-4 rounded",children:[(0,i.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Elements:"}),(0,i.jsx)("pre",{className:"text-sm overflow-auto",children:JSON.stringify(n.elements||[],null,2)})]}),(0,i.jsxs)("div",{className:"bg-gray-100 p-4 rounded",children:[(0,i.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Full Article Object:"}),(0,i.jsx)("pre",{className:"text-xs overflow-auto max-h-96",children:JSON.stringify(n,null,2)})]}),(0,i.jsxs)("div",{className:"bg-blue-100 p-4 rounded",children:[(0,i.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Rendered HTML Preview:"}),(0,i.jsx)("div",{className:"border p-4 bg-white",children:(0,i.jsx)("div",{dangerouslySetInnerHTML:{__html:s.guardianService.convertToArticleFormat(n).html}})})]})]})]}):(0,i.jsxs)("div",{className:"p-8",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Guardian API Debug"}),(0,i.jsx)("p",{className:"text-red-600",children:"Guardian API not configured. Please add your API key."})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[8096,7358],()=>t(369)),_N_E=e.O()}]);