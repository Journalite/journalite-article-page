(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1601],{2615:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var r=a(5155),o=a(2115),s=a(2650),n=a(4362),i=a(3201),c=a(6203);let l=()=>{let[e,t]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{let e=(0,c.onAuthStateChanged)(i.j2,e=>{t(!!e)});return()=>e()},[]),(0,r.jsxs)("div",{children:[(0,r.jsx)(s.A,{}),(0,r.jsx)(n.A,{isAuthenticated:e})]})}},3201:(e,t,a)=>{"use strict";a.d(t,{db:()=>l,j2:()=>c});var r=a(3915),o=a(6864),s=a(6203),n=a(5317);let i=(0,r.Wp)({apiKey:"AIzaSyCFpybhLt43iKUw6lNahU1n2zjYv0BXmf4",authDomain:"journalitev1.firebaseapp.com",projectId:"journalitev1",storageBucket:"journalitev1.firebasestorage.app",messagingSenderId:"897263211529",appId:"1:897263211529:web:bae4a00910a2236d6d54d8",measurementId:"G-ZYT8PRMT0D"});try{(0,o.P5)(i)}catch(e){}let c=(0,s.getAuth)(i),l=(0,n.getFirestore)(i);window.location.origin},4362:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var r=a(5155);a(2115);var o=a(6874),s=a.n(o),n=a(5695),i=a(8163),c=a.n(i);let l=e=>{let{isAuthenticated:t}=e,a=(0,n.usePathname)();return(0,r.jsx)("nav",{className:c()["bottom-navigation"],children:t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s(),{href:"/",className:"".concat(c()["bottom-nav-item"]," ").concat("/"===a?c().active:""),children:[(0,r.jsx)("div",{className:c()["bottom-nav-icon"],style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='".concat("/"===a?"%232563EB":"%236B7280","'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m3 12 2-2m0 0 7-7 7 7M5 10v10a1 1 0 0 0 1 1h3m10-11 2 2m-2-2v10a1 1 0 0 1-1 1h-3m-6 0a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1m-6 0h6'/%3E%3C/svg%3E\")")}}),(0,r.jsx)("span",{className:c()["bottom-nav-text"],children:"Home"})]}),(0,r.jsxs)(s(),{href:"/create-article",className:"".concat(c()["bottom-nav-item"]," ").concat("/create-article"===a?c().active:""),children:[(0,r.jsx)("div",{className:c()["bottom-nav-icon"],style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='".concat("/create-article"===a?"%232563EB":"%236B7280","'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125'/%3E%3C/svg%3E\")")}}),(0,r.jsx)("span",{className:c()["bottom-nav-text"],children:"Write"})]}),(0,r.jsxs)(s(),{href:"/messages",className:"".concat(c()["bottom-nav-item"]," ").concat("/messages"===a?c().active:""),children:[(0,r.jsx)("div",{className:c()["bottom-nav-icon"],style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='".concat("/messages"===a?"%232563EB":"%236B7280","'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z'/%3E%3C/svg%3E\")")}}),(0,r.jsx)("span",{className:c()["bottom-nav-text"],children:"Messages"})]}),(0,r.jsxs)(s(),{href:"/explore",className:"".concat(c()["bottom-nav-item"]," ").concat("/explore"===a?c().active:""),children:[(0,r.jsx)("div",{className:c()["bottom-nav-icon"],style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='".concat("/explore"===a?"%232563EB":"%236B7280","'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z'/%3E%3C/svg%3E\")")}}),(0,r.jsx)("span",{className:c()["bottom-nav-text"],children:"Explore"})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s(),{href:"/",className:"".concat(c()["bottom-nav-item"]," ").concat("/"===a?c().active:""),children:[(0,r.jsx)("div",{className:c()["bottom-nav-icon"],style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='".concat("/"===a?"%232563EB":"%236B7280","'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m3 12 2-2m0 0 7-7 7 7M5 10v10a1 1 0 0 0 1 1h3m10-11 2 2m-2-2v10a1 1 0 0 1-1 1h-3m-6 0a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1m-6 0h6'/%3E%3C/svg%3E\")")}}),(0,r.jsx)("span",{className:c()["bottom-nav-text"],children:"Home"})]}),(0,r.jsxs)(s(),{href:"/explore",className:"".concat(c()["bottom-nav-item"]," ").concat("/explore"===a?c().active:""),children:[(0,r.jsx)("div",{className:c()["bottom-nav-icon"],style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='".concat("/explore"===a?"%232563EB":"%236B7280","'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z'/%3E%3C/svg%3E\")")}}),(0,r.jsx)("span",{className:c()["bottom-nav-text"],children:"Explore"})]}),(0,r.jsxs)(s(),{href:"/register",className:"".concat(c()["bottom-nav-item"]," ").concat("/register"===a?c().active:""),children:[(0,r.jsx)("div",{className:c()["bottom-nav-icon"],style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='".concat("/register"===a?"%232563EB":"%236B7280","'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z'/%3E%3C/svg%3E\")")}}),(0,r.jsx)("span",{className:c()["bottom-nav-text"],children:"Sign Up"})]}),(0,r.jsxs)(s(),{href:"/login",className:"".concat(c()["bottom-nav-item"]," ").concat("/login"===a?c().active:""),children:[(0,r.jsx)("div",{className:c()["bottom-nav-icon"],style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='".concat("/login"===a?"%232563EB":"%236B7280","'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15M12 9l-3 3m0 0 3 3m-3-3h12.75'/%3E%3C/svg%3E\")")}}),(0,r.jsx)("span",{className:c()["bottom-nav-text"],children:"Login"})]})]})})}},5695:(e,t,a)=>{"use strict";var r=a(8999);a.o(r,"redirect")&&a.d(t,{redirect:function(){return r.redirect}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},9538:(e,t,a)=>{Promise.resolve().then(a.bind(a,2615))},9995:(e,t,a)=>{"use strict";a.d(t,{Hs:()=>d,N9:()=>s,Ss:()=>n,bA:()=>i,fP:()=>l,he:()=>c});var r=a(5317),o=a(3201);async function s(e,t,a,s){try{if(e===a)return null;let n={userId:e,type:"follow",read:!1,sourceId:a,sourceType:"user",message:"".concat(t," (@").concat(s,") started following you"),fromUser:{id:a,name:t,username:s},createdAt:r.Timestamp.now()};return{id:(await (0,r.addDoc)((0,r.collection)(o.db,"notifications"),n)).id,...n}}catch(e){return console.error("Error creating follow notification:",e),null}}async function n(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{let t,a=o.j2.currentUser;if(!a)throw Error("User not authenticated");let s=(0,r.collection)(o.db,"notifications");t=e?(0,r.query)(s,(0,r.where)("userId","==",a.uid),(0,r.where)("read","==",!1),(0,r.orderBy)("createdAt","desc"),(0,r.limit)(100)):(0,r.query)(s,(0,r.where)("userId","==",a.uid),(0,r.orderBy)("createdAt","desc"),(0,r.limit)(100));let n=await (0,r.getDocs)(t),i=[];return n.forEach(e=>{i.push({id:e.id,...e.data()})}),i}catch(e){throw console.error("Error fetching notifications:",e),e}}async function i(e){try{let t=o.j2.currentUser;if(!t)throw Error("User not authenticated");let a=(0,r.doc)(o.db,"notifications",e),s=await (0,r.getDoc)(a);if(!s.exists())throw Error("Notification not found");if(s.data().userId!==t.uid)throw Error("Unauthorized access to notification");return await (0,r.updateDoc)(a,{read:!0}),{success:!0}}catch(e){throw console.error("Error marking notification as read:",e),e}}async function c(){try{let e=o.j2.currentUser;if(!e)throw Error("User not authenticated");let t=(0,r.collection)(o.db,"notifications"),a=(0,r.query)(t,(0,r.where)("userId","==",e.uid),(0,r.where)("read","==",!1)),s=await (0,r.getDocs)(a),n=s.docs.map(e=>(0,r.updateDoc)(e.ref,{read:!0}));return await Promise.all(n),{success:!0,count:s.size}}catch(e){throw console.error("Error marking all notifications as read:",e),e}}async function l(e){try{let t=o.j2.currentUser;if(!t)throw Error("User not authenticated");let a=(0,r.doc)(o.db,"notifications",e),s=await (0,r.getDoc)(a);if(!s.exists())throw Error("Notification not found");if(s.data().userId!==t.uid)throw Error("Unauthorized access to notification");return await (0,r.deleteDoc)(a),{success:!0}}catch(e){throw console.error("Error deleting notification:",e),e}}async function d(){try{let e=o.j2.currentUser;if(!e)return 0;let t=(0,r.collection)(o.db,"notifications"),a=(0,r.query)(t,(0,r.where)("userId","==",e.uid),(0,r.where)("read","==",!1));return(await (0,r.getDocs)(a)).size}catch(e){return console.error("Error counting unread notifications:",e),0}}}},e=>{var t=t=>e(e.s=t);e.O(0,[5786,1708,2992,7158,5004,7117,6874,4366,2800,9122,2650,8441,1684,7358],()=>t(9538)),_N_E=e.O()}]);