(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[653],{5012:(e,s,a)=>{Promise.resolve().then(a.bind(a,8352))},8352:(e,s,a)=>{"use strict";a.d(s,{default:()=>x});var t=a(5155),l=a(6121),r=a(6874),n=a.n(r),c=a(5112),i=a(3201),o=a(4744),d=a(8163),m=a.n(d),u=a(9299),h=a(6201);function x(e){let{username:s}=e,[a,r]=(0,l.J0)(null),[d,x]=(0,l.J0)([]),[f,g]=(0,l.J0)(!0),[w,N]=(0,l.J0)(null);return((0,l.vJ)(()=>{let e=async()=>{g(!0);try{let e=(0,c.collection)(i.db,"users"),a=(0,c.query)(e,(0,c.where)("username","==",s)),t=await (0,c.getDocs)(a);if(t.empty){N("User @".concat(s," not found")),g(!1);return}let l=t.docs[0].data();r(l);let n=await (0,o.mH)(l.uid,100);x(n)}catch(e){console.error("Error fetching following:",e),N("Failed to load following")}finally{g(!1)}};s&&e()},[s]),f)?(0,t.jsx)("div",{className:m().container,children:(0,t.jsxs)("div",{className:m().loading,children:[(0,t.jsx)("div",{className:m().loadingSpinner}),(0,t.jsx)("p",{children:"Loading following..."})]})}):w?(0,t.jsx)("div",{className:m().container,children:(0,t.jsxs)("div",{className:m().errorAlert,children:[(0,t.jsx)("p",{children:w}),(0,t.jsx)(n(),{href:"/",className:m().backLink,children:"Back to home"})]})}):a?(0,t.jsxs)("div",{className:m()["three-column-layout"],children:[(0,t.jsx)(h.A,{isAuthenticated:!1,handleLogout:()=>{},toggleSidebar:()=>{},isSidebarCollapsed:!1}),(0,t.jsxs)("main",{className:m()["center-column"],children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)(n(),{href:"/user/".concat(s),className:m().backLink,children:["← Back to ",a.firstName,"'s profile"]}),(0,t.jsxs)("h1",{className:m().sectionHeading,children:["Accounts ",a.firstName," follows"]}),(0,t.jsxs)("p",{className:"text-gray-500 mb-6",children:[d.length," ",1===d.length?"account":"accounts"]})]}),0===d.length?(0,t.jsx)("div",{className:m().emptyState,children:(0,t.jsx)("p",{children:"Not following anyone yet."})}):(0,t.jsx)("div",{className:"space-y-6",children:d.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 sm:p-6 bg-white rounded-lg shadow-sm border border-gray-100 max-w-3xl",children:[(0,t.jsxs)(n(),{href:"/user/".concat(e.username),className:"flex items-center group flex-1 min-w-0 mr-2 sm:mr-4 overflow-hidden",children:[(0,t.jsxs)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 font-medium flex-shrink-0",children:[e.firstName.charAt(0),e.lastName.charAt(0)]}),(0,t.jsxs)("div",{className:"ml-2 sm:ml-4 overflow-hidden max-w-[calc(100%-60px)]",children:[(0,t.jsxs)("div",{className:"font-medium text-gray-900 group-hover:underline truncate",children:[e.firstName," ",e.lastName]}),(0,t.jsxs)("div",{className:"text-sm text-gray-500 truncate",children:["@",e.username]}),e.bio&&(0,t.jsx)("div",{className:"mt-1 text-sm text-gray-600 line-clamp-1",children:e.bio})]})]}),(0,t.jsx)(u.A,{targetUserId:e.uid,targetUsername:e.username,className:"flex-shrink-0 min-w-[80px] px-3 py-1.5 sm:px-4 sm:py-2 text-sm"})]},e.uid))})]}),(0,t.jsxs)("aside",{className:m()["right-sidebar"],children:[(0,t.jsxs)("h2",{className:m()["sidebar-heading"],children:["About ",a.firstName]}),(0,t.jsxs)("div",{className:m().sidebarSection,children:[a.bio&&(0,t.jsx)("p",{className:"mb-4",children:a.bio}),(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsxs)(n(),{href:"/user/".concat(s,"/followers"),className:"text-gray-600 hover:text-blue-600",children:[a.followersCount||0," Followers"]}),(0,t.jsxs)(n(),{href:"/user/".concat(s,"/following"),className:"text-blue-600 font-medium",children:[a.followingCount||0," Following"]})]})]})]})]}):(0,t.jsx)("div",{className:m().container,children:(0,t.jsxs)("div",{className:m().errorAlert,children:[(0,t.jsx)("p",{children:"User not found"}),(0,t.jsx)(n(),{href:"/",className:m().backLink,children:"Back to home"})]})})}},9299:(e,s,a)=>{"use strict";a.d(s,{A:()=>o});var t=a(5155),l=a(2115),r=a(5695),n=a(6597),c=a(3201),i=a(4744);let o=e=>{let{targetUserId:s,targetUsername:a,className:o=""}=e,[d,m]=(0,l.useState)(null),[u,h]=(0,l.useState)(!1),[x,f]=(0,l.useState)(!0),[g,w]=(0,l.useState)(!1),[N,j]=(0,l.useState)(!1),p=(0,r.useRouter)();if((0,l.useEffect)(()=>{let e=(0,n.onAuthStateChanged)(c.j2,async e=>{if(e){m(e.uid);try{let a=await (0,i.E$)(e.uid,s);h(a)}catch(e){console.error("Error checking follow status:",e)}finally{f(!1)}}else m(null),f(!1)});return()=>e()},[s]),(0,l.useEffect)(()=>{let e;return N&&(e=setTimeout(()=>{j(!1)},3e3)),()=>{e&&clearTimeout(e)}},[N]),d===s)return null;let b=async()=>{if(!d)return void p.push("/login");w(!0);try{u?(await (0,i.Qt)(d,s),h(!1)):(await (0,i.pV)(d,s),h(!0),j(!0))}catch(e){console.error("Error with follow/unfollow action:",e)}finally{w(!1)}},y="px-4 py-2 rounded-full text-sm font-medium transition-colors",v="".concat(u?"".concat(y," bg-white text-gray-800 border border-gray-300 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"):"".concat(y," bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2")," ").concat(o);return x?(0,t.jsx)("button",{className:"".concat(y," bg-gray-200 text-gray-400 cursor-not-allowed ").concat(o),disabled:!0,children:"Loading..."}):(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("button",{onClick:b,disabled:g,className:v,"aria-label":u?"Unfollow ".concat(a):"Follow ".concat(a),children:g?(0,t.jsxs)("span",{className:"flex items-center justify-center",children:[(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),u?"Unfollowing...":"Following..."]}):(0,t.jsx)("span",{children:u?"Following":"Follow"})}),N&&(0,t.jsxs)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 bg-gray-800 text-white text-xs rounded py-1 px-2 pointer-events-none opacity-90 whitespace-nowrap z-10",children:[(0,t.jsx)("div",{className:"absolute -top-1 left-1/2 transform -translate-x-1/2 w-2 h-2 rotate-45 bg-gray-800"}),"Notification sent to ",a]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[1708,5598,8096,4744,6677,9953,7358],()=>s(5012)),_N_E=e.O()}]);