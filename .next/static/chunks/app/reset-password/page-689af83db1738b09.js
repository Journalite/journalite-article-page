(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4700],{227:(e,s,t)=>{Promise.resolve().then(t.bind(t,4622))},3201:(e,s,t)=>{"use strict";t.d(s,{db:()=>o,j2:()=>c});var r=t(3915),a=t(6864),i=t(6203),l=t(5317);let n=(0,r.Wp)({apiKey:"AIzaSyCFpybhLt43iKUw6lNahU1n2zjYv0BXmf4",authDomain:"journalitev1.firebaseapp.com",projectId:"journalitev1",storageBucket:"journalitev1.firebasestorage.app",messagingSenderId:"897263211529",appId:"1:897263211529:web:bae4a00910a2236d6d54d8",measurementId:"G-ZYT8PRMT0D"});try{(0,a.P5)(n)}catch(e){}let c=(0,i.getAuth)(n),o=(0,l.getFirestore)(n);window.location.origin},4622:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var r=t(5155),a=t(2115),i=t(6874),l=t.n(i),n=t(5695),c=t(6203),o=t(3201);function d(){let[e,s]=(0,a.useState)(""),[t,i]=(0,a.useState)(""),[d,x]=(0,a.useState)(!1),[h,u]=(0,a.useState)(!0),[f,m]=(0,a.useState)(""),[w,j]=(0,a.useState)(!1),[p,g]=(0,a.useState)(""),[y,b]=(0,a.useState)(""),[v,P]=(0,a.useState)({}),[N,k]=(0,a.useState)({});(0,n.useRouter)();let S=(0,n.useSearchParams)();(0,a.useEffect)(()=>{let e=null==S?void 0:S.get("oobCode");if(null==S||S.get("mode"),!e){u(!1),m("Invalid password reset link. Please request a new one.");return}(async()=>{try{b(e);let s=await (0,c.verifyPasswordResetCode)(o.j2,e);g(s),u(!1)}catch(e){console.error("Error verifying reset code:",e),u(!1),m("This password reset link has expired or is invalid. Please request a new one.")}})()},[S]);let R=e=>{let{name:s,validity:t}=e.target;P({...v,[s]:!0}),k({...N,[s]:""}),t.valueMissing&&k({...N,[s]:"newPassword"===s?"Please enter a new password":"Please confirm your password"})},C=async s=>{s.preventDefault();let r=Array.from(s.currentTarget.elements),a={},i={},l=!0;if(r.forEach(e=>{e.name&&e.required&&(a[e.name]=!0,e.value.trim()||(i[e.name]="newPassword"===e.name?"Please enter a new password":"Please confirm your password",l=!1))}),e!==t&&(i.confirmPassword="Passwords do not match",l=!1),e&&e.length<6&&(i.newPassword="Password must be at least 6 characters",l=!1),P({...v,...a}),k({...N,...i}),l){x(!0),m("");try{await (0,c.confirmPasswordReset)(o.j2,y,e),j(!0)}catch(e){console.error("Error resetting password:",e),m("Failed to reset password. The link may have expired. Please try requesting a new link.")}finally{x(!1)}}},E=e=>{let s="w-full px-5 py-3.5 bg-[#f8f5ec] border border-[#e8e1d1] rounded-md focus:outline-none focus:ring-1 focus:ring-slate-500";return v[e]&&N[e]?"".concat(s," border-red-300 bg-red-50"):s};return(0,r.jsxs)("div",{className:"min-h-screen bg-[#f5efe0] flex",children:[(0,r.jsx)("div",{className:"w-full md:w-1/2 flex flex-col justify-center",children:(0,r.jsxs)("div",{className:"w-full max-w-sm mx-auto px-6 md:px-0 md:ml-20 xl:ml-32",children:[(0,r.jsxs)("div",{className:"mb-12",children:[(0,r.jsx)("h1",{className:"text-5xl md:text-6xl font-serif font-normal text-slate-900",children:"Journalite"}),(0,r.jsxs)("div",{className:"mt-4 text-lg md:text-xl text-slate-800 italic",children:[(0,r.jsx)("p",{children:"Reset your password to"}),(0,r.jsx)("p",{children:"return to your Thoughtspace."})]})]}),h&&(0,r.jsx)("div",{className:"text-slate-800",children:"Verifying your reset link..."}),f&&(0,r.jsx)("div",{className:"mb-6 p-3 bg-red-50 text-red-700 text-sm rounded-md",children:f}),w?(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsxs)("div",{className:"mb-8 text-slate-800",children:[(0,r.jsx)("p",{className:"mb-2 font-medium",children:"Password successfully reset!"}),(0,r.jsx)("p",{children:"Your password has been updated. You can now sign in with your new password."})]}),(0,r.jsxs)(l(),{href:"/login",className:"inline-flex items-center px-5 py-3.5 bg-[#1a1a19] text-white rounded-md hover:bg-[#2a2a29] focus:outline-none focus:ring-2 focus:ring-slate-500",children:[(0,r.jsx)("span",{className:"mr-2",children:"→"}),(0,r.jsx)("span",{children:"Go to login"})]})]}):!h&&!f&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("form",{onSubmit:C,className:"space-y-4 w-full",noValidate:!0,children:[p&&(0,r.jsxs)("div",{className:"mb-4 text-slate-800",children:["Reset password for: ",(0,r.jsx)("span",{className:"font-medium",children:p})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{id:"newPassword",name:"newPassword",type:"password",className:E("newPassword"),placeholder:"New password",value:e,onChange:e=>s(e.target.value),onBlur:R,required:!0}),v.newPassword&&N.newPassword&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-500",children:N.newPassword})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",className:E("confirmPassword"),placeholder:"Confirm password",value:t,onChange:e=>i(e.target.value),onBlur:R,required:!0}),v.confirmPassword&&N.confirmPassword&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-500",children:N.confirmPassword})]}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{type:"submit",className:"w-full flex items-center justify-center px-4 py-3.5 bg-[#1a1a19] text-white rounded-md hover:bg-[#2a2a29] focus:outline-none focus:ring-2 focus:ring-slate-500 focus:ring-offset-2",disabled:d,children:d?"Resetting password...":(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"mr-2",children:"→"}),(0,r.jsx)("span",{children:"Reset password"})]})})}),(0,r.jsx)("div",{className:"flex justify-center pt-2 text-sm text-slate-700",children:(0,r.jsx)(l(),{href:"/login",className:"hover:text-slate-900",children:"Return to login"})})]})}),(0,r.jsx)("div",{className:"mt-20 mb-8 text-slate-700 italic",children:(0,r.jsx)("p",{children:"Words are the threads of thought."})})]})}),(0,r.jsxs)("div",{className:"hidden md:block w-1/2 relative bg-gradient-to-br from-amber-50 to-stone-100",children:[(0,r.jsxs)("svg",{className:"absolute inset-0 w-full h-full object-cover",viewBox:"0 0 800 600",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid slice",children:[(0,r.jsxs)("defs",{children:[(0,r.jsxs)("linearGradient",{id:"bgGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,r.jsx)("stop",{offset:"0%",stopColor:"#fefbf3"}),(0,r.jsx)("stop",{offset:"100%",stopColor:"#f5f5f0"})]}),(0,r.jsx)("pattern",{id:"gridPattern",x:"0",y:"0",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:(0,r.jsx)("path",{d:"M 40 0 L 0 0 0 40",fill:"none",stroke:"#e7e5e4",strokeWidth:"1",opacity:"0.3"})})]}),(0,r.jsx)("rect",{width:"800",height:"600",fill:"url(#bgGradient)"}),(0,r.jsx)("rect",{width:"800",height:"600",fill:"url(#gridPattern)"}),(0,r.jsx)("circle",{cx:"150",cy:"120",r:"60",fill:"#f59e0b",opacity:"0.1"}),(0,r.jsx)("circle",{cx:"650",cy:"480",r:"80",fill:"#d97706",opacity:"0.08"}),(0,r.jsxs)("g",{opacity:"0.15",children:[(0,r.jsx)("rect",{x:"200",y:"200",width:"180",height:"6",rx:"3",fill:"#92400e"}),(0,r.jsx)("rect",{x:"200",y:"220",width:"120",height:"4",rx:"2",fill:"#92400e"}),(0,r.jsx)("rect",{x:"200",y:"235",width:"160",height:"4",rx:"2",fill:"#92400e"}),(0,r.jsx)("rect",{x:"200",y:"250",width:"90",height:"4",rx:"2",fill:"#92400e"})]}),(0,r.jsxs)("g",{opacity:"0.12",children:[(0,r.jsx)("rect",{x:"450",y:"150",width:"200",height:"6",rx:"3",fill:"#78716c"}),(0,r.jsx)("rect",{x:"450",y:"170",width:"140",height:"4",rx:"2",fill:"#78716c"}),(0,r.jsx)("rect",{x:"450",y:"185",width:"180",height:"4",rx:"2",fill:"#78716c"}),(0,r.jsx)("rect",{x:"450",y:"200",width:"110",height:"4",rx:"2",fill:"#78716c"})]}),(0,r.jsxs)("g",{transform:"translate(300, 350)",opacity:"0.1",children:[(0,r.jsx)("path",{d:"M0 0 Q10 -5 20 0 Q15 10 10 20 Q5 15 0 10 Z",fill:"#a16207"}),(0,r.jsx)("path",{d:"M20 0 L80 -40 Q85 -45 90 -40 L85 -35 L25 5 Z",fill:"#d97706"}),(0,r.jsx)("line",{x1:"25",y1:"5",x2:"40",y2:"-15",stroke:"#92400e",strokeWidth:"1"}),(0,r.jsx)("line",{x1:"35",y1:"-5",x2:"50",y2:"-25",stroke:"#92400e",strokeWidth:"1"}),(0,r.jsx)("line",{x1:"45",y1:"-15",x2:"60",y2:"-35",stroke:"#92400e",strokeWidth:"1"})]}),(0,r.jsx)("circle",{cx:"100",cy:"300",r:"3",fill:"#d97706",opacity:"0.2"}),(0,r.jsx)("circle",{cx:"120",cy:"320",r:"2",fill:"#f59e0b",opacity:"0.3"}),(0,r.jsx)("circle",{cx:"700",cy:"100",r:"4",fill:"#92400e",opacity:"0.15"}),(0,r.jsx)("circle",{cx:"720",cy:"130",r:"2",fill:"#a16207",opacity:"0.25"}),(0,r.jsxs)("g",{transform:"translate(500, 350)",opacity:"0.08",children:[(0,r.jsx)("rect",{x:"0",y:"0",width:"80",height:"100",rx:"4",fill:"#78716c"}),(0,r.jsx)("rect",{x:"10",y:"10",width:"60",height:"80",rx:"2",fill:"#a8a29e"}),(0,r.jsx)("rect",{x:"15",y:"20",width:"50",height:"3",rx:"1.5",fill:"#78716c"}),(0,r.jsx)("rect",{x:"15",y:"30",width:"35",height:"2",rx:"1",fill:"#78716c"}),(0,r.jsx)("rect",{x:"15",y:"37",width:"40",height:"2",rx:"1",fill:"#78716c"})]})]}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-50/20 to-stone-100/40"})]})]})}function x(){return(0,r.jsx)(a.Suspense,{fallback:(0,r.jsx)("div",{className:"min-h-screen bg-[#f5efe0] flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-3xl font-serif font-normal text-slate-900 mb-4",children:"Journalite"}),(0,r.jsx)("p",{className:"text-slate-700",children:"Loading reset password page..."})]})}),children:(0,r.jsx)(d,{})})}},5695:(e,s,t)=>{"use strict";var r=t(8999);t.o(r,"usePathname")&&t.d(s,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})}},e=>{var s=s=>e(e.s=s);e.O(0,[2992,7158,7117,6874,8441,1684,7358],()=>s(227)),_N_E=e.O()}]);