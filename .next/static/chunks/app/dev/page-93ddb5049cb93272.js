(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9002],{3201:(e,n,t)=>{"use strict";t.d(n,{db:()=>l,j2:()=>c});var r=t(3915),a=t(6864),o=t(6203),s=t(5317);let i=(0,r.Wp)({apiKey:"AIzaSyCFpybhLt43iKUw6lNahU1n2zjYv0BXmf4",authDomain:"journalitev1.firebaseapp.com",projectId:"journalitev1",storageBucket:"journalitev1.firebasestorage.app",messagingSenderId:"897263211529",appId:"1:897263211529:web:bae4a00910a2236d6d54d8",measurementId:"G-ZYT8PRMT0D"});try{(0,a.P5)(i)}catch(e){}let c=(0,o.xI)(i),l=(0,s.aU)(i);window.location.origin},5695:(e,n,t)=>{"use strict";var r=t(8999);t.o(r,"useRouter")&&t.d(n,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(n,{useSearchParams:function(){return r.useSearchParams}})},8163:e=>{e.exports={"article-page":"home_article-page__CJrzD","three-column-layout":"home_three-column-layout__x41EQ","left-sidebar":"home_left-sidebar__MaSov",collapsed:"home_collapsed__2_VdN","sidebar-header":"home_sidebar-header__4tIx3",logo:"home_logo__fwoF8","toggle-button":"home_toggle-button__sVP2W","vertical-nav":"home_vertical-nav__Cj0En","nav-home":"home_nav-home__X8XEK","nav-icon":"home_nav-icon__yM4nn","nav-thoughts":"home_nav-thoughts__0rfq1","nav-explore":"home_nav-explore__bcQBn","nav-profile":"home_nav-profile__WAAem","nav-settings":"home_nav-settings__0w_SC","nav-logout":"home_nav-logout__MCaXq","nav-login":"home_nav-login__1lQUW","nav-signup":"home_nav-signup__8EtSK","nav-learn":"home_nav-learn__M1FC_","nav-plans":"home_nav-plans__c9i07","nav-link":"home_nav-link__6kEPW","nav-text":"home_nav-text__B7jdN",active:"home_active__S0jaV","sidebar-footer":"home_sidebar-footer__Fj8FR","sidebar-collapse-button":"home_sidebar-collapse-button__W3ZL0","center-column":"home_center-column__eaxY9",expanded:"home_expanded__mJRm4",loading:"home_loading__D6__B","prompt-banner":"home_prompt-banner__xFQFU","prompt-icon":"home_prompt-icon__9eWo_","prompt-text":"home_prompt-text__P3NSJ","prompt-button":"home_prompt-button__z8a6r","featured-card":"home_featured-card__r3SXe","featured-content":"home_featured-content__gbOMz","featured-image":"home_featured-image__3DBbZ","cover-image":"home_cover-image___ZInI","featured-label":"home_featured-label__z2IzP","featured-title":"home_featured-title__qNCn0","featured-meta":"home_featured-meta__Lq6uD","featured-excerpt":"home_featured-excerpt__dhAPX","read-link":"home_read-link___6ZMN","article-grid":"home_article-grid__mC5EI","article-card":"home_article-card__fzb4w","article-title":"home_article-title__toAvL","article-meta":"home_article-meta__9UhXG","article-excerpt":"home_article-excerpt__kuCuZ","article-tags":"home_article-tags__VxN88",tag:"home_tag__LEtq4","reaction-bar":"home_reaction-bar__Y0gsv","reaction-button":"home_reaction-button__KLD0h","reaction-icon":"home_reaction-icon__vhB0y","right-sidebar":"home_right-sidebar__e_5Hr","sidebar-heading":"home_sidebar-heading__lega4","tag-list":"home_tag-list__fgeEi","trending-tag":"home_trending-tag__0awB8","write-button":"home_write-button__Gowtg","edit-button":"home_edit-button__RsQLX","quote-card":"home_quote-card__LAcHm","quote-tag":"home_quote-tag__AukSw","article-container":"home_article-container__RCmcS","article-header":"home_article-header__mdTUd","article-content":"home_article-content__HUOVu","article-paragraph":"home_article-paragraph__6t7oy","article-cover-image":"home_article-cover-image__KDspQ",header:"home_header__PUC5f",hero:"home_hero__3iLRs","hero-title":"home_hero-title__tuN3q","hero-subtitle":"home_hero-subtitle__cyiJZ","cta-button":"home_cta-button__X8xB1","main-grid":"home_main-grid__qFsbA","section-title":"home_section-title__wEK3N","article-tag":"home_article-tag__m6NuJ","author-info":"home_author-info__Xw67P","author-avatar":"home_author-avatar__kBH_g","author-name":"home_author-name__vEgN7",topics:"home_topics__lPwTP","topic-tag":"home_topic-tag__LL122","trending-list":"home_trending-list__YinkY",writers:"home_writers__2u4IP","writer-item":"home_writer-item__1jEW3","writer-info":"home_writer-info__OG3R7","writer-avatar":"home_writer-avatar__b69xH","writer-name":"home_writer-name__McEqt","follow-button":"home_follow-button__UX_LS",features:"home_features__Uc1bS","feature-title":"home_feature-title__9pzGT","feature-desc":"home_feature-desc__jOby5",footer:"home_footer__1HL_E","menu-overlay":"home_menu-overlay__S__PE",fadeIn:"home_fadeIn__uLm0f",articleFormContainer:"home_articleFormContainer__DSMnb",articleFormHeader:"home_articleFormHeader__yeH26",articleFormTitle:"home_articleFormTitle__B11fv",articleFormSubtitle:"home_articleFormSubtitle__XZLCa",articleForm:"home_articleForm__qtKbt",formGroup:"home_formGroup__dX_8o",formLabel:"home_formLabel__qdIcu",optionalLabel:"home_optionalLabel__U0gvl",formControl:"home_formControl__Cf48C",formTextarea:"home_formTextarea__tVyby",formActions:"home_formActions__BdMyR",cancelButton:"home_cancelButton__docpL",submitButton:"home_submitButton__gVGwS",errorAlert:"home_errorAlert__tVY_A",errorIcon:"home_errorIcon__gc9ZB",imagePreview:"home_imagePreview__zqwvQ",tagsPreview:"home_tagsPreview__V6lf7",container:"home_container__TLSt1","writing-tips":"home_writing-tips__2ODsS","writing-tip":"home_writing-tip__dmGLE",loginLink:"home_loginLink__imUQF",discussionSection:"home_discussionSection__0Ifpl",discussionTitle:"home_discussionTitle__O3EuW",commentForm:"home_commentForm__zAQrR",commentInputContainer:"home_commentInputContainer__gKx6N",commentAvatar:"home_commentAvatar__T8zJ0",replyAvatar:"home_replyAvatar___kB3f",commentInputWrapper:"home_commentInputWrapper__hxZkN",commentInput:"home_commentInput__uUtg_",replyInput:"home_replyInput__rYKdQ",commentActions:"home_commentActions__OO9jZ",replyActions:"home_replyActions__p9B_f",submitReplyButton:"home_submitReplyButton__BdUJ2",cancelReplyButton:"home_cancelReplyButton__XvM8F",loginPrompt:"home_loginPrompt__w4N0u",loginPromptButtons:"home_loginPromptButtons__snC_B",loginButton:"home_loginButton__YS1MQ",closePromptButton:"home_closePromptButton__QYTJ8",errorMessage:"home_errorMessage__9Ki1b",loadingSpinner:"home_loadingSpinner__peANt",spin:"home_spin__D0mwY",noComments:"home_noComments__850HV",commentsList:"home_commentsList__fRn9g",commentItem:"home_commentItem__L5fNy",commentHeader:"home_commentHeader___Zk6a",replyHeader:"home_replyHeader__f7TaG",commentMeta:"home_commentMeta__MJRA8",replyMeta:"home_replyMeta__ve_YC",commentAuthor:"home_commentAuthor__HPgNT",replyAuthor:"home_replyAuthor__2Brdn",commentDate:"home_commentDate__VBAuX",replyDate:"home_replyDate__y0RtU",commentContent:"home_commentContent__uzL9r",replyContent:"home_replyContent__HFiXM",commentControls:"home_commentControls__ebC_D",likeButton:"home_likeButton__gtW9b",replyButton:"home_replyButton__e_FYj",toggleRepliesButton:"home_toggleRepliesButton__UC2Rk",deleteButton:"home_deleteButton__VEIPc",liked:"home_liked__LMNuR",replyForm:"home_replyForm__CpHFF",replyInputContainer:"home_replyInputContainer__3_T0M",repliesList:"home_repliesList__TjSoC",replyItem:"home_replyItem__TadHa",profileHeader:"home_profileHeader__N2hD3",profileAvatar:"home_profileAvatar__zAfHf",avatarPlaceholder:"home_avatarPlaceholder__mh9Xc",profileInfo:"home_profileInfo__tQtas",profileName:"home_profileName__7mtlO",profileUsername:"home_profileUsername__ACE_Q",profileBio:"home_profileBio__pKxZ3",sectionHeading:"home_sectionHeading__F_a8F",profileContent:"home_profileContent__a6u08",emptyState:"home_emptyState__0oCVS",sidebarSection:"home_sidebarSection__cyQHn",backLink:"home_backLink__Anavd","article-image":"home_article-image__mOEoE",searchContainer:"home_searchContainer__NcXe2",searchInputWrapper:"home_searchInputWrapper__jDfiT",searchInput:"home_searchInput__D6QYE",clearSearchButton:"home_clearSearchButton__XEPTo",searchResultsContainer:"home_searchResultsContainer__aOrYe",searchResultsTitle:"home_searchResultsTitle__KjT7N",backToAllButton:"home_backToAllButton__ShJnS",searchResults:"home_searchResults__sWgqy",searchResultItem:"home_searchResultItem__CuGQu",searchResultAvatar:"home_searchResultAvatar__QRukz",adminAvatar:"home_adminAvatar__5I7Wp",developerAvatar:"home_developerAvatar__YWLjR",userAvatar:"home_userAvatar__sJEnc",searchResultInfo:"home_searchResultInfo__vOptx",searchResultName:"home_searchResultName__yMZVz",searchResultUsername:"home_searchResultUsername__oQ4tk",searchResultRole:"home_searchResultRole__E5rB8",searchResultRoleAdmin:"home_searchResultRoleAdmin__58nmi",searchResultRoleDeveloper:"home_searchResultRoleDeveloper__D6KaE",searchResultRoleUser:"home_searchResultRoleUser__P_B5t",roleTag:"home_roleTag__X3nyq",noResults:"home_noResults__VKSke",searchBarContainer:"home_searchBarContainer__p1hA_",sidebarSearch:"home_sidebarSearch__rSKxe",tabContainer:"home_tabContainer__WiCFt",tabButton:"home_tabButton___0LSM",activeTab:"home_activeTab___peId",docsContainer:"home_docsContainer__uFnrg",userManagementContainer:"home_userManagementContainer__d8zKX",sectionTitle:"home_sectionTitle___LoW8",statsContainer:"home_statsContainer__Ecxt0",statBox:"home_statBox__sOuzf",statNumber:"home_statNumber__0HaRO",statLabel:"home_statLabel___lx3s",usersTableContainer:"home_usersTableContainer__xgtQE",usersTable:"home_usersTable__UQjnE",roleSelect:"home_roleSelect__85R__",documentationContainer:"home_documentationContainer__3hhXs",docSidebar:"home_docSidebar__NjNVF",docSearchContainer:"home_docSearchContainer__2oA__",docSearchInput:"home_docSearchInput__YwfD7",docNav:"home_docNav__TyBYN",docNavItem:"home_docNavItem__wzbPN",docNavItemActive:"home_docNavItemActive__2G1E0",docContent:"home_docContent__HO1_Q",docTitle:"home_docTitle__IElVr",docSubheading:"home_docSubheading__qezFR",docText:"home_docText__pOq_f",codeBlock:"home_codeBlock__2XLSi",codeBlockContainer:"home_codeBlockContainer__m8biO",codeLineNumbers:"home_codeLineNumbers___g0z3",codeContent:"home_codeContent__8Ufq0",keyword:"home_keyword__xcIYJ",string:"home_string__IDzCq",comment:"home_comment___nq3w",function:"home_function__lPtv4",type:"home_type__Ot2EV",variable:"home_variable__V9b_I",number:"home_number__EdK6u",operator:"home_operator__4A6PV",copyButton:"home_copyButton__FJrSq",alertInfo:"home_alertInfo__DNxOh",alertWarning:"home_alertWarning__h5lMU",alertSuccess:"home_alertSuccess__VNous",userTableCell:"home_userTableCell__EfMXq"}},8731:(e,n,t)=>{Promise.resolve().then(t.bind(t,9052))},9052:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>h});var r=t(5155),a=t(2115),o=t(5695),s=t(5317),i=t(3201),c=t(6203),l=t(8163),m=t.n(l);let d=[{id:"project-structure",title:"Project Structure",content:"\n## Directory Structure\n\n```tsx\n/src\n  /app                  # Next.js App Router pages\n    /articles           # Article-related routes\n    /dev                # Developer documentation (this page)\n    /login              # Authentication pages\n    /my-profile         # User profile pages\n    /user               # User public profile pages\n  /components           # Reusable React components\n    ArticleForm.tsx     # Form for creating/editing articles\n    CommentSection.tsx  # Comment functionality for articles\n    LeftSidebar.tsx     # Navigation sidebar\n    UserSearch.tsx      # Search functionality for users\n  /firebase             # Firebase configuration and utilities\n    articles.ts         # Article-related Firebase functions\n    clientApp.ts        # Firebase initialization\n    notifications.ts    # Notification system\n  /services             # Business logic services\n    articleService.ts   # Article-related business logic\n    userService.ts      # User-related business logic\n    audioService.ts     # Audio feature functionality\n  /styles               # Global and component styles\n  /types                # TypeScript type definitions\n```\n\n## Key Files Explained\n\n- `app/layout.tsx`: Main application layout with authentication context\n  - Wraps the entire app with auth providers\n  - Contains global navigation components\n  - Handles theme and responsiveness\n\n- `app/page.tsx`: Homepage with article feed\n  - Fetches and displays latest articles\n  - Shows featured content\n  - Handles different user states (authenticated vs guest)\n\n- `firebase/clientApp.ts`: Firebase configuration and initialization\n  - Sets up Firebase SDK with environment variables\n  - Initializes Firestore, Auth, and Storage\n  - Provides exported instances to the rest of the app\n\n- `components/LeftSidebar.tsx`: Main navigation with user search\n  - Collapsible sidebar with responsive behavior\n  - Integrates user search functionality\n  - Shows different options based on auth state\n\n- `components/ArticleForm.tsx`: Form for creating/editing articles\n  - Rich text editor integration\n  - Image upload capabilities\n  - Draft saving and publishing options\n  "},{id:"firebase-logic",title:"Firebase Logic",content:"\n## Authentication\n\nThe app uses Firebase Authentication with email/password and supports:\n- User registration with email verification\n- Password reset flows\n- Session persistence across browser sessions\n- Protected routes with role-based access\n\n### Authentication Flow\n\n```tsx\n// Example from login page\nimport { signInWithEmailAndPassword } from 'firebase/auth';\nimport { auth } from '@/firebase/clientApp';\n\n// Sign in\nconst signIn = async (email, password) => {\n  try {\n    // Attempt to authenticate with Firebase\n    await signInWithEmailAndPassword(auth, email, password);\n    \n    // Redirect to home page after successful login\n    router.push('/');\n  } catch (error) {\n    // Handle specific error codes\n    const errorCode = error.code;\n    switch(errorCode) {\n      case 'auth/user-not-found':\n        setError('No user found with this email');\n        break;\n      case 'auth/wrong-password':\n        setError('Incorrect password');\n        break;\n      default:\n        setError('Failed to sign in: ' + error.message);\n    }\n  }\n};\n```\n\n## Firestore Database\n\nData is organized in the following collections:\n\n1. `users/{uid}`\n   - User profile data\n   - Role-based access control\n   - References to created articles\n\n2. `articles/{articleId}`\n   - Article content, metadata\n   - Author reference\n   - Publication status (draft/published)\n   - Read count and likes\n\n3. `comments/{commentId}`\n   - Comment content\n   - References to articles and authors\n   - Timestamp and like count\n\n4. `notifications/{notificationId}`\n   - User notifications\n   - References to triggering events\n   - Read status tracking\n\n### Example Firestore Query\n\n```tsx\n// Fetch user articles\nimport { collection, query, where, getDocs, orderBy } from 'firebase/firestore';\nimport { db } from '@/firebase/clientApp';\n\nconst fetchUserArticles = async (userId) => {\n  try {\n    // Reference to articles collection\n    const articlesRef = collection(db, 'articles');\n    \n    // Create query for the user's articles, ordered by date\n    const q = query(\n      articlesRef, \n      where('authorId', '==', userId),\n      orderBy('createdAt', 'desc')\n    );\n    \n    // Execute the query\n    const querySnapshot = await getDocs(q);\n    \n    // Map the results to a more usable format\n    return querySnapshot.docs.map(doc => ({ \n      id: doc.id, \n      ...doc.data() \n    }));\n  } catch (error) {\n    console.error('Error fetching user articles:', error);\n    throw error;\n  }\n};\n```\n  "},{id:"article-system",title:"Article System",content:"\n## Article Lifecycle\n\nArticles in Journalite follow this lifecycle:\n1. **Creation**: Author creates content using the ArticleForm component\n2. **Draft**: Article is saved but not visible to other users\n3. **Published**: Article is made available to all users\n4. **Updated**: Author can edit and update the article after publishing\n5. **Deleted**: Article is removed from the system\n\n## Article Creation Flow\n\nThe `ArticleForm` component handles article creation with these features:\n- Rich text editor with formatting options\n- Draft saving with auto-save capability\n- Image upload and embedding\n- Form validation\n- Tag selection and categorization\n\n```tsx\n// ArticleForm.tsx - Core submission logic\nimport { useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { createArticle } from '@/services/articleService';\nimport { useAuth } from '@/hooks/useAuth';\n\nconst ArticleForm = () => {\n  const { user } = useAuth();\n  const router = useRouter();\n  const [title, setTitle] = useState('');\n  const [content, setContent] = useState('');\n  const [tags, setTags] = useState([]);\n  const [coverImage, setCoverImage] = useState(null);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState(null);\n  \n  // Handle form submission\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    if (!title || !content) {\n      setError('Title and content are required');\n      return;\n    }\n    \n    setIsSubmitting(true);\n    setError(null);\n    \n    try {\n      // Create article in Firestore\n      const newArticleRef = await createArticle({\n        title,\n        content,\n        authorId: user.uid,\n        status: 'published',\n        tags,\n        coverImage: coverImage ? await uploadImage(coverImage) : null,\n        createdAt: new Date(),\n        updatedAt: new Date(),\n        readCount: 0,\n        likes: 0,\n      });\n      \n      // Redirect to the new article\n      router.push(`/articles/${newArticleRef.id}`);\n    } catch (error) {\n      console.error('Error creating article:', error);\n      setError('Failed to create article. Please try again.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  \n  // Save as draft functionality\n  const saveDraft = async () => {\n    // Similar to handleSubmit but with status: 'draft'\n  };\n  \n  return (\n    <form onSubmit={handleSubmit}>\n      {/* Form fields for title, content, tags, image upload */}\n      {/* Submit and Save Draft buttons */}\n    </form>\n  );\n};\n```\n\n## Article Feed Population\n\nThe home feed is populated with articles using these key techniques:\n- Querying published articles sorted by date\n- Pagination using Firebase query cursors\n- Optional filtering by tags or categories\n- Featured articles with special prominence\n\n```tsx\n// Home page article fetching\nimport { collection, query, where, orderBy, limit, getDocs, startAfter } from 'firebase/firestore';\nimport { db } from '@/firebase/clientApp';\n\n// Initial article fetch\nconst fetchArticles = async (pageSize = 10) => {\n  try {\n    const articlesRef = collection(db, 'articles');\n    \n    // Get published articles, ordered by date\n    const q = query(\n      articlesRef,\n      where('status', '==', 'published'),\n      orderBy('createdAt', 'desc'),\n      limit(pageSize)\n    );\n    \n    const querySnapshot = await getDocs(q);\n    const articles = querySnapshot.docs.map(doc => ({ \n      id: doc.id, \n      ...doc.data() \n    }));\n    \n    // Store the last document for pagination\n    const lastVisible = querySnapshot.docs[querySnapshot.docs.length - 1];\n    \n    return { articles, lastVisible };\n  } catch (error) {\n    console.error('Error fetching articles:', error);\n    throw error;\n  }\n};\n\n// Load more articles (pagination)\nconst loadMoreArticles = async (lastVisible, pageSize = 10) => {\n  try {\n    const articlesRef = collection(db, 'articles');\n    \n    const q = query(\n      articlesRef,\n      where('status', '==', 'published'),\n      orderBy('createdAt', 'desc'),\n      startAfter(lastVisible), // Start after the last article we fetched\n      limit(pageSize)\n    );\n    \n    const querySnapshot = await getDocs(q);\n    const newArticles = querySnapshot.docs.map(doc => ({\n      id: doc.id,\n      ...doc.data()\n    }));\n    \n    const newLastVisible = querySnapshot.docs[querySnapshot.docs.length - 1];\n    \n    return { articles: newArticles, lastVisible: newLastVisible };\n  } catch (error) {\n    console.error('Error loading more articles:', error);\n    throw error;\n  }\n};\n```\n\n## Article Rendering\n\nArticles are rendered using the `RenderArticle` component that handles:\n- Markdown or rich text formatting\n- Embedded images and media\n- Code highlighting for technical content\n- Comment section integration\n- Social sharing options\n\n## Comment System\n\nEach article has a comment section allowing:\n- Nested comments (replies)\n- User avatars and profile links\n- Markdown formatting in comments\n- Likes and other reactions\n  "},{id:"user-profiles",title:"User Profiles",content:"\n## User Creation & Authentication\n\nWhen a user signs up in Journalite:\n1. Firebase Auth creates an authentication record\n2. A corresponding Firestore document is created in `users/{uid}`\n3. Email verification is sent automatically\n4. The user is directed to complete their profile with additional information\n\n```tsx\n// Registration flow from AuthForm.tsx\nimport { createUserWithEmailAndPassword, sendEmailVerification } from 'firebase/auth';\nimport { setDoc, doc } from 'firebase/firestore';\nimport { auth, db } from '@/firebase/clientApp';\nimport { generateUsername } from '@/utils/userHelpers';\n\nconst registerUser = async (email: string, password: string, name: string) => {\n  try {\n    // Step 1: Create Firebase Auth user\n    const userCredential = await createUserWithEmailAndPassword(\n      auth, \n      email, \n      password\n    );\n    \n    const user = userCredential.user;\n    \n    // Step 2: Generate a unique username from their name\n    const username = await generateUsername(name);\n    \n    // Step 3: Create Firestore profile document\n    await setDoc(doc(db, 'users', user.uid), {\n      name,\n      email,\n      username,\n      role: 'user',\n      bio: '',\n      createdAt: new Date(),\n      articleCount: 0,\n      followersCount: 0,\n      followingCount: 0,\n      photoURL: null\n    });\n    \n    // Step 4: Send email verification\n    await sendEmailVerification(user, {\n      url: window.location.origin + '/email-verified'\n    });\n    \n    return {\n      user,\n      username\n    };\n  } catch (error) {\n    console.error('Error registering user:', error);\n    const errorCode = error.code;\n    switch(errorCode) {\n      case 'auth/email-already-in-use':\n        throw new Error('Email is already registered');\n      case 'auth/weak-password':\n        throw new Error('Password is too weak');\n      default:\n        throw new Error('Failed to register: ' + error.message);\n    }\n  }\n};\n```\n\n## User Data Structure\n\nUser profiles store comprehensive data:\n\n```tsx\ninterface UserProfile {\n  // Basic info\n  name: string;        // Display name\n  username: string;    // Unique handle\n  email: string;       // Email address\n  bio?: string;        // Optional bio\n  photoURL?: string;   // Profile photo URL\n  \n  // Role & permissions\n  role: 'user' | 'developer' | 'admin';\n  \n  // Statistics\n  articleCount: number;\n  followersCount: number;\n  followingCount: number;\n  \n  // Metadata\n  createdAt: Timestamp;\n  lastActive?: Timestamp;\n}\n```\n\n## Username Generation\n\nUsernames are automatically generated with these rules:\n- Derived from the user's display name\n- Converted to lowercase\n- Spaces replaced with underscores\n- Special characters removed\n- If already taken, suffixed with random digits\n\n```tsx\n// Username generation utility\nimport { collection, query, where, getDocs } from 'firebase/firestore';\nimport { db } from '@/firebase/clientApp';\n\nexport async function generateUsername(name: string): Promise<string> {\n  // Convert name to lowercase, replace spaces with underscores\n  let baseUsername = name.toLowerCase().replace(/\\s+/g, '_');\n  \n  // Remove special characters\n  baseUsername = baseUsername.replace(/[^a-z0-9_]/g, '');\n  \n  // Check if username exists\n  const usersRef = collection(db, 'users');\n  const q = query(usersRef, where('username', '==', baseUsername));\n  const snapshot = await getDocs(q);\n  \n  // If username is available, use it\n  if (snapshot.empty) {\n    return baseUsername;\n  }\n  \n  // Otherwise, add random digits until we find an available username\n  let isAvailable = false;\n  let candidateUsername = '';\n  \n  while (!isAvailable) {\n    // Add 3 random digits\n    const randomSuffix = Math.floor(Math.random() * 900) + 100;\n    candidateUsername = `${baseUsername}_${randomSuffix}`;\n    \n    // Check if this version is available\n    const q2 = query(usersRef, where('username', '==', candidateUsername));\n    const snapshot2 = await getDocs(q2);\n    \n    if (snapshot2.empty) {\n      isAvailable = true;\n    }\n  }\n  \n  return candidateUsername;\n}\n```\n\n## User Search Implementation\n\nThe user search functionality is implemented with these features:\n- Real-time search as you type\n- Debounced input to minimize database queries\n- Case-insensitive matching on name and username\n- Clean UI with profile pictures and usernames\n- Caching of recent results for performance\n\n```tsx\n// UserSearch.tsx component\nimport { useState, useEffect } from 'react';\nimport { collection, query, where, getDocs, orderBy, limit } from 'firebase/firestore';\nimport { db } from '@/firebase/clientApp';\nimport useDebounce from '@/hooks/useDebounce';\n\nexport default function UserSearch() {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(false);\n  \n  // Debounce search term to avoid too many queries\n  const debouncedSearchTerm = useDebounce(searchTerm, 300);\n  \n  useEffect(() => {\n    // Don't search until we have at least 2 characters\n    if (!debouncedSearchTerm || debouncedSearchTerm.length < 2) {\n      setUsers([]);\n      return;\n    }\n    \n    const searchUsers = async () => {\n      setLoading(true);\n      \n      try {\n        const usersRef = collection(db, 'users');\n        \n        // Query for users by name (case insensitive)\n        const nameQuery = query(\n          usersRef,\n          where('name', '>=', debouncedSearchTerm),\n          where('name', '<=', debouncedSearchTerm + '\\uf8ff'),\n          limit(5)\n        );\n        \n        // Query for users by username\n        const usernameQuery = query(\n          usersRef,\n          where('username', '>=', debouncedSearchTerm),\n          where('username', '<=', debouncedSearchTerm + '\\uf8ff'),\n          limit(5)\n        );\n        \n        // Execute both queries\n        const [nameSnapshot, usernameSnapshot] = await Promise.all([\n          getDocs(nameQuery),\n          getDocs(usernameQuery)\n        ]);\n        \n        // Combine results, remove duplicates\n        const usersMap = new Map();\n        \n        // Add users from name query\n        nameSnapshot.docs.forEach(doc => {\n          usersMap.set(doc.id, {\n            id: doc.id,\n            ...doc.data()\n          });\n        });\n        \n        // Add users from username query\n        usernameSnapshot.docs.forEach(doc => {\n          usersMap.set(doc.id, {\n            id: doc.id,\n            ...doc.data()\n          });\n        });\n        \n        // Convert map to array\n        setUsers(Array.from(usersMap.values()));\n      } catch (error) {\n        console.error('Error searching users:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    searchUsers();\n  }, [debouncedSearchTerm]);\n  \n  // Render search input and results\n  return (\n    <div className=\"searchContainer\">\n      <input\n        type=\"text\"\n        value={searchTerm}\n        onChange={(e) => setSearchTerm(e.target.value)}\n        placeholder=\"Search users...\"\n      />\n      \n      {loading && <div>Searching...</div>}\n      \n      {!loading && users.length > 0 && (\n        <div className=\"searchResults\">\n          {users.map(user => (\n            <a href={`/user/${user.username}`} key={user.id} className=\"searchResultItem\">\n              {/* User search result display */}\n            </a>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n```\n  "},{id:"routing",title:"Routing",content:"\n## Next.js App Router Architecture\n\nJournalite uses Next.js App Router for all routing with a clean, logical structure:\n\n```\n/app\n  /page.tsx              # Home page\n  /layout.tsx            # Root layout with providers\n  /articles\n    /[articleId]         # Dynamic article page\n    /page.tsx            # Articles index\n  /create-article\n    /page.tsx            # Article creation form\n  /edit-article\n    /[articleId]         # Dynamic article editing\n  /user\n    /[username]          # Public user profile\n  /my-profile            # Current user's profile\n  /login                 # Authentication pages\n  /register\n  /dev                   # Developer documentation (this page)\n```\n\n## Key Routes Explained\n\n### Home Page (`/`)\n\n- Displays trending articles\n- Shows personalized feed for logged-in users\n- Contains featured content section\n\n### Article Page (`/articles/[articleId]`)\n\n- Displays full article content\n- Shows author information\n- Includes comment section\n- Provides related articles\n\n```tsx\n// app/articles/[articleId]/page.tsx\nimport { getArticleById } from '@/services/articleService';\nimport { notFound } from 'next/navigation';\n\n// This function generates static paths for articles at build time\nexport async function generateStaticParams() {\n  // Get popular article IDs to pre-render\n  const popularArticleIds = await getPopularArticleIds();\n  \n  return popularArticleIds.map(id => ({\n    articleId: id\n  }));\n}\n\n// Main article page component\nexport default async function ArticlePage({ params }) {\n  const { articleId } = params;\n  \n  try {\n    // Get article data\n    const article = await getArticleById(articleId);\n    \n    // If article doesn't exist or isn't published\n    if (!article || article.status !== 'published') {\n      notFound();\n    }\n    \n    return (\n      <div className=\"article-container\">\n        <article>\n          <h1>{article.title}</h1>\n          <ArticleContent content={article.content} />\n          <CommentSection articleId={articleId} />\n        </article>\n      </div>\n    );\n  } catch (error) {\n    console.error('Error loading article:', error);\n    notFound();\n  }\n}\n```\n\n### User Profile (`/user/[username]`)\n\n- Public user profile accessible by username\n- Shows user's articles and bio\n- Different from private profile dashboard\n\n```tsx\n// app/user/[username]/page.tsx\nimport { getUserByUsername } from '@/services/userService';\nimport { getUserArticles } from '@/services/articleService';\nimport { notFound } from 'next/navigation';\n\nexport default async function UserProfilePage({ params }) {\n  const { username } = params;\n  \n  try {\n    // Get user data by username\n    const user = await getUserByUsername(username);\n    \n    if (!user) {\n      notFound();\n    }\n    \n    // Get user's published articles\n    const articles = await getUserArticles(user.id, {\n      status: 'published',\n      limit: 10\n    });\n    \n    return (\n      <div className=\"profile-container\">\n        <UserProfileHeader user={user} />\n        <UserArticlesGrid articles={articles} />\n      </div>\n    );\n  } catch (error) {\n    console.error('Error loading profile:', error);\n    notFound();\n  }\n}\n```\n\n## Route Protection & Authentication\n\nRoutes are protected using:\n- Client-side authentication checks\n- Server-side authentication status verification\n- Role-based access control for admin areas\n\n```tsx\n// Example of protected route wrapper\n'use client';\n\nimport { useAuth } from '@/hooks/useAuth';\nimport { useRouter } from 'next/navigation';\nimport { useEffect } from 'react';\n\nexport default function ProtectedRoute({ children }) {\n  const { user, loading } = useAuth();\n  const router = useRouter();\n  \n  useEffect(() => {\n    if (!loading && !user) {\n      // User is not authenticated, redirect to login\n      router.push('/login?redirect=' + encodeURIComponent(window.location.pathname));\n    }\n  }, [user, loading, router]);\n  \n  if (loading) {\n    return <LoadingSpinner />;\n  }\n  \n  if (!user) {\n    return null; // Don't render anything while redirecting\n  }\n  \n  return children;\n}\n```\n\n## Dynamic Routes & Server Components\n\nJournalite uses both static and dynamic rendering:\n- Static rendering for content that doesn't change often\n- Dynamic rendering for personalized content\n- Streaming for improved user experience with large pages\n\n## Error Handling\n\nError boundaries are used to gracefully handle route errors:\n- Custom 404 page for content not found\n- Error pages for server errors\n- Fallback UI components for partial failures\n  "},{id:"deployment",title:"Deployment & Build Modes",content:"\n## Deployment Overview\n\nJournalite is configured for seamless deployment to Vercel with:\n- Optimized production builds\n- Environment variable configuration\n- Image optimization\n- Edge caching for improved performance\n\n### Deployment Process\n\n```bash\n# Build the application for production\nnpm run build\n\n# Test the production build locally\nnpm run start\n\n# Deploy to Vercel (if CLI is installed)\nvercel --prod\n```\n\n## Environment Configuration\n\nThe application requires these environment variables:\n\n```\n# Firebase configuration\nNEXT_PUBLIC_FIREBASE_API_KEY=your-api-key\nNEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=your-auth-domain\nNEXT_PUBLIC_FIREBASE_PROJECT_ID=your-project-id\nNEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=your-storage-bucket\nNEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=your-messaging-sender-id\nNEXT_PUBLIC_FIREBASE_APP_ID=your-app-id\n\n# Optional analytics\nNEXT_PUBLIC_FIREBASE_MEASUREMENT_ID=your-measurement-id\n\n# Optional for custom domains\nNEXT_PUBLIC_BASE_URL=https://your-domain.com\n```\n\n## Next.js Configuration\n\nThe Next.js configuration in `next.config.js` is optimized for production:\n\n```js\n/** @type {import('next').NextConfig} */\nconst nextConfig = {\n  // Optimize for containerized deployments (Docker)\n  output: 'standalone', \n  \n  // Configure allowed image domains for optimization\n  images: {\n    domains: [\n      'firebasestorage.googleapis.com',\n      'lh3.googleusercontent.com' // For Google profile photos\n    ],\n    // Image optimization settings\n    formats: ['image/webp'],\n  },\n  \n  // Handle TypeScript and ESLint errors gracefully in production\n  typescript: {\n    // Prevents TypeScript errors from breaking production builds\n    ignoreBuildErrors: process.env.NODE_ENV === 'production',\n  },\n  \n  eslint: {\n    // Prevents ESLint errors from breaking production builds\n    ignoreDuringBuilds: process.env.NODE_ENV === 'production',\n  },\n  \n  // Configure redirects and rewrites\n  async redirects() {\n    return [\n      {\n        source: '/profile',\n        destination: '/my-profile',\n        permanent: true,\n      },\n    ];\n  },\n  \n  // Enable experimental features as needed\n  experimental: {\n    serverActions: true,\n  },\n};\n\nmodule.exports = nextConfig;\n```\n\n## Build Optimization\n\nThe build process is optimized for performance:\n- Code splitting for reduced bundle sizes\n- Image optimization with Next.js Image component\n- Font optimization with next/font\n- Server component usage for reduced client JS\n\n## Caching Strategy\n\nJournalite implements a hybrid caching strategy:\n- Static generation for non-personalized content\n- Incremental Static Regeneration (ISR) for semi-dynamic content\n- Client-side fetching for user-specific data\n\n```tsx\n// Example of ISR implementation for article pages\nexport const revalidate = 3600; // Revalidate this page every hour\n\nexport async function generateStaticParams() {\n  // Get most popular articles for static generation\n  const topArticles = await getTopArticles(50);\n  \n  return topArticles.map(article => ({\n    articleId: article.id,\n  }));\n}\n```\n\n## Production Monitoring\n\nOnce deployed, monitor your application with:\n- Vercel Analytics for performance metrics\n- Firebase Performance Monitoring\n- Error tracking via Sentry integration\n- Custom logging for critical operations\n\n## Scaling Considerations\n\nAs your application grows:\n- Implement database indexing for common queries\n- Consider Firebase collection sharding for large datasets\n- Use Firebase Functions for background processing\n- Enable Edge caching for frequently accessed content\n  "},{id:"best-practices",title:"Best Practices",content:'\n## Coding Standards\n\n### Component Structure\n\nComponents should follow this consistent pattern:\n\n```tsx\n// Example component structure\nimport { useState, useEffect } from \'react\';\nimport { SomeType } from \'@/types\';\n\n// Types at the top\ninterface Props {\n  title: string;\n  onAction: () => void;\n}\n\n// Component with named export\nexport default function ExampleComponent({ title, onAction }: Props) {\n  // 1. State declarations\n  const [loading, setLoading] = useState(false);\n  const [data, setData] = useState<SomeType | null>(null);\n  \n  // 2. Effects\n  useEffect(() => {\n    fetchData();\n  }, []);\n  \n  // 3. Event handlers and helper functions\n  const fetchData = async () => {\n    setLoading(true);\n    try {\n      // Fetch data\n      const result = await someApiCall();\n      setData(result);\n    } catch (error) {\n      console.error("Error fetching data:", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  const handleClick = () => {\n    onAction();\n  };\n  \n  // 4. Conditional rendering\n  if (loading) return <LoadingSpinner />;\n  if (!data) return <EmptyState />;\n  \n  // 5. Main render\n  return (\n    <div className="example-component">\n      <h2>{title}</h2>\n      <div className="content">\n        {data.items.map(item => (\n          <div key={item.id}>{item.name}</div>\n        ))}\n      </div>\n      <button onClick={handleClick}>Action</button>\n    </div>\n  );\n}\n```\n\n### Naming Conventions\n\n- **Components**: PascalCase (e.g., `ArticleCard.tsx`)\n- **Hooks**: camelCase with \'use\' prefix (e.g., `useArticle.ts`)\n- **Utilities**: camelCase (e.g., `formatDate.ts`)\n- **Types**: PascalCase with descriptive names (e.g., `ArticleData`)\n- **CSS Modules**: ComponentName.module.css (e.g., `ArticleCard.module.css`)\n\n### File Organization\n\nFollow these patterns for organizing files:\n\n```\n/components\n  /Article                    # Component folder\n    ArticleCard.tsx           # Main component\n    ArticleCard.module.css    # Component styles\n    useArticleActions.ts      # Component-specific hook\n    index.ts                  # Re-export for clean imports\n  /ui                         # Reusable UI components\n    Button.tsx\n    Input.tsx\n/hooks                        # Global hooks\n  useAuth.ts\n  useFirestore.ts\n/types                        # Type definitions\n  article.types.ts\n  user.types.ts\n```\n\n### State Management\n\nFor state management, follow this hierarchy:\n1. **Local component state**: For UI-specific state\n2. **Context API**: For shared state across components\n3. **Custom hooks**: For reusable state logic\n4. **URL state**: For shareable/bookmarkable state\n\n### Firebase Best Practices\n\n1. **Security Rules**\n   - Always implement restrictive security rules\n   - Test rules thoroughly before deployment\n   - Use role-based permissions\n\n2. **Query Optimization**\n   - Use compound queries with appropriate indexes\n   - Limit query results to avoid excessive reads\n   - Add pagination for large data sets\n\n3. **Data Modeling**\n   - Keep documents small and focused\n   - Use subcollections for one-to-many relationships\n   - Denormalize data when needed for read performance\n\n```tsx\n// Example of optimized Firestore query\nconst getArticlesForHome = async (limit = 10) => {\n  try {\n    const articlesRef = collection(db, "articles");\n    const q = query(\n      articlesRef,\n      where("status", "==", "published"),\n      orderBy("publishedAt", "desc"),\n      limit(limit)\n    );\n    \n    // Execute query with proper error handling\n    const querySnapshot = await getDocs(q);\n    return querySnapshot.docs.map(doc => ({\n      id: doc.id,\n      ...doc.data()\n    }));\n  } catch (error) {\n    console.error("Error fetching articles:", error);\n    throw new Error("Failed to fetch articles");\n  }\n};\n```\n\n### Performance Optimization\n\n1. **Code Splitting**\n   - Use dynamic imports for large components\n   - Implement route-based code splitting\n   - Lazy load below-the-fold content\n\n2. **Image Optimization**\n   - Always use Next.js Image component\n   - Choose appropriate sizes and formats\n   - Implement responsive images with srcset\n\n3. **Rendering Strategies**\n   - Use Server Components for static content\n   - Implement Client Components only when needed\n   - Consider Streaming for large pages\n\n```tsx\n// Example of optimized image usage\nimport Image from \'next/image\';\n\nfunction OptimizedImage({ src, alt }) {\n  return (\n    <Image\n      src={src}\n      alt={alt}\n      width={800}\n      height={500}\n      placeholder="blur"\n      blurDataURL="data:image/png;base64,iVBORw0KGgoAAAANSU..."\n      priority={true}\n      sizes="(max-width: 768px) 100vw, 800px"\n    />\n  );\n}\n```\n\n### Error Handling\n\nImplement comprehensive error handling:\n- Use try/catch for async operations\n- Provide user-friendly error messages\n- Log errors for debugging\n- Implement error boundaries for UI resilience\n\n### Accessibility\n\nAlways follow accessibility best practices:\n- Use semantic HTML elements\n- Include proper ARIA attributes\n- Ensure keyboard navigation\n- Maintain sufficient color contrast\n- Test with screen readers\n  '}];function u(){let[e,n]=(0,a.useState)([]),[t,o]=(0,a.useState)([]),[c,l]=(0,a.useState)(!0),[d,u]=(0,a.useState)(null),[p,h]=(0,a.useState)(""),[_,g]=(0,a.useState)(!1),[f,b]=(0,a.useState)({total:0,admins:0,developers:0,regular:0});(0,a.useEffect)(()=>{!async function(){try{l(!0);let e=(0,s.P)((0,s.rJ)(i.db,"users"),(0,s.AB)(50)),t=(await (0,s.GG)(e)).docs.map(e=>({id:e.id,...e.data()})),r=t.filter(e=>"admin"===e.role).length,a=t.filter(e=>"developer"===e.role).length,c=t.filter(e=>!e.role||"user"===e.role).length;b({total:t.length,admins:r,developers:a,regular:c}),n(t),o(t)}catch(e){console.error("Error fetching users:",e),u("Failed to load users")}finally{l(!1)}}()},[]),(0,a.useEffect)(()=>{if(p.trim()){let n=p.toLowerCase();o(e.filter(e=>{var t,r,a;return(null==(t=e.name)?void 0:t.toLowerCase().includes(n))||(null==(r=e.email)?void 0:r.toLowerCase().includes(n))||(null==(a=e.username)?void 0:a.toLowerCase().includes(n))||!1})),g(!0)}else o(e),g(!1)},[p,e]);let v=async(t,r)=>{try{let a=(0,s.H9)(i.db,"users",t);await (0,s.mZ)(a,{role:r});let c=e.map(e=>e.id===t?{...e,role:r}:e);if(n(c),p.trim()){let e=p.toLowerCase();o(c.filter(n=>{var t,r,a;return(null==(t=n.name)?void 0:t.toLowerCase().includes(e))||(null==(r=n.email)?void 0:r.toLowerCase().includes(e))||(null==(a=n.username)?void 0:a.toLowerCase().includes(e))||!1}))}else o(c);let l=c.filter(e=>"admin"===e.role).length,m=c.filter(e=>"developer"===e.role).length,d=c.filter(e=>!e.role||"user"===e.role).length;b({total:c.length,admins:l,developers:m,regular:d})}catch(e){console.error("Error updating user role:",e),alert("Failed to update user role")}},y=e=>e?e.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().substring(0,2):"?",x=e=>e?e.charAt(0).toUpperCase():"?",S=e=>{switch(e){case"admin":return m().adminAvatar;case"developer":return m().developerAvatar;default:return""}},w=e=>{switch(e){case"admin":return m().searchResultRoleAdmin;case"developer":return m().searchResultRoleDeveloper;default:return m().searchResultRoleUser}},A=()=>{h(""),g(!1)};return c?(0,r.jsxs)("div",{className:m().loading,children:[(0,r.jsx)("div",{className:m().loadingSpinner}),"Loading users..."]}):d?(0,r.jsx)("div",{className:m().errorMessage,children:d}):(0,r.jsxs)("div",{className:m().userManagementContainer,children:[(0,r.jsx)("h2",{className:m().sectionTitle,children:"User Management"}),(0,r.jsxs)("div",{className:m().statsContainer,children:[(0,r.jsxs)("div",{className:m().statBox,children:[(0,r.jsx)("span",{className:m().statNumber,children:f.total}),(0,r.jsx)("span",{className:m().statLabel,children:"Total Users"})]}),(0,r.jsxs)("div",{className:m().statBox,children:[(0,r.jsx)("span",{className:m().statNumber,children:f.admins}),(0,r.jsx)("span",{className:m().statLabel,children:"Admins"})]}),(0,r.jsxs)("div",{className:m().statBox,children:[(0,r.jsx)("span",{className:m().statNumber,children:f.developers}),(0,r.jsx)("span",{className:m().statLabel,children:"Developers"})]}),(0,r.jsxs)("div",{className:m().statBox,children:[(0,r.jsx)("span",{className:m().statNumber,children:f.regular}),(0,r.jsx)("span",{className:m().statLabel,children:"Regular Users"})]})]}),(0,r.jsx)("div",{className:m().searchContainer,children:(0,r.jsxs)("div",{className:m().searchInputWrapper,children:[(0,r.jsx)("input",{type:"text",placeholder:"Search users by name, email, or username...",value:p,onChange:e=>h(e.target.value),className:m().searchInput}),p&&(0,r.jsx)("button",{onClick:A,className:m().clearSearchButton,"aria-label":"Clear search",children:"\xd7"})]})}),_?(0,r.jsxs)("div",{className:m().searchResultsContainer,children:[(0,r.jsxs)("h3",{className:m().searchResultsTitle,children:["Search Results (",t.length,")",t.length>0&&(0,r.jsx)("button",{className:m().backToAllButton,onClick:A,children:"Back to all users"})]}),0===t.length?(0,r.jsxs)("div",{className:m().noResults,children:['No users found matching "',p,'"']}):(0,r.jsx)("div",{className:m().searchResults,children:t.map(e=>(0,r.jsxs)("div",{className:m().searchResultItem,children:[(0,r.jsx)("div",{className:"".concat(m().searchResultAvatar," ").concat(S(e.role)),"data-initial":x(e.name),children:y(e.name)}),(0,r.jsxs)("div",{className:m().searchResultInfo,children:[(0,r.jsx)("div",{className:m().searchResultName,children:e.name||"Unnamed User"}),(0,r.jsx)("div",{className:m().searchResultUsername,children:e.email||e.username||"No contact info"})]}),(0,r.jsx)("div",{className:"".concat(m().searchResultRole," ").concat(w(e.role)),children:e.role||"user"}),(0,r.jsxs)("select",{value:e.role||"user",onChange:n=>v(e.id,n.target.value),className:m().roleSelect,children:[(0,r.jsx)("option",{value:"user",children:"User"}),(0,r.jsx)("option",{value:"developer",children:"Developer"}),(0,r.jsx)("option",{value:"admin",children:"Admin"})]})]},e.id))})]}):(0,r.jsx)("div",{className:m().usersTableContainer,children:(0,r.jsxs)("table",{className:m().usersTable,children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Name"}),(0,r.jsx)("th",{children:"Email"}),(0,r.jsx)("th",{children:"Username"}),(0,r.jsx)("th",{children:"Role"}),(0,r.jsx)("th",{children:"Actions"})]})}),(0,r.jsx)("tbody",{children:0===t.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:5,className:m().noResults,children:"No users found"})}):t.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsxs)("div",{className:m().userTableCell,children:[(0,r.jsx)("span",{className:"".concat(m().userAvatar," ").concat(S(e.role)),"data-initial":x(e.name),children:y(e.name)}),e.name||"N/A"]})}),(0,r.jsx)("td",{children:e.email||"N/A"}),(0,r.jsx)("td",{children:e.username||"N/A"}),(0,r.jsx)("td",{children:(0,r.jsx)("span",{className:"".concat(m().roleTag," ").concat(w(e.role)),children:e.role||"user"})}),(0,r.jsx)("td",{children:(0,r.jsxs)("select",{value:e.role||"user",onChange:n=>v(e.id,n.target.value),className:m().roleSelect,children:[(0,r.jsx)("option",{value:"user",children:"User"}),(0,r.jsx)("option",{value:"developer",children:"Developer"}),(0,r.jsx)("option",{value:"admin",children:"Admin"})]})})]},e.id))})]})})]})}function p(){let[e,n]=(0,a.useState)(""),[t,o]=(0,a.useState)(d[0].id),[s,i]=(0,a.useState)(d);(0,a.useEffect)(()=>{if(!e.trim())return void i(d);let n=e.toLowerCase(),r=d.filter(e=>e.title.toLowerCase().includes(n)||e.content.toLowerCase().includes(n));i(r),r.length>0&&!r.some(e=>e.id===t)&&o(r[0].id)},[e,t]);let c=e=>{o(e),window.scrollTo(0,0)};(0,a.useEffect)(()=>{document.querySelectorAll(".".concat(m().copyButton)).forEach(e=>{e.addEventListener("click",n=>{n.preventDefault();let t=e.closest(".".concat(m().codeBlock));if(!t)return;let r=t.querySelector(".".concat(m().codeContent));if(!r)return;let a=r.textContent||"";navigator.clipboard.writeText(a).then(()=>{let n=e.innerText;e.innerText="Copied!",setTimeout(()=>{e.innerText=n},2e3)})})})},[t,s]);let l=s.find(e=>e.id===t)||s[0],u="doc-content-".concat((null==l?void 0:l.id)||"empty","-").concat(Date.now());return(0,r.jsxs)("div",{className:m().documentationContainer,children:[(0,r.jsxs)("div",{className:m().docSidebar,children:[(0,r.jsx)("div",{className:m().docSearchContainer,children:(0,r.jsx)("input",{type:"text",placeholder:"Search documentation...",value:e,onChange:e=>n(e.target.value),className:m().docSearchInput})}),(0,r.jsx)("nav",{className:m().docNav,children:s.map(e=>(0,r.jsx)("button",{onClick:()=>c(e.id),className:"".concat(m().docNavItem," ").concat(t===e.id?m().docNavItemActive:""),children:e.title},e.id))})]}),(0,r.jsx)("div",{className:m().docContent,children:0===s.length?(0,r.jsx)("div",{className:m().noResults,children:"No documentation sections match your search."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{className:m().docTitle,children:l.title}),(0,r.jsx)("div",{className:m().docText,dangerouslySetInnerHTML:{__html:function(e){let n=e=>{switch(e){case"tsx":return"Component.tsx";case"ts":return"index.ts";case"js":return"script.js";case"jsx":return"Component.jsx";case"html":return"index.html";case"css":return"styles.css";case"json":return"config.json";default:return"example.code"}},t=(e,n)=>["ts","tsx","js","jsx"].includes(n)?e.replace(/\b(const|let|var|function|class|interface|type|enum|import|export|from|as|return|if|else|for|while|switch|case|break|default|try|catch|finally|async|await|new|this|extends|implements|private|public|protected|static|get|set|super|void|yield)\b/g,'<span class="'+m().keyword+'">$1</span>').replace(/(["'`])((?:\\\1|(?!\1).)*?)\1/g,'<span class="'+m().string+'">$1$2$1</span>').replace(/(`)((?:[^`]|\\.)*?)(`)/g,function(e,n,t,r){let a=t.replace(/(\${)(.*?)(})/g,'<span class="'+m().operator+'">$1</span><span class="'+m().variable+'">$2</span><span class="'+m().operator+'">$3</span>');return'<span class="'+m().string+'">'+n+a+r+"</span>"}).replace(/(\/\/.*?)($|\n)/g,'<span class="'+m().comment+'">$1</span>$2').replace(/(\/\*[\s\S]*?\*\/)/g,'<span class="'+m().comment+'">$1</span>').replace(/(&lt;|\<)([A-Z][A-Za-z0-9]*|[a-z][A-Za-z0-9]*|\/?&gt;|\/?>\s*$)/g,function(e,n,t){return'<span class="'+m().operator+'">'+n+'</span><span class="'+m().type+'">'+t+"</span>"}).replace(/(\s)([A-Za-z_$][A-Za-z0-9_$]*)(\s*\()/g,'$1<span class="'+m().function+'">$2</span>$3').replace(/\b(string|number|boolean|any|void|null|undefined|never|object|Symbol|Array|Promise|Record|Partial|Readonly|Required|Pick|Omit|Exclude|Extract|NonNullable|ReturnType)\b/g,'<span class="'+m().type+'">$1</span>').replace(/(\.)([A-Za-z_$][A-Za-z0-9_$]*)/g,'$1<span class="'+m().variable+'">$2</span>').replace(/([A-Za-z_$][A-Za-z0-9_$]*)(\s*:\s*)/g,'<span class="'+m().variable+'">$1</span>$2').replace(/\b(0[xX][0-9a-fA-F]+|0[bB][01]+|0[oO][0-7]+|\d+(?:\.\d+)?(?:[eE][+-]?\d+)?)\b/g,'<span class="'+m().number+'">$1</span>').replace(/([=!<>+\-*/%&|^~?:;,.]|=&gt;|=&lt;|&amp;&amp;|\|\|)/g,'<span class="'+m().operator+'">$1</span>').split("\n").map((e,n)=>'<span class="code-line" data-line="'+(n+1)+'">'+(e||"&nbsp;")+"</span>").join("\n"):"html"===n?e.replace(/(&lt;|<)(\/?)([\w\-]+)([^>]*?)(\/?)(>|&gt;)/g,'<span class="'+m().operator+'">$1$2</span><span class="'+m().type+'">$3</span>$4<span class="'+m().operator+'">$5$6</span>').replace(/(\s+)([a-zA-Z\-:_]+)(=)/g,'$1<span class="'+m().variable+'">$2</span><span class="'+m().operator+'">$3</span>').replace(/(=)(["'])((?:\\\2|(?!\2).)*?)(\2)/g,'<span class="'+m().operator+'">$1</span><span class="'+m().string+'">$2$3$4</span>').replace(/(&lt;!--|<!--)([\s\S]*?)(--&gt;|-->)/g,'<span class="'+m().comment+'">$1$2$3</span>').split("\n").map((e,n)=>'<span class="code-line" data-line="'+(n+1)+'">'+(e||"&nbsp;")+"</span>").join("\n"):"css"===n?e.replace(/([.#]?[\w\-_]+)(?=\s*\{)/g,'<span class="'+m().type+'">$1</span>').replace(/([\w\-]+)(\s*:\s*)/g,'<span class="'+m().variable+'">$1</span>$2').replace(/(:)([^;{}]*)([;}])/g,function(e,n,t,r){return n+t.replace(/([#](?:[0-9a-fA-F]{3}|[0-9a-fA-F]{6})\b|((?:\d*\.)?\d+(?:px|em|rem|vh|vw|%|s|ms|deg|pt)?)\b)/g,'<span class="'+m().number+'">$1$2</span>')+r}).replace(/(\/\*[\s\S]*?\*\/)/g,'<span class="'+m().comment+'">$1</span>').replace(/({|})/g,'<span class="'+m().operator+'">$1</span>').split("\n").map((e,n)=>'<span class="code-line" data-line="'+(n+1)+'">'+(e||"&nbsp;")+"</span>").join("\n"):"json"===n?e.replace(/"([^"]+)"\s*:/g,'<span class="'+m().variable+'">"$1"</span>:').replace(/:\s*"([^"]+)"/g,': <span class="'+m().string+'">"$1"</span>').replace(/:\s*(-?\d+(?:\.\d+)?)/g,': <span class="'+m().number+'">$1</span>').replace(/:\s*(true|false|null)\b/g,': <span class="'+m().keyword+'">$1</span>').replace(/([{}\[\]])/g,'<span class="'+m().operator+'">$1</span>').split("\n").map((e,n)=>'<span class="code-line" data-line="'+(n+1)+'">'+(e||"&nbsp;")+"</span>").join("\n"):e.split("\n").map((e,n)=>'<span class="code-line" data-line="'+(n+1)+'">'+(e||"&nbsp;")+"</span>").join("\n"),r=e,a=(r=(r=(r=(r=(r=(r=r.replace(/:::info\s+([^:]+):::/g,'<div class="'+m().alertInfo+'">$1</div>')).replace(/:::warning\s+([^:]+):::/g,'<div class="'+m().alertWarning+'">$1</div>')).replace(/:::success\s+([^:]+):::/g,'<div class="'+m().alertSuccess+'">$1</div>')).replace(/`([^`]+)`/g,(e,n)=>"<code>"+n.replace(/\${/g,"\\${")+"</code>")).replace(/```(tsx|js|jsx|ts|html|css|json)?\s*(?:\[([^\]]+)\])?(?:\n)([\s\S]+?)```/g,(e,r,a,o)=>{let s=a||n(r||""),i=o.replace(/\${/g,"___TEMPLATE_START___").replace(/}/g,"___TEMPLATE_END___").replace(/`/g,"___BACKTICK___"),c=i.trim().split("\n").map((e,n)=>'<span class="'.concat(m().lineNumber,'">').concat(n+1,"</span>")).join(""),l=t(i,r||"").replace(/___TEMPLATE_START___/g,"${").replace(/___TEMPLATE_END___/g,"}").replace(/___BACKTICK___/g,"`");return'\n        <div class="'.concat(m().codeBlockContainer,'">\n          <pre class="').concat(m().codeBlock,'" data-filename="').concat(s,'">\n            <div class="').concat(m().codeLineNumbers,'">').concat(c,'</div>\n            <div class="').concat(m().codeContent,'">').concat(l,'</div>\n            <button class="').concat(m().copyButton,'" title="Copy to clipboard">Copy</button>\n          </pre>\n        </div>\n      ')})).replace(/## ([^\n]+)/g,'<h2 class="'+m().docSubheading+'">$1</h2>').replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>").replace(/\*([^*]+)\*/g,"<em>$1</em>").replace(/- ([^\n]+)/g,"<li>$1</li>").replace(/(<li>[^<]+<\/li>(\s*)?)+/g,"<ul>$&</ul>")).split(/<pre class=/);for(let e=0;e<a.length;e++)0!==e&&a[e].includes("codeBlock")||(a[e]=a[e].replace(/\n\n/g,"<br><br>"));return a.join("<pre class=")}(l.content)}},u)]})})]})}function h(){let e=(0,o.useRouter)(),[n,t]=(0,a.useState)(!0),[l,d]=(0,a.useState)(!1),[h,_]=(0,a.useState)(""),[g,f]=(0,a.useState)("docs");return((0,a.useEffect)(()=>{let n=(0,c.hg)(i.j2,async n=>{if(!n)return void e.push("/login");try{let t=(0,s.H9)(i.db,"users",n.uid),r=await (0,s.x7)(t);if(r.exists()){let t=r.data(),a=t.role;"developer"===a||"admin"===a?(d(!0),_(t.name||n.displayName||n.email||"Developer")):e.push("/")}else e.push("/")}catch(n){console.error("Error checking user role:",n),e.push("/")}finally{t(!1)}});return()=>n()},[e]),n)?(0,r.jsx)("div",{className:m().container,children:(0,r.jsxs)("div",{className:m().loadingContainer,children:[(0,r.jsx)("div",{className:m().loadingSpinner}),(0,r.jsx)("p",{children:"Verifying access..."})]})}):l?(0,r.jsx)("div",{className:m().container,children:(0,r.jsxs)("div",{className:m().devDocsContainer,children:[(0,r.jsx)("h1",{className:m().devDocsTitle,children:"Developer Portal"}),(0,r.jsxs)("p",{className:m().devDocsWelcome,children:["Welcome, ",h,"! This page contains developer tools and documentation."]}),(0,r.jsxs)("div",{className:m().tabContainer,children:[(0,r.jsx)("button",{className:"".concat(m().tabButton," ").concat("docs"===g?m().activeTab:""),onClick:()=>f("docs"),children:"Documentation"}),(0,r.jsx)("button",{className:"".concat(m().tabButton," ").concat("users"===g?m().activeTab:""),onClick:()=>f("users"),children:"User Management"})]}),"docs"===g?(0,r.jsx)(p,{}):(0,r.jsx)(u,{})]})}):null}}},e=>{var n=n=>e(e.s=n);e.O(0,[4697,2992,7158,7117,8441,1684,7358],()=>n(8731)),_N_E=e.O()}]);