(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[268],{653:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var a=r(5155),i=r(2115),o=r(3023),s=r.n(o);let n=()=>{let[t,e]=(0,i.useState)(!1),[r,o]=(0,i.useState)(!1);(0,i.useEffect)(()=>{o(navigator.platform.toUpperCase().indexOf("MAC")>=0)},[]);let n=()=>{e(!t)};return(0,a.jsxs)("div",{className:s().shortcutsContainer,children:[(0,a.jsx)("button",{type:"button",onClick:n,className:s().shortcutsButton,title:"Keyboard Shortcuts",children:"⌨️"}),t&&(0,a.jsxs)("div",{className:s().shortcutsModal,children:[(0,a.jsxs)("div",{className:s().shortcutsHeader,children:[(0,a.jsxs)("h3",{children:["Keyboard Shortcuts ",r?"(macOS)":"(Windows/Linux)"]}),(0,a.jsx)("button",{type:"button",onClick:n,className:s().closeButton,children:"\xd7"})]}),(0,a.jsx)("div",{className:s().shortcutsList,children:[{name:"Bold",macKeys:["⌘","B"],winKeys:["Ctrl","B"],description:"Make text bold"},{name:"Italic",macKeys:["⌘","I"],winKeys:["Ctrl","I"],description:"Italicize text"},{name:"Code",macKeys:["⌘","E"],winKeys:["Ctrl","E"],description:"Format as code"},{name:"Link",macKeys:["⌘","K"],winKeys:["Ctrl","K"],description:"Create a hyperlink"},{name:"Image",macKeys:["⌘","Shift","I"],winKeys:["Ctrl","Shift","I"],description:"Insert an image"},{name:"Heading 1",macKeys:["⌘","Option","1"],winKeys:["Ctrl","Alt","1"],description:"Format as heading 1"},{name:"Heading 2",macKeys:["⌘","Option","2"],winKeys:["Ctrl","Alt","2"],description:"Format as heading 2"},{name:"Heading 3",macKeys:["⌘","Option","3"],winKeys:["Ctrl","Alt","3"],description:"Format as heading 3"},{name:"Bullet List",macKeys:["⌘","Shift","8"],winKeys:["Ctrl","Shift","8"],description:"Create bullet list"},{name:"Numbered List",macKeys:["⌘","Shift","7"],winKeys:["Ctrl","Shift","7"],description:"Create numbered list"},{name:"Clear Format",macKeys:["⌘","Shift","X"],winKeys:["Ctrl","Shift","X"],description:"Clear text formatting"},{name:"Paste with Format",macKeys:["⌘","Shift","V"],winKeys:["Ctrl","Shift","V"],description:"Paste with original formatting"},{name:"Paste as Plain",macKeys:["⌘","V"],winKeys:["Ctrl","V"],description:"Paste as plain text"}].map((t,e)=>(0,a.jsxs)("div",{className:s().shortcutItem,children:[(0,a.jsx)("div",{className:s().shortcutName,children:t.name}),(0,a.jsx)("div",{className:s().shortcutKeys,children:(r?t.macKeys:t.winKeys).map((e,i)=>(0,a.jsxs)("span",{className:s().keyboardKey,children:[e,i<(r?t.macKeys.length:t.winKeys.length)-1&&(0,a.jsx)("span",{className:s().keySeparator,children:"+"})]},i))}),(0,a.jsx)("div",{className:s().shortcutDescription,children:t.description})]},e))})]})]})}},824:t=>{t.exports={articleFormContainer:"ArticleForm_articleFormContainer__Oamhm",articleFormHeader:"ArticleForm_articleFormHeader__lPvz4",articleFormTitle:"ArticleForm_articleFormTitle__GQZ6U",articleFormSubtitle:"ArticleForm_articleFormSubtitle__d0K2B",articleForm:"ArticleForm_articleForm__aPoqs",formGroup:"ArticleForm_formGroup__NG8OF",formLabel:"ArticleForm_formLabel__DP5Fz",optionalLabel:"ArticleForm_optionalLabel__C_B1S",formControl:"ArticleForm_formControl__mBao_",formTextarea:"ArticleForm_formTextarea__ZsknF",editorToolbar:"ArticleForm_editorToolbar__IrlBb",toolbarButton:"ArticleForm_toolbarButton__pHHwN",activeButton:"ArticleForm_activeButton__YQm_y",richTextEditor:"ArticleForm_richTextEditor__FyiQb",formActions:"ArticleForm_formActions__WqypQ",cancelButton:"ArticleForm_cancelButton__OAgVI",submitButton:"ArticleForm_submitButton__o9hsW",errorAlert:"ArticleForm_errorAlert__1DQ3x",errorIcon:"ArticleForm_errorIcon___YV5p",imagePreview:"ArticleForm_imagePreview__92eKB",tagsPreview:"ArticleForm_tagsPreview__48G_v",tag:"ArticleForm_tag__MTDKK",statusDropdown:"ArticleForm_statusDropdown__FfXJV",characterCount:"ArticleForm_characterCount__IqdJb",characterWarning:"ArticleForm_characterWarning__ZKaNu",formHint:"ArticleForm_formHint__h9Deh",loading:"ArticleForm_loading__EUkeX",loadingSpinner:"ArticleForm_loadingSpinner__iaWlv",spin:"ArticleForm_spin__reKcv",toolbarSpacer:"ArticleForm_toolbarSpacer__J3Il4",pasteOptionsContainer:"ArticleForm_pasteOptionsContainer__cuLJK",fadeIn:"ArticleForm_fadeIn__0Fub5",pasteOptionsHeader:"ArticleForm_pasteOptionsHeader__Lto86",pasteOptionButton:"ArticleForm_pasteOptionButton__Yn36Q"}},3023:t=>{t.exports={shortcutsContainer:"KeyboardShortcutsHelp_shortcutsContainer__MXhO1",shortcutsButton:"KeyboardShortcutsHelp_shortcutsButton__SsEp1",shortcutsModal:"KeyboardShortcutsHelp_shortcutsModal__KZ29s",shortcutsHeader:"KeyboardShortcutsHelp_shortcutsHeader__NSSOU",closeButton:"KeyboardShortcutsHelp_closeButton__nLV6K",shortcutsList:"KeyboardShortcutsHelp_shortcutsList__CRB0P",shortcutItem:"KeyboardShortcutsHelp_shortcutItem__G4I3k",shortcutName:"KeyboardShortcutsHelp_shortcutName__a_amN",shortcutKeys:"KeyboardShortcutsHelp_shortcutKeys__a0SnO",keyboardKey:"KeyboardShortcutsHelp_keyboardKey__1_LrC",keySeparator:"KeyboardShortcutsHelp_keySeparator__kU_ns",shortcutDescription:"KeyboardShortcutsHelp_shortcutDescription__qPcO6"}},3201:(t,e,r)=>{"use strict";r.d(e,{db:()=>c,j2:()=>l});var a=r(3915),i=r(6864),o=r(6203),s=r(5317);let n=(0,a.Wp)({apiKey:"AIzaSyCFpybhLt43iKUw6lNahU1n2zjYv0BXmf4",authDomain:"journalitev1.firebaseapp.com",projectId:"journalitev1",storageBucket:"journalitev1.firebasestorage.app",messagingSenderId:"897263211529",appId:"1:897263211529:web:bae4a00910a2236d6d54d8",measurementId:"G-ZYT8PRMT0D"});try{(0,i.P5)(n)}catch(t){}let l=(0,o.xI)(n),c=(0,s.aU)(n);window.location.origin},5159:(t,e,r)=>{Promise.resolve().then(r.bind(r,9994))},9994:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>S});var a=r(5155),i=r(2115),o=r(5695),s=r(6203),n=r(3201),l=r(6874),c=r.n(l),d=r(9210),u=r(824),m=r.n(u),h=r(5109),p=r(5465),f=r(2073),_=r(2612),g=r(5523),y=r(1891),v=r(6761),b=r(653);let x=t=>{let{articleId:e}=t,[r,s]=(0,i.useState)(""),[l,u]=(0,i.useState)(""),[x,C]=(0,i.useState)(""),[j,N]=(0,i.useState)(""),[S,w]=(0,i.useState)("published"),[A,K]=(0,i.useState)(!1),[F,B]=(0,i.useState)(!0),[I,k]=(0,i.useState)(""),[H,L]=(0,i.useState)(0),[E,P]=(0,i.useState)(""),[O,U]=(0,i.useState)(!1),[M,D]=(0,i.useState)(""),T=(0,i.useRef)(null),G=(0,o.useRouter)(),[W,R]=(0,i.useState)(!1),[V,z]=(0,i.useState)(""),Z=["Use Cmd+B (Mac) or Ctrl+B (Windows) for bold text","Press Cmd+K (Mac) or Ctrl+K (Windows) to insert a link","You can create headings with Cmd+Option+1-3 (Mac) or Ctrl+Alt+1-3 (Windows)","Use bullet lists with Cmd+Shift+8 (Mac) or Ctrl+Shift+8 (Windows)","Press Cmd+Shift+I (Mac) or Ctrl+Shift+I (Windows) to insert an image"],J=(0,h.hG)({extensions:[p.A.configure({heading:{levels:[1,2,3]},bold:!1,italic:!1,code:!1}),f.Ay,_.Ay,g.Ay,y.Ay,v.N_.configure({openOnClick:!1})],content:"",onUpdate:t=>{let{editor:e}=t;u(e.getHTML()),L(e.getText().length)},enableInputRules:!0,enablePasteRules:!0,immediatelyRender:!1});(0,i.useEffect)(()=>()=>{null==J||J.destroy()},[J]),(0,i.useEffect)(()=>{"undefined"!=typeof navigator&&R(navigator.platform.toUpperCase().indexOf("MAC")>=0);let t=Math.floor(Math.random()*Z.length);z(Z[t])},[]),(0,i.useEffect)(()=>{let t=async()=>{try{var t;B(!0);let r=await (0,d.zE)(e);s(r.title),u(r.body),J&&!J.isDestroyed&&J.commands.setContent(r.body),C((null==(t=r.tags)?void 0:t.join(", "))||""),N(r.coverImage||""),w(r.status||"published"),P(r.slug||""),L(r.body.length)}catch(t){console.error("Error loading article:",t),k("Failed to load article data")}finally{B(!1)}};e&&J&&t()},[e,J]);let X=async t=>{if(t.preventDefault(),!r||!l)return void k("Title and content are required");if(!n.j2.currentUser)return void k("You must be logged in to edit an article");try{K(!0),k("");let t=x.split(",").map(t=>t.trim()).filter(t=>""!==t),a={title:r,body:l,tags:t,status:S};""!==j.trim()&&(a.coverImage=j);let i=await (0,d.iZ)(e,a);"published"===S?G.push("/articles?slug=".concat(i.slug)):G.push("/my-thoughts")}catch(t){console.error("Error updating article:",t),k("Failed to update article. Please try again.")}finally{K(!1)}},Y=(0,i.useCallback)(()=>{let t=window.prompt("URL");t&&(null==J||J.chain().focus().extendMarkRange("link").setLink({href:t}).run())},[J]),q=(0,i.useCallback)(()=>{let t=window.prompt("Image URL");t&&(null==J||J.chain().focus().setImage({src:t}).run())},[J]),Q=(0,i.useCallback)(async t=>{if(J){t.preventDefault();let e=t.clipboardData.getData("text/html"),r=t.clipboardData.getData("text/plain");e&&e.trim()?D(e):D(r),U(!0)}},[J]),$=(0,i.useCallback)(()=>{J&&M&&(M.includes("<"),J.commands.insertContent(M),U(!1))},[J,M]),tt=(0,i.useCallback)(()=>{if(J&&M){let t=M;if(M.startsWith("<")){let e=document.createElement("div");e.innerHTML=M,t=e.textContent||e.innerText||""}J.commands.insertContent(t),U(!1)}},[J,M]),te=(0,i.useCallback)(t=>{let e=W?t.metaKey:t.ctrlKey;e&&t.shiftKey&&"I"===t.key&&(t.preventDefault(),q()),O&&M&&(e&&t.shiftKey&&"V"===t.key&&(t.preventDefault(),$()),e&&t.shiftKey&&"X"===t.key&&(t.preventDefault(),tt()))},[q,O,M,$,tt,W]);return((0,i.useEffect)(()=>{let t=t=>{T.current&&!T.current.contains(t.target)&&U(!1)};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[]),F)?(0,a.jsx)("div",{className:m().articleFormContainer,children:(0,a.jsxs)("div",{className:m().loading,children:[(0,a.jsx)("div",{className:m().loadingSpinner}),(0,a.jsx)("span",{children:"Loading article data..."})]})}):(0,a.jsxs)("div",{className:m().articleFormContainer,children:[(0,a.jsxs)("div",{className:m().articleFormHeader,children:[(0,a.jsx)("h1",{className:m().articleFormTitle,children:"Edit Your Story"}),(0,a.jsx)("p",{className:m().articleFormSubtitle,children:"Refine your thoughts and make your article shine"})]}),I&&(0,a.jsxs)("div",{className:m().errorAlert,children:[(0,a.jsx)("span",{className:m().errorIcon,children:"⚠️"}),(0,a.jsx)("span",{children:I})]}),(0,a.jsxs)("form",{onSubmit:X,className:m().articleForm,children:[(0,a.jsxs)("div",{className:m().formGroup,children:[(0,a.jsx)("label",{htmlFor:"title",className:m().formLabel,children:"Title"}),(0,a.jsx)("input",{type:"text",id:"title",value:r,onChange:t=>s(t.target.value),required:!0,placeholder:"Enter a captivating title for your article...",className:m().formControl,maxLength:100}),(0,a.jsx)("div",{className:m().formHint,children:"A good title is clear, specific, and engaging"})]}),(0,a.jsxs)("div",{className:m().formGroup,children:[(0,a.jsxs)("label",{htmlFor:"coverImage",className:m().formLabel,children:["Cover Image URL ",(0,a.jsx)("span",{className:m().optionalLabel,children:"optional"})]}),(0,a.jsx)("input",{type:"url",id:"coverImage",value:j,onChange:t=>N(t.target.value),placeholder:"https://example.com/image.jpg",className:m().formControl}),(0,a.jsx)("div",{className:m().formHint,children:"A striking image can increase engagement with your article"}),j&&(0,a.jsx)("div",{className:m().imagePreview,children:(0,a.jsx)("img",{src:j,alt:"Cover preview"})})]}),(0,a.jsxs)("div",{className:m().formGroup,children:[(0,a.jsxs)("label",{htmlFor:"tags",className:m().formLabel,children:["Tags ",(0,a.jsx)("span",{className:m().optionalLabel,children:"comma separated"})]}),(0,a.jsx)("input",{type:"text",id:"tags",value:x,onChange:t=>C(t.target.value),placeholder:"technology, news, science, learning",className:m().formControl}),(0,a.jsx)("div",{className:m().formHint,children:"Tags help readers discover your content"}),x&&(0,a.jsx)("div",{className:m().tagsPreview,children:x.split(",").map((t,e)=>t.trim()&&(0,a.jsx)("span",{className:m().tag,children:t.trim()},e))})]}),(0,a.jsxs)("div",{className:"".concat(m().formGroup," ").concat(m().statusDropdown),children:[(0,a.jsx)("label",{htmlFor:"status",className:m().formLabel,children:"Status"}),(0,a.jsxs)("select",{id:"status",value:S,onChange:t=>w(t.target.value),className:m().formControl,children:[(0,a.jsx)("option",{value:"published",children:"Published (visible to everyone)"}),(0,a.jsx)("option",{value:"drafts",children:"Save as Draft (only visible to you)"})]}),(0,a.jsx)("div",{className:m().formHint,children:"published"===S?"Your article will be visible to all users":"Only you can see your draft until you publish it"})]}),(0,a.jsxs)("div",{className:m().formGroup,children:[(0,a.jsx)("label",{htmlFor:"body",className:m().formLabel,children:"Content"}),(0,a.jsxs)("div",{className:m().editorToolbar,children:[(0,a.jsx)("button",{type:"button",onClick:()=>null==J?void 0:J.chain().focus().toggleHeading({level:1}).run(),className:(null==J?void 0:J.isActive("heading",{level:1}))?m().activeButton:m().toolbarButton,title:"Heading 1 (".concat(W?"⌘+Option+1":"Ctrl+Alt+1",")"),children:"H1"}),(0,a.jsx)("button",{type:"button",onClick:()=>null==J?void 0:J.chain().focus().toggleHeading({level:2}).run(),className:(null==J?void 0:J.isActive("heading",{level:2}))?m().activeButton:m().toolbarButton,title:"Heading 2 (".concat(W?"⌘+Option+2":"Ctrl+Alt+2",")"),children:"H2"}),(0,a.jsx)("button",{type:"button",onClick:()=>null==J?void 0:J.chain().focus().toggleHeading({level:3}).run(),className:(null==J?void 0:J.isActive("heading",{level:3}))?m().activeButton:m().toolbarButton,title:"Heading 3 (".concat(W?"⌘+Option+3":"Ctrl+Alt+3",")"),children:"H3"}),(0,a.jsx)("button",{type:"button",onClick:()=>null==J?void 0:J.chain().focus().toggleBold().run(),className:(null==J?void 0:J.isActive("bold"))?m().activeButton:m().toolbarButton,title:"Bold (".concat(W?"⌘+B":"Ctrl+B",")"),children:"Bold"}),(0,a.jsx)("button",{type:"button",onClick:()=>null==J?void 0:J.chain().focus().toggleItalic().run(),className:(null==J?void 0:J.isActive("italic"))?m().activeButton:m().toolbarButton,title:"Italic (".concat(W?"⌘+I":"Ctrl+I",")"),children:"Italic"}),(0,a.jsx)("button",{type:"button",onClick:()=>null==J?void 0:J.chain().focus().toggleCode().run(),className:(null==J?void 0:J.isActive("code"))?m().activeButton:m().toolbarButton,title:"Code (".concat(W?"⌘+E":"Ctrl+E",")"),children:"Code"}),(0,a.jsx)("button",{type:"button",onClick:Y,className:(null==J?void 0:J.isActive("link"))?m().activeButton:m().toolbarButton,title:"Link (".concat(W?"⌘+K":"Ctrl+K",")"),children:"Link"}),(0,a.jsx)("button",{type:"button",onClick:q,className:m().toolbarButton,title:"Insert Image (".concat(W?"⌘+Shift+I":"Ctrl+Shift+I",")"),children:"Image"}),(0,a.jsx)("button",{type:"button",onClick:()=>null==J?void 0:J.chain().focus().toggleBulletList().run(),className:(null==J?void 0:J.isActive("bulletList"))?m().activeButton:m().toolbarButton,title:"Bullet List (".concat(W?"⌘+Shift+8":"Ctrl+Shift+8",")"),children:"Bullet List"}),(0,a.jsx)("button",{type:"button",onClick:()=>null==J?void 0:J.chain().focus().toggleOrderedList().run(),className:(null==J?void 0:J.isActive("orderedList"))?m().activeButton:m().toolbarButton,title:"Numbered List (".concat(W?"⌘+Shift+7":"Ctrl+Shift+7",")"),children:"Numbered List"}),(0,a.jsx)("div",{className:m().toolbarSpacer}),(0,a.jsx)(b.A,{})]}),(0,a.jsx)(h.$Z,{editor:J,className:m().richTextEditor,onKeyDown:te,onPaste:Q}),O&&(0,a.jsxs)("div",{ref:T,className:m().pasteOptionsContainer,children:[(0,a.jsx)("div",{className:m().pasteOptionsHeader,children:"Paste Options"}),(0,a.jsxs)("button",{type:"button",className:m().pasteOptionButton,onClick:$,children:["Keep Formatting (",W?"⌘+Shift+V":"Ctrl+Shift+V",")"]}),(0,a.jsxs)("button",{type:"button",className:m().pasteOptionButton,onClick:tt,children:["Paste as Plain Text (",W?"⌘+Shift+X":"Ctrl+Shift+X",")"]})]}),(0,a.jsx)("div",{className:m().characterCount,children:(0,a.jsxs)("span",{className:H>3e3?m().characterWarning:"",children:[H," characters"]})}),(0,a.jsx)("div",{className:m().formHint,children:(0,a.jsxs)("span",{children:["✨ Tip: ",V]})})]}),(0,a.jsxs)("div",{className:m().formActions,children:[(0,a.jsx)(c(),{href:"/my-thoughts",className:m().cancelButton,children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:m().submitButton,disabled:A,children:A?"Saving changes...":"Save changes"})]})]})]})};var C=r(8163),j=r.n(C);function N(){let t=(0,o.useSearchParams)(),e=(null==t?void 0:t.get("id"))||"",[r,l]=(0,i.useState)(!1),[c,d]=(0,i.useState)(!0),u=(0,o.useRouter)();return((0,i.useEffect)(()=>{let t=(0,s.hg)(n.j2,t=>{let r=!!t;l(r),d(!1),r||u.push("/login?redirect=/edit-article?id=".concat(e))});return()=>t()},[e,u]),(0,i.useEffect)(()=>{c||!r||e||u.push("/my-thoughts")},[e,r,c,u]),c)?(0,a.jsx)("div",{className:j().container,children:(0,a.jsx)("div",{className:j().loading,children:"Loading..."})}):r?e?(0,a.jsx)(x,{articleId:e}):(0,a.jsx)("div",{className:j().container,children:(0,a.jsx)("div",{className:j().loading,children:"No article ID provided."})}):(0,a.jsx)("div",{className:j().container,children:(0,a.jsx)("div",{className:j().loading,children:"Please log in to edit articles."})})}function S(){return(0,a.jsx)(i.Suspense,{fallback:(0,a.jsx)("div",{className:j().container,children:(0,a.jsx)("div",{className:j().loading,children:"Loading..."})}),children:(0,a.jsx)(N,{})})}},9995:(t,e,r)=>{"use strict";r.d(e,{Hs:()=>u,N9:()=>s,Ss:()=>n,bA:()=>l,fP:()=>d,fZ:()=>o,he:()=>c});var a=r(5317),i=r(3201);async function o(t,e,r,o,s,n){try{let e=i.j2.currentUser;if(!e||e.uid===t)return null;let l={userId:t,type:"comment",read:!1,sourceId:s,sourceType:"comment",message:"".concat(e.displayName||"Someone",' commented on your article: "').concat(n.substring(0,50)).concat(n.length>50?"...":"",'"'),fromUser:{id:e.uid,name:e.displayName||"Anonymous"},createdAt:a.Dc.now(),articleSlug:r,articleTitle:o};return{id:(await (0,a.gS)((0,a.rJ)(i.db,"notifications"),l)).id,...l}}catch(t){return console.error("Error creating notification:",t),null}}async function s(t,e,r,o){try{if(t===r)return null;let s={userId:t,type:"follow",read:!1,sourceId:r,sourceType:"user",message:"".concat(e," (@").concat(o,") started following you"),fromUser:{id:r,name:e,username:o},createdAt:a.Dc.now()};return{id:(await (0,a.gS)((0,a.rJ)(i.db,"notifications"),s)).id,...s}}catch(t){return console.error("Error creating follow notification:",t),null}}async function n(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{let e,r=i.j2.currentUser;if(!r)throw Error("User not authenticated");let o=(0,a.rJ)(i.db,"notifications");e=t?(0,a.P)(o,(0,a._M)("userId","==",r.uid),(0,a._M)("read","==",!1),(0,a.My)("createdAt","desc"),(0,a.AB)(100)):(0,a.P)(o,(0,a._M)("userId","==",r.uid),(0,a.My)("createdAt","desc"),(0,a.AB)(100));let s=await (0,a.GG)(e),n=[];return s.forEach(t=>{n.push({id:t.id,...t.data()})}),n}catch(t){throw console.error("Error fetching notifications:",t),t}}async function l(t){try{let e=i.j2.currentUser;if(!e)throw Error("User not authenticated");let r=(0,a.H9)(i.db,"notifications",t),o=await (0,a.x7)(r);if(!o.exists())throw Error("Notification not found");if(o.data().userId!==e.uid)throw Error("Unauthorized access to notification");return await (0,a.mZ)(r,{read:!0}),{success:!0}}catch(t){throw console.error("Error marking notification as read:",t),t}}async function c(){try{let t=i.j2.currentUser;if(!t)throw Error("User not authenticated");let e=(0,a.rJ)(i.db,"notifications"),r=(0,a.P)(e,(0,a._M)("userId","==",t.uid),(0,a._M)("read","==",!1)),o=await (0,a.GG)(r),s=o.docs.map(t=>(0,a.mZ)(t.ref,{read:!0}));return await Promise.all(s),{success:!0,count:o.size}}catch(t){throw console.error("Error marking all notifications as read:",t),t}}async function d(t){try{let e=i.j2.currentUser;if(!e)throw Error("User not authenticated");let r=(0,a.H9)(i.db,"notifications",t),o=await (0,a.x7)(r);if(!o.exists())throw Error("Notification not found");if(o.data().userId!==e.uid)throw Error("Unauthorized access to notification");return await (0,a.kd)(r),{success:!0}}catch(t){throw console.error("Error deleting notification:",t),t}}async function u(){try{let t=i.j2.currentUser;if(!t)return 0;let e=(0,a.rJ)(i.db,"notifications"),r=(0,a.P)(e,(0,a._M)("userId","==",t.uid),(0,a._M)("read","==",!1));return(await (0,a.GG)(r)).size}catch(t){return console.error("Error counting unread notifications:",t),0}}}},t=>{var e=e=>t(t.s=e);t.O(0,[7522,2992,7158,5004,277,7117,6874,7547,4692,8441,1684,7358],()=>e(5159)),_N_E=t.O()}]);