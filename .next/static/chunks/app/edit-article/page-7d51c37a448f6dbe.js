(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[268],{824:e=>{e.exports={articleFormContainer:"ArticleForm_articleFormContainer__Oamhm",articleFormHeader:"ArticleForm_articleFormHeader__lPvz4",articleFormTitle:"ArticleForm_articleFormTitle__GQZ6U",articleFormSubtitle:"ArticleForm_articleFormSubtitle__d0K2B",articleForm:"ArticleForm_articleForm__aPoqs",formGroup:"ArticleForm_formGroup__NG8OF",formLabel:"ArticleForm_formLabel__DP5Fz",optionalLabel:"ArticleForm_optionalLabel__C_B1S",formControl:"ArticleForm_formControl__mBao_",formTextarea:"ArticleForm_formTextarea__ZsknF",formActions:"ArticleForm_formActions__WqypQ",cancelButton:"ArticleForm_cancelButton__OAgVI",submitButton:"ArticleForm_submitButton__o9hsW",errorAlert:"ArticleForm_errorAlert__1DQ3x",errorIcon:"ArticleForm_errorIcon___YV5p",imagePreview:"ArticleForm_imagePreview__92eKB",tagsPreview:"ArticleForm_tagsPreview__48G_v",tag:"ArticleForm_tag__MTDKK",statusDropdown:"ArticleForm_statusDropdown__FfXJV",characterCount:"ArticleForm_characterCount__IqdJb",characterWarning:"ArticleForm_characterWarning__ZKaNu",formHint:"ArticleForm_formHint__h9Deh",loading:"ArticleForm_loading__EUkeX",loadingSpinner:"ArticleForm_loadingSpinner__iaWlv",spin:"ArticleForm_spin__reKcv"}},5159:(e,r,a)=>{Promise.resolve().then(a.bind(a,9994))},5695:(e,r,a)=>{"use strict";var t=a(8999);a.o(t,"useRouter")&&a.d(r,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(r,{useSearchParams:function(){return t.useSearchParams}})},9994:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>v});var t=a(5155),l=a(2115),i=a(5695),s=a(6203),o=a(3201),c=a(6874),n=a.n(c),m=a(9210),d=a(824),u=a.n(d);let h=e=>{let{articleId:r}=e,[a,s]=(0,l.useState)(""),[c,d]=(0,l.useState)(""),[h,g]=(0,l.useState)(""),[_,p]=(0,l.useState)(""),[v,f]=(0,l.useState)("published"),[x,j]=(0,l.useState)(!1),[N,F]=(0,l.useState)(!0),[b,y]=(0,l.useState)(""),[A,S]=(0,l.useState)(0),[C,w]=(0,l.useState)(""),P=(0,i.useRouter)();(0,l.useEffect)(()=>{S(c.length)},[c]),(0,l.useEffect)(()=>{let e=async()=>{try{var e;F(!0);let a=await (0,m.zE)(r);s(a.title),d(a.body),g((null==(e=a.tags)?void 0:e.join(", "))||""),p(a.coverImage||""),f(a.status||"published"),w(a.slug||""),S(a.body.length)}catch(e){console.error("Error loading article:",e),y("Failed to load article data")}finally{F(!1)}};r&&e()},[r]);let L=async e=>{if(e.preventDefault(),!a||!c)return void y("Title and content are required");if(!o.j2.currentUser)return void y("You must be logged in to edit an article");try{j(!0),y("");let e=h.split(",").map(e=>e.trim()).filter(e=>""!==e),t={title:a,body:c,tags:e,status:v};""!==_.trim()&&(t.coverImage=_);let l=await (0,m.iZ)(r,t);"published"===v?P.push("/articles?slug=".concat(l.slug)):P.push("/my-thoughts")}catch(e){console.error("Error updating article:",e),y("Failed to update article. Please try again.")}finally{j(!1)}},E=["Consider adding more details to make your content more engaging","Re-read your article for clarity before publishing","Use descriptive language to paint a picture for your readers","Update your tags to reach a wider audience"],I=E[Math.floor(Math.random()*E.length)];return N?(0,t.jsx)("div",{className:u().articleFormContainer,children:(0,t.jsxs)("div",{className:u().loading,children:[(0,t.jsx)("div",{className:u().loadingSpinner}),(0,t.jsx)("span",{children:"Loading article data..."})]})}):(0,t.jsxs)("div",{className:u().articleFormContainer,children:[(0,t.jsxs)("div",{className:u().articleFormHeader,children:[(0,t.jsx)("h1",{className:u().articleFormTitle,children:"Edit Your Story"}),(0,t.jsx)("p",{className:u().articleFormSubtitle,children:"Refine your thoughts and make your article shine"})]}),b&&(0,t.jsxs)("div",{className:u().errorAlert,children:[(0,t.jsx)("span",{className:u().errorIcon,children:"⚠️"}),(0,t.jsx)("span",{children:b})]}),(0,t.jsxs)("form",{onSubmit:L,className:u().articleForm,children:[(0,t.jsxs)("div",{className:u().formGroup,children:[(0,t.jsx)("label",{htmlFor:"title",className:u().formLabel,children:"Title"}),(0,t.jsx)("input",{type:"text",id:"title",value:a,onChange:e=>s(e.target.value),required:!0,placeholder:"Enter a captivating title for your article...",className:u().formControl,maxLength:100}),(0,t.jsx)("div",{className:u().formHint,children:"A good title is clear, specific, and engaging"})]}),(0,t.jsxs)("div",{className:u().formGroup,children:[(0,t.jsxs)("label",{htmlFor:"coverImage",className:u().formLabel,children:["Cover Image URL ",(0,t.jsx)("span",{className:u().optionalLabel,children:"optional"})]}),(0,t.jsx)("input",{type:"url",id:"coverImage",value:_,onChange:e=>p(e.target.value),placeholder:"https://example.com/image.jpg",className:u().formControl}),(0,t.jsx)("div",{className:u().formHint,children:"A striking image can increase engagement with your article"}),_&&(0,t.jsx)("div",{className:u().imagePreview,children:(0,t.jsx)("img",{src:_,alt:"Cover preview"})})]}),(0,t.jsxs)("div",{className:u().formGroup,children:[(0,t.jsxs)("label",{htmlFor:"tags",className:u().formLabel,children:["Tags ",(0,t.jsx)("span",{className:u().optionalLabel,children:"comma separated"})]}),(0,t.jsx)("input",{type:"text",id:"tags",value:h,onChange:e=>g(e.target.value),placeholder:"technology, news, science, learning",className:u().formControl}),(0,t.jsx)("div",{className:u().formHint,children:"Tags help readers discover your content"}),h&&(0,t.jsx)("div",{className:u().tagsPreview,children:h.split(",").map((e,r)=>e.trim()&&(0,t.jsx)("span",{className:u().tag,children:e.trim()},r))})]}),(0,t.jsxs)("div",{className:"".concat(u().formGroup," ").concat(u().statusDropdown),children:[(0,t.jsx)("label",{htmlFor:"status",className:u().formLabel,children:"Status"}),(0,t.jsxs)("select",{id:"status",value:v,onChange:e=>f(e.target.value),className:u().formControl,children:[(0,t.jsx)("option",{value:"published",children:"Published (visible to everyone)"}),(0,t.jsx)("option",{value:"drafts",children:"Save as Draft (only visible to you)"})]}),(0,t.jsx)("div",{className:u().formHint,children:"published"===v?"Your article will be visible to all users":"Only you can see your draft until you publish it"})]}),(0,t.jsxs)("div",{className:u().formGroup,children:[(0,t.jsx)("label",{htmlFor:"body",className:u().formLabel,children:"Content"}),(0,t.jsx)("textarea",{id:"body",value:c,onChange:e=>d(e.target.value),required:!0,placeholder:"Write your article content here. Provide valuable insights, share your experience, or tell a compelling story...",className:u().formTextarea,rows:15}),(0,t.jsx)("div",{className:u().characterCount,children:(0,t.jsxs)("span",{className:A>3e3?u().characterWarning:"",children:[A," characters"]})}),(0,t.jsx)("div",{className:u().formHint,children:(0,t.jsxs)("span",{children:["✨ Tip: ",I]})})]}),(0,t.jsxs)("div",{className:u().formActions,children:[(0,t.jsx)(n(),{href:"/my-thoughts",className:u().cancelButton,children:"Cancel"}),(0,t.jsx)("button",{type:"submit",className:u().submitButton,disabled:x,children:x?"Saving...":"Save Changes"})]})]})]})};var g=a(8163),_=a.n(g);function p(){let e=(0,i.useSearchParams)(),r=(null==e?void 0:e.get("id"))||"",[a,c]=(0,l.useState)(!1),[n,m]=(0,l.useState)(!0),d=(0,i.useRouter)();return((0,l.useEffect)(()=>{let e=(0,s.hg)(o.j2,e=>{let a=!!e;c(a),m(!1),a||d.push("/login?redirect=/edit-article?id=".concat(r))});return()=>e()},[r,d]),(0,l.useEffect)(()=>{n||!a||r||d.push("/my-thoughts")},[r,a,n,d]),n)?(0,t.jsx)("div",{className:_().container,children:(0,t.jsx)("div",{className:_().loading,children:"Loading..."})}):a?r?(0,t.jsx)(h,{articleId:r}):(0,t.jsx)("div",{className:_().container,children:(0,t.jsx)("div",{className:_().loading,children:"No article ID provided."})}):(0,t.jsx)("div",{className:_().container,children:(0,t.jsx)("div",{className:_().loading,children:"Please log in to edit articles."})})}function v(){return(0,t.jsx)(l.Suspense,{fallback:(0,t.jsx)("div",{className:_().container,children:(0,t.jsx)("div",{className:_().loading,children:"Loading..."})}),children:(0,t.jsx)(p,{})})}}},e=>{var r=r=>e(e.s=r);e.O(0,[697,992,158,874,117,692,441,684,358],()=>r(5159)),_N_E=e.O()}]);