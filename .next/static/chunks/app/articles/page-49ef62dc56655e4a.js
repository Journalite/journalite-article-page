(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5292],{2150:e=>{e.exports={overlay:"ShareModal_overlay__mFMD2",fadeIn:"ShareModal_fadeIn__BufZR",modal:"ShareModal_modal__hI3re",scaleUp:"ShareModal_scaleUp__QvIvd",closeButton:"ShareModal_closeButton__cSvPo",title:"ShareModal_title__RnN7z",articlePreview:"ShareModal_articlePreview__cHPE3",articleImage:"ShareModal_articleImage__W3ocW",articleTitlePreview:"ShareModal_articleTitlePreview__yiD9c",articleExcerptPreview:"ShareModal_articleExcerptPreview__uarLq",shareActions:"ShareModal_shareActions__a06HV",copyLinkContainer:"ShareModal_copyLinkContainer__gAJH2",urlInput:"ShareModal_urlInput__GXoUR",copyButton:"ShareModal_copyButton__UmpX1",shareViaText:"ShareModal_shareViaText__rRHkO",socialIcons:"ShareModal_socialIcons__OPqr0"}},3484:()=>{},5377:e=>{e.exports={commentSection:"comment_commentSection__SP_jS",commentSectionTitle:"comment_commentSectionTitle__F_Jxe",commentError:"comment_commentError__A2v6U",commentForm:"comment_commentForm__U8b7X",commentInputContainer:"comment_commentInputContainer__3WsSp",loginPromptContainer:"comment_loginPromptContainer__X4aZr",commentAvatar:"comment_commentAvatar__uav6Q",replyAvatar:"comment_replyAvatar__dIlrw",commentInput:"comment_commentInput__4DHa1",replyInput:"comment_replyInput__8t_ho",commentSubmit:"comment_commentSubmit__UfvUF",replySubmit:"comment_replySubmit__2eCP7",loginButton:"comment_loginButton__4encR",loginModalOverlay:"comment_loginModalOverlay__Pk_AM",loginModal:"comment_loginModal__n984X",loginModalClose:"comment_loginModalClose__v02Rx",loginModalTitle:"comment_loginModalTitle__nZpZB",loginModalText:"comment_loginModalText__XwRn6",loginModalButtons:"comment_loginModalButtons__XdVNl",loginModalButton:"comment_loginModalButton__d8Bnr",primary:"comment_primary__1UIRJ",secondary:"comment_secondary__zc89j",commentLoading:"comment_commentLoading___WYvK",loadingDots:"comment_loadingDots___Lw2B",loadingDot:"comment_loadingDot__skUEk",pulse:"comment_pulse__czQlg",noComments:"comment_noComments__U9FG6",commentsList:"comment_commentsList__ZRMbc",commentItem:"comment_commentItem__Vx48l",commentHeader:"comment_commentHeader__3oOD6",commentUser:"comment_commentUser__QP5pY",commentDate:"comment_commentDate__5zfpn",commentContent:"comment_commentContent__DiE8h",commentActions:"comment_commentActions___Wpzi",commentLikeBtn:"comment_commentLikeBtn__wAYZO",replyToggle:"comment_replyToggle__bCRZg",commentDeleteBtn:"comment_commentDeleteBtn__BnLQc",liked:"comment_liked__2yWZ9",repliesToggle:"comment_repliesToggle__yepDc",repliesToggleIcon:"comment_repliesToggleIcon__EZRkK",open:"comment_open__cpLDc",replySection:"comment_replySection__mAqn4",replyItem:"comment_replyItem__ndhqf",replyHeader:"comment_replyHeader__Y2bUK",replyUser:"comment_replyUser__rw4V8",replyDate:"comment_replyDate__4Jafb",replyContent:"comment_replyContent__uV2jp",replyForm:"comment_replyForm__aYyum",inThread:"comment_inThread__lUoKT",replyButtons:"comment_replyButtons__KRGyv",replyCancel:"comment_replyCancel__od7Vq"}},7560:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>U});var a=n(5155),r=n(2115),o=n(6874),l=n.n(o),s=n(5695),c=n(8163),i=n.n(c),m=n(3201),d=n(6203),h=n(350),u=n(9478),p=n(9210),g=n(792),_=n(6766),x=n(5377),v=n.n(x);let j=e=>{let{slug:t}=e,[n,o]=(0,r.useState)([]),[s,c]=(0,r.useState)(!0),[i,h]=(0,r.useState)(""),[u,g]=(0,r.useState)(""),[_,x]=(0,r.useState)(!1),[j,y]=(0,r.useState)(!1),[f,w]=(0,r.useState)(null),[N,C]=(0,r.useState)(""),[b,k]=(0,r.useState)(!1),[S,I]=(0,r.useState)({}),[M,A]=(0,r.useState)(!1),[L,T]=(0,r.useState)(!1),[U,B]=(0,r.useState)(null),[E,D]=(0,r.useState)({id:"",name:"Reader"});(0,r.useEffect)(()=>{let e=(0,d.hg)(m.j2,e=>{let t=!!e;if(A(t),t&&e){var n;D({id:e.uid,name:e.displayName||(null==(n=e.email)?void 0:n.split("@")[0])||"User"})}else D({id:"",name:"Reader"})});return()=>e()},[]),(0,r.useEffect)(()=>{t&&(async()=>{try{let e=await (0,p.l6)(t);e&&e.id&&B(e.id)}catch(e){console.error("Error fetching article:",e),h("Unable to load article details.")}})()},[t]),(0,r.useEffect)(()=>{U&&(c(!0),(async()=>{try{let e=await (0,p.fz)(U);setTimeout(()=>{o(e),c(!1)},800)}catch(e){console.error("Error fetching comments:",e),h("Unable to load discussions. Please refresh the page to try again."),c(!1)}})())},[U]);let P=async e=>{if(e.preventDefault(),u.trim()&&!_&&U){if(!M)return void T(!0);try{x(!0);let e=await (0,p.BC)(U,u);o(t=>[e,...t]),g(""),x(!1),y(!1)}catch(e){console.error("Error adding comment:",e),h("Your response could not be posted. Please try again."),x(!1)}}},R=async e=>{if(N.trim()&&!b&&U){if(!M)return void T(!0);try{k(!0);let t=await (0,p.Oe)(U,e,N);o(n=>n.map(n=>n.commentId===e||n.id===e?{...n,replies:[...n.replies||[],t]}:n)),C(""),w(null),k(!1),I(t=>({...t,[e]:!0}))}catch(e){console.error("Error adding reply:",e),k(!1)}}},z=async e=>{if(!M||!U)return void T(!0);try{let t=await (0,p.tT)(U,e);o(n=>n.map(n=>n.commentId===e||n.id===e?{...n,likes:t.likes}:n))}catch(e){console.error("Error liking comment:",e)}},O=async e=>{if(M&&U)try{await (0,p.Tu)(U,e),o(t=>t.filter(t=>t.commentId!==e&&t.id!==e))}catch(e){console.error("Error deleting comment:",e)}},H=e=>{I(t=>({...t,[e]:!t[e]}))},F=e=>{if(!e)return"Unknown date";let t=e.toDate?e.toDate():new Date(e),n=Math.floor((new Date().getTime()-t.getTime())/1e3);if(n<60)return"Just now";if(n<3600){let e=Math.floor(n/60);return"".concat(e," ").concat(1===e?"minute":"minutes"," ago")}if(n<86400){let e=Math.floor(n/3600);return"".concat(e," ").concat(1===e?"hour":"hours"," ago")}if(n<604800){let e=Math.floor(n/86400);return"".concat(e," ").concat(1===e?"day":"days"," ago")}try{return t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",timeZone:"UTC"})}catch(e){return console.error("Error formatting date:",e),"Unknown date"}},W=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=(null==e?void 0:e.charAt(0).toUpperCase())||"A",o=["#4f46e5","#0ea5e9","#10b981","#f59e0b","#ef4444"],l=t?Math.abs(t.charCodeAt(0)%o.length):0,s=o[l];return(0,a.jsx)("div",{className:n?v().replyAvatar:v().commentAvatar,style:{backgroundColor:s,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:n?"0.9rem":"1.2rem"},children:r})};return(0,a.jsxs)("section",{className:v().commentSection,children:[(0,a.jsx)("h2",{className:v().commentSectionTitle,children:"Join the Discussion"}),i&&(0,a.jsxs)("div",{className:v().commentError,children:[(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),(0,a.jsx)("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),i]}),(0,a.jsx)("form",{className:v().commentForm,onSubmit:P,children:(0,a.jsx)("div",{className:v().commentInputContainer,style:{opacity:j?1:.85},children:M?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:v().commentAvatar,children:W(E.name,E.id)}),(0,a.jsx)("textarea",{className:v().commentInput,placeholder:"Share your thoughts...",value:u,onChange:e=>g(e.target.value),onFocus:()=>y(!0),onBlur:()=>{u.trim()||y(!1)}}),(0,a.jsx)("button",{className:v().commentSubmit,type:"submit",disabled:!u.trim()||_,children:_?"Posting...":"Post"})]}):(0,a.jsxs)("div",{className:v().loginPromptContainer,onClick:()=>T(!0),children:[(0,a.jsx)("textarea",{className:v().commentInput,placeholder:"Login to join the discussion...",disabled:!0}),(0,a.jsx)("button",{className:"".concat(v().commentSubmit," ").concat(v().loginButton),type:"button",onClick:()=>T(!0),children:"Login to comment"})]})})}),L&&(0,a.jsx)("div",{className:v().loginModalOverlay,onClick:()=>T(!1),children:(0,a.jsxs)("div",{className:v().loginModal,onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("button",{className:v().loginModalClose,onClick:()=>T(!1),children:"\xd7"}),(0,a.jsx)("h3",{className:v().loginModalTitle,children:"Join the conversation"}),(0,a.jsx)("p",{className:v().loginModalText,children:"Sign in to Journalite to share your thoughts and join the discussion."}),(0,a.jsxs)("div",{className:v().loginModalButtons,children:[(0,a.jsx)(l(),{href:"/login",className:"".concat(v().loginModalButton," ").concat(v().primary),children:"Log In"}),(0,a.jsx)(l(),{href:"/register",className:"".concat(v().loginModalButton," ").concat(v().secondary),children:"Create Account"})]})]})}),s?(0,a.jsxs)("div",{className:v().commentLoading,children:[(0,a.jsx)("p",{children:"Loading comments..."}),(0,a.jsxs)("div",{className:v().loadingDots,children:[(0,a.jsx)("div",{className:v().loadingDot}),(0,a.jsx)("div",{className:v().loadingDot}),(0,a.jsx)("div",{className:v().loadingDot})]})]}):0===n.length?(0,a.jsx)("div",{className:v().noComments,children:"Be the first to share your thoughts on this article."}):(0,a.jsx)("div",{className:v().commentsList,children:n.map(e=>{let t=e.commentId||e.id||"";return(0,a.jsxs)("div",{className:v().commentItem,children:[(0,a.jsxs)("div",{className:v().commentHeader,children:[W(e.userName,e.userId),(0,a.jsx)("span",{className:v().commentUser,children:e.userName}),(0,a.jsx)("span",{className:v().commentDate,children:F(e.createdAt)})]}),(0,a.jsx)("div",{className:v().commentContent,children:e.content}),(0,a.jsxs)("div",{className:v().commentActions,children:[(0,a.jsxs)("button",{className:"".concat(v().commentLikeBtn," ").concat(e.likes.includes(E.id)?v().liked:""),onClick:()=>z(t),"aria-pressed":e.likes.includes(E.id),"aria-label":e.likes.includes(E.id)?"Unlike comment":"Like comment",children:[e.likes.includes(E.id)?(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:(0,a.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}):(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-4 h-4",children:(0,a.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"})}),(0,a.jsx)("span",{children:e.likes.length>0?e.likes.length:""})]}),(0,a.jsxs)("button",{className:v().replyToggle,onClick:()=>{M?w(f===t?null:t):T(!0)},"aria-label":"Reply to comment",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-4 h-4",children:(0,a.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"})}),(0,a.jsx)("span",{children:"Reply"})]}),e.userId===E.id&&(0,a.jsxs)("button",{className:v().commentDeleteBtn,onClick:()=>O(t),"aria-label":"Delete comment",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-4 h-4",children:(0,a.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12.56 0c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09.996-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),(0,a.jsx)("span",{children:"Delete"})]})]}),e.replies&&e.replies.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{className:v().repliesToggle,onClick:()=>H(t),children:[(0,a.jsx)("span",{className:"".concat(v().repliesToggleIcon," ").concat(S[t]?v().open:""),children:"▷"}),"".concat(e.replies.length," ").concat(1===e.replies.length?"reply":"replies")]}),S[t]&&(0,a.jsx)("div",{className:v().replySection,children:e.replies.map(e=>(0,a.jsxs)("div",{className:v().replyItem,children:[(0,a.jsxs)("div",{className:v().replyHeader,children:[W(e.userName,e.userId,!0),(0,a.jsx)("span",{className:v().replyUser,children:e.userName}),(0,a.jsx)("span",{className:v().replyDate,children:F(e.createdAt)})]}),(0,a.jsx)("div",{className:v().replyContent,children:e.content})]},e.replyId))})]}),f===t&&(0,a.jsxs)("div",{className:"".concat(v().replyForm," ").concat(e.replies&&e.replies.length>0?v().inThread:""),children:[(0,a.jsx)("textarea",{className:v().replyInput,placeholder:"Write a reply...",value:N,onChange:e=>C(e.target.value)}),(0,a.jsxs)("div",{className:v().replyButtons,children:[(0,a.jsx)("button",{className:v().replyCancel,onClick:()=>{w(null),C("")},children:"Cancel"}),(0,a.jsx)("button",{className:v().replySubmit,disabled:!N.trim()||b,onClick:()=>R(t),children:b?"Posting...":"Post Reply"})]})]})]},t)})})]})};var y=n(9576),f=n(5317),w=n(8126),N=n.n(w);n(3484);let C=e=>{if(!e)return"";if("undefined"!=typeof document){let t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""}return e.replace(/<[^>]*>/g,"")},b=e=>{try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",timeZone:"UTC"})}catch(t){return console.error("Error formatting date:",t),e}},k=e=>!!e&&"string"==typeof e&&(/<\/?(?:p|div|span|h[1-6]|ul|ol|li|a|strong|em|hr|br|img|blockquote|code|pre|table|tr|td|th)[^>]*>/i.test(e)||/&[a-z]+;|&#[0-9]+;/i.test(e)),S=e=>encodeURIComponent((e||"").trim().toLowerCase()),I=e=>null!==e&&"object"==typeof e&&"string"==typeof e.id&&Array.isArray(e.content),M=e=>null!==e&&"object"==typeof e&&"string"==typeof e.id&&"string"==typeof e.body&&!Array.isArray(e.content),A=e=>{var t;let{article:n}=e,[o,s]=(0,r.useState)({}),c=(0,r.useRef)({}),d=n.id,[h,u]=(0,r.useState)(!1),[p,x]=(0,r.useState)(null),[v,w]=(0,r.useState)(!1),[A,L]=(0,r.useState)((null==(t=n.likes)?void 0:t.length)||0),[T,U]=(0,r.useState)("https://mvp.journalite.app/");(0,r.useEffect)(()=>{let e=m.j2.onAuthStateChanged(e=>{x(e)});return()=>e()},[]),(0,r.useEffect)(()=>{let e=n.likes||[];p&&w(e.includes(p.uid)),L(e.length)},[n.likes,p]);let B=async()=>{if(!p)return void alert("Please log in to like articles.");if(!d)return void console.error("Article ID is missing.");let e=(0,f.H9)(m.db,"articles",d);try{v?(await (0,f.mZ)(e,{likes:(0,f.C3)(p.uid)}),w(!1),L(e=>Math.max(0,e-1))):(await (0,f.mZ)(e,{likes:(0,f.hq)(p.uid)}),w(!0),L(e=>e+1))}catch(e){console.error("Error updating like status: ",e),alert("Failed to update like status. Please try again.")}},E=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:150;if(n.excerpt)return C(n.excerpt).substring(0,e)+(C(n.excerpt).length>e?"...":"");let t="";I(n)&&n.content.length>0?t=n.content[0].text:M(n)&&(t=n.body);let a=C(t);return a.length<=e?a:a.substring(0,e).trim()+"..."},D=()=>{u(!0)};if((0,r.useEffect)(()=>{if(!I(n))return;let e=n.content.reduce((e,t)=>(e[t.paragraphId]=!0,e),{}),t=setTimeout(()=>s(e),100);return()=>clearTimeout(t)},[n]),(0,r.useEffect)(()=>{if(!I(n))return;let e=new IntersectionObserver(e=>{e.forEach(e=>{let t=e.target.getAttribute("data-paragraph-id");t&&e.isIntersecting&&s(e=>({...e,[t]:!0}))})},{threshold:.3,rootMargin:"-30px 0px"}),t={...c.current};return Object.values(t).forEach(t=>{t&&e.observe(t)}),()=>{Object.values(t).forEach(t=>{t&&e.unobserve(t)})}},[n]),!d)return(0,a.jsx)("div",{className:"article-error",children:"Article data is incomplete (missing ID)."});if(!M(n)&&!I(n))return console.warn("Article format not supported, article object:",n),(0,a.jsx)("div",{className:"article-error",children:"Article format not supported or missing ID."});let P="".concat(T,"/articles?slug=").concat(encodeURIComponent(n.slug)),R=n.title,z=E(100),O=n.coverImageUrl||"".concat(T,"/default-journalite-og-image.png");return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(N(),{children:[(0,a.jsxs)("title",{children:[R," | Journalite"]}),(0,a.jsx)("meta",{property:"og:title",content:R}),(0,a.jsx)("meta",{property:"og:description",content:z}),(0,a.jsx)("meta",{property:"og:image",content:O}),(0,a.jsx)("meta",{property:"og:url",content:P}),(0,a.jsx)("meta",{property:"og:type",content:"article"}),(0,a.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,a.jsx)("meta",{name:"twitter:title",content:R}),(0,a.jsx)("meta",{name:"twitter:description",content:z}),(0,a.jsx)("meta",{name:"twitter:image",content:O})]}),(0,a.jsx)("article",{className:"article-container",children:(0,a.jsxs)("div",{className:"article-main",children:[(0,a.jsx)(()=>{let e=n.authorName||"Unknown Author",t=S(e),r=b(n.createdAt||new Date().toISOString()),o=n.tags||[];return(0,a.jsxs)("header",{className:"article-header",children:[(0,a.jsx)("h1",{className:"article-title",children:n.title}),(0,a.jsxs)("div",{className:"article-meta",children:[(0,a.jsx)("div",{className:"author-image-container",children:(0,a.jsx)(_.default,{src:n.authorName&&n.authorId?"https://images.unsplash.com/photo-1494790108377-be9c29b29330":"/default-avatar.png",alt:e,width:40,height:40,className:"author-image"})}),(0,a.jsxs)(l(),{href:"/user/".concat(t),className:"author-link",children:["By ",e]}),(0,a.jsx)("span",{className:"separator",children:"•"}),(0,a.jsx)("span",{className:"date",children:r})]}),o.length>0&&(0,a.jsx)("div",{className:"article-tags",children:o.map(e=>(0,a.jsxs)(l(),{href:"/tag/".concat(e.toLowerCase()),className:"tag",children:["#",e]},e))})]})},{}),(0,a.jsx)(()=>(0,a.jsxs)("div",{className:"".concat(i()["reaction-bar"]," article-reaction-bar"),style:{marginTop:"2rem",marginBottom:"1rem",justifyContent:"flex-start",gap:"1rem"},children:[(0,a.jsxs)("button",{onClick:B,className:"".concat(i()["reaction-button"]," ").concat(v?i().liked:""),"aria-label":v?"Unlike article":"Like article",disabled:!p,children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:(0,a.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),(0,a.jsx)("span",{style:{marginLeft:"0.5rem"},children:A})]}),(0,a.jsx)("button",{className:i()["reaction-button"],"aria-label":"Share article",onClick:D,children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:(0,a.jsx)("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z"})})})]}),{}),(0,a.jsx)("section",{className:"article-content",children:I(n)?n.content.map(e=>(0,a.jsx)("div",{ref:t=>{c.current[e.paragraphId]=t},"data-paragraph-id":e.paragraphId,className:"paragraph-block ".concat(o[e.paragraphId]?"visible":""),children:k(e.text)?(0,a.jsx)("div",{className:"paragraph-text",dangerouslySetInnerHTML:{__html:e.text}}):(0,a.jsx)("div",{className:"paragraph-text",children:(0,a.jsx)(g.oz,{children:e.text})})},e.paragraphId)):M(n)?(()=>{let e=n.body;return(0,a.jsx)("div",{className:"paragraph-block visible",children:k(e)?(0,a.jsx)("div",{className:"paragraph-text",dangerouslySetInnerHTML:{__html:e}}):(0,a.jsx)("div",{className:"paragraph-text",children:(0,a.jsx)(g.oz,{children:e})})})})():null}),(0,a.jsx)(j,{slug:n.slug})]})}),h&&d&&(0,a.jsx)(y.A,{isOpen:h,onClose:()=>{u(!1)},articleTitle:n.title,articleUrl:P,coverImageUrl:n.coverImageUrl||void 0,excerpt:E(100)})]})},L=e=>{let t=e.slug||(e.title||"untitled").toLowerCase().replace(/[\s\W-]+/g,"-").replace(/^-+|-+$/g,""),n=new Date().toISOString();return{id:e.id||"",_id:e.id||"",title:e.title||"Untitled Article",slug:t,authorId:e.authorId,authorName:e.authorName||"Unknown Author",coverImageUrl:e.coverImage||null,tags:e.tags||[],likes:e.likes||[],createdAt:e.createdAt?e.createdAt.toDate().toISOString():n,updatedAt:e.updatedAt?e.updatedAt.toDate().toISOString():e.createdAt?e.createdAt.toDate().toISOString():n,excerpt:e.excerpt||"",body:e.body||"",content:e.content||void 0,reposts:e.reposts||[],viewCount:e.viewCount||0}};function T(){var e;let t=(0,s.useSearchParams)(),n=null==t?void 0:t.get("slug"),[o,c]=(0,r.useState)(null),[g,_]=(0,r.useState)(!0),[x,v]=(0,r.useState)(null),[j,y]=(0,r.useState)([]),[f,w]=(0,r.useState)(!1),[N,C]=(0,r.useState)(!1),[b,k]=(0,r.useState)(0);(0,r.useEffect)(()=>{k(window.innerWidth);let e=()=>{k(window.innerWidth)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,r.useEffect)(()=>{let e=(0,d.hg)(m.j2,e=>{w(!!e)});return()=>e()},[]),(0,r.useEffect)(()=>{(async()=>{if(!n){v("No article slug provided"),_(!1);return}try{let e=await (0,p.l6)(n);if(!e){v("Article not found"),_(!1);return}let t=L(e);c(t),y(e.tags||[]),_(!1)}catch(e){console.error("Error fetching article:",e),v("Failed to load article"),_(!1)}})()},[n]);let S=async()=>{try{await (0,d.CI)(m.j2)}catch(e){console.error("Error signing out:",e)}},I=()=>{C(!N)};return(0,a.jsxs)("div",{className:i()["three-column-layout"],children:[b<768&&!N&&(0,a.jsx)("div",{className:"".concat(i()["menu-overlay"]," ").concat(i().active),onClick:I}),(0,a.jsx)(u.A,{isAuthenticated:f,handleLogout:S,toggleSidebar:I,isSidebarCollapsed:N}),b<768&&(0,a.jsx)("button",{className:i()["toggle-button"],onClick:I,"aria-label":N?"Expand sidebar":"Collapse sidebar",children:N?"☰":"✕"}),(0,a.jsx)("main",{className:i()["center-column"],children:g?(0,a.jsx)("div",{className:i().loading,children:"Loading article..."}):x?(0,a.jsxs)("div",{className:i().loading,children:["Error: ",x]}):o?(0,a.jsx)(A,{article:o}):(0,a.jsx)("div",{className:i().loading,children:"Article not found"})}),(0,a.jsxs)("aside",{className:i()["right-sidebar"],children:[(0,a.jsx)("h2",{className:i()["sidebar-heading"],children:"Related Tags"}),f&&(0,a.jsx)(h.A,{}),(0,a.jsx)("div",{className:i()["tag-list"],children:j.map(e=>(0,a.jsxs)(l(),{href:"/tag/".concat(e.toLowerCase()),className:i()["trending-tag"],children:["# ",e]},e))}),f&&o&&(null==(e=m.j2.currentUser)?void 0:e.uid)===o.authorId&&(0,a.jsx)(l(),{href:"/edit-article?id=".concat(o._id),className:i()["edit-button"],children:"Edit Article"}),(0,a.jsx)(l(),{href:"/write",className:i()["write-button"],children:"Write"})]})]})}function U(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)("div",{children:"Loading article..."}),children:(0,a.jsx)(T,{})})}},9251:(e,t,n)=>{Promise.resolve().then(n.bind(n,7560))},9576:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(5155),r=n(2115),o=n(2150),l=n.n(o);let s=e=>{let{articleTitle:t,articleUrl:n,isOpen:o,onClose:s,coverImageUrl:c,excerpt:i}=e,[m,d]=(0,r.useState)(!1);if((0,r.useEffect)(()=>o?(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}):void d(!1),[o]),!o)return null;let h="https://twitter.com/intent/tweet?url=".concat(encodeURIComponent(n),"&text=").concat(encodeURIComponent(t)),u="https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(n)),p="https://www.linkedin.com/shareArticle?mini=true&url=".concat(encodeURIComponent(n),"&title=").concat(encodeURIComponent(t));return(0,a.jsx)("div",{className:l().overlay,onClick:s,children:(0,a.jsxs)("div",{className:l().modal,onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("button",{className:l().closeButton,onClick:s,"aria-label":"Close share dialog",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-6 h-6",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),(0,a.jsx)("h2",{className:l().title,children:"Share this article"}),(0,a.jsxs)("div",{className:l().articlePreview,children:[c&&(0,a.jsx)("img",{src:c,alt:t,className:l().articleImage}),(0,a.jsx)("h3",{className:l().articleTitlePreview,children:t}),i&&(0,a.jsx)("p",{className:l().articleExcerptPreview,children:i})]}),(0,a.jsxs)("div",{className:l().shareActions,children:[(0,a.jsxs)("div",{className:l().copyLinkContainer,children:[(0,a.jsx)("input",{type:"text",value:n,readOnly:!0,className:l().urlInput}),(0,a.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(n).then(()=>{d(!0),setTimeout(()=>d(!1),2e3)}).catch(e=>{console.error("Failed to copy: ",e)})},className:l().copyButton,children:m?"Copied!":"Copy Link"})]}),(0,a.jsx)("p",{className:l().shareViaText,children:"Or share via:"}),(0,a.jsxs)("div",{className:l().socialIcons,children:[(0,a.jsx)("a",{href:h,target:"_blank",rel:"noopener noreferrer","aria-label":"Share on Twitter",children:(0,a.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:(0,a.jsx)("path",{d:"M23.643 4.937c-.835.37-1.732.62-2.675.733a4.67 4.67 0 002.048-2.578 9.3 9.3 0 01-2.958 1.13 4.66 4.66 0 00-7.952 4.256c-3.873 0-7.307-2.05-9.602-4.868a4.662 4.662 0 001.443 6.225 4.656 4.656 0 01-2.11-.583v.06a4.657 4.657 0 003.734 4.562 4.634 4.634 0 01-2.105.08 4.646 4.646 0 004.34 3.225A9.342 9.342 0 010 19.539a13.186 13.186 0 007.141 2.093c8.567 0 13.255-7.098 13.255-13.254 0-.202-.005-.403-.014-.602a9.49 9.49 0 002.323-2.394z"})})}),(0,a.jsx)("a",{href:u,target:"_blank",rel:"noopener noreferrer","aria-label":"Share on Facebook",children:(0,a.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:(0,a.jsx)("path",{d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878V14.89h-2.89v-2.98h2.89v-2.28c0-2.874 1.704-4.48 4.356-4.48 1.247 0 2.31.093 2.622.134v2.596h-1.54c-1.394 0-1.666.664-1.666 1.632v2.14h2.886l-.39 2.98h-2.496v7.008C18.343 21.128 22 16.991 22 12z"})})}),(0,a.jsx)("a",{href:p,target:"_blank",rel:"noopener noreferrer","aria-label":"Share on LinkedIn",children:(0,a.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:(0,a.jsx)("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.225 0z"})})})]})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[3450,2709,2992,7158,7117,6874,4212,3731,4744,4692,2091,8441,1684,7358],()=>t(9251)),_N_E=e.O()}]);