(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8406],{2955:(e,a,t)=>{Promise.resolve().then(t.bind(t,4752))},4752:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>j,dynamic:()=>x});var s=t(5155),l=t(2115),r=t(5695),i=t(6874),n=t.n(i),c=t(3201),d=t(3074),o=t(6016),h=t(9210),u=t(8501),m=t.n(u);let x="force-dynamic",g=(0,l.cache)(async e=>{try{return await (0,h.zE)(e)}catch(e){return console.error("Error loading article:",e),null}}),j=e=>{let{params:a}=e,t=null==a?void 0:a.id,i=(0,r.useRouter)(),[h,u]=(0,l.useState)(!0),[x,j]=(0,l.useState)(""),[v,N]=(0,l.useState)(null),[k,f]=(0,l.useState)(null),[p,w]=(0,l.useState)([]),[C,y]=(0,l.useState)(!1),[A,E]=(0,l.useState)(null);l.useEffect(()=>{let e=c.j2.onAuthStateChanged(e=>{E(e)});return()=>e()},[]),l.useEffect(()=>{(async()=>{try{u(!0);let e=await g(t);if(!e)return void j("Article not found");let a=e.body.replace(/<div[^>]*>Content is loaded from HTML<\/div>/g,"").replace(/<h1[^>]*>Untitled Article<\/h1>/g,"");N(a),w(e.likes||[]);let s=e.body.split(/\s+/).length,l=Math.ceil(s/200),r=e.createdAt?new Date(1e3*e.createdAt.seconds).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Unknown date";f({title:e.title,authorName:e.authorName||"Anonymous",createdAt:r,readTime:l,likes:e.likes||[],tags:e.tags||[]})}catch(e){console.error("Error loading article:",e),j("Failed to load article")}finally{u(!1)}})()},[t]),l.useEffect(()=>{(null==k?void 0:k.likes)&&A&&y(k.likes.includes(A.uid))},[k,A]);let L=async()=>{if(!A)return void alert("Please login to like articles");try{C?(w(p.filter(e=>e!==A.uid)),y(!1)):(w([...p,A.uid]),y(!0))}catch(e){console.error("Error updating like status:",e)}};return h?(0,s.jsxs)("div",{className:m().loadingContainer,children:[(0,s.jsx)("div",{className:m().loadingIndicator}),(0,s.jsx)("p",{children:"Loading article..."})]}):x?(0,s.jsx)("div",{className:m().errorContainer,children:(0,s.jsx)("p",{className:m().errorMessage,children:x})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("header",{className:m().pageHeader,children:(0,s.jsxs)("div",{className:m().headerContainer,children:[(0,s.jsxs)(n(),{href:"/",className:m().backLink,children:[(0,s.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M15 18L9 12L15 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Home"]}),(0,s.jsx)("div",{className:m().headerLogo,children:"Journalite"})]})}),(0,s.jsxs)("div",{className:m().pageContainer,children:[k&&(0,s.jsxs)("header",{className:m().articleHeader,children:[(0,s.jsx)("h1",{className:m().articleTitle,children:k.title}),(0,s.jsxs)("div",{className:m().articleMeta,children:[(0,s.jsxs)("div",{className:m().authorInfo,children:[(0,s.jsx)("div",{className:m().authorAvatar,children:k.authorName.charAt(0)}),(0,s.jsxs)("div",{className:m().authorDetails,children:[(0,s.jsx)("div",{className:m().authorName,children:k.authorName}),(0,s.jsxs)("div",{className:m().articleDetails,children:[k.createdAt," \xb7 ",k.readTime," min read"]})]})]}),(0,s.jsxs)("div",{className:m().articleActions,children:[(0,s.jsxs)("button",{className:"".concat(m().likeButton," ").concat(C?m().liked:""),onClick:L,"aria-label":C?"Unlike article":"Like article",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:C?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",className:m().likeIcon,children:(0,s.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),(0,s.jsx)("span",{children:p.length>0?p.length:""})]}),(0,s.jsx)("button",{className:m().editButton,onClick:()=>i.push("/articles/".concat(t,"/edit")),children:"Edit"})]})]}),k.tags&&k.tags.length>0&&(0,s.jsx)("div",{className:m().tagContainer,children:k.tags.map((e,a)=>(0,s.jsx)("span",{className:m().tag,children:e},a))})]}),(0,s.jsx)(d.A,{articleId:t,initialHtml:v||void 0}),(0,s.jsx)("div",{className:m().commentsContainer,children:(0,s.jsx)(o.A,{articleId:t})})]})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[8354,8130,2992,7158,7117,6874,922,9429,8441,1684,7358],()=>a(2955)),_N_E=e.O()}]);