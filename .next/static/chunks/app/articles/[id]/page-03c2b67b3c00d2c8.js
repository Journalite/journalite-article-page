(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8406],{4734:(e,t,a)=>{Promise.resolve().then(a.bind(a,8120))},8120:(e,t,a)=>{"use strict";a.d(t,{default:()=>v});var n=a(5155),i=a(2115),r=a(5695),l=a(6874),o=a.n(l),s=a(3201),c=a(4568),d=a(6016),g=a(3430),u=a(9210),h=a(8501),p=a.n(h),x=a(7041),m=a(326);let v=e=>{let{id:t}=e;(0,r.useRouter)();let[a,l]=(0,i.useState)(!0),[h,v]=(0,i.useState)(""),[f,j]=(0,i.useState)(null),[b,k]=(0,i.useState)(null),[S,N]=(0,i.useState)([]),[w,E]=(0,i.useState)(!1),[y,C]=(0,i.useState)(null),[I,Q]=(0,i.useState)(!1),[A,F]=(0,i.useState)(!1),[z,L]=(0,i.useState)("reflective"),[B,T]=(0,i.useState)(!0);(0,i.useEffect)(()=>{let e=s.j2.onAuthStateChanged(e=>{C(e),F(!!e)});return()=>e()},[]),(0,i.useEffect)(()=>{if(A){let e=localStorage.getItem("moodFeatureEnabled");null!==e?T(JSON.parse(e)):T(!0)}else T(!1)},[A]);let M=async()=>{try{var e;console.log("Fetching article with ID: ".concat(t,", timestamp: ").concat(Date.now())),l(!0),await new Promise(e=>setTimeout(e,300));let a=await (0,u.getArticleById)(t);if(console.log("Article data received:",null==a?void 0:a.title,"Content length:",(null==a||null==(e=a.body)?void 0:e.length)||0),!a)return void v("Article not found");let n=a.body?a.body.replace(/<div[^>]*>Content is loaded from HTML<\/div>/g,"").replace(/<h1[^>]*>Untitled Article<\/h1>/g,""):"";j(n),N(a.likes||[]);let i=a.body?a.body.split(/\s+/).length:0,r=Math.ceil(i/200),o=a.createdAt?new Date(1e3*a.createdAt.seconds).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Unknown date";k({title:a.title||"Untitled Article",authorName:a.authorName||"Anonymous",createdAt:o,readTime:r,likes:a.likes||[],tags:a.tags||[],authorId:a.authorId})}catch(e){console.error("Error loading article:",e),v("Failed to load article")}finally{l(!1)}};(0,i.useEffect)(()=>{M()},[t]),(0,i.useEffect)(()=>{(null==b?void 0:b.likes)&&y&&E(b.likes.includes(y.uid))},[b,y]),(0,i.useEffect)(()=>{if(f&&A){let e=f.replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim();e&&L((0,x.H)(e))}},[f,A]);let D=async()=>{if(!y)return void alert("Please login to like articles");try{w?(N(S.filter(e=>e!==y.uid)),E(!1)):(N([...S,y.uid]),E(!0))}catch(e){console.error("Error updating like status:",e)}};return a?(0,n.jsxs)("div",{className:p().loadingContainer,children:[(0,n.jsx)("div",{className:p().loadingIndicator}),(0,n.jsx)("p",{children:"Loading article..."})]}):h?(0,n.jsx)("div",{className:p().errorContainer,children:(0,n.jsx)("p",{className:p().errorMessage,children:h})}):I?(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:p().editingHeader,children:[(0,n.jsx)("button",{onClick:()=>{Q(!1)},className:p().cancelButton,children:"← Back to Article"}),(0,n.jsxs)("h2",{children:["Editing: ",null==b?void 0:b.title]})]}),(0,n.jsx)(g.A,{articleId:t,onUpdateComplete:e=>{console.log("Article update complete with data:",e),l(!0),j(null),k(null),e?(console.log("Forcing hard reload to see updated content"),window.location.href="/articles/".concat(t,"?reload=").concat(Date.now())):setTimeout(()=>{M()},800)}})]}):(0,n.jsxs)("div",{className:p().articlePageContainer,style:{position:"relative",backgroundColor:"#ffffff"},children:[B&&A&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundImage:"linear-gradient(45deg, \n                ".concat(m.Q[z].gradientStart,"40, \n                ").concat(m.Q[z].gradientEnd,"60, \n                ").concat(m.Q[z].gradientStart,"30, \n                ").concat(m.Q[z].gradientEnd,"50)"),backgroundSize:"400% 400%",animation:"gradientFlow 8s ease-in-out infinite",filter:"contrast(1.1) brightness(1.05) saturate(1.1)",zIndex:0,transition:"background-image 1s ease-in-out",pointerEvents:"none"}}),(0,n.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundImage:"radial-gradient(circle at 20% 80%, ".concat(m.Q[z].gradientEnd,"25 0%, transparent 50%),\n                radial-gradient(circle at 80% 20%, ").concat(m.Q[z].gradientStart,"25 0%, transparent 50%),\n                radial-gradient(circle at 40% 40%, ").concat(m.Q[z].gradientEnd,"15 0%, transparent 50%)"),backgroundSize:"600px 600px, 800px 800px, 400px 400px",animation:"moodFloat 12s ease-in-out infinite alternate",zIndex:1,opacity:.6,pointerEvents:"none"}}),(0,n.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundImage:"radial-gradient(circle at 25% 25%, ".concat(m.Q[z].gradientStart,"20 0%, transparent 25%),\n                radial-gradient(circle at 75% 75%, ").concat(m.Q[z].gradientEnd,"20 0%, transparent 25%),\n                radial-gradient(circle at 50% 10%, ").concat(m.Q[z].gradientStart,"15 0%, transparent 30%),\n                radial-gradient(circle at 10% 90%, ").concat(m.Q[z].gradientEnd,"15 0%, transparent 30%)"),backgroundSize:"300px 300px, 500px 500px, 200px 200px, 400px 400px",animation:"orbitalFloat 20s linear infinite",zIndex:2,opacity:.4,pointerEvents:"none"}}),(0,n.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundImage:"repeating-linear-gradient(\n                90deg,\n                transparent,\n                transparent 2px,\n                ".concat(m.Q[z].gradientStart,"02 2px,\n                ").concat(m.Q[z].gradientStart,"02 4px\n              )"),zIndex:3,opacity:.15,mixBlendMode:"overlay",pointerEvents:"none"}})]}),(0,n.jsx)("header",{className:p().pageHeader,style:B&&A?{position:"relative",zIndex:1e4,background:"linear-gradient(135deg, \n            rgba(255, 255, 255, 0.15) 0%, \n            ".concat(m.Q[z].gradientStart,"12 40%, \n            ").concat(m.Q[z].gradientEnd,"08 100%)"),backdropFilter:"blur(24px) saturate(180%)",borderBottom:"1px solid ".concat(m.Q[z].gradientStart,"25"),boxShadow:"\n            0 2px 8px -2px ".concat(m.Q[z].gradientStart,"15,\n            0 8px 32px -8px ").concat(m.Q[z].gradientStart,"20,\n            inset 0 1px 0 rgba(255, 255, 255, 0.25),\n            inset 0 -1px 0 ").concat(m.Q[z].gradientStart,"10\n          "),transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:"1px solid ".concat(m.Q[z].gradientStart,"15"),borderTop:"none"}:{position:"relative",zIndex:1e4},children:(0,n.jsxs)("div",{className:p().headerContainer,children:[(0,n.jsxs)(o(),{href:"/",className:p().backLink,children:[(0,n.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M15 18L9 12L15 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Home"]}),(0,n.jsx)("div",{className:p().headerLogo,style:B&&A?{color:m.Q[z].accent,fontWeight:"700",textShadow:"0 0 20px ".concat(m.Q[z].gradientStart,"30, 0 0 40px ").concat(m.Q[z].gradientStart,"15"),transition:"all 0.3s ease"}:{fontWeight:"700"},children:"Journalite"})]})}),(0,n.jsxs)("div",{className:p().pageContainer,children:[b&&(0,n.jsxs)("header",{className:p().articleHeader,children:[(0,n.jsx)("h1",{className:p().articleTitle,children:b.title}),(0,n.jsxs)("div",{className:p().articleMeta,children:[(0,n.jsxs)("div",{className:p().authorInfo,children:[(0,n.jsx)("div",{className:p().authorAvatar,children:b.authorName.charAt(0)}),(0,n.jsxs)("div",{className:p().authorDetails,children:[(0,n.jsx)("div",{className:p().authorName,children:b.authorName}),(0,n.jsxs)("div",{className:p().articleDetails,children:[b.createdAt," \xb7 ",b.readTime," min read"]})]})]}),(0,n.jsxs)("div",{className:p().articleActions,children:[(0,n.jsxs)("button",{className:"".concat(p().likeButton," ").concat(w?p().liked:""),onClick:D,"aria-label":w?"Unlike article":"Like article",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:w?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",className:p().likeIcon,children:(0,n.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),(0,n.jsx)("span",{children:S.length>0?S.length:""})]}),y&&b.authorId===y.uid&&(0,n.jsx)("button",{className:p().editButton,onClick:()=>{Q(!0)},children:"Edit"})]})]}),b.tags&&b.tags.length>0&&(0,n.jsx)("div",{className:p().tagContainer,children:b.tags.map((e,t)=>(0,n.jsx)("span",{className:p().tag,children:e},t))})]}),(0,n.jsx)(c.A,{articleId:t,initialHtml:f||void 0,isAuthenticated:A,articleTitle:(null==b?void 0:b.title)||"Article",articleSlug:(null==b?void 0:b.title)?b.title.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""):t,...A&&{moodFeatureEnabled:B,onToggleMoodFeature:e=>{T(e),localStorage.setItem("moodFeatureEnabled",JSON.stringify(e))}}}),(0,n.jsx)("div",{className:p().commentsContainer,children:(0,n.jsx)(d.A,{articleId:t,...A&&{mood:z,moodFeatureEnabled:B}})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2507,8130,2992,7158,5004,7117,6874,8735,6632,9122,3430,4425,8441,1684,7358],()=>t(4734)),_N_E=e.O()}]);