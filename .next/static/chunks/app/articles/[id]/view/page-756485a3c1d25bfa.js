(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[558],{1208:(e,a,t)=>{"use strict";t.d(a,{default:()=>v});var s=t(5155),r=t(9980),i=t(6874),l=t.n(i),n=t(5695),c=t(3201),d=t(6203),o=t(9547),u=t(6016),h=t(2650),m=t(9210),x=t(8501),j=t.n(x);function g(e){let{id:a}=e,t=(0,n.useSearchParams)(),i=(null==t?void 0:t.get("updated"))==="true",[x,g]=(0,r.J0)(null),[v,N]=(0,r.J0)(!0),[k,p]=(0,r.J0)(null),[f,w]=(0,r.J0)(null),[C,A]=(0,r.J0)([]),[y,b]=(0,r.J0)(!1),[J,I]=(0,r.J0)(null),[L,S]=(0,r.J0)(!1);(0,r.vJ)(()=>{let e=(0,d.onAuthStateChanged)(c.j2,e=>{I(e),e&&(null==x?void 0:x.likes)&&b(x.likes.includes(e.uid))});return()=>e()},[x]),(0,r.vJ)(()=>{(async()=>{try{console.log("Directly loading article by ID: ".concat(a,", timestamp: ").concat(Date.now())),N(!0);let e=await (0,m.getArticleById)(a);if(!e){p("Article not found"),N(!1);return}console.log("Successfully loaded article:",e.title);let t=e.body||"";w(t),A(e.likes||[]);let s=e.body?e.body.split(/\s+/).length:0,r=Math.ceil(s/200),i=e.createdAt?new Date(1e3*e.createdAt.seconds).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Unknown date";g({id:e.id,title:e.title,authorName:e.authorName||"Anonymous",authorId:e.authorId,createdAt:i,readTime:r,likes:e.likes||[],tags:e.tags||[]}),N(!1)}catch(e){console.error("Error loading article:",e),p("Failed to load article"),N(!1)}})()},[a,i]);let P=async()=>{if(!J)return void alert("Please login to like articles");try{y?(A(C.filter(e=>e!==J.uid)),b(!1)):(A([...C,J.uid]),b(!0))}catch(e){console.error("Error updating like status:",e)}};return v?(0,s.jsxs)("div",{className:j().loadingContainer,children:[(0,s.jsx)("div",{className:j().loadingIndicator}),(0,s.jsx)("p",{children:"Loading article..."})]}):k?(0,s.jsx)("div",{className:j().errorContainer,children:(0,s.jsx)("p",{className:j().errorMessage,children:k})}):L?(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:j().editingHeader,children:[(0,s.jsx)("button",{onClick:()=>{S(!1)},className:j().cancelButton,children:"← Back to Article"}),(0,s.jsxs)("h2",{children:["Editing: ",null==x?void 0:x.title]})]}),(0,s.jsx)(h.A,{articleId:a,onUpdateComplete:()=>{window.location.reload()}})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("header",{className:j().pageHeader,children:(0,s.jsxs)("div",{className:j().headerContainer,children:[(0,s.jsxs)(l(),{href:"/",className:j().backLink,children:[(0,s.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M15 18L9 12L15 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Home"]}),(0,s.jsx)("div",{className:j().headerLogo,children:"Journalite"})]})}),(0,s.jsxs)("div",{className:j().pageContainer,children:[x&&(0,s.jsxs)("header",{className:j().articleHeader,children:[(0,s.jsx)("h1",{className:j().articleTitle,children:x.title}),(0,s.jsxs)("div",{className:j().articleMeta,children:[(0,s.jsxs)("div",{className:j().authorInfo,children:[(0,s.jsx)("div",{className:j().authorAvatar,children:x.authorName.charAt(0)}),(0,s.jsxs)("div",{className:j().authorDetails,children:[(0,s.jsx)("div",{className:j().authorName,children:x.authorName}),(0,s.jsxs)("div",{className:j().articleDetails,children:[x.createdAt," \xb7 ",x.readTime," min read"]})]})]}),(0,s.jsxs)("div",{className:j().articleActions,children:[(0,s.jsxs)("button",{className:"".concat(j().likeButton," ").concat(y?j().liked:""),onClick:P,"aria-label":y?"Unlike article":"Like article",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:y?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",className:j().likeIcon,children:(0,s.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),(0,s.jsx)("span",{children:C.length>0?C.length:""})]}),J&&x.authorId===J.uid&&(0,s.jsx)("button",{className:j().editButton,onClick:()=>{S(!0)},children:"Edit"})]})]}),x.tags&&x.tags.length>0&&(0,s.jsx)("div",{className:j().tagContainer,children:x.tags.map((e,a)=>(0,s.jsx)("span",{className:j().tag,children:e},a))})]}),(0,s.jsx)(o.A,{articleId:a,initialHtml:f||void 0}),(0,s.jsx)("div",{className:j().commentsContainer,children:(0,s.jsx)(u.A,{articleId:a})})]})]})}function v(e){let{id:a}=e;return(0,s.jsx)(r.tY,{fallback:(0,s.jsx)("div",{className:j().loadingContainer,children:"Loading article..."}),children:(0,s.jsx)(g,{id:a})})}},5695:(e,a,t)=>{"use strict";var s=t(8999);t.o(s,"redirect")&&t.d(a,{redirect:function(){return s.redirect}}),t.o(s,"usePathname")&&t.d(a,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(a,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(a,{useSearchParams:function(){return s.useSearchParams}})},9980:(e,a,t)=>{"use strict";t.d(a,{J0:()=>s.useState,tY:()=>s.Suspense,vJ:()=>s.useEffect});var s=t(2115)},9994:(e,a,t)=>{Promise.resolve().then(t.bind(t,1208))}},e=>{var a=a=>e(e.s=a);e.O(0,[7267,5786,1708,2992,7158,5004,7117,6874,4366,6713,4744,2800,9122,2650,1431,8441,1684,7358],()=>a(9994)),_N_E=e.O()}]);