(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8406],{239:(e,t,a)=>{var n={"./en/index":8021};function l(e){return a(i(e))}function i(e){if(!a.o(n,e)){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}l.keys=function(){return Object.keys(n)},l.resolve=i,e.exports=l,l.id=239},4734:(e,t,a)=>{Promise.resolve().then(a.bind(a,6645))},6645:(e,t,a)=>{"use strict";a.d(t,{default:()=>N});var n=a(5155),l=a(2115),i=a(5695),r=a(6874),s=a.n(r),c=a(3201),o=a(4568),d=a(6016),u=a(3430),h=a(1934);let m={joyful:{gradientStart:"#FFE29F",gradientEnd:"#FFA99F",accent:"#FF6A00"},reflective:{gradientStart:"#283048",gradientEnd:"#859398",accent:"#A0AEC0"},sad:{gradientStart:"#1E3C72",gradientEnd:"#2A5298",accent:"#4A5568"}};function g(e){let{mood:t,reflectionCount:a,reflectionsOn:l,onToggleReflections:i}=e,r=m[t],s={background:["linear-gradient(90deg, ".concat(r.gradientStart,", ").concat(r.gradientEnd,")"),"linear-gradient(270deg, ".concat(r.gradientStart,", ").concat(r.gradientEnd,")")],transition:{duration:8,repeat:1/0,ease:"linear"}};return(0,n.jsxs)(h.P.div,{className:"fixed top-0 left-0 w-full z-50",style:{padding:"12px 24px",display:"flex",alignItems:"center",justifyContent:"space-between",color:"#F7FAFC",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",borderRadius:"0 0 12px 12px"},animate:s,children:[(0,n.jsxs)("span",{className:"font-medium text-sm",children:["\uD83D\uDD2E Mood detected:"," ",(0,n.jsx)("span",{className:"capitalize",children:t})]}),(0,n.jsxs)("span",{className:"font-medium text-sm",children:["✨ Reflections saved: ",a]}),(0,n.jsxs)("button",{onClick:()=>i(!l),className:"bg-white bg-opacity-20 hover:bg-opacity-30 px-3 py-1 rounded-full text-sm font-medium transition-all duration-200",children:["Interactive Reflections: ",l?"ON":"OFF"]})]})}var x=a(9210),f=a(7347),j=a.n(f),p=a(8501),v=a.n(p);let N=e=>{let{id:t}=e;(0,i.useRouter)();let[a,r]=(0,l.useState)(!0),[h,m]=(0,l.useState)(""),[f,p]=(0,l.useState)(null),[N,k]=(0,l.useState)(null),[w,C]=(0,l.useState)([]),[y,A]=(0,l.useState)(!1),[b,E]=(0,l.useState)(null),[S,F]=(0,l.useState)(!1),[D,I]=(0,l.useState)("reflective"),[L,M]=(0,l.useState)(0),[O,T]=(0,l.useState)(!0);(0,l.useEffect)(()=>{let e=c.j2.onAuthStateChanged(e=>{E(e)});return()=>e()},[]);let U=async()=>{try{var e;console.log("Fetching article with ID: ".concat(t,", timestamp: ").concat(Date.now())),r(!0),await new Promise(e=>setTimeout(e,300));let a=await (0,x.getArticleById)(t);if(console.log("Article data received:",null==a?void 0:a.title,"Content length:",(null==a||null==(e=a.body)?void 0:e.length)||0),!a)return void m("Article not found");let n=a.body?a.body.replace(/<div[^>]*>Content is loaded from HTML<\/div>/g,"").replace(/<h1[^>]*>Untitled Article<\/h1>/g,""):"";p(n),C(a.likes||[]);let l=a.body?a.body.split(/\s+/).length:0,i=Math.ceil(l/200),s=a.createdAt?new Date(1e3*a.createdAt.seconds).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Unknown date";k({title:a.title||"Untitled Article",authorName:a.authorName||"Anonymous",createdAt:s,readTime:i,likes:a.likes||[],tags:a.tags||[],authorId:a.authorId})}catch(e){console.error("Error loading article:",e),m("Failed to load article")}finally{r(!1)}};(0,l.useEffect)(()=>{U()},[t]),(0,l.useEffect)(()=>{(null==N?void 0:N.likes)&&b&&A(N.likes.includes(b.uid))},[N,b]),(0,l.useEffect)(()=>{if(f){let e=f.replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim();e&&I(function(e){let t=new(j())().analyze(e);return t.score>3?"joyful":t.score<-2?"sad":"reflective"}(e)),M(Math.floor(20*Math.random()))}},[f]);let _=async()=>{if(!b)return void alert("Please login to like articles");try{y?(C(w.filter(e=>e!==b.uid)),A(!1)):(C([...w,b.uid]),A(!0))}catch(e){console.error("Error updating like status:",e)}};return a?(0,n.jsxs)("div",{className:v().loadingContainer,children:[(0,n.jsx)("div",{className:v().loadingIndicator}),(0,n.jsx)("p",{children:"Loading article..."})]}):h?(0,n.jsx)("div",{className:v().errorContainer,children:(0,n.jsx)("p",{className:v().errorMessage,children:h})}):S?(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:v().editingHeader,children:[(0,n.jsx)("button",{onClick:()=>{F(!1)},className:v().cancelButton,children:"← Back to Article"}),(0,n.jsxs)("h2",{children:["Editing: ",null==N?void 0:N.title]})]}),(0,n.jsx)(u.A,{articleId:t,onUpdateComplete:e=>{console.log("Article update complete with data:",e),r(!0),p(null),k(null),e?(console.log("Forcing hard reload to see updated content"),window.location.href="/articles/".concat(t,"?reload=").concat(Date.now())):setTimeout(()=>{U()},800)}})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g,{mood:D,reflectionCount:L,reflectionsOn:O,onToggleReflections:T}),(0,n.jsx)("header",{className:v().pageHeader,style:{marginTop:"60px"},children:(0,n.jsxs)("div",{className:v().headerContainer,children:[(0,n.jsxs)(s(),{href:"/",className:v().backLink,children:[(0,n.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M15 18L9 12L15 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Home"]}),(0,n.jsx)("div",{className:v().headerLogo,children:"Journalite"})]})}),(0,n.jsxs)("div",{className:v().pageContainer,children:[N&&(0,n.jsxs)("header",{className:v().articleHeader,children:[(0,n.jsx)("h1",{className:v().articleTitle,children:N.title}),(0,n.jsxs)("div",{className:v().articleMeta,children:[(0,n.jsxs)("div",{className:v().authorInfo,children:[(0,n.jsx)("div",{className:v().authorAvatar,children:N.authorName.charAt(0)}),(0,n.jsxs)("div",{className:v().authorDetails,children:[(0,n.jsx)("div",{className:v().authorName,children:N.authorName}),(0,n.jsxs)("div",{className:v().articleDetails,children:[N.createdAt," \xb7 ",N.readTime," min read"]})]})]}),(0,n.jsxs)("div",{className:v().articleActions,children:[(0,n.jsxs)("button",{className:"".concat(v().likeButton," ").concat(y?v().liked:""),onClick:_,"aria-label":y?"Unlike article":"Like article",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:y?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",className:v().likeIcon,children:(0,n.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),(0,n.jsx)("span",{children:w.length>0?w.length:""})]}),b&&N.authorId===b.uid&&(0,n.jsx)("button",{className:v().editButton,onClick:()=>{F(!0)},children:"Edit"})]})]}),N.tags&&N.tags.length>0&&(0,n.jsx)("div",{className:v().tagContainer,children:N.tags.map((e,t)=>(0,n.jsx)("span",{className:v().tag,children:e},t))})]}),(0,n.jsx)(o.A,{articleId:t,initialHtml:f||void 0}),(0,n.jsx)("div",{className:v().commentsContainer,children:(0,n.jsx)(d.A,{articleId:t})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2507,8130,2992,7158,5004,7117,6874,8735,6656,9122,3430,4419,8441,1684,7358],()=>t(4734)),_N_E=e.O()}]);