(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3998],{3201:(t,e,a)=>{"use strict";a.d(e,{db:()=>l,j2:()=>o});var s=a(3915),r=a(6864),n=a(6203),c=a(5317);let i=(0,s.Wp)({apiKey:"AIzaSyCFpybhLt43iKUw6lNahU1n2zjYv0BXmf4",authDomain:"journalitev1.firebaseapp.com",projectId:"journalitev1",storageBucket:"journalitev1.firebasestorage.app",messagingSenderId:"897263211529",appId:"1:897263211529:web:bae4a00910a2236d6d54d8",measurementId:"G-ZYT8PRMT0D"});try{(0,r.P5)(i)}catch(t){}let o=(0,n.xI)(i),l=(0,c.aU)(i);window.location.origin},5695:(t,e,a)=>{"use strict";var s=a(8999);a.o(s,"useRouter")&&a.d(e,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(e,{useSearchParams:function(){return s.useSearchParams}})},6192:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>x});var s=a(5155),r=a(2115),n=a(6874),c=a.n(n),i=a(5695),o=a(6203),l=a(5317),d=a(3201),u=a(9210),h=a(8163),m=a.n(h),_=a(6944),f=a.n(_),y=a(350);function x(){let[t,e]=(0,r.useState)(!1),[a,n]=(0,r.useState)(null),[h,_]=(0,r.useState)(!0),[x,g]=(0,r.useState)(!1),[j,p]=(0,r.useState)(0),[v,N]=(0,r.useState)("published"),[b,w]=(0,r.useState)([]),[E,B]=(0,r.useState)(null),[C,S]=(0,r.useState)(!1),T=(0,i.useRouter)();(0,r.useEffect)(()=>{p(window.innerWidth);let t=()=>{p(window.innerWidth)};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),(0,r.useEffect)(()=>{g(j<768)},[j]),(0,r.useEffect)(()=>{let t=(0,o.hg)(d.j2,t=>{let a=!!t;e(a),n(t),a?_(!1):T.push("/login?redirect=/my-thoughts")});return()=>t()},[T]),(0,r.useEffect)(()=>{let e=async()=>{if(a)try{let t;_(!0);let e=(0,l.rJ)(d.db,"articles");t="published"===v?(0,l.P)(e,(0,l._M)("authorId","==",a.uid),(0,l.My)("createdAt","desc")):(0,l.P)(e,(0,l._M)("authorId","==",a.uid),(0,l._M)("status","==","drafts"),(0,l.My)("createdAt","desc"));let s=await (0,l.GG)(t),r=[];s.forEach(t=>{let e=t.data();"published"===v?e.status&&"published"!==e.status||r.push({id:t.id,...e,status:e.status||"published"}):r.push({id:t.id,...e})}),w(r)}catch(t){console.error("Error fetching articles:",t)}finally{_(!1)}};a&&t&&e()},[a,t,v]);let M=async()=>{try{await (0,o.CI)(d.j2),T.push("/")}catch(t){console.error("Error signing out:",t)}},k=t=>{B(t),S(!0)},A=async()=>{if(E)try{await (0,u.a)(E),w(b.filter(t=>t.id!==E)),S(!1),B(null)}catch(t){console.error("Error deleting article:",t)}},P=t=>{let e;return t?(t&&"function"==typeof t.toDate?t.toDate():new Date(t)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""},U=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:120;if(!t)return"";let a=t.includes("<")&&t.includes(">")?(t=>{let e=document.createElement("div");return e.innerHTML=t,e.textContent||e.innerText||""})(t):t;return a.length<=e?a:a.substring(0,e).trim()+"..."};return h?(0,s.jsx)("div",{className:m().container,children:(0,s.jsx)("div",{className:m().loading,children:"Loading..."})}):t?(0,s.jsxs)("div",{className:m()["three-column-layout"],children:[(0,s.jsxs)("aside",{className:"".concat(m()["left-sidebar"]," ").concat(x?m().collapsed:""),children:[(0,s.jsxs)("div",{className:m()["sidebar-header"],children:[(0,s.jsx)("div",{className:m().logo,children:"Journalite"}),(0,s.jsx)("button",{className:m()["toggle-button"],onClick:()=>{g(!x)},"aria-label":x?"Expand sidebar":"Collapse sidebar",children:x?"→":"←"})]}),(0,s.jsxs)("nav",{className:m()["vertical-nav"],children:[(0,s.jsxs)(c(),{href:"/",className:"".concat(m()["nav-link"]," ").concat(m()["nav-home"]),children:[(0,s.jsx)("span",{className:m()["nav-icon"],children:"•"}),(0,s.jsx)("span",{className:m()["nav-text"],children:"Home"})]}),(0,s.jsxs)(c(),{href:"/my-thoughts",className:"".concat(m()["nav-link"]," ").concat(m()["nav-thoughts"]," ").concat(m().active),children:[(0,s.jsx)("span",{className:m()["nav-icon"],children:"•"}),(0,s.jsx)("span",{className:m()["nav-text"],children:"My Thoughts"})]}),(0,s.jsxs)(c(),{href:"/create-article",className:"".concat(m()["nav-link"]," ").concat(m()["nav-create"]),children:[(0,s.jsx)("span",{className:m()["nav-icon"],children:"•"}),(0,s.jsx)("span",{className:m()["nav-text"],children:"Create Article"})]}),(0,s.jsxs)(c(),{href:"/explore",className:"".concat(m()["nav-link"]," ").concat(m()["nav-explore"]),children:[(0,s.jsx)("span",{className:m()["nav-icon"],children:"•"}),(0,s.jsx)("span",{className:m()["nav-text"],children:"Explore"})]}),(0,s.jsxs)(c(),{href:"/my-profile",className:"".concat(m()["nav-link"]," ").concat(m()["nav-profile"]),children:[(0,s.jsx)("span",{className:m()["nav-icon"],children:"•"}),(0,s.jsx)("span",{className:m()["nav-text"],children:"My Profile"})]}),(0,s.jsxs)("button",{onClick:M,className:"".concat(m()["nav-link"]," ").concat(m()["nav-logout"]),children:[(0,s.jsx)("span",{className:m()["nav-icon"],children:"•"}),(0,s.jsx)("span",{className:m()["nav-text"],children:"Log out"})]})]})]}),(0,s.jsxs)("main",{className:m()["center-column"],children:[(0,s.jsxs)("div",{className:f().header,children:[(0,s.jsx)("h1",{className:f().title,children:"My Thoughts"}),(0,s.jsx)("div",{className:f().actions,children:(0,s.jsx)(c(),{href:"/create-article",className:f().createButton,children:"New Article"})})]}),(0,s.jsxs)("div",{className:f().tabs,children:[(0,s.jsx)("button",{className:"".concat(f().tabButton," ").concat("published"===v?f().active:""),onClick:()=>N("published"),children:"Published"}),(0,s.jsx)("button",{className:"".concat(f().tabButton," ").concat("drafts"===v?f().active:""),onClick:()=>N("drafts"),children:"Drafts"})]}),0===b.length?(0,s.jsxs)("div",{className:f().emptyState,children:[(0,s.jsxs)("p",{children:["You don't have any ",v," articles yet."]}),"published"===v?(0,s.jsx)("p",{children:"When you publish your articles, they will appear here."}):(0,s.jsx)("p",{children:"Save your work as drafts to continue later."}),(0,s.jsx)(c(),{href:"/create-article",className:f().emptyStateButton,children:"Create Your First Article"})]}):(0,s.jsx)("div",{className:f().articlesList,children:b.map(t=>{var e;return(0,s.jsxs)("div",{className:f().articleCard,children:[(0,s.jsxs)("div",{className:f().articleContent,children:[(0,s.jsx)("h2",{className:f().articleTitle,children:(0,s.jsx)(c(),{href:"/articles?slug=".concat(t.slug),children:t.title})}),(0,s.jsx)("p",{className:f().articleDate,children:P(t.createdAt)}),(0,s.jsx)("p",{className:f().articleExcerpt,children:U(t.body)}),(0,s.jsx)("div",{className:f().articleTags,children:null==(e=t.tags)?void 0:e.map((t,e)=>(0,s.jsx)("span",{className:f().articleTag,children:t},e))})]}),(0,s.jsxs)("div",{className:f().articleActions,children:[(0,s.jsx)(c(),{href:"/articles?slug=".concat(t.slug),className:f().viewButton,children:"View"}),(0,s.jsx)(c(),{href:"/edit-article?id=".concat(t.id),className:f().editButton,children:"Edit"}),(0,s.jsx)("button",{className:f().deleteButton,onClick:()=>k(t.id||""),children:"Delete"})]})]},t.id)})})]}),(0,s.jsxs)("aside",{className:m()["right-sidebar"],children:[(0,s.jsx)("h2",{className:m()["sidebar-heading"],children:"Your Stats"}),(0,s.jsx)(y.A,{}),(0,s.jsxs)("div",{className:f().statsContainer,children:[(0,s.jsxs)("div",{className:f().statCard,children:[(0,s.jsx)("span",{className:f().statValue,children:b.filter(t=>"published"===t.status).length}),(0,s.jsx)("span",{className:f().statLabel,children:"Published"})]}),(0,s.jsxs)("div",{className:f().statCard,children:[(0,s.jsx)("span",{className:f().statValue,children:b.filter(t=>"drafts"===t.status).length}),(0,s.jsx)("span",{className:f().statLabel,children:"Drafts"})]})]}),(0,s.jsx)(c(),{href:"/create-article",className:m()["write-button"],children:"Write"})]}),C&&(0,s.jsx)("div",{className:f().modalOverlay,children:(0,s.jsxs)("div",{className:f().modal,children:[(0,s.jsx)("h3",{className:f().modalTitle,children:"Confirm Delete"}),(0,s.jsx)("p",{className:f().modalText,children:"Are you sure you want to delete this article? This action cannot be undone."}),(0,s.jsxs)("div",{className:f().modalButtons,children:[(0,s.jsx)("button",{className:f().cancelButton,onClick:()=>{S(!1),B(null)},children:"Cancel"}),(0,s.jsx)("button",{className:f().confirmButton,onClick:A,children:"Delete"})]})]})})]}):(0,s.jsxs)("div",{className:m().container,children:[(0,s.jsx)("p",{children:"Please log in to view your articles."}),(0,s.jsx)(c(),{href:"/login?redirect=/my-thoughts",className:m().loginLink,children:"Login Now"})]})}},6944:t=>{t.exports={header:"my-thoughts_header__T84ea",title:"my-thoughts_title__H24DY",actions:"my-thoughts_actions__GWoto",createButton:"my-thoughts_createButton__bL87g",tabs:"my-thoughts_tabs__MTj07",tabButton:"my-thoughts_tabButton__OZNMA",active:"my-thoughts_active__COw73",emptyState:"my-thoughts_emptyState__2Re4c",emptyStateButton:"my-thoughts_emptyStateButton__q4s1p",articlesList:"my-thoughts_articlesList__jwxYp",articleCard:"my-thoughts_articleCard__rN5RC",articleContent:"my-thoughts_articleContent__hh7o4",articleTitle:"my-thoughts_articleTitle__WTcKB",articleDate:"my-thoughts_articleDate__6MnGt",articleExcerpt:"my-thoughts_articleExcerpt__7bMHG",articleTags:"my-thoughts_articleTags__XkPh2",articleTag:"my-thoughts_articleTag__joHmZ",articleActions:"my-thoughts_articleActions__4Mqfy",viewButton:"my-thoughts_viewButton__UcpED",editButton:"my-thoughts_editButton__cUZCL",deleteButton:"my-thoughts_deleteButton__PdPWh",statsContainer:"my-thoughts_statsContainer__nxG1O",statCard:"my-thoughts_statCard__AR6VO",statValue:"my-thoughts_statValue__SUqDm",statLabel:"my-thoughts_statLabel__3IppR",modalOverlay:"my-thoughts_modalOverlay__Jj6UM",modal:"my-thoughts_modal__ISbR_",modalTitle:"my-thoughts_modalTitle__T_PLg",modalText:"my-thoughts_modalText__fTuAg",modalButtons:"my-thoughts_modalButtons__s9o7F",cancelButton:"my-thoughts_cancelButton__gh4wj",confirmButton:"my-thoughts_confirmButton__Kxpb_"}},7423:(t,e,a)=>{Promise.resolve().then(a.bind(a,6192))},9995:(t,e,a)=>{"use strict";a.d(e,{Hs:()=>u,N9:()=>c,Ss:()=>i,bA:()=>o,fP:()=>d,fZ:()=>n,he:()=>l});var s=a(5317),r=a(3201);async function n(t,e,a,n,c,i){try{let e=r.j2.currentUser;if(!e||e.uid===t)return null;let o={userId:t,type:"comment",read:!1,sourceId:c,sourceType:"comment",message:"".concat(e.displayName||"Someone",' commented on your article: "').concat(i.substring(0,50)).concat(i.length>50?"...":"",'"'),fromUser:{id:e.uid,name:e.displayName||"Anonymous"},createdAt:s.Dc.now(),articleSlug:a,articleTitle:n};return{id:(await (0,s.gS)((0,s.rJ)(r.db,"notifications"),o)).id,...o}}catch(t){return console.error("Error creating notification:",t),null}}async function c(t,e,a,n){try{if(t===a)return null;let c={userId:t,type:"follow",read:!1,sourceId:a,sourceType:"user",message:"".concat(e," (@").concat(n,") started following you"),fromUser:{id:a,name:e,username:n},createdAt:s.Dc.now()};return{id:(await (0,s.gS)((0,s.rJ)(r.db,"notifications"),c)).id,...c}}catch(t){return console.error("Error creating follow notification:",t),null}}async function i(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{let e,a=r.j2.currentUser;if(!a)throw Error("User not authenticated");let n=(0,s.rJ)(r.db,"notifications");e=t?(0,s.P)(n,(0,s._M)("userId","==",a.uid),(0,s._M)("read","==",!1),(0,s.My)("createdAt","desc"),(0,s.AB)(100)):(0,s.P)(n,(0,s._M)("userId","==",a.uid),(0,s.My)("createdAt","desc"),(0,s.AB)(100));let c=await (0,s.GG)(e),i=[];return c.forEach(t=>{i.push({id:t.id,...t.data()})}),i}catch(t){throw console.error("Error fetching notifications:",t),t}}async function o(t){try{let e=r.j2.currentUser;if(!e)throw Error("User not authenticated");let a=(0,s.H9)(r.db,"notifications",t),n=await (0,s.x7)(a);if(!n.exists())throw Error("Notification not found");if(n.data().userId!==e.uid)throw Error("Unauthorized access to notification");return await (0,s.mZ)(a,{read:!0}),{success:!0}}catch(t){throw console.error("Error marking notification as read:",t),t}}async function l(){try{let t=r.j2.currentUser;if(!t)throw Error("User not authenticated");let e=(0,s.rJ)(r.db,"notifications"),a=(0,s.P)(e,(0,s._M)("userId","==",t.uid),(0,s._M)("read","==",!1)),n=await (0,s.GG)(a),c=n.docs.map(t=>(0,s.mZ)(t.ref,{read:!0}));return await Promise.all(c),{success:!0,count:n.size}}catch(t){throw console.error("Error marking all notifications as read:",t),t}}async function d(t){try{let e=r.j2.currentUser;if(!e)throw Error("User not authenticated");let a=(0,s.H9)(r.db,"notifications",t),n=await (0,s.x7)(a);if(!n.exists())throw Error("Notification not found");if(n.data().userId!==e.uid)throw Error("Unauthorized access to notification");return await (0,s.kd)(a),{success:!0}}catch(t){throw console.error("Error deleting notification:",t),t}}async function u(){try{let t=r.j2.currentUser;if(!t)return 0;let e=(0,s.rJ)(r.db,"notifications"),a=(0,s.P)(e,(0,s._M)("userId","==",t.uid),(0,s._M)("read","==",!1));return(await (0,s.GG)(a)).size}catch(t){return console.error("Error counting unread notifications:",t),0}}}},t=>{var e=e=>t(t.s=e);t.O(0,[1708,8669,2992,7158,7117,6874,1251,8441,1684,7358],()=>e(7423)),_N_E=t.O()}]);