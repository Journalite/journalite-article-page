(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3998],{3201:(e,t,a)=>{"use strict";a.d(t,{db:()=>l,j2:()=>o});var s=a(3915),r=a(6864),n=a(6203),c=a(5317);let i=(0,s.Wp)({apiKey:"AIzaSyCFpybhLt43iKUw6lNahU1n2zjYv0BXmf4",authDomain:"journalitev1.firebaseapp.com",projectId:"journalitev1",storageBucket:"journalitev1.firebasestorage.app",messagingSenderId:"897263211529",appId:"1:897263211529:web:bae4a00910a2236d6d54d8",measurementId:"G-ZYT8PRMT0D"});try{(0,r.P5)(i)}catch(e){}let o=(0,n.xI)(i),l=(0,c.getFirestore)(i);window.location.origin},5695:(e,t,a)=>{"use strict";var s=a(8999);a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},6192:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var s=a(5155),r=a(2115),n=a(6874),c=a.n(n),i=a(5695),o=a(6203),l=a(5317),d=a(3201),u=a(9210),h=a(8163),m=a.n(h),y=a(6944),f=a.n(y),_=a(350);function g(){let[e,t]=(0,r.useState)(!1),[a,n]=(0,r.useState)(null),[h,y]=(0,r.useState)(!0),[g,x]=(0,r.useState)(!1),[j,p]=(0,r.useState)(0),[v,N]=(0,r.useState)("published"),[w,b]=(0,r.useState)([]),[E,B]=(0,r.useState)(null),[C,T]=(0,r.useState)(!1),D=(0,i.useRouter)();(0,r.useEffect)(()=>{p(window.innerWidth);let e=()=>{p(window.innerWidth)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,r.useEffect)(()=>{x(j<768)},[j]),(0,r.useEffect)(()=>{let e=(0,o.hg)(d.j2,e=>{let a=!!e;t(a),n(e),a?y(!1):D.push("/login?redirect=/my-thoughts")});return()=>e()},[D]),(0,r.useEffect)(()=>{let t=async()=>{if(a)try{let e;y(!0);let t=(0,l.collection)(d.db,"articles");e="published"===v?(0,l.query)(t,(0,l.where)("authorId","==",a.uid),(0,l.orderBy)("createdAt","desc")):(0,l.query)(t,(0,l.where)("authorId","==",a.uid),(0,l.where)("status","==","drafts"),(0,l.orderBy)("createdAt","desc"));let s=await (0,l.getDocs)(e),r=[];s.forEach(e=>{let t=e.data();"published"===v?t.status&&"published"!==t.status||r.push({id:e.id,...t,status:t.status||"published"}):r.push({id:e.id,...t})}),b(r)}catch(e){console.error("Error fetching articles:",e)}finally{y(!1)}};a&&e&&t()},[a,e,v]);let S=async()=>{try{await (0,o.CI)(d.j2),D.push("/")}catch(e){console.error("Error signing out:",e)}},k=e=>{B(e),T(!0)},A=async()=>{if(E)try{await (0,u.a)(E),b(w.filter(e=>e.id!==E)),T(!1),B(null)}catch(e){console.error("Error deleting article:",e)}},I=e=>{let t;return e?(e&&"function"==typeof e.toDate?e.toDate():new Date(e)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""},U=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:120;if(!e)return"";let a=e.includes("<")&&e.includes(">")?(e=>{let t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""})(e):e;return a.length<=t?a:a.substring(0,t).trim()+"..."};return h?(0,s.jsx)("div",{className:m().container,children:(0,s.jsx)("div",{className:m().loading,children:"Loading..."})}):e?(0,s.jsxs)("div",{className:m()["three-column-layout"],children:[(0,s.jsxs)("aside",{className:"".concat(m()["left-sidebar"]," ").concat(g?m().collapsed:""),children:[(0,s.jsxs)("div",{className:m()["sidebar-header"],children:[(0,s.jsx)("div",{className:m().logo,children:"Journalite"}),(0,s.jsx)("button",{className:m()["toggle-button"],onClick:()=>{x(!g)},"aria-label":g?"Expand sidebar":"Collapse sidebar",children:g?"→":"←"})]}),(0,s.jsxs)("nav",{className:m()["vertical-nav"],children:[(0,s.jsxs)(c(),{href:"/",className:"".concat(m()["nav-link"]," ").concat(m()["nav-home"]),children:[(0,s.jsx)("span",{className:m()["nav-icon"],children:"•"}),(0,s.jsx)("span",{className:m()["nav-text"],children:"Home"})]}),(0,s.jsxs)(c(),{href:"/my-thoughts",className:"".concat(m()["nav-link"]," ").concat(m()["nav-thoughts"]," ").concat(m().active),children:[(0,s.jsx)("span",{className:m()["nav-icon"],children:"•"}),(0,s.jsx)("span",{className:m()["nav-text"],children:"My Thoughts"})]}),(0,s.jsxs)(c(),{href:"/create-article",className:"".concat(m()["nav-link"]," ").concat(m()["nav-create"]),children:[(0,s.jsx)("span",{className:m()["nav-icon"],children:"•"}),(0,s.jsx)("span",{className:m()["nav-text"],children:"Create Article"})]}),(0,s.jsxs)(c(),{href:"/explore",className:"".concat(m()["nav-link"]," ").concat(m()["nav-explore"]),children:[(0,s.jsx)("span",{className:m()["nav-icon"],children:"•"}),(0,s.jsx)("span",{className:m()["nav-text"],children:"Explore"})]}),(0,s.jsxs)(c(),{href:"/my-profile",className:"".concat(m()["nav-link"]," ").concat(m()["nav-profile"]),children:[(0,s.jsx)("span",{className:m()["nav-icon"],children:"•"}),(0,s.jsx)("span",{className:m()["nav-text"],children:"My Profile"})]}),(0,s.jsxs)("button",{onClick:S,className:"".concat(m()["nav-link"]," ").concat(m()["nav-logout"]),children:[(0,s.jsx)("span",{className:m()["nav-icon"],children:"•"}),(0,s.jsx)("span",{className:m()["nav-text"],children:"Log out"})]})]})]}),(0,s.jsxs)("main",{className:m()["center-column"],children:[(0,s.jsxs)("div",{className:f().header,children:[(0,s.jsx)("h1",{className:f().title,children:"My Thoughts"}),(0,s.jsx)("div",{className:f().actions,children:(0,s.jsx)(c(),{href:"/create-article",className:f().createButton,children:"New Article"})})]}),(0,s.jsxs)("div",{className:f().tabs,children:[(0,s.jsx)("button",{className:"".concat(f().tabButton," ").concat("published"===v?f().active:""),onClick:()=>N("published"),children:"Published"}),(0,s.jsx)("button",{className:"".concat(f().tabButton," ").concat("drafts"===v?f().active:""),onClick:()=>N("drafts"),children:"Drafts"})]}),0===w.length?(0,s.jsxs)("div",{className:f().emptyState,children:[(0,s.jsxs)("p",{children:["You don't have any ",v," articles yet."]}),"published"===v?(0,s.jsx)("p",{children:"When you publish your articles, they will appear here."}):(0,s.jsx)("p",{children:"Save your work as drafts to continue later."}),(0,s.jsx)(c(),{href:"/create-article",className:f().emptyStateButton,children:"Create Your First Article"})]}):(0,s.jsx)("div",{className:f().articlesList,children:w.map(e=>{var t;return(0,s.jsxs)("div",{className:f().articleCard,children:[(0,s.jsxs)("div",{className:f().articleContent,children:[(0,s.jsx)("h2",{className:f().articleTitle,children:(0,s.jsx)(c(),{href:"/articles?slug=".concat(e.slug),children:e.title})}),(0,s.jsx)("p",{className:f().articleDate,children:I(e.createdAt)}),(0,s.jsx)("p",{className:f().articleExcerpt,children:U(e.body)}),(0,s.jsx)("div",{className:f().articleTags,children:null==(t=e.tags)?void 0:t.map((e,t)=>(0,s.jsx)("span",{className:f().articleTag,children:e},t))})]}),(0,s.jsxs)("div",{className:f().articleActions,children:[(0,s.jsx)(c(),{href:"/articles?slug=".concat(e.slug),className:f().viewButton,children:"View"}),(0,s.jsx)(c(),{href:"/edit-article?id=".concat(e.id),className:f().editButton,children:"Edit"}),(0,s.jsx)("button",{className:f().deleteButton,onClick:()=>k(e.id||""),children:"Delete"})]})]},e.id)})})]}),(0,s.jsxs)("aside",{className:m()["right-sidebar"],children:[(0,s.jsx)("h2",{className:m()["sidebar-heading"],children:"Your Stats"}),(0,s.jsx)(_.A,{}),(0,s.jsxs)("div",{className:f().statsContainer,children:[(0,s.jsxs)("div",{className:f().statCard,children:[(0,s.jsx)("span",{className:f().statValue,children:w.filter(e=>"published"===e.status).length}),(0,s.jsx)("span",{className:f().statLabel,children:"Published"})]}),(0,s.jsxs)("div",{className:f().statCard,children:[(0,s.jsx)("span",{className:f().statValue,children:w.filter(e=>"drafts"===e.status).length}),(0,s.jsx)("span",{className:f().statLabel,children:"Drafts"})]})]}),(0,s.jsx)(c(),{href:"/create-article",className:m()["write-button"],children:"Write"})]}),C&&(0,s.jsx)("div",{className:f().modalOverlay,children:(0,s.jsxs)("div",{className:f().modal,children:[(0,s.jsx)("h3",{className:f().modalTitle,children:"Confirm Delete"}),(0,s.jsx)("p",{className:f().modalText,children:"Are you sure you want to delete this article? This action cannot be undone."}),(0,s.jsxs)("div",{className:f().modalButtons,children:[(0,s.jsx)("button",{className:f().cancelButton,onClick:()=>{T(!1),B(null)},children:"Cancel"}),(0,s.jsx)("button",{className:f().confirmButton,onClick:A,children:"Delete"})]})]})})]}):(0,s.jsxs)("div",{className:m().container,children:[(0,s.jsx)("p",{children:"Please log in to view your articles."}),(0,s.jsx)(c(),{href:"/login?redirect=/my-thoughts",className:m().loginLink,children:"Login Now"})]})}},6944:e=>{e.exports={header:"my-thoughts_header__T84ea",title:"my-thoughts_title__H24DY",actions:"my-thoughts_actions__GWoto",createButton:"my-thoughts_createButton__bL87g",tabs:"my-thoughts_tabs__MTj07",tabButton:"my-thoughts_tabButton__OZNMA",active:"my-thoughts_active__COw73",emptyState:"my-thoughts_emptyState__2Re4c",emptyStateButton:"my-thoughts_emptyStateButton__q4s1p",articlesList:"my-thoughts_articlesList__jwxYp",articleCard:"my-thoughts_articleCard__rN5RC",articleContent:"my-thoughts_articleContent__hh7o4",articleTitle:"my-thoughts_articleTitle__WTcKB",articleDate:"my-thoughts_articleDate__6MnGt",articleExcerpt:"my-thoughts_articleExcerpt__7bMHG",articleTags:"my-thoughts_articleTags__XkPh2",articleTag:"my-thoughts_articleTag__joHmZ",articleActions:"my-thoughts_articleActions__4Mqfy",viewButton:"my-thoughts_viewButton__UcpED",editButton:"my-thoughts_editButton__cUZCL",deleteButton:"my-thoughts_deleteButton__PdPWh",statsContainer:"my-thoughts_statsContainer__nxG1O",statCard:"my-thoughts_statCard__AR6VO",statValue:"my-thoughts_statValue__SUqDm",statLabel:"my-thoughts_statLabel__3IppR",modalOverlay:"my-thoughts_modalOverlay__Jj6UM",modal:"my-thoughts_modal__ISbR_",modalTitle:"my-thoughts_modalTitle__T_PLg",modalText:"my-thoughts_modalText__fTuAg",modalButtons:"my-thoughts_modalButtons__s9o7F",cancelButton:"my-thoughts_cancelButton__gh4wj",confirmButton:"my-thoughts_confirmButton__Kxpb_"}},7423:(e,t,a)=>{Promise.resolve().then(a.bind(a,6192))},9995:(e,t,a)=>{"use strict";a.d(t,{Hs:()=>u,N9:()=>c,Ss:()=>i,bA:()=>o,fP:()=>d,fZ:()=>n,he:()=>l});var s=a(5317),r=a(3201);async function n(e,t,a,n,c,i){try{let t=r.j2.currentUser;if(!t||t.uid===e)return null;let o={userId:e,type:"comment",read:!1,sourceId:c,sourceType:"comment",message:"".concat(t.displayName||"Someone",' commented on your article: "').concat(i.substring(0,50)).concat(i.length>50?"...":"",'"'),fromUser:{id:t.uid,name:t.displayName||"Anonymous"},createdAt:s.Timestamp.now(),articleSlug:a,articleTitle:n};return{id:(await (0,s.addDoc)((0,s.collection)(r.db,"notifications"),o)).id,...o}}catch(e){return console.error("Error creating notification:",e),null}}async function c(e,t,a,n){try{if(e===a)return null;let c={userId:e,type:"follow",read:!1,sourceId:a,sourceType:"user",message:"".concat(t," (@").concat(n,") started following you"),fromUser:{id:a,name:t,username:n},createdAt:s.Timestamp.now()};return{id:(await (0,s.addDoc)((0,s.collection)(r.db,"notifications"),c)).id,...c}}catch(e){return console.error("Error creating follow notification:",e),null}}async function i(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{let t,a=r.j2.currentUser;if(!a)throw Error("User not authenticated");let n=(0,s.collection)(r.db,"notifications");t=e?(0,s.query)(n,(0,s.where)("userId","==",a.uid),(0,s.where)("read","==",!1),(0,s.orderBy)("createdAt","desc"),(0,s.limit)(100)):(0,s.query)(n,(0,s.where)("userId","==",a.uid),(0,s.orderBy)("createdAt","desc"),(0,s.limit)(100));let c=await (0,s.getDocs)(t),i=[];return c.forEach(e=>{i.push({id:e.id,...e.data()})}),i}catch(e){throw console.error("Error fetching notifications:",e),e}}async function o(e){try{let t=r.j2.currentUser;if(!t)throw Error("User not authenticated");let a=(0,s.doc)(r.db,"notifications",e),n=await (0,s.getDoc)(a);if(!n.exists())throw Error("Notification not found");if(n.data().userId!==t.uid)throw Error("Unauthorized access to notification");return await (0,s.updateDoc)(a,{read:!0}),{success:!0}}catch(e){throw console.error("Error marking notification as read:",e),e}}async function l(){try{let e=r.j2.currentUser;if(!e)throw Error("User not authenticated");let t=(0,s.collection)(r.db,"notifications"),a=(0,s.query)(t,(0,s.where)("userId","==",e.uid),(0,s.where)("read","==",!1)),n=await (0,s.getDocs)(a),c=n.docs.map(e=>(0,s.updateDoc)(e.ref,{read:!0}));return await Promise.all(c),{success:!0,count:n.size}}catch(e){throw console.error("Error marking all notifications as read:",e),e}}async function d(e){try{let t=r.j2.currentUser;if(!t)throw Error("User not authenticated");let a=(0,s.doc)(r.db,"notifications",e),n=await (0,s.getDoc)(a);if(!n.exists())throw Error("Notification not found");if(n.data().userId!==t.uid)throw Error("Unauthorized access to notification");return await (0,s.deleteDoc)(a),{success:!0}}catch(e){throw console.error("Error deleting notification:",e),e}}async function u(){try{let e=r.j2.currentUser;if(!e)return 0;let t=(0,s.collection)(r.db,"notifications"),a=(0,s.query)(t,(0,s.where)("userId","==",e.uid),(0,s.where)("read","==",!1));return(await (0,s.getDocs)(a)).size}catch(e){return console.error("Error counting unread notifications:",e),0}}}},e=>{var t=t=>e(e.s=t);e.O(0,[1708,2813,2992,7158,7117,6874,1251,8441,1684,7358],()=>t(7423)),_N_E=e.O()}]);