(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9451],{1602:(e,n,l)=>{Promise.resolve().then(l.bind(l,2796))},2796:(e,n,l)=>{"use strict";l.r(n),l.d(n,{default:()=>c});var r=l(5155),t=l(2115),i=l(9122),a=l(5798),o=l.n(a);let s=e=>{let{userId:n}=e,[a,s]=(0,t.useState)([]),[c,d]=(0,t.useState)(!0),[u,h]=(0,t.useState)(null),[f,p]=(0,t.useState)(null),[_,j]=(0,t.useState)(!1),[x,m]=(0,t.useState)(null);(0,t.useEffect)(()=>{g()},[n]);let g=async()=>{try{console.log("Loading reflection journals...");let e=await (0,i.Tt)(n);console.log("Loaded journals:",e),s(e)}catch(e){console.error("Error loading reflection journals:",e)}finally{d(!1)}},y=e=>{try{return((null==e?void 0:e.toDate)?e.toDate():new Date(e)).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch(e){return"Unknown date"}},v=async e=>{j(!0),p(null);try{let{getArticleById:n}=await l.e(9210).then(l.bind(l,9210)),r=await n(e);r?p({title:r.title,body:r.body}):p({title:"Article not found",body:"This article may have been deleted or is no longer available."})}catch(e){console.error("Error loading article content:",e),p({title:"Error loading article",body:"There was an error loading this article content."})}finally{j(!1)}},R=async(e,n)=>{if(confirm("Are you sure you want to delete this reflection? This action cannot be undone.")){m(n);try{if(await (0,i.QT)(e,n)){if(await g(),u&&u.articleId===e){let n=a.find(n=>n.articleId===e);n&&0!==n.responses.length?h(n):h(null)}}else alert("Failed to delete reflection. Please try again.")}catch(e){console.error("Error deleting reflection:",e),alert("Error deleting reflection. Please try again.")}finally{m(null)}}};return c?(0,r.jsx)("div",{className:o().container,children:(0,r.jsxs)("div",{className:o().loading,children:[(0,r.jsx)("div",{className:o().loadingSpinner}),(0,r.jsx)("p",{children:"Loading your reflection journal..."})]})}):0===a.length?(0,r.jsxs)("div",{className:o().container,children:[(0,r.jsxs)("div",{className:o().header,children:[(0,r.jsx)("h1",{children:"\uD83D\uDCD3 Your Reflection Journal"}),(0,r.jsx)("p",{children:"Your personal thoughts and reflections from your reading journey"})]}),(0,r.jsxs)("div",{className:o().emptyState,children:[(0,r.jsx)("div",{className:o().emptyIcon,children:"\uD83D\uDCD6"}),(0,r.jsx)("h3",{children:"No reflections yet"}),(0,r.jsx)("p",{children:"Start reading articles and share your thoughts through interactive reflection prompts."}),(0,r.jsx)("p",{children:"Your private reflections will appear here as you engage with content."})]})]}):(0,r.jsxs)("div",{className:o().container,children:[(0,r.jsxs)("div",{className:o().header,children:[(0,r.jsx)("h1",{children:"\uD83D\uDCD3 Your Reflection Journal"}),(0,r.jsx)("p",{children:"Your personal thoughts and reflections from your reading journey"}),(0,r.jsxs)("div",{className:o().stats,children:[(0,r.jsxs)("span",{children:[a.length," articles reflected on"]}),(0,r.jsx)("span",{children:"•"}),(0,r.jsxs)("span",{children:[a.reduce((e,n)=>e+n.responses.length,0)," reflections"]})]})]}),(0,r.jsxs)("div",{className:o().journalGrid,children:[(0,r.jsxs)("div",{className:o().journalList,children:[(0,r.jsx)("h2",{children:"Articles"}),a.map(e=>(0,r.jsxs)("div",{className:"".concat(o().journalCard," ").concat((null==u?void 0:u.articleId)===e.articleId?o().selected:""),onClick:()=>h(e),children:[(0,r.jsx)("h3",{className:o().articleTitle,children:e.articleTitle}),(0,r.jsxs)("div",{className:o().journalMeta,children:[(0,r.jsxs)("span",{children:[e.responses.length," reflections"]}),(0,r.jsx)("span",{children:"•"}),(0,r.jsx)("span",{children:y(e.updatedAt)})]}),(0,r.jsx)("button",{className:o().readAgainLink,onClick:n=>{n.stopPropagation(),v(e.articleId)},style:{background:"none",border:"none",padding:0,font:"inherit",cursor:"pointer",color:"inherit"},children:"Read again →"})]},e.articleId))]}),(0,r.jsx)("div",{className:o().reflectionDetails,children:f?(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:o().detailsHeader,children:[(0,r.jsx)("h2",{children:f.title}),(0,r.jsx)("button",{onClick:()=>p(null),style:{background:"#f0f0f0",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"← Back to reflections"})]}),_?(0,r.jsxs)("div",{style:{padding:"20px",textAlign:"center"},children:[(0,r.jsx)("div",{className:o().loadingSpinner}),(0,r.jsx)("p",{children:"Loading article..."})]}):(0,r.jsx)("div",{className:o().articleContent,dangerouslySetInnerHTML:{__html:f.body},style:{padding:"20px",lineHeight:"1.6",fontSize:"16px",maxHeight:"70vh",overflowY:"auto"}})]}):u?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:o().detailsHeader,children:[(0,r.jsx)("h2",{children:u.articleTitle}),(0,r.jsxs)("p",{children:["Reflections from ",y(u.updatedAt)]})]}),(0,r.jsx)("div",{className:o().reflectionsList,children:u.responses.map((e,n)=>(0,r.jsxs)("div",{className:o().reflectionItem,children:[(0,r.jsxs)("div",{className:o().reflectionPrompt,style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,r.jsx)("span",{className:o().promptIcon,children:"\uD83D\uDCAD"}),(0,r.jsx)("strong",{style:{flex:1},children:e.promptText}),(0,r.jsx)("button",{onClick:()=>R(u.articleId,e.id),disabled:x===e.id,style:{marginLeft:"auto",background:"none",border:"none",color:"#dc2626",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",opacity:x===e.id?.5:1},title:"Delete reflection",children:x===e.id?"⏳":"\uD83D\uDDD1️"})]}),(0,r.jsx)("div",{className:o().reflectionResponse,children:(0,r.jsx)("p",{children:e.response})}),(0,r.jsx)("div",{className:o().reflectionMeta,children:(0,r.jsxs)("small",{children:["Position: Paragraph ",e.position+1]})})]},e.id))})]}):(0,r.jsxs)("div",{className:o().selectPrompt,children:[(0,r.jsx)("div",{className:o().selectIcon,children:"\uD83D\uDC48"}),(0,r.jsx)("h3",{children:"Select an article"}),(0,r.jsx)("p",{children:'Choose an article from the left to view your reflections, or click "Read again" to view the full article'})]})})]})]})};function c(){return(0,r.jsx)(s,{})}},5798:e=>{e.exports={container:"ReflectionJournal_container__6MoHq",header:"ReflectionJournal_header__bnfS6",stats:"ReflectionJournal_stats__ALalu",loading:"ReflectionJournal_loading__yp_Q8",loadingSpinner:"ReflectionJournal_loadingSpinner__qkIv3",spin:"ReflectionJournal_spin__oAlXA",emptyState:"ReflectionJournal_emptyState__CqUHN",emptyIcon:"ReflectionJournal_emptyIcon__VjsDD",journalGrid:"ReflectionJournal_journalGrid__1R0fD",journalList:"ReflectionJournal_journalList__fwtN7",journalCard:"ReflectionJournal_journalCard__yrJnc",selected:"ReflectionJournal_selected__ORRwN",articleTitle:"ReflectionJournal_articleTitle__rH_Oy",journalMeta:"ReflectionJournal_journalMeta__Wl54D",readAgainLink:"ReflectionJournal_readAgainLink__VtBuw",reflectionDetails:"ReflectionJournal_reflectionDetails__2ajaK",detailsHeader:"ReflectionJournal_detailsHeader__GiS3r",reflectionsList:"ReflectionJournal_reflectionsList__xovmp",reflectionItem:"ReflectionJournal_reflectionItem__DDAzN",reflectionPrompt:"ReflectionJournal_reflectionPrompt__TlXfy",promptIcon:"ReflectionJournal_promptIcon__oap3E",reflectionResponse:"ReflectionJournal_reflectionResponse__Ey3sb",reflectionMeta:"ReflectionJournal_reflectionMeta__SJ9Hk",selectPrompt:"ReflectionJournal_selectPrompt__AqjUO",selectIcon:"ReflectionJournal_selectIcon__mHwVJ"}}},e=>{var n=n=>e(e.s=n);e.O(0,[4389,2992,7158,7117,9122,8441,1684,7358],()=>n(1602)),_N_E=e.O()}]);