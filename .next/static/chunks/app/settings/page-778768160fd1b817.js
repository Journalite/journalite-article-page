(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4662],{2608:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var a=s(5155),r=s(2115),n=s(5695),l=s(6874),o=s.n(l),i=s(3201),c=s(6203),d=s(4744);let m=["Technology","Science","Art & Design","Books & Literature","Travel","Food & Cooking","Health & Wellness","Sports","Music","Movies & TV","Gaming","Fashion","Business & Finance","History","Politics","Photography"];function u(){let[e,t]=(0,r.useState)(null),[s,l]=(0,r.useState)(null),[u,x]=(0,r.useState)([]),[h,f]=(0,r.useState)(!1),[g,b]=(0,r.useState)(""),[p,N]=(0,r.useState)(""),[y,j]=(0,r.useState)(""),[v,w]=(0,r.useState)(""),[k,C]=(0,r.useState)(!1),[S,P]=(0,r.useState)(null),[F,A]=(0,r.useState)(!1),[B,M]=(0,r.useState)({}),[T,z]=(0,r.useState)({}),[U,q]=(0,r.useState)(!1),[I,D]=(0,r.useState)(!1),[E,L]=(0,r.useState)(!0),[H,V]=(0,r.useState)(""),[R,_]=(0,r.useState)(""),[W,Y]=(0,r.useState)(""),[O,G]=(0,r.useState)(""),Z=(0,n.useRouter)();(0,r.useEffect)(()=>{let e=(0,c.hg)(i.j2,async e=>{if(e){t(e);try{let t=await (0,d.VM)(e.uid);t?(l(t),x(t.interests||[]),b(t.firstName||""),N(t.lastName||""),j(t.username||""),w(t.bio||""),t.username&&J(t.username,!0)):V("Could not load your profile. Please try again.")}catch(e){console.error("Error fetching profile:",e),V("Failed to load profile data.")}}else Z.push("/login");L(!1)});return()=>e()},[Z]);let $=e=>{Y(""),V(""),x(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},Q=async()=>{if(!e)return void V("User not authenticated. Please log in again.");if(u.length<3){V("Please select at least 3 interests."),Y("");return}f(!0),V(""),Y("");try{await (0,d.Ay)(e.uid,u),Y("Your interests have been updated successfully!"),s&&l({...s,interests:u})}catch(e){console.error("Failed to update interests:",e),V("Failed to update interests. Please try again.")}finally{f(!1)}},J=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length<2)return void P(null);C(!0);try{let a=await (0,d.OQ)(e);t&&s&&e===s.username?P(!0):P(!a)}catch(e){console.error("Error checking username:",e),P(null),_("Could not verify username. Please try again.")}finally{C(!1)}};(0,r.useEffect)(()=>{if(!s||y===s.username||y.length<2){y.length<2&&y!==((null==s?void 0:s.username)||"")&&P(null);return}let e=setTimeout(()=>{J(y)},500);return()=>clearTimeout(e)},[y,s]);let K=e=>{let{name:t,value:s}=e.target;if(G(""),_(""),"firstName"===t&&b(s),"lastName"===t&&N(s),"username"===t&&j(s),"bio"===t&&w(s),M({...B,[t]:!0}),s.trim()||"firstName"!==t&&"lastName"!==t&&"username"!==t){let e={...T};delete e[t],z(e)}else z({...T,[t]:"Your ".concat(t.replace(/([A-Z])/g," $1").toLowerCase()," is required.")})},X=e=>{let{name:t,value:s}=e.target;if(M({...B,[t]:!0}),s.trim()||"firstName"!==t&&"lastName"!==t&&"username"!==t)if("username"===t&&s.length<2)z({...T,[t]:"Username must be at least 2 characters."});else{let e={...T};delete e[t],z(e)}else z({...T,[t]:"Your ".concat(t.replace(/([A-Z])/g," $1").toLowerCase()," is required.")})},ee=()=>{let e={},t=!0;return g.trim()||(e.firstName="First name is required.",t=!1),p.trim()||(e.lastName="Last name is required.",t=!1),y.trim()?y.length<2?(e.username="Username must be at least 2 characters.",t=!1):!1===S&&y!==(null==s?void 0:s.username)&&(e.username="This username is already taken.",t=!1):(e.username="Username is required.",t=!1),z(e),M({firstName:!0,lastName:!0,username:!0,bio:!0}),t},et=async()=>{if(!e||!s)return void _("User data not available. Please try again.");if(ee()){A(!0),_(""),G("");try{await (0,d.Vz)(e.uid,{firstName:g,lastName:p,username:y,email:s.email,bio:v,interests:u}),G("Profile information updated successfully!"),l(e=>e?{...e,firstName:g,lastName:p,username:y,bio:v}:null)}catch(e){var t;console.error("Failed to update profile:",e),(null==(t=e.message)?void 0:t.includes("Username is already taken"))?(z({...T,username:"This username is already taken."}),_("This username is already taken. Please choose another.")):_("Failed to update profile information. Please try again.")}finally{A(!1)}}},es=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a="w-full px-4 py-3 bg-white border border-neutral-300 rounded-lg shadow-sm transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-amber-500 focus:border-amber-500 placeholder-neutral-400 text-neutral-700";return t?"".concat(a," border-red-400 focus:ring-red-400 focus:border-red-400 bg-red-50 text-red-700 placeholder-red-400"):"username"===e&&y.length>=2&&!0===s?"".concat(a," border-green-400 focus:ring-green-400 focus:border-green-400 bg-green-50 text-green-700 placeholder-green-400"):"".concat(a," hover:border-neutral-400")},ea=async()=>{if(!e){V("User not authenticated. Please re-login."),q(!1);return}D(!0),V(""),_("");try{await (0,d.Ci)(e.uid),await (0,c.CI)(i.j2),Z.push("/login?accountDeleted=true")}catch(e){console.error("Failed to delete account:",e),e.message.includes("requires recent authentication")?V("This action requires you to have signed in recently. Please sign out, sign back in, and try again."):V("Failed to delete your account. Please try again or contact support.")}finally{D(!1),H||q(!1)}};return E?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-stone-100 to-amber-100 flex items-center justify-center font-sans",children:(0,a.jsx)("div",{className:"animate-spin h-10 w-10 border-4 border-amber-500 rounded-full border-t-transparent"})}):e&&s?(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-stone-100 to-amber-100 flex flex-col items-center p-4 sm:p-6 md:p-8 font-sans relative",children:[(0,a.jsx)("div",{className:"absolute top-4 left-4 sm:top-6 sm:left-6 z-10",children:(0,a.jsxs)(o(),{href:"/",className:"flex items-center text-stone-600 hover:text-amber-600 transition-colors duration-200 group",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 transform group-hover:-translate-x-1 transition-transform duration-200",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Back to Home"})]})}),(0,a.jsxs)("div",{className:"w-full max-w-3xl bg-white p-6 sm:p-8 md:p-10 rounded-xl shadow-2xl mt-12 sm:mt-16",children:[(0,a.jsx)("h1",{className:"text-3xl sm:text-4xl font-serif font-medium text-stone-800 mb-3 text-center",children:"Account Settings"}),(0,a.jsx)("p",{className:"text-stone-600 text-lg mb-8 md:mb-10 text-center",children:"Manage your preferences and profile details."}),(0,a.jsxs)("section",{id:"profile-info",className:"mb-12",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-semibold text-stone-700 mb-2",children:"Profile Information"}),(0,a.jsx)("p",{className:"text-stone-500 text-sm mb-6",children:"Update your name, username, and bio."}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),et()},className:"space-y-5",noValidate:!0,children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"firstName",className:"block text-sm font-medium text-stone-600 mb-1",children:"First Name"}),(0,a.jsx)("input",{id:"firstName",name:"firstName",type:"text",value:g,onChange:K,onBlur:X,className:es("firstName",!!T.firstName),required:!0}),B.firstName&&T.firstName&&(0,a.jsx)("p",{className:"mt-1 text-xs text-red-500",children:T.firstName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"lastName",className:"block text-sm font-medium text-stone-600 mb-1",children:"Last Name"}),(0,a.jsx)("input",{id:"lastName",name:"lastName",type:"text",value:p,onChange:K,onBlur:X,className:es("lastName",!!T.lastName),required:!0}),B.lastName&&T.lastName&&(0,a.jsx)("p",{className:"mt-1 text-xs text-red-500",children:T.lastName})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-stone-600 mb-1",children:"Username"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{id:"username",name:"username",type:"text",value:y,onChange:K,onBlur:X,className:es("username",!!T.username,S),required:!0}),k&&(0,a.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:(0,a.jsx)("div",{className:"animate-spin h-4 w-4 border-2 border-stone-400 rounded-full border-t-transparent"})}),!k&&y.length>=2&&!0===S&&y!==(null==s?void 0:s.username)&&(0,a.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-green-500",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),B.username&&T.username&&(0,a.jsx)("p",{className:"mt-1 text-xs text-red-500",children:T.username}),!T.username&&y.length>=2&&!0===S&&y!==(null==s?void 0:s.username)&&(0,a.jsx)("p",{className:"mt-1 text-xs text-green-500",children:"Username is available"}),!T.username&&y.length>=2&&!1===S&&y!==(null==s?void 0:s.username)&&(0,a.jsx)("p",{className:"mt-1 text-xs text-red-500",children:"Username is already taken"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"bio",className:"block text-sm font-medium text-stone-600 mb-1",children:"Bio"}),(0,a.jsx)("textarea",{id:"bio",name:"bio",rows:3,value:v,onChange:K,onBlur:X,className:es("bio",!!T.bio),placeholder:"Tell us a little about yourself..."}),B.bio&&T.bio&&(0,a.jsx)("p",{className:"mt-1 text-xs text-red-500",children:T.bio})]}),R&&(0,a.jsx)("p",{className:"my-2 p-3 bg-red-100 text-red-700 text-sm rounded-lg border border-red-200 animate-fadeIn text-center",children:R}),O&&(0,a.jsx)("p",{className:"my-2 p-3 bg-green-100 text-green-700 text-sm rounded-lg border border-green-200 animate-fadeIn text-center",children:O}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{type:"submit",className:"px-6 py-2.5 bg-stone-800 text-white rounded-lg shadow-md hover:bg-stone-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 transition-all duration-200 ease-in-out transform hover:scale-[1.01] active:scale-[0.99] disabled:opacity-70 disabled:cursor-not-allowed",disabled:F,children:F?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving Profile..."]}):"Save Profile Changes"})})]})]}),(0,a.jsx)("hr",{className:"my-10 border-stone-300"}),(0,a.jsxs)("section",{id:"interests",className:"mt-8",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-semibold text-stone-700 mb-2",children:"Your Interests"}),(0,a.jsx)("p",{className:"text-stone-500 text-sm mb-6",children:"Select topics that you care about to help us personalize your experience. Choose at least 3."}),(0,a.jsx)("div",{className:"flex flex-wrap justify-center gap-3 sm:gap-4 mb-8",children:m.map(e=>(0,a.jsx)("button",{className:"\n                    px-5 py-2.5 sm:px-6 sm:py-3 rounded-full text-sm sm:text-base font-medium transition-all duration-200 ease-in-out transform focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 \n                    ".concat(u.includes(e)?"bg-amber-500 text-white shadow-md scale-105":"bg-white text-stone-700 border border-stone-300 hover:bg-stone-50 hover:border-stone-400 hover:shadow-sm active:scale-95"),onClick:()=>$(e),children:e},e))}),H&&(0,a.jsxs)("p",{className:"my-4 p-3 bg-red-100 text-red-700 text-sm rounded-lg border border-red-200 animate-fadeIn text-center",children:[H," "]}),W&&(0,a.jsxs)("p",{className:"my-4 p-3 bg-green-100 text-green-700 text-sm rounded-lg border border-green-200 animate-fadeIn text-center",children:[W," "]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("button",{className:"w-full max-w-xs flex items-center justify-center px-6 py-3.5 bg-stone-800 text-white rounded-lg shadow-md hover:bg-stone-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 transition-all duration-200 ease-in-out transform hover:scale-[1.01] active:scale-[0.99] disabled:opacity-70 disabled:cursor-not-allowed",onClick:Q,disabled:h||u.length<3,children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving Interests..."]}):"Save Interest Changes"})})]}),(0,a.jsx)("hr",{className:"my-10 border-stone-300"}),(0,a.jsxs)("section",{id:"account-management",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-semibold text-stone-700 mb-4",children:"Account Management"}),(0,a.jsx)("p",{className:"text-stone-600 text-sm mb-6",children:"Manage your account settings or take critical actions."}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-md font-medium text-stone-700",children:"Change Email or Password"}),(0,a.jsx)("p",{className:"text-xs text-stone-500 mb-2",children:"Functionality to update your email or password will be available here soon."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-md font-medium text-red-600",children:"Delete Account"}),(0,a.jsx)("p",{className:"text-xs text-stone-500 mb-3",children:"Permanently delete your account and all associated data. This action cannot be undone."}),(0,a.jsx)("button",{onClick:()=>{_(""),V(""),q(!0)},className:"px-5 py-2.5 bg-red-600 text-white rounded-lg shadow-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-all duration-200 ease-in-out transform hover:scale-[1.01] active:scale-[0.99] disabled:opacity-70",disabled:h||F||E,children:"Delete My Account"})]})]})]})]}),U&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fadeIn",children:(0,a.jsxs)("div",{className:"bg-white p-6 sm:p-8 rounded-xl shadow-2xl w-full max-w-md transform transition-all duration-300 ease-out scale-100 opacity-100",children:[(0,a.jsx)("h3",{className:"text-2xl font-semibold text-stone-800 mb-4 text-center",children:"Confirm Account Deletion"}),(0,a.jsx)("p",{className:"text-stone-600 mb-1 text-center",children:"Are you absolutely sure you want to delete your account?"}),(0,a.jsx)("p",{className:"text-sm text-red-600 mb-6 text-center font-medium",children:"This action is permanent and cannot be undone. All your data, including articles, profile information, and interactions, will be removed."}),H&&(0,a.jsx)("p",{className:"my-3 p-2.5 bg-red-100 text-red-700 text-sm rounded-md border border-red-200 text-center",children:H}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center gap-3 sm:gap-4 mt-6",children:[(0,a.jsx)("button",{onClick:()=>{q(!1)},disabled:I,className:"w-full sm:w-auto px-6 py-3 bg-stone-200 text-stone-700 rounded-lg hover:bg-stone-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-stone-400 transition-colors duration-200 ease-in-out order-2 sm:order-1",children:"Cancel"}),(0,a.jsx)("button",{onClick:ea,disabled:I,className:"w-full sm:w-auto px-6 py-3 bg-red-600 text-white rounded-lg shadow-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-all duration-200 ease-in-out order-1 sm:order-2 disabled:opacity-70",children:I?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white inline",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Deleting..."]}):"Yes, Delete My Account"})]})]})})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-stone-100 to-amber-100 flex flex-col items-center justify-center p-4 font-sans",children:[(0,a.jsx)("p",{className:"text-red-600",children:H||"Could not load user data. Please try refreshing."}),(0,a.jsx)(o(),{href:"/",className:"mt-4 px-4 py-2 bg-stone-700 text-white rounded-md hover:bg-stone-600",children:"Go to Homepage"})]})}},5695:(e,t,s)=>{"use strict";var a=s(8999);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},8197:(e,t,s)=>{Promise.resolve().then(s.bind(s,2608))}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,7158,7117,6874,4744,8441,1684,7358],()=>t(8197)),_N_E=e.O()}]);