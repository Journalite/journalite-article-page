(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2e3],{653:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var r=a(5155),s=a(2115),i=a(3023),n=a.n(i);let o=()=>{let[e,t]=(0,s.useState)(!1),[a,i]=(0,s.useState)(!1);(0,s.useEffect)(()=>{i(navigator.platform.toUpperCase().indexOf("MAC")>=0)},[]);let o=()=>{t(!e)};return(0,r.jsxs)("div",{className:n().shortcutsContainer,children:[(0,r.jsx)("button",{type:"button",onClick:o,className:n().shortcutsButton,title:"Keyboard Shortcuts",children:"⌨️"}),e&&(0,r.jsxs)("div",{className:n().shortcutsModal,children:[(0,r.jsxs)("div",{className:n().shortcutsHeader,children:[(0,r.jsxs)("h3",{children:["Keyboard Shortcuts ",a?"(macOS)":"(Windows/Linux)"]}),(0,r.jsx)("button",{type:"button",onClick:o,className:n().closeButton,children:"\xd7"})]}),(0,r.jsx)("div",{className:n().shortcutsList,children:[{name:"Bold",macKeys:["⌘","B"],winKeys:["Ctrl","B"],description:"Make text bold"},{name:"Italic",macKeys:["⌘","I"],winKeys:["Ctrl","I"],description:"Italicize text"},{name:"Code",macKeys:["⌘","E"],winKeys:["Ctrl","E"],description:"Format as code"},{name:"Link",macKeys:["⌘","K"],winKeys:["Ctrl","K"],description:"Create a hyperlink"},{name:"Image",macKeys:["⌘","Shift","I"],winKeys:["Ctrl","Shift","I"],description:"Insert an image"},{name:"Heading 1",macKeys:["⌘","Option","1"],winKeys:["Ctrl","Alt","1"],description:"Format as heading 1"},{name:"Heading 2",macKeys:["⌘","Option","2"],winKeys:["Ctrl","Alt","2"],description:"Format as heading 2"},{name:"Heading 3",macKeys:["⌘","Option","3"],winKeys:["Ctrl","Alt","3"],description:"Format as heading 3"},{name:"Bullet List",macKeys:["⌘","Shift","8"],winKeys:["Ctrl","Shift","8"],description:"Create bullet list"},{name:"Numbered List",macKeys:["⌘","Shift","7"],winKeys:["Ctrl","Shift","7"],description:"Create numbered list"},{name:"Clear Format",macKeys:["⌘","Shift","X"],winKeys:["Ctrl","Shift","X"],description:"Clear text formatting"},{name:"Paste with Format",macKeys:["⌘","Shift","V"],winKeys:["Ctrl","Shift","V"],description:"Paste with original formatting"},{name:"Paste as Plain",macKeys:["⌘","V"],winKeys:["Ctrl","V"],description:"Paste as plain text"}].map((e,t)=>(0,r.jsxs)("div",{className:n().shortcutItem,children:[(0,r.jsx)("div",{className:n().shortcutName,children:e.name}),(0,r.jsx)("div",{className:n().shortcutKeys,children:(a?e.macKeys:e.winKeys).map((t,s)=>(0,r.jsxs)("span",{className:n().keyboardKey,children:[t,s<(a?e.macKeys.length:e.winKeys.length)-1&&(0,r.jsx)("span",{className:n().keySeparator,children:"+"})]},s))}),(0,r.jsx)("div",{className:n().shortcutDescription,children:e.description})]},t))})]})]})}},824:e=>{e.exports={articleFormContainer:"ArticleForm_articleFormContainer__Oamhm",articleFormHeader:"ArticleForm_articleFormHeader__lPvz4",articleFormTitle:"ArticleForm_articleFormTitle__GQZ6U",articleFormSubtitle:"ArticleForm_articleFormSubtitle__d0K2B",articleForm:"ArticleForm_articleForm__aPoqs",formGroup:"ArticleForm_formGroup__NG8OF",formLabel:"ArticleForm_formLabel__DP5Fz",optionalLabel:"ArticleForm_optionalLabel__C_B1S",formControl:"ArticleForm_formControl__mBao_",formTextarea:"ArticleForm_formTextarea__ZsknF",editorToolbar:"ArticleForm_editorToolbar__IrlBb",toolbarButton:"ArticleForm_toolbarButton__pHHwN",activeButton:"ArticleForm_activeButton__YQm_y",richTextEditor:"ArticleForm_richTextEditor__FyiQb",formActions:"ArticleForm_formActions__WqypQ",cancelButton:"ArticleForm_cancelButton__OAgVI",submitButton:"ArticleForm_submitButton__o9hsW",errorAlert:"ArticleForm_errorAlert__1DQ3x",errorIcon:"ArticleForm_errorIcon___YV5p",imagePreview:"ArticleForm_imagePreview__92eKB",tagsPreview:"ArticleForm_tagsPreview__48G_v",tag:"ArticleForm_tag__MTDKK",statusDropdown:"ArticleForm_statusDropdown__FfXJV",characterCount:"ArticleForm_characterCount__IqdJb",characterWarning:"ArticleForm_characterWarning__ZKaNu",formHint:"ArticleForm_formHint__h9Deh",loading:"ArticleForm_loading__EUkeX",loadingSpinner:"ArticleForm_loadingSpinner__iaWlv",spin:"ArticleForm_spin__reKcv",toolbarSpacer:"ArticleForm_toolbarSpacer__J3Il4",pasteOptionsContainer:"ArticleForm_pasteOptionsContainer__cuLJK",fadeIn:"ArticleForm_fadeIn__0Fub5",pasteOptionsHeader:"ArticleForm_pasteOptionsHeader__Lto86",pasteOptionButton:"ArticleForm_pasteOptionButton__Yn36Q"}},3023:e=>{e.exports={shortcutsContainer:"KeyboardShortcutsHelp_shortcutsContainer__MXhO1",shortcutsButton:"KeyboardShortcutsHelp_shortcutsButton__SsEp1",shortcutsModal:"KeyboardShortcutsHelp_shortcutsModal__KZ29s",shortcutsHeader:"KeyboardShortcutsHelp_shortcutsHeader__NSSOU",closeButton:"KeyboardShortcutsHelp_closeButton__nLV6K",shortcutsList:"KeyboardShortcutsHelp_shortcutsList__CRB0P",shortcutItem:"KeyboardShortcutsHelp_shortcutItem__G4I3k",shortcutName:"KeyboardShortcutsHelp_shortcutName__a_amN",shortcutKeys:"KeyboardShortcutsHelp_shortcutKeys__a0SnO",keyboardKey:"KeyboardShortcutsHelp_keyboardKey__1_LrC",keySeparator:"KeyboardShortcutsHelp_keySeparator__kU_ns",shortcutDescription:"KeyboardShortcutsHelp_shortcutDescription__qPcO6"}},3201:(e,t,a)=>{"use strict";a.d(t,{db:()=>c,j2:()=>l});var r=a(3915),s=a(6864),i=a(6203),n=a(5317);let o=(0,r.Wp)({apiKey:"AIzaSyCFpybhLt43iKUw6lNahU1n2zjYv0BXmf4",authDomain:"journalitev1.firebaseapp.com",projectId:"journalitev1",storageBucket:"journalitev1.firebasestorage.app",messagingSenderId:"897263211529",appId:"1:897263211529:web:bae4a00910a2236d6d54d8",measurementId:"G-ZYT8PRMT0D"});try{(0,s.P5)(o)}catch(e){}let l=(0,i.xI)(o),c=(0,n.aU)(o);window.location.origin},6379:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>C});var r=a(5155),s=a(2115),i=a(5695),n=a(6874),o=a.n(n),l=a(6203),c=a(3201),d=a(9210),u=a(824),m=a.n(u),h=a(5109),p=a(5465),f=a(2073),v=a(2612),g=a(5523),x=a(1891),_=a(6761),b=a(653);let y=()=>{let[e,t]=(0,s.useState)(""),[a,n]=(0,s.useState)(""),[l,u]=(0,s.useState)(""),[y,j]=(0,s.useState)(""),[N,C]=(0,s.useState)("published"),[w,S]=(0,s.useState)(!1),[A,K]=(0,s.useState)(""),[F,k]=(0,s.useState)(0),[B,I]=(0,s.useState)(!1),[H,L]=(0,s.useState)(""),E=(0,s.useRef)(null),D=(0,i.useRouter)(),[P,O]=(0,s.useState)(!1),[U,M]=(0,s.useState)(""),T=["Use Cmd+B (Mac) or Ctrl+B (Windows) for bold text","Press Cmd+K (Mac) or Ctrl+K (Windows) to insert a link","You can create headings with Cmd+Option+1-3 (Mac) or Ctrl+Alt+1-3 (Windows)","Use bullet lists with Cmd+Shift+8 (Mac) or Ctrl+Shift+8 (Windows)","Press Cmd+Shift+I (Mac) or Ctrl+Shift+I (Windows) to insert an image"],G=(0,h.hG)({extensions:[p.A.configure({heading:{levels:[1,2,3]},bold:!1,italic:!1,code:!1}),f.Ay,v.Ay,g.Ay,x.Ay,_.N_.configure({openOnClick:!1})],content:"",onUpdate:e=>{let{editor:t}=e;n(t.getHTML()),k(t.getText().length)},enableInputRules:!0,enablePasteRules:!0,immediatelyRender:!1}),W=(0,s.useCallback)(()=>{let e=window.prompt("URL");e&&(null==G||G.chain().focus().extendMarkRange("link").setLink({href:e}).run())},[G]),R=(0,s.useCallback)(()=>{let e=window.prompt("Image URL");e&&(null==G||G.chain().focus().setImage({src:e}).run())},[G]),V=(0,s.useCallback)(async e=>{if(G){e.preventDefault();let t=e.clipboardData.getData("text/html"),a=e.clipboardData.getData("text/plain");t&&t.trim()?L(t):L(a),I(!0)}},[G]),z=(0,s.useCallback)(()=>{G&&H&&(H.includes("<"),G.commands.insertContent(H),I(!1))},[G,H]),J=(0,s.useCallback)(()=>{if(G&&H){let e=H;if(H.startsWith("<")){let t=document.createElement("div");t.innerHTML=H,e=t.textContent||t.innerText||""}G.commands.insertContent(e),I(!1)}},[G,H]),X=(0,s.useCallback)(e=>{let t=P?e.metaKey:e.ctrlKey;t&&e.shiftKey&&"I"===e.key&&(e.preventDefault(),R()),B&&H&&(t&&e.shiftKey&&"V"===e.key&&(e.preventDefault(),z()),t&&e.shiftKey&&"X"===e.key&&(e.preventDefault(),J()))},[R,B,H,z,J,P]);(0,s.useEffect)(()=>{let e=e=>{E.current&&!E.current.contains(e.target)&&I(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,s.useEffect)(()=>()=>{null==G||G.destroy()},[G]),(0,s.useEffect)(()=>{"undefined"!=typeof navigator&&O(navigator.platform.toUpperCase().indexOf("MAC")>=0);let e=Math.floor(Math.random()*T.length);M(T[e])},[]);let Y=async t=>{if(t.preventDefault(),!e||!a)return void K("Title and content are required");if(!c.j2.currentUser)return void K("You must be logged in to create an article");try{S(!0),K("");let t=l.split(",").map(e=>e.trim()).filter(e=>""!==e),r={title:e,body:a,tags:t,status:N};""!==y.trim()&&(r.coverImage=y);let s=await (0,d.N6)(r);"published"===N?D.push("/articles?slug=".concat(s.slug)):D.push("/my-thoughts")}catch(e){console.error("Error creating article:",e),K("Failed to create article. Please try again.")}finally{S(!1)}};return(0,r.jsxs)("div",{className:m().articleFormContainer,children:[(0,r.jsxs)("div",{className:m().articleFormHeader,children:[(0,r.jsx)("h1",{className:m().articleFormTitle,children:"Create Your Story"}),(0,r.jsx)("p",{className:m().articleFormSubtitle,children:"Share your thoughts, ideas, and insights with the world"})]}),A&&(0,r.jsxs)("div",{className:m().errorAlert,children:[(0,r.jsx)("span",{className:m().errorIcon,children:"⚠️"}),(0,r.jsx)("span",{children:A})]}),(0,r.jsxs)("form",{onSubmit:Y,className:m().articleForm,children:[(0,r.jsxs)("div",{className:m().formGroup,children:[(0,r.jsx)("label",{htmlFor:"title",className:m().formLabel,children:"Title"}),(0,r.jsx)("input",{type:"text",id:"title",value:e,onChange:e=>t(e.target.value),required:!0,placeholder:"Enter a captivating title for your article...",className:m().formControl,maxLength:100}),(0,r.jsx)("div",{className:m().formHint,children:"A good title is clear, specific, and engaging"})]}),(0,r.jsxs)("div",{className:m().formGroup,children:[(0,r.jsxs)("label",{htmlFor:"coverImage",className:m().formLabel,children:["Cover Image URL ",(0,r.jsx)("span",{className:m().optionalLabel,children:"optional"})]}),(0,r.jsx)("input",{type:"url",id:"coverImage",value:y,onChange:e=>j(e.target.value),placeholder:"https://example.com/image.jpg",className:m().formControl}),(0,r.jsx)("div",{className:m().formHint,children:"Add a cover image to make your article visually appealing"}),y&&(0,r.jsx)("div",{className:m().imagePreview,children:(0,r.jsx)("img",{src:y,alt:"Cover preview"})})]}),(0,r.jsxs)("div",{className:m().formGroup,children:[(0,r.jsxs)("label",{htmlFor:"tags",className:m().formLabel,children:["Tags ",(0,r.jsx)("span",{className:m().optionalLabel,children:"comma separated"})]}),(0,r.jsx)("input",{type:"text",id:"tags",value:l,onChange:e=>u(e.target.value),placeholder:"technology, news, science, learning",className:m().formControl}),(0,r.jsx)("div",{className:m().formHint,children:"Tags help readers discover your content"}),l&&(0,r.jsx)("div",{className:m().tagsPreview,children:l.split(",").map((e,t)=>e.trim()&&(0,r.jsx)("span",{className:m().tag,children:e.trim()},t))})]}),(0,r.jsxs)("div",{className:"".concat(m().formGroup," ").concat(m().statusDropdown),children:[(0,r.jsx)("label",{htmlFor:"status",className:m().formLabel,children:"Status"}),(0,r.jsxs)("select",{id:"status",value:N,onChange:e=>C(e.target.value),className:m().formControl,children:[(0,r.jsx)("option",{value:"published",children:"Published (visible to everyone)"}),(0,r.jsx)("option",{value:"drafts",children:"Save as Draft (only visible to you)"})]})]}),(0,r.jsxs)("div",{className:m().formGroup,children:[(0,r.jsx)("label",{htmlFor:"body",className:m().formLabel,children:"Content"}),(0,r.jsxs)("div",{className:m().editorToolbar,children:[(0,r.jsx)("button",{type:"button",onClick:()=>null==G?void 0:G.chain().focus().toggleHeading({level:1}).run(),className:(null==G?void 0:G.isActive("heading",{level:1}))?m().activeButton:m().toolbarButton,title:"Heading 1 (".concat(P?"⌘+Option+1":"Ctrl+Alt+1",")"),children:"H1"}),(0,r.jsx)("button",{type:"button",onClick:()=>null==G?void 0:G.chain().focus().toggleHeading({level:2}).run(),className:(null==G?void 0:G.isActive("heading",{level:2}))?m().activeButton:m().toolbarButton,title:"Heading 2 (".concat(P?"⌘+Option+2":"Ctrl+Alt+2",")"),children:"H2"}),(0,r.jsx)("button",{type:"button",onClick:()=>null==G?void 0:G.chain().focus().toggleHeading({level:3}).run(),className:(null==G?void 0:G.isActive("heading",{level:3}))?m().activeButton:m().toolbarButton,title:"Heading 3 (".concat(P?"⌘+Option+3":"Ctrl+Alt+3",")"),children:"H3"}),(0,r.jsx)("button",{type:"button",onClick:()=>null==G?void 0:G.chain().focus().toggleBold().run(),className:(null==G?void 0:G.isActive("bold"))?m().activeButton:m().toolbarButton,title:"Bold (".concat(P?"⌘+B":"Ctrl+B",")"),children:"Bold"}),(0,r.jsx)("button",{type:"button",onClick:()=>null==G?void 0:G.chain().focus().toggleItalic().run(),className:(null==G?void 0:G.isActive("italic"))?m().activeButton:m().toolbarButton,title:"Italic (".concat(P?"⌘+I":"Ctrl+I",")"),children:"Italic"}),(0,r.jsx)("button",{type:"button",onClick:()=>null==G?void 0:G.chain().focus().toggleCode().run(),className:(null==G?void 0:G.isActive("code"))?m().activeButton:m().toolbarButton,title:"Code (".concat(P?"⌘+E":"Ctrl+E",")"),children:"Code"}),(0,r.jsx)("button",{type:"button",onClick:W,className:(null==G?void 0:G.isActive("link"))?m().activeButton:m().toolbarButton,title:"Link (".concat(P?"⌘+K":"Ctrl+K",")"),children:"Link"}),(0,r.jsx)("button",{type:"button",onClick:R,className:m().toolbarButton,title:"Insert Image (".concat(P?"⌘+Shift+I":"Ctrl+Shift+I",")"),children:"Image"}),(0,r.jsx)("button",{type:"button",onClick:()=>null==G?void 0:G.chain().focus().toggleBulletList().run(),className:(null==G?void 0:G.isActive("bulletList"))?m().activeButton:m().toolbarButton,title:"Bullet List (".concat(P?"⌘+Shift+8":"Ctrl+Shift+8",")"),children:"Bullet List"}),(0,r.jsx)("button",{type:"button",onClick:()=>null==G?void 0:G.chain().focus().toggleOrderedList().run(),className:(null==G?void 0:G.isActive("orderedList"))?m().activeButton:m().toolbarButton,title:"Numbered List (".concat(P?"⌘+Shift+7":"Ctrl+Shift+7",")"),children:"Numbered List"}),(0,r.jsx)("div",{className:m().toolbarSpacer}),(0,r.jsx)(b.A,{})]}),(0,r.jsx)(h.$Z,{editor:G,className:m().richTextEditor,onKeyDown:X,onPaste:V}),B&&(0,r.jsxs)("div",{ref:E,className:m().pasteOptionsContainer,children:[(0,r.jsx)("div",{className:m().pasteOptionsHeader,children:"Paste Options"}),(0,r.jsxs)("button",{type:"button",className:m().pasteOptionButton,onClick:z,children:["Keep Formatting (",P?"⌘+Shift+V":"Ctrl+Shift+V",")"]}),(0,r.jsxs)("button",{type:"button",className:m().pasteOptionButton,onClick:J,children:["Paste as Plain Text (",P?"⌘+Shift+X":"Ctrl+Shift+X",")"]})]}),(0,r.jsx)("div",{className:m().characterCount,children:(0,r.jsxs)("span",{className:F>3e3?m().characterWarning:"",children:[F," characters"]})}),(0,r.jsx)("div",{className:m().formHint,children:(0,r.jsxs)("span",{children:["✨ Tip: ",U]})})]}),(0,r.jsxs)("div",{className:m().formActions,children:[(0,r.jsx)(o(),{href:"/",className:m().cancelButton,children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:m().submitButton,disabled:w,children:w?"published"===N?"Publishing...":"Saving...":"published"===N?"Publish Article":"Save as Draft"})]})]})]})};var j=a(8163),N=a.n(j);function C(){let[e,t]=(0,s.useState)(!1),[a,n]=(0,s.useState)(!0),[d,u]=(0,s.useState)(!1),[m,h]=(0,s.useState)(0),p=(0,i.useRouter)();(0,s.useEffect)(()=>{h(window.innerWidth);let e=()=>{h(window.innerWidth)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,s.useEffect)(()=>{u(m<768)},[m]),(0,s.useEffect)(()=>{let e=(0,l.hg)(c.j2,e=>{t(!!e),n(!1),e||p.push("/login?redirect=/create-article")});return()=>e()},[p]);let f=async()=>{try{await (0,l.CI)(c.j2),p.push("/")}catch(e){console.error("Error signing out:",e)}};return a?(0,r.jsx)("div",{className:N().container,children:(0,r.jsx)("div",{className:N().loading,children:"Loading..."})}):e?(0,r.jsxs)("div",{className:N()["three-column-layout"],children:[(0,r.jsxs)("aside",{className:"".concat(N()["left-sidebar"]," ").concat(d?N().collapsed:""),children:[(0,r.jsxs)("div",{className:N()["sidebar-header"],children:[(0,r.jsx)("div",{className:N().logo,children:"Journalite"}),(0,r.jsx)("button",{className:N()["toggle-button"],onClick:()=>{u(!d)},"aria-label":d?"Expand sidebar":"Collapse sidebar",children:d?"→":"←"})]}),(0,r.jsxs)("nav",{className:N()["vertical-nav"],children:[(0,r.jsxs)(o(),{href:"/",className:"".concat(N()["nav-link"]," ").concat(N()["nav-home"]),children:[(0,r.jsx)("span",{className:N()["nav-icon"],children:"•"}),(0,r.jsx)("span",{className:N()["nav-text"],children:"Home"})]}),(0,r.jsxs)(o(),{href:"/my-thoughts",className:"".concat(N()["nav-link"]," ").concat(N()["nav-thoughts"]),children:[(0,r.jsx)("span",{className:N()["nav-icon"],children:"•"}),(0,r.jsx)("span",{className:N()["nav-text"],children:"My Thoughts"})]}),(0,r.jsxs)(o(),{href:"/create-article",className:"".concat(N()["nav-link"]," ").concat(N()["nav-create"]," ").concat(N().active),children:[(0,r.jsx)("span",{className:N()["nav-icon"],children:"•"}),(0,r.jsx)("span",{className:N()["nav-text"],children:"Create Article"})]}),(0,r.jsxs)(o(),{href:"/explore",className:"".concat(N()["nav-link"]," ").concat(N()["nav-explore"]),children:[(0,r.jsx)("span",{className:N()["nav-icon"],children:"•"}),(0,r.jsx)("span",{className:N()["nav-text"],children:"Explore"})]}),(0,r.jsxs)(o(),{href:"/my-profile",className:"".concat(N()["nav-link"]," ").concat(N()["nav-profile"]),children:[(0,r.jsx)("span",{className:N()["nav-icon"],children:"•"}),(0,r.jsx)("span",{className:N()["nav-text"],children:"My Profile"})]}),(0,r.jsxs)("button",{onClick:f,className:"".concat(N()["nav-link"]," ").concat(N()["nav-logout"]),children:[(0,r.jsx)("span",{className:N()["nav-icon"],children:"•"}),(0,r.jsx)("span",{className:N()["nav-text"],children:"Log out"})]})]})]}),(0,r.jsx)("main",{className:"".concat(N()["center-column"]," ").concat(d?N().expanded:""),children:(0,r.jsx)(y,{})}),(0,r.jsxs)("aside",{className:N()["right-sidebar"],children:[(0,r.jsx)("h2",{className:N()["sidebar-heading"],children:"Tips for Writing"}),(0,r.jsxs)("div",{className:N()["writing-tips"],children:[(0,r.jsxs)("div",{className:N()["writing-tip"],children:[(0,r.jsx)("h3",{children:"\uD83D\uDCDD Keep it clear"}),(0,r.jsx)("p",{children:"Use simple language and short paragraphs for better readability."})]}),(0,r.jsxs)("div",{className:N()["writing-tip"],children:[(0,r.jsx)("h3",{children:"\uD83D\uDD0D Check your facts"}),(0,r.jsx)("p",{children:"Ensure your information is accurate and from reliable sources."})]}),(0,r.jsxs)("div",{className:N()["writing-tip"],children:[(0,r.jsx)("h3",{children:"\uD83D\uDCCA Add context"}),(0,r.jsx)("p",{children:"Help readers understand the bigger picture around your topic."})]}),(0,r.jsxs)("div",{className:N()["writing-tip"],children:[(0,r.jsx)("h3",{children:"\uD83D\uDCF8 Visual appeal"}),(0,r.jsx)("p",{children:"Adding a cover image can make your article more engaging."})]})]})]})]}):(0,r.jsxs)("div",{className:N().container,children:[(0,r.jsx)("p",{children:"You must be logged in to create an article."}),(0,r.jsx)(o(),{href:"/login?redirect=/create-article",className:N().loginLink,children:"Login Now"})]})}},8015:(e,t,a)=>{Promise.resolve().then(a.bind(a,6379))},9995:(e,t,a)=>{"use strict";a.d(t,{Hs:()=>u,N9:()=>n,Ss:()=>o,bA:()=>l,fP:()=>d,fZ:()=>i,he:()=>c});var r=a(5317),s=a(3201);async function i(e,t,a,i,n,o){try{let t=s.j2.currentUser;if(!t||t.uid===e)return null;let l={userId:e,type:"comment",read:!1,sourceId:n,sourceType:"comment",message:"".concat(t.displayName||"Someone",' commented on your article: "').concat(o.substring(0,50)).concat(o.length>50?"...":"",'"'),fromUser:{id:t.uid,name:t.displayName||"Anonymous"},createdAt:r.Dc.now(),articleSlug:a,articleTitle:i};return{id:(await (0,r.gS)((0,r.rJ)(s.db,"notifications"),l)).id,...l}}catch(e){return console.error("Error creating notification:",e),null}}async function n(e,t,a,i){try{if(e===a)return null;let n={userId:e,type:"follow",read:!1,sourceId:a,sourceType:"user",message:"".concat(t," (@").concat(i,") started following you"),fromUser:{id:a,name:t,username:i},createdAt:r.Dc.now()};return{id:(await (0,r.gS)((0,r.rJ)(s.db,"notifications"),n)).id,...n}}catch(e){return console.error("Error creating follow notification:",e),null}}async function o(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{let t,a=s.j2.currentUser;if(!a)throw Error("User not authenticated");let i=(0,r.rJ)(s.db,"notifications");t=e?(0,r.P)(i,(0,r._M)("userId","==",a.uid),(0,r._M)("read","==",!1),(0,r.My)("createdAt","desc"),(0,r.AB)(100)):(0,r.P)(i,(0,r._M)("userId","==",a.uid),(0,r.My)("createdAt","desc"),(0,r.AB)(100));let n=await (0,r.GG)(t),o=[];return n.forEach(e=>{o.push({id:e.id,...e.data()})}),o}catch(e){throw console.error("Error fetching notifications:",e),e}}async function l(e){try{let t=s.j2.currentUser;if(!t)throw Error("User not authenticated");let a=(0,r.H9)(s.db,"notifications",e),i=await (0,r.x7)(a);if(!i.exists())throw Error("Notification not found");if(i.data().userId!==t.uid)throw Error("Unauthorized access to notification");return await (0,r.mZ)(a,{read:!0}),{success:!0}}catch(e){throw console.error("Error marking notification as read:",e),e}}async function c(){try{let e=s.j2.currentUser;if(!e)throw Error("User not authenticated");let t=(0,r.rJ)(s.db,"notifications"),a=(0,r.P)(t,(0,r._M)("userId","==",e.uid),(0,r._M)("read","==",!1)),i=await (0,r.GG)(a),n=i.docs.map(e=>(0,r.mZ)(e.ref,{read:!0}));return await Promise.all(n),{success:!0,count:i.size}}catch(e){throw console.error("Error marking all notifications as read:",e),e}}async function d(e){try{let t=s.j2.currentUser;if(!t)throw Error("User not authenticated");let a=(0,r.H9)(s.db,"notifications",e),i=await (0,r.x7)(a);if(!i.exists())throw Error("Notification not found");if(i.data().userId!==t.uid)throw Error("Unauthorized access to notification");return await (0,r.kd)(a),{success:!0}}catch(e){throw console.error("Error deleting notification:",e),e}}async function u(){try{let e=s.j2.currentUser;if(!e)return 0;let t=(0,r.rJ)(s.db,"notifications"),a=(0,r.P)(t,(0,r._M)("userId","==",e.uid),(0,r._M)("read","==",!1));return(await (0,r.GG)(a)).size}catch(e){return console.error("Error counting unread notifications:",e),0}}}},e=>{var t=t=>e(e.s=t);e.O(0,[7522,2992,7158,5004,277,7117,6874,7547,4692,8441,1684,7358],()=>t(8015)),_N_E=e.O()}]);