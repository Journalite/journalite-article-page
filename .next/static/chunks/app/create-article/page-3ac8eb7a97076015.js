(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2e3],{82:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var o=a(5155),r=a(2115),n=a(5695),s=a(6874),i=a.n(s),c=a(6203),l=a(3201),d=a(2650),m=a(4362),h=a(8163),u=a.n(h);function v(){let[e,t]=(0,r.useState)(!1),[a,s]=(0,r.useState)(!0),h=(0,n.useRouter)();return((0,r.useEffect)(()=>{let e=(0,c.onAuthStateChanged)(l.j2,e=>{t(!!e),s(!1),e||h.push("/login?redirect=/create-article")});return()=>e()},[h]),a)?(0,o.jsx)("div",{className:u().container,children:(0,o.jsx)("div",{className:u().loading,children:"Loading..."})}):e?(0,o.jsxs)("div",{children:[(0,o.jsx)(d.A,{}),(0,o.jsx)(m.A,{isAuthenticated:e})]}):(0,o.jsxs)("div",{className:u().container,children:[(0,o.jsx)("p",{children:"You must be logged in to create an article."}),(0,o.jsx)(i(),{href:"/login?redirect=/create-article",className:u().loginLink,children:"Login Now"})]})}},3201:(e,t,a)=>{"use strict";a.d(t,{db:()=>l,j2:()=>c});var o=a(3915),r=a(6864),n=a(6203),s=a(5317);let i=(0,o.Wp)({apiKey:"AIzaSyCFpybhLt43iKUw6lNahU1n2zjYv0BXmf4",authDomain:"journalitev1.firebaseapp.com",projectId:"journalitev1",storageBucket:"journalitev1.firebasestorage.app",messagingSenderId:"897263211529",appId:"1:897263211529:web:bae4a00910a2236d6d54d8",measurementId:"G-ZYT8PRMT0D"});try{(0,r.P5)(i)}catch(e){}let c=(0,n.getAuth)(i),l=(0,s.getFirestore)(i);window.location.origin},4362:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var o=a(5155);a(2115);var r=a(6874),n=a.n(r),s=a(5695),i=a(8163),c=a.n(i);let l=e=>{let{isAuthenticated:t}=e,a=(0,s.usePathname)();return(0,o.jsx)("nav",{className:c()["bottom-navigation"],children:t?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n(),{href:"/",className:"".concat(c()["bottom-nav-item"]," ").concat("/"===a?c().active:""),children:[(0,o.jsx)("div",{className:c()["bottom-nav-icon"],style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='".concat("/"===a?"%232563EB":"%236B7280","'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m3 12 2-2m0 0 7-7 7 7M5 10v10a1 1 0 0 0 1 1h3m10-11 2 2m-2-2v10a1 1 0 0 1-1 1h-3m-6 0a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1m-6 0h6'/%3E%3C/svg%3E\")")}}),(0,o.jsx)("span",{className:c()["bottom-nav-text"],children:"Home"})]}),(0,o.jsxs)(n(),{href:"/create-article",className:"".concat(c()["bottom-nav-item"]," ").concat("/create-article"===a?c().active:""),children:[(0,o.jsx)("div",{className:c()["bottom-nav-icon"],style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='".concat("/create-article"===a?"%232563EB":"%236B7280","'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125'/%3E%3C/svg%3E\")")}}),(0,o.jsx)("span",{className:c()["bottom-nav-text"],children:"Write"})]}),(0,o.jsxs)(n(),{href:"/my-thoughts",className:"".concat(c()["bottom-nav-item"]," ").concat("/my-thoughts"===a?c().active:""),children:[(0,o.jsx)("div",{className:c()["bottom-nav-icon"],style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='".concat("/my-thoughts"===a?"%232563EB":"%236B7280","'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z'/%3E%3C/svg%3E\")")}}),(0,o.jsx)("span",{className:c()["bottom-nav-text"],children:"My Posts"})]}),(0,o.jsxs)(n(),{href:"/explore",className:"".concat(c()["bottom-nav-item"]," ").concat("/explore"===a?c().active:""),children:[(0,o.jsx)("div",{className:c()["bottom-nav-icon"],style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='".concat("/explore"===a?"%232563EB":"%236B7280","'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z'/%3E%3C/svg%3E\")")}}),(0,o.jsx)("span",{className:c()["bottom-nav-text"],children:"Explore"})]})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n(),{href:"/",className:"".concat(c()["bottom-nav-item"]," ").concat("/"===a?c().active:""),children:[(0,o.jsx)("div",{className:c()["bottom-nav-icon"],style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='".concat("/"===a?"%232563EB":"%236B7280","'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m3 12 2-2m0 0 7-7 7 7M5 10v10a1 1 0 0 0 1 1h3m10-11 2 2m-2-2v10a1 1 0 0 1-1 1h-3m-6 0a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1m-6 0h6'/%3E%3C/svg%3E\")")}}),(0,o.jsx)("span",{className:c()["bottom-nav-text"],children:"Home"})]}),(0,o.jsxs)(n(),{href:"/explore",className:"".concat(c()["bottom-nav-item"]," ").concat("/explore"===a?c().active:""),children:[(0,o.jsx)("div",{className:c()["bottom-nav-icon"],style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='".concat("/explore"===a?"%232563EB":"%236B7280","'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z'/%3E%3C/svg%3E\")")}}),(0,o.jsx)("span",{className:c()["bottom-nav-text"],children:"Explore"})]}),(0,o.jsxs)(n(),{href:"/register",className:"".concat(c()["bottom-nav-item"]," ").concat("/register"===a?c().active:""),children:[(0,o.jsx)("div",{className:c()["bottom-nav-icon"],style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='".concat("/register"===a?"%232563EB":"%236B7280","'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z'/%3E%3C/svg%3E\")")}}),(0,o.jsx)("span",{className:c()["bottom-nav-text"],children:"Sign Up"})]}),(0,o.jsxs)(n(),{href:"/login",className:"".concat(c()["bottom-nav-item"]," ").concat("/login"===a?c().active:""),children:[(0,o.jsx)("div",{className:c()["bottom-nav-icon"],style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='".concat("/login"===a?"%232563EB":"%236B7280","'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15M12 9l-3 3m0 0 3 3m-3-3h12.75'/%3E%3C/svg%3E\")")}}),(0,o.jsx)("span",{className:c()["bottom-nav-text"],children:"Login"})]})]})})}},8015:(e,t,a)=>{Promise.resolve().then(a.bind(a,82))},9995:(e,t,a)=>{"use strict";a.d(t,{Hs:()=>d,N9:()=>n,Ss:()=>s,bA:()=>i,fP:()=>l,he:()=>c});var o=a(5317),r=a(3201);async function n(e,t,a,n){try{if(e===a)return null;let s={userId:e,type:"follow",read:!1,sourceId:a,sourceType:"user",message:"".concat(t," (@").concat(n,") started following you"),fromUser:{id:a,name:t,username:n},createdAt:o.Timestamp.now()};return{id:(await (0,o.addDoc)((0,o.collection)(r.db,"notifications"),s)).id,...s}}catch(e){return console.error("Error creating follow notification:",e),null}}async function s(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{let t,a=r.j2.currentUser;if(!a)throw Error("User not authenticated");let n=(0,o.collection)(r.db,"notifications");t=e?(0,o.query)(n,(0,o.where)("userId","==",a.uid),(0,o.where)("read","==",!1),(0,o.orderBy)("createdAt","desc"),(0,o.limit)(100)):(0,o.query)(n,(0,o.where)("userId","==",a.uid),(0,o.orderBy)("createdAt","desc"),(0,o.limit)(100));let s=await (0,o.getDocs)(t),i=[];return s.forEach(e=>{i.push({id:e.id,...e.data()})}),i}catch(e){throw console.error("Error fetching notifications:",e),e}}async function i(e){try{let t=r.j2.currentUser;if(!t)throw Error("User not authenticated");let a=(0,o.doc)(r.db,"notifications",e),n=await (0,o.getDoc)(a);if(!n.exists())throw Error("Notification not found");if(n.data().userId!==t.uid)throw Error("Unauthorized access to notification");return await (0,o.updateDoc)(a,{read:!0}),{success:!0}}catch(e){throw console.error("Error marking notification as read:",e),e}}async function c(){try{let e=r.j2.currentUser;if(!e)throw Error("User not authenticated");let t=(0,o.collection)(r.db,"notifications"),a=(0,o.query)(t,(0,o.where)("userId","==",e.uid),(0,o.where)("read","==",!1)),n=await (0,o.getDocs)(a),s=n.docs.map(e=>(0,o.updateDoc)(e.ref,{read:!0}));return await Promise.all(s),{success:!0,count:n.size}}catch(e){throw console.error("Error marking all notifications as read:",e),e}}async function l(e){try{let t=r.j2.currentUser;if(!t)throw Error("User not authenticated");let a=(0,o.doc)(r.db,"notifications",e),n=await (0,o.getDoc)(a);if(!n.exists())throw Error("Notification not found");if(n.data().userId!==t.uid)throw Error("Unauthorized access to notification");return await (0,o.deleteDoc)(a),{success:!0}}catch(e){throw console.error("Error deleting notification:",e),e}}async function d(){try{let e=r.j2.currentUser;if(!e)return 0;let t=(0,o.collection)(r.db,"notifications"),a=(0,o.query)(t,(0,o.where)("userId","==",e.uid),(0,o.where)("read","==",!1));return(await (0,o.getDocs)(a)).size}catch(e){return console.error("Error counting unread notifications:",e),0}}}},e=>{var t=t=>e(e.s=t);e.O(0,[2156,1708,2992,7158,5004,7117,6874,8460,2800,9122,2650,8441,1684,7358],()=>t(8015)),_N_E=e.O()}]);