(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2e3],{824:e=>{e.exports={articleFormContainer:"ArticleForm_articleFormContainer__Oamhm",articleFormHeader:"ArticleForm_articleFormHeader__lPvz4",articleFormTitle:"ArticleForm_articleFormTitle__GQZ6U",articleFormSubtitle:"ArticleForm_articleFormSubtitle__d0K2B",articleForm:"ArticleForm_articleForm__aPoqs",formGroup:"ArticleForm_formGroup__NG8OF",formLabel:"ArticleForm_formLabel__DP5Fz",optionalLabel:"ArticleForm_optionalLabel__C_B1S",formControl:"ArticleForm_formControl__mBao_",formTextarea:"ArticleForm_formTextarea__ZsknF",formActions:"ArticleForm_formActions__WqypQ",cancelButton:"ArticleForm_cancelButton__OAgVI",submitButton:"ArticleForm_submitButton__o9hsW",errorAlert:"ArticleForm_errorAlert__1DQ3x",errorIcon:"ArticleForm_errorIcon___YV5p",imagePreview:"ArticleForm_imagePreview__92eKB",tagsPreview:"ArticleForm_tagsPreview__48G_v",tag:"ArticleForm_tag__MTDKK",statusDropdown:"ArticleForm_statusDropdown__FfXJV",characterCount:"ArticleForm_characterCount__IqdJb",characterWarning:"ArticleForm_characterWarning__ZKaNu",formHint:"ArticleForm_formHint__h9Deh",loading:"ArticleForm_loading__EUkeX",loadingSpinner:"ArticleForm_loadingSpinner__iaWlv",spin:"ArticleForm_spin__reKcv"}},3201:(e,r,a)=>{"use strict";a.d(r,{db:()=>l,j2:()=>c});var t=a(3915),s=a(6864),i=a(6203),n=a(5317);let o=(0,t.Wp)({apiKey:"AIzaSyCFpybhLt43iKUw6lNahU1n2zjYv0BXmf4",authDomain:"journalitev1.firebaseapp.com",projectId:"journalitev1",storageBucket:"journalitev1.firebasestorage.app",messagingSenderId:"897263211529",appId:"1:897263211529:web:bae4a00910a2236d6d54d8",measurementId:"G-ZYT8PRMT0D"});try{(0,s.P5)(o)}catch(e){}let c=(0,i.xI)(o),l=(0,n.aU)(o);window.location.origin},5695:(e,r,a)=>{"use strict";var t=a(8999);a.o(t,"useRouter")&&a.d(r,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(r,{useSearchParams:function(){return t.useSearchParams}})},6379:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>g});var t=a(5155),s=a(2115),i=a(5695),n=a(6874),o=a.n(n),c=a(6203),l=a(3201),d=a(9210),u=a(824),m=a.n(u);let h=()=>{let[e,r]=(0,s.useState)(""),[a,n]=(0,s.useState)(""),[c,u]=(0,s.useState)(""),[h,p]=(0,s.useState)(""),[f,g]=(0,s.useState)("published"),[v,x]=(0,s.useState)(!1),[j,_]=(0,s.useState)(""),[N,b]=(0,s.useState)(0),y=(0,i.useRouter)();(0,s.useEffect)(()=>{b(a.length)},[a]);let w=async r=>{if(r.preventDefault(),!e||!a)return void _("Title and content are required");if(!l.j2.currentUser)return void _("You must be logged in to create an article");try{x(!0),_("");let r=c.split(",").map(e=>e.trim()).filter(e=>""!==e),t={title:e,body:a,tags:r,status:f};""!==h.trim()&&(t.coverImage=h);let s=await (0,d.N6)(t);"published"===f?y.push("/articles?slug=".concat(s.slug)):y.push("/my-thoughts")}catch(e){console.error("Error creating article:",e),_("Failed to create article. Please try again.")}finally{x(!1)}},F=["Use a clear, compelling title that captures interest","Break your content into smaller paragraphs for readability","Add relevant tags to help readers discover your article","Consider adding a cover image to make your article stand out"],A=F[Math.floor(Math.random()*F.length)];return(0,t.jsxs)("div",{className:m().articleFormContainer,children:[(0,t.jsxs)("div",{className:m().articleFormHeader,children:[(0,t.jsx)("h1",{className:m().articleFormTitle,children:"Create Your Story"}),(0,t.jsx)("p",{className:m().articleFormSubtitle,children:"Share your thoughts, ideas, and insights with the world"})]}),j&&(0,t.jsxs)("div",{className:m().errorAlert,children:[(0,t.jsx)("span",{className:m().errorIcon,children:"⚠️"}),(0,t.jsx)("span",{children:j})]}),(0,t.jsxs)("form",{onSubmit:w,className:m().articleForm,children:[(0,t.jsxs)("div",{className:m().formGroup,children:[(0,t.jsx)("label",{htmlFor:"title",className:m().formLabel,children:"Title"}),(0,t.jsx)("input",{type:"text",id:"title",value:e,onChange:e=>r(e.target.value),required:!0,placeholder:"Enter a captivating title for your article...",className:m().formControl,maxLength:100}),(0,t.jsx)("div",{className:m().formHint,children:"A good title is clear, specific, and engaging"})]}),(0,t.jsxs)("div",{className:m().formGroup,children:[(0,t.jsxs)("label",{htmlFor:"coverImage",className:m().formLabel,children:["Cover Image URL ",(0,t.jsx)("span",{className:m().optionalLabel,children:"optional"})]}),(0,t.jsx)("input",{type:"url",id:"coverImage",value:h,onChange:e=>p(e.target.value),placeholder:"https://example.com/image.jpg",className:m().formControl}),(0,t.jsx)("div",{className:m().formHint,children:"Add a cover image to make your article visually appealing"}),h&&(0,t.jsx)("div",{className:m().imagePreview,children:(0,t.jsx)("img",{src:h,alt:"Cover preview"})})]}),(0,t.jsxs)("div",{className:m().formGroup,children:[(0,t.jsxs)("label",{htmlFor:"tags",className:m().formLabel,children:["Tags ",(0,t.jsx)("span",{className:m().optionalLabel,children:"comma separated"})]}),(0,t.jsx)("input",{type:"text",id:"tags",value:c,onChange:e=>u(e.target.value),placeholder:"technology, news, science, learning",className:m().formControl}),(0,t.jsx)("div",{className:m().formHint,children:"Tags help readers discover your content"}),c&&(0,t.jsx)("div",{className:m().tagsPreview,children:c.split(",").map((e,r)=>e.trim()&&(0,t.jsx)("span",{className:m().tag,children:e.trim()},r))})]}),(0,t.jsxs)("div",{className:"".concat(m().formGroup," ").concat(m().statusDropdown),children:[(0,t.jsx)("label",{htmlFor:"status",className:m().formLabel,children:"Status"}),(0,t.jsxs)("select",{id:"status",value:f,onChange:e=>g(e.target.value),className:m().formControl,children:[(0,t.jsx)("option",{value:"published",children:"Published (visible to everyone)"}),(0,t.jsx)("option",{value:"drafts",children:"Save as Draft (only visible to you)"})]})]}),(0,t.jsxs)("div",{className:m().formGroup,children:[(0,t.jsx)("label",{htmlFor:"body",className:m().formLabel,children:"Content"}),(0,t.jsx)("textarea",{id:"body",value:a,onChange:e=>n(e.target.value),required:!0,placeholder:"Write your article content here. Provide valuable insights, share your experience, or tell a compelling story...",className:m().formTextarea,rows:15}),(0,t.jsx)("div",{className:m().characterCount,children:(0,t.jsxs)("span",{className:N>3e3?m().characterWarning:"",children:[N," characters"]})}),(0,t.jsx)("div",{className:m().formHint,children:(0,t.jsxs)("span",{children:["✨ Tip: ",A]})})]}),(0,t.jsxs)("div",{className:m().formActions,children:[(0,t.jsx)(o(),{href:"/",className:m().cancelButton,children:"Cancel"}),(0,t.jsx)("button",{type:"submit",className:m().submitButton,disabled:v,children:v?"published"===f?"Publishing...":"Saving...":"published"===f?"Publish Article":"Save as Draft"})]})]})]})};var p=a(8163),f=a.n(p);function g(){let[e,r]=(0,s.useState)(!1),[a,n]=(0,s.useState)(!0),[d,u]=(0,s.useState)(!1),[m,p]=(0,s.useState)(0),g=(0,i.useRouter)();(0,s.useEffect)(()=>{p(window.innerWidth);let e=()=>{p(window.innerWidth)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,s.useEffect)(()=>{u(m<768)},[m]),(0,s.useEffect)(()=>{let e=(0,c.hg)(l.j2,e=>{r(!!e),n(!1),e||g.push("/login?redirect=/create-article")});return()=>e()},[g]);let v=async()=>{try{await (0,c.CI)(l.j2),g.push("/")}catch(e){console.error("Error signing out:",e)}};return a?(0,t.jsx)("div",{className:f().container,children:(0,t.jsx)("div",{className:f().loading,children:"Loading..."})}):e?(0,t.jsxs)("div",{className:f()["three-column-layout"],children:[(0,t.jsxs)("aside",{className:"".concat(f()["left-sidebar"]," ").concat(d?f().collapsed:""),children:[(0,t.jsxs)("div",{className:f()["sidebar-header"],children:[(0,t.jsx)("div",{className:f().logo,children:"Journalite"}),(0,t.jsx)("button",{className:f()["toggle-button"],onClick:()=>{u(!d)},"aria-label":d?"Expand sidebar":"Collapse sidebar",children:d?"→":"←"})]}),(0,t.jsxs)("nav",{className:f()["vertical-nav"],children:[(0,t.jsxs)(o(),{href:"/",className:"".concat(f()["nav-link"]," ").concat(f()["nav-home"]),children:[(0,t.jsx)("span",{className:f()["nav-icon"],children:"•"}),(0,t.jsx)("span",{className:f()["nav-text"],children:"Home"})]}),(0,t.jsxs)(o(),{href:"/my-thoughts",className:"".concat(f()["nav-link"]," ").concat(f()["nav-thoughts"]),children:[(0,t.jsx)("span",{className:f()["nav-icon"],children:"•"}),(0,t.jsx)("span",{className:f()["nav-text"],children:"My Thoughts"})]}),(0,t.jsxs)(o(),{href:"/create-article",className:"".concat(f()["nav-link"]," ").concat(f()["nav-create"]," ").concat(f().active),children:[(0,t.jsx)("span",{className:f()["nav-icon"],children:"•"}),(0,t.jsx)("span",{className:f()["nav-text"],children:"Create Article"})]}),(0,t.jsxs)(o(),{href:"/explore",className:"".concat(f()["nav-link"]," ").concat(f()["nav-explore"]),children:[(0,t.jsx)("span",{className:f()["nav-icon"],children:"•"}),(0,t.jsx)("span",{className:f()["nav-text"],children:"Explore"})]}),(0,t.jsxs)(o(),{href:"/my-profile",className:"".concat(f()["nav-link"]," ").concat(f()["nav-profile"]),children:[(0,t.jsx)("span",{className:f()["nav-icon"],children:"•"}),(0,t.jsx)("span",{className:f()["nav-text"],children:"My Profile"})]}),(0,t.jsxs)("button",{onClick:v,className:"".concat(f()["nav-link"]," ").concat(f()["nav-logout"]),children:[(0,t.jsx)("span",{className:f()["nav-icon"],children:"•"}),(0,t.jsx)("span",{className:f()["nav-text"],children:"Log out"})]})]})]}),(0,t.jsx)("main",{className:"".concat(f()["center-column"]," ").concat(d?f().expanded:""),children:(0,t.jsx)(h,{})}),(0,t.jsxs)("aside",{className:f()["right-sidebar"],children:[(0,t.jsx)("h2",{className:f()["sidebar-heading"],children:"Tips for Writing"}),(0,t.jsxs)("div",{className:f()["writing-tips"],children:[(0,t.jsxs)("div",{className:f()["writing-tip"],children:[(0,t.jsx)("h3",{children:"\uD83D\uDCDD Keep it clear"}),(0,t.jsx)("p",{children:"Use simple language and short paragraphs for better readability."})]}),(0,t.jsxs)("div",{className:f()["writing-tip"],children:[(0,t.jsx)("h3",{children:"\uD83D\uDD0D Check your facts"}),(0,t.jsx)("p",{children:"Ensure your information is accurate and from reliable sources."})]}),(0,t.jsxs)("div",{className:f()["writing-tip"],children:[(0,t.jsx)("h3",{children:"\uD83D\uDCCA Add context"}),(0,t.jsx)("p",{children:"Help readers understand the bigger picture around your topic."})]}),(0,t.jsxs)("div",{className:f()["writing-tip"],children:[(0,t.jsx)("h3",{children:"\uD83D\uDCF8 Visual appeal"}),(0,t.jsx)("p",{children:"Adding a cover image can make your article more engaging."})]})]})]})]}):(0,t.jsxs)("div",{className:f().container,children:[(0,t.jsx)("p",{children:"You must be logged in to create an article."}),(0,t.jsx)(o(),{href:"/login?redirect=/create-article",className:f().loginLink,children:"Login Now"})]})}},8015:(e,r,a)=>{Promise.resolve().then(a.bind(a,6379))},9995:(e,r,a)=>{"use strict";a.d(r,{Hs:()=>u,N9:()=>n,Ss:()=>o,bA:()=>c,fP:()=>d,fZ:()=>i,he:()=>l});var t=a(5317),s=a(3201);async function i(e,r,a,i,n,o){try{let r=s.j2.currentUser;if(!r||r.uid===e)return null;let c={userId:e,type:"comment",read:!1,sourceId:n,sourceType:"comment",message:"".concat(r.displayName||"Someone",' commented on your article: "').concat(o.substring(0,50)).concat(o.length>50?"...":"",'"'),fromUser:{id:r.uid,name:r.displayName||"Anonymous"},createdAt:t.Dc.now(),articleSlug:a,articleTitle:i};return{id:(await (0,t.gS)((0,t.rJ)(s.db,"notifications"),c)).id,...c}}catch(e){return console.error("Error creating notification:",e),null}}async function n(e,r,a,i){try{if(e===a)return null;let n={userId:e,type:"follow",read:!1,sourceId:a,sourceType:"user",message:"".concat(r," (@").concat(i,") started following you"),fromUser:{id:a,name:r,username:i},createdAt:t.Dc.now()};return{id:(await (0,t.gS)((0,t.rJ)(s.db,"notifications"),n)).id,...n}}catch(e){return console.error("Error creating follow notification:",e),null}}async function o(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{let r,a=s.j2.currentUser;if(!a)throw Error("User not authenticated");let i=(0,t.rJ)(s.db,"notifications");r=e?(0,t.P)(i,(0,t._M)("userId","==",a.uid),(0,t._M)("read","==",!1),(0,t.My)("createdAt","desc"),(0,t.AB)(100)):(0,t.P)(i,(0,t._M)("userId","==",a.uid),(0,t.My)("createdAt","desc"),(0,t.AB)(100));let n=await (0,t.GG)(r),o=[];return n.forEach(e=>{o.push({id:e.id,...e.data()})}),o}catch(e){throw console.error("Error fetching notifications:",e),e}}async function c(e){try{let r=s.j2.currentUser;if(!r)throw Error("User not authenticated");let a=(0,t.H9)(s.db,"notifications",e),i=await (0,t.x7)(a);if(!i.exists())throw Error("Notification not found");if(i.data().userId!==r.uid)throw Error("Unauthorized access to notification");return await (0,t.mZ)(a,{read:!0}),{success:!0}}catch(e){throw console.error("Error marking notification as read:",e),e}}async function l(){try{let e=s.j2.currentUser;if(!e)throw Error("User not authenticated");let r=(0,t.rJ)(s.db,"notifications"),a=(0,t.P)(r,(0,t._M)("userId","==",e.uid),(0,t._M)("read","==",!1)),i=await (0,t.GG)(a),n=i.docs.map(e=>(0,t.mZ)(e.ref,{read:!0}));return await Promise.all(n),{success:!0,count:i.size}}catch(e){throw console.error("Error marking all notifications as read:",e),e}}async function d(e){try{let r=s.j2.currentUser;if(!r)throw Error("User not authenticated");let a=(0,t.H9)(s.db,"notifications",e),i=await (0,t.x7)(a);if(!i.exists())throw Error("Notification not found");if(i.data().userId!==r.uid)throw Error("Unauthorized access to notification");return await (0,t.kd)(a),{success:!0}}catch(e){throw console.error("Error deleting notification:",e),e}}async function u(){try{let e=s.j2.currentUser;if(!e)return 0;let r=(0,t.rJ)(s.db,"notifications"),a=(0,t.P)(r,(0,t._M)("userId","==",e.uid),(0,t._M)("read","==",!1));return(await (0,t.GG)(a)).size}catch(e){return console.error("Error counting unread notifications:",e),0}}}},e=>{var r=r=>e(e.s=r);e.O(0,[4697,2992,7158,7117,6874,4692,8441,1684,7358],()=>r(8015)),_N_E=e.O()}]);