(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7935],{3201:(e,t,o)=>{"use strict";o.d(t,{db:()=>_,j2:()=>c});var r=o(3915),a=o(6864),n=o(6203),i=o(5317);let s=(0,r.Wp)({apiKey:"AIzaSyCFpybhLt43iKUw6lNahU1n2zjYv0BXmf4",authDomain:"journalitev1.firebaseapp.com",projectId:"journalitev1",storageBucket:"journalitev1.firebasestorage.app",messagingSenderId:"897263211529",appId:"1:897263211529:web:bae4a00910a2236d6d54d8",measurementId:"G-ZYT8PRMT0D"});try{(0,a.P5)(s)}catch(e){}let c=(0,n.getAuth)(s),_=(0,i.getFirestore)(s);window.location.origin},4744:(e,t,o)=>{"use strict";o.d(t,{Ay:()=>m,Ci:()=>w,E$:()=>g,OQ:()=>s,Qt:()=>d,SR:()=>p,VM:()=>_,Vz:()=>c,e_:()=>l,mH:()=>f,pV:()=>u,x5:()=>h});var r=o(5317),a=o(6203),n=o(3201),i=o(9995);async function s(e){try{let t=(0,r.query)((0,r.collection)(n.db,"users"),(0,r.where)("username","==",e.toLowerCase()));return!(await (0,r.getDocs)(t)).empty}catch(e){throw console.error("Error checking username:",e),e}}async function c(e,t){try{let o=await _(e);if(o){console.log("User profile already exists, updating instead of creating");let i=(0,r.doc)(n.db,"users",e);await (0,r.updateDoc)(i,{firstName:t.firstName,lastName:t.lastName,username:t.username.toLowerCase(),email:t.email.toLowerCase(),bio:t.bio||o.bio||""}),n.j2.currentUser&&await (0,a.updateProfile)(n.j2.currentUser,{displayName:t.username});return}let i=(0,r.query)((0,r.collection)(n.db,"users"),(0,r.where)("email","==",t.email.toLowerCase()));if(!(await (0,r.getDocs)(i)).empty)throw Error("Email is already associated with another account");if(await s(t.username))throw Error("Username is already taken");let c=(0,r.doc)(n.db,"users",e);await (0,r.setDoc)(c,{uid:e,firstName:t.firstName,lastName:t.lastName,username:t.username.toLowerCase(),email:t.email.toLowerCase(),bio:t.bio||"",createdAt:(0,r.serverTimestamp)()}),n.j2.currentUser&&await (0,a.updateProfile)(n.j2.currentUser,{displayName:t.username})}catch(e){throw console.error("Error creating user profile:",e),e}}async function _(e){try{let t=(0,r.doc)(n.db,"users",e),o=await (0,r.getDoc)(t);if(o.exists())return o.data();return null}catch(e){throw console.error("Error fetching user profile:",e),e}}async function l(e){if(!e)return null;try{let t=(0,r.query)((0,r.collection)(n.db,"users"),(0,r.where)("email","==",e.toLowerCase()),(0,r.limit)(1)),o=await (0,r.getDocs)(t);if(!o.empty)return o.docs[0].data();return null}catch(e){throw console.error("Error fetching user profile by email:",e),e}}async function m(e,t){try{let o=(0,r.doc)(n.db,"users",e);await (0,r.updateDoc)(o,{interests:t}),console.log("Interests updated for user ".concat(e,":"),t)}catch(e){throw console.error("Error updating user interests:",e),e}}async function h(e){try{if(!e||e.trim().length<2)return[];let t=e.toLowerCase().trim(),o=(0,r.collection)(n.db,"users");return(await (0,r.getDocs)(o)).docs.map(e=>e.data()).filter(e=>{let o=e.username.toLowerCase(),r=e.firstName.toLowerCase(),a=e.lastName.toLowerCase(),n="".concat(r," ").concat(a);return o.includes(t)||r.includes(t)||a.includes(t)||n.includes(t)})}catch(e){return console.error("Error searching users:",e),[]}}async function u(e,t){try{if(e===t)throw Error("You cannot follow yourself");let o=(0,r.doc)(n.db,"users",e);await (0,r.updateDoc)(o,{following:(0,r.arrayUnion)(t),followingCount:(0,r.increment)(1)});let a=(0,r.doc)(n.db,"users",t);await (0,r.updateDoc)(a,{followers:(0,r.arrayUnion)(e),followersCount:(0,r.increment)(1)});let s=await (0,r.getDoc)(o);if(s.exists()){let o=s.data();await (0,i.N9)(t,"".concat(o.firstName," ").concat(o.lastName),e,o.username)}}catch(e){throw console.error("Error following user:",e),e}}async function d(e,t){try{let o=(0,r.doc)(n.db,"users",e);await (0,r.updateDoc)(o,{following:(0,r.arrayRemove)(t),followingCount:(0,r.increment)(-1)});let a=(0,r.doc)(n.db,"users",t);await (0,r.updateDoc)(a,{followers:(0,r.arrayRemove)(e),followersCount:(0,r.increment)(-1)})}catch(e){throw console.error("Error unfollowing user:",e),e}}async function g(e,t){try{var o;let a=(0,r.doc)(n.db,"users",e),i=await (0,r.getDoc)(a);if(!i.exists())return!1;return(null==(o=i.data().following)?void 0:o.includes(t))||!1}catch(e){throw console.error("Error checking follow status:",e),e}}async function f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;try{let o=(0,r.doc)(n.db,"users",e),a=await (0,r.getDoc)(o);if(!a.exists())return[];let i=a.data().following||[];if(0===i.length)return[];let s=[],c=Math.min(i.length,t);for(let e=0;e<c;e++){let t=i[e],o=(0,r.doc)(n.db,"users",t),a=await (0,r.getDoc)(o);a.exists()&&s.push(a.data())}return s}catch(e){throw console.error("Error getting following list:",e),e}}async function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;try{let o=(0,r.doc)(n.db,"users",e),a=await (0,r.getDoc)(o);if(!a.exists())return[];let i=a.data().followers||[];if(0===i.length)return[];let s=[],c=Math.min(i.length,t);for(let e=0;e<c;e++){let t=i[e],o=(0,r.doc)(n.db,"users",t),a=await (0,r.getDoc)(o);a.exists()&&s.push(a.data())}return s}catch(e){throw console.error("Error getting followers list:",e),e}}async function w(e){try{let t=(0,r.doc)(n.db,"users",e);await (0,r.deleteDoc)(t),console.log("User profile for UID ".concat(e," deleted from Firestore."));let o=n.j2.currentUser;if(o&&o.uid===e)await (0,a.deleteUser)(o),console.log("User account for UID ".concat(e," deleted from Firebase Authentication."));else if(o)throw console.error("Current authenticated user does not match UID to be deleted."),Error("Mismatch between authenticated user and account to be deleted.");else throw console.error("No current user authenticated. Cannot delete Firebase Auth user."),Error("Authentication required to delete account.")}catch(e){if(console.error("Error deleting user account:",e),"auth/requires-recent-login"===e.code)throw Error("This operation is sensitive and requires recent authentication. Please sign out and sign back in, then try again.");throw Error("Failed to delete user account. "+e.message)}}},6201:(e,t,o)=>{"use strict";o.d(t,{A:()=>l});var r=o(5155),a=o(2115),n=o(6874),i=o.n(n),s=o(5695),c=o(8163),_=o.n(c);let l=e=>{let{isAuthenticated:t,handleLogout:o,toggleSidebar:n,isSidebarCollapsed:c}=e,[l,m]=(0,a.useState)(!1),h=(0,a.useRef)(null),u=(0,a.useRef)(null);(0,s.useRouter)();let d=(0,s.usePathname)();(0,a.useEffect)(()=>{let e=e=>{h.current&&u.current&&!h.current.contains(e.target)&&!u.current.contains(e.target)&&m(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let g=()=>{m(!1)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("aside",{className:_()["left-sidebar"],children:(0,r.jsx)("nav",{className:_()["vertical-nav"],children:t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i(),{href:"/",className:"".concat(_()["nav-link"]," ").concat(_()["nav-home"]," ").concat("/"===d?_().active:""),title:"Home",children:(0,r.jsx)("span",{className:_()["nav-icon"]})}),(0,r.jsx)(i(),{href:"/create-article",className:"".concat(_()["nav-link"]," ").concat(_()["nav-create"]," ").concat("/create-article"===d?_().active:""),title:"Create Article",children:(0,r.jsx)("span",{className:_()["nav-icon"]})}),(0,r.jsx)(i(),{href:"/my-thoughts",className:"".concat(_()["nav-link"]," ").concat(_()["nav-thoughts"]," ").concat("/my-thoughts"===d?_().active:""),title:"My Thoughts",children:(0,r.jsx)("span",{className:_()["nav-icon"]})}),(0,r.jsx)(i(),{href:"/trending",className:"".concat(_()["nav-link"]," ").concat(_()["nav-trending"]," ").concat("/trending"===d?_().active:""),title:"Trending",children:(0,r.jsx)("span",{className:_()["nav-icon"]})}),(0,r.jsx)(i(),{href:"/news",className:"".concat(_()["nav-link"]," ").concat(_()["nav-news"]," ").concat("/news"===d?_().active:""),title:"News",children:(0,r.jsx)("span",{className:_()["nav-icon"]})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i(),{href:"/",className:"".concat(_()["nav-link"]," ").concat(_()["nav-home"]," ").concat("/"===d?_().active:""),title:"Home",children:(0,r.jsx)("span",{className:_()["nav-icon"]})}),(0,r.jsx)(i(),{href:"/explore",className:"".concat(_()["nav-link"]," ").concat(_()["nav-explore"]," ").concat("/explore"===d?_().active:""),title:"Explore",children:(0,r.jsx)("span",{className:_()["nav-icon"]})}),(0,r.jsx)(i(),{href:"https://journalite.app/",className:"".concat(_()["nav-link"]," ").concat(_()["nav-learn"]),title:"Learn More",target:"_blank",rel:"noopener noreferrer",children:(0,r.jsx)("span",{className:_()["nav-icon"]})}),(0,r.jsx)(i(),{href:"/register",className:"".concat(_()["nav-link"]," ").concat(_()["nav-signin"]," ").concat("/register"===d?_().active:""),title:"Sign Up",children:(0,r.jsx)("span",{className:_()["nav-icon"]})}),(0,r.jsx)(i(),{href:"/login",className:"".concat(_()["nav-link"]," ").concat(_()["nav-login"]," ").concat("/login"===d?_().active:""),title:"Login",children:(0,r.jsx)("span",{className:_()["nav-icon"]})})]})})}),t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{ref:u,className:_()["profile-button"],onClick:()=>{m(!l)},title:"Profile & Settings",children:(0,r.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,r.jsxs)("div",{ref:h,className:"".concat(_()["profile-dropdown"]," ").concat(l?_().open:""),children:[(0,r.jsxs)(i(),{href:"/my-profile",className:_()["profile-dropdown-item"],onClick:g,children:[(0,r.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z",fill:"currentColor"})}),"My Profile"]}),(0,r.jsxs)(i(),{href:"/my-thoughts/reflections",className:_()["profile-dropdown-item"],onClick:g,children:[(0,r.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Reflections"]}),(0,r.jsxs)(i(),{href:"/settings",className:_()["profile-dropdown-item"],onClick:g,children:[(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Settings"]}),(0,r.jsxs)(i(),{href:"/notifications",className:_()["profile-dropdown-item"],onClick:g,children:[(0,r.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Notifications"]}),(0,r.jsx)("div",{className:_()["profile-dropdown-separator"]}),(0,r.jsxs)("button",{onClick:()=>{g(),o()},className:_()["profile-dropdown-item"],children:[(0,r.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3-3 3-3m0 0-3-3m3 3H9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Log out"]})]})]})]})}},8163:e=>{e.exports={"article-page":"home_article-page__CJrzD","three-column-layout":"home_three-column-layout__x41EQ","left-sidebar":"home_left-sidebar__MaSov","top-left-logo":"home_top-left-logo__JmZ4H","toggle-button":"home_toggle-button__sVP2W","sidebar-footer":"home_sidebar-footer__Fj8FR","sidebar-collapse-button":"home_sidebar-collapse-button__W3ZL0","vertical-nav":"home_vertical-nav__Cj0En","nav-home":"home_nav-home__X8XEK","nav-icon":"home_nav-icon__yM4nn","nav-create":"home_nav-create__My7ng","nav-thoughts":"home_nav-thoughts__0rfq1","nav-trending":"home_nav-trending__ExDVC","nav-news":"home_nav-news___K3Hw","nav-explore":"home_nav-explore__bcQBn","nav-learn":"home_nav-learn__M1FC_","nav-signin":"home_nav-signin__tzTY_","nav-login":"home_nav-login__1lQUW","nav-link":"home_nav-link__6kEPW","nav-text":"home_nav-text__B7jdN",active:"home_active__S0jaV","profile-button":"home_profile-button__hzl_I","profile-dropdown":"home_profile-dropdown__Y5WsU",open:"home_open__XfBoq","profile-dropdown-item":"home_profile-dropdown-item__evd8S","profile-dropdown-separator":"home_profile-dropdown-separator___NXrk","center-column":"home_center-column__eaxY9",expanded:"home_expanded__mJRm4",loading:"home_loading__D6__B",centerSearchContainer:"home_centerSearchContainer__IOa3K",centerSearchWrapper:"home_centerSearchWrapper__NNrYK",focused:"home_focused__5YCO2","holographic-shine":"home_holographic-shine__x_mJJ",searchIcon:"home_searchIcon__xc0XK",centerSearchInput:"home_centerSearchInput__48wSR",searchLoadingIcon:"home_searchLoadingIcon__k5Sm7",centerSearchResults:"home_centerSearchResults__nuYpC",slideDown:"home_slideDown__8UuRE",shimmer:"home_shimmer__Qx0I4",centerSearchResultItem:"home_centerSearchResultItem__bn8jP",resultUserAvatar:"home_resultUserAvatar__UWdCO",resultUserInfo:"home_resultUserInfo__OeoCv",resultUserName:"home_resultUserName___o7C3",resultUserUsername:"home_resultUserUsername__7tLvP",centerSearchNoResults:"home_centerSearchNoResults__qKulK","featured-card":"home_featured-card__r3SXe","featured-content":"home_featured-content__gbOMz","featured-image":"home_featured-image__3DBbZ","cover-image":"home_cover-image___ZInI","featured-label":"home_featured-label__z2IzP","featured-title":"home_featured-title__qNCn0","featured-meta":"home_featured-meta__Lq6uD","featured-excerpt":"home_featured-excerpt__dhAPX","read-link":"home_read-link___6ZMN","article-grid":"home_article-grid__mC5EI","article-card":"home_article-card__fzb4w","article-title":"home_article-title__toAvL","article-meta":"home_article-meta__9UhXG","article-excerpt":"home_article-excerpt__kuCuZ","article-tags":"home_article-tags__VxN88",tag:"home_tag__LEtq4","reaction-bar":"home_reaction-bar__Y0gsv","reaction-button":"home_reaction-button__KLD0h","reaction-icon":"home_reaction-icon__vhB0y","right-sidebar":"home_right-sidebar__e_5Hr","sidebar-heading":"home_sidebar-heading__lega4","tag-list":"home_tag-list__fgeEi","trending-tag":"home_trending-tag__0awB8","write-button":"home_write-button__Gowtg","edit-button":"home_edit-button__RsQLX","quote-card":"home_quote-card__LAcHm","quote-tag":"home_quote-tag__AukSw","article-container":"home_article-container__RCmcS","article-header":"home_article-header__mdTUd","article-content":"home_article-content__HUOVu","article-paragraph":"home_article-paragraph__6t7oy","article-cover-image":"home_article-cover-image__KDspQ","sidebar-header":"home_sidebar-header__4tIx3",header:"home_header__PUC5f",logo:"home_logo__fwoF8",hero:"home_hero__3iLRs","hero-title":"home_hero-title__tuN3q","hero-subtitle":"home_hero-subtitle__cyiJZ","cta-button":"home_cta-button__X8xB1","main-grid":"home_main-grid__qFsbA","section-title":"home_section-title__wEK3N","article-tag":"home_article-tag__m6NuJ","author-info":"home_author-info__Xw67P","author-avatar":"home_author-avatar__kBH_g","author-name":"home_author-name__vEgN7",topics:"home_topics__lPwTP","topic-tag":"home_topic-tag__LL122","trending-list":"home_trending-list__YinkY",writers:"home_writers__2u4IP","writer-item":"home_writer-item__1jEW3","writer-info":"home_writer-info__OG3R7","writer-avatar":"home_writer-avatar__b69xH","writer-name":"home_writer-name__McEqt","follow-button":"home_follow-button__UX_LS",features:"home_features__Uc1bS","feature-title":"home_feature-title__9pzGT","feature-desc":"home_feature-desc__jOby5",footer:"home_footer__1HL_E","menu-overlay":"home_menu-overlay__S__PE",fadeIn:"home_fadeIn__uLm0f",articleFormContainer:"home_articleFormContainer__DSMnb",articleFormHeader:"home_articleFormHeader__yeH26",articleFormTitle:"home_articleFormTitle__B11fv",articleFormSubtitle:"home_articleFormSubtitle__XZLCa",articleForm:"home_articleForm__qtKbt",formGroup:"home_formGroup__dX_8o",formLabel:"home_formLabel__qdIcu",optionalLabel:"home_optionalLabel__U0gvl",formControl:"home_formControl__Cf48C",formTextarea:"home_formTextarea__tVyby",formActions:"home_formActions__BdMyR",cancelButton:"home_cancelButton__docpL",submitButton:"home_submitButton__gVGwS",errorAlert:"home_errorAlert__tVY_A",errorIcon:"home_errorIcon__gc9ZB",imagePreview:"home_imagePreview__zqwvQ",tagsPreview:"home_tagsPreview__V6lf7",container:"home_container__TLSt1","writing-tips":"home_writing-tips__2ODsS","writing-tip":"home_writing-tip__dmGLE",loginLink:"home_loginLink__imUQF",discussionSection:"home_discussionSection__0Ifpl",discussionTitle:"home_discussionTitle__O3EuW",commentForm:"home_commentForm__zAQrR",commentInputContainer:"home_commentInputContainer__gKx6N",commentAvatar:"home_commentAvatar__T8zJ0",replyAvatar:"home_replyAvatar___kB3f",commentInputWrapper:"home_commentInputWrapper__hxZkN",commentInput:"home_commentInput__uUtg_",replyInput:"home_replyInput__rYKdQ",commentActions:"home_commentActions__OO9jZ",replyActions:"home_replyActions__p9B_f",submitReplyButton:"home_submitReplyButton__BdUJ2",cancelReplyButton:"home_cancelReplyButton__XvM8F",loginPrompt:"home_loginPrompt__w4N0u",loginPromptButtons:"home_loginPromptButtons__snC_B",loginButton:"home_loginButton__YS1MQ",closePromptButton:"home_closePromptButton__QYTJ8",errorMessage:"home_errorMessage__9Ki1b",loadingSpinner:"home_loadingSpinner__peANt",spin:"home_spin__D0mwY",noComments:"home_noComments__850HV",commentsList:"home_commentsList__fRn9g",commentItem:"home_commentItem__L5fNy",commentHeader:"home_commentHeader___Zk6a",replyHeader:"home_replyHeader__f7TaG",commentMeta:"home_commentMeta__MJRA8",replyMeta:"home_replyMeta__ve_YC",commentAuthor:"home_commentAuthor__HPgNT",replyAuthor:"home_replyAuthor__2Brdn",commentDate:"home_commentDate__VBAuX",replyDate:"home_replyDate__y0RtU",commentContent:"home_commentContent__uzL9r",replyContent:"home_replyContent__HFiXM",commentControls:"home_commentControls__ebC_D",likeButton:"home_likeButton__gtW9b",replyButton:"home_replyButton__e_FYj",toggleRepliesButton:"home_toggleRepliesButton__UC2Rk",deleteButton:"home_deleteButton__VEIPc",liked:"home_liked__LMNuR",replyForm:"home_replyForm__CpHFF",replyInputContainer:"home_replyInputContainer__3_T0M",repliesList:"home_repliesList__TjSoC",replyItem:"home_replyItem__TadHa",profileHeader:"home_profileHeader__N2hD3",profileAvatar:"home_profileAvatar__zAfHf",avatarPlaceholder:"home_avatarPlaceholder__mh9Xc",profileInfo:"home_profileInfo__tQtas",profileName:"home_profileName__7mtlO",profileUsername:"home_profileUsername__ACE_Q",profileBio:"home_profileBio__pKxZ3",sectionHeading:"home_sectionHeading__F_a8F",profileContent:"home_profileContent__a6u08",emptyState:"home_emptyState__0oCVS",sidebarSection:"home_sidebarSection__cyQHn",backLink:"home_backLink__Anavd","article-image":"home_article-image__mOEoE",searchContainer:"home_searchContainer__NcXe2",searchInputWrapper:"home_searchInputWrapper__jDfiT",searchInput:"home_searchInput__D6QYE",clearSearchButton:"home_clearSearchButton__XEPTo",searchResultsContainer:"home_searchResultsContainer__aOrYe",searchResultsTitle:"home_searchResultsTitle__KjT7N",backToAllButton:"home_backToAllButton__ShJnS",searchResults:"home_searchResults__sWgqy",searchResultItem:"home_searchResultItem__CuGQu",searchResultAvatar:"home_searchResultAvatar__QRukz",adminAvatar:"home_adminAvatar__5I7Wp",developerAvatar:"home_developerAvatar__YWLjR",userAvatar:"home_userAvatar__sJEnc",searchResultInfo:"home_searchResultInfo__vOptx",searchResultName:"home_searchResultName__yMZVz",searchResultUsername:"home_searchResultUsername__oQ4tk",searchResultRole:"home_searchResultRole__E5rB8",searchResultRoleAdmin:"home_searchResultRoleAdmin__58nmi",searchResultRoleDeveloper:"home_searchResultRoleDeveloper__D6KaE",searchResultRoleUser:"home_searchResultRoleUser__P_B5t",roleTag:"home_roleTag__X3nyq",noResults:"home_noResults__VKSke",tabContainer:"home_tabContainer__WiCFt",tabButton:"home_tabButton___0LSM",activeTab:"home_activeTab___peId",docsContainer:"home_docsContainer__uFnrg",userManagementContainer:"home_userManagementContainer__d8zKX",sectionTitle:"home_sectionTitle___LoW8",statsContainer:"home_statsContainer__Ecxt0",statBox:"home_statBox__sOuzf",statNumber:"home_statNumber__0HaRO",statLabel:"home_statLabel___lx3s",usersTableContainer:"home_usersTableContainer__xgtQE",usersTable:"home_usersTable__UQjnE",roleSelect:"home_roleSelect__85R__",documentationContainer:"home_documentationContainer__3hhXs",docSidebar:"home_docSidebar__NjNVF",docSearchContainer:"home_docSearchContainer__2oA__",docSearchInput:"home_docSearchInput__YwfD7",docNav:"home_docNav__TyBYN",docNavItem:"home_docNavItem__wzbPN",docNavItemActive:"home_docNavItemActive__2G1E0",docContent:"home_docContent__HO1_Q",docTitle:"home_docTitle__IElVr",docSubheading:"home_docSubheading__qezFR",docText:"home_docText__pOq_f",codeBlock:"home_codeBlock__2XLSi",codeBlockContainer:"home_codeBlockContainer__m8biO",codeLineNumbers:"home_codeLineNumbers___g0z3",codeContent:"home_codeContent__8Ufq0",keyword:"home_keyword__xcIYJ",string:"home_string__IDzCq",comment:"home_comment___nq3w",function:"home_function__lPtv4",type:"home_type__Ot2EV",variable:"home_variable__V9b_I",number:"home_number__EdK6u",operator:"home_operator__4A6PV",copyButton:"home_copyButton__FJrSq",alertInfo:"home_alertInfo__DNxOh",alertWarning:"home_alertWarning__h5lMU",alertSuccess:"home_alertSuccess__VNous",userTableCell:"home_userTableCell__EfMXq","tag-header":"home_tag-header__V7Fnc",highlight:"home_highlight__wsiMU","tag-description":"home_tag-description___G1Ky","back-link":"home_back-link__nWn7j","no-results":"home_no-results__lv_Xi","explore-header":"home_explore-header__EECf8","explore-title":"home_explore-title__FCgPB","explore-subtitle":"home_explore-subtitle__n2Hy_","explore-container":"home_explore-container__RUVLK","explore-section":"home_explore-section__kWWcA","featured-articles-grid":"home_featured-articles-grid__Fow9u","feature-large":"home_feature-large__V74KX","tags-selector":"home_tags-selector__Bw1Pi","tag-button":"home_tag-button__xESQB","tag-button-active":"home_tag-button-active__cuvxR",fullWidthContainer:"home_fullWidthContainer__bH7VI",editorHeader:"home_editorHeader__nxAUv",backButton:"home_backButton__7YWR2",editorContainer:"home_editorContainer__TTjO_","glass-container":"home_glass-container__DeqYo","glass-highlight":"home_glass-highlight__M6PuC","glass-content":"home_glass-content__1NgZn","glass-button":"home_glass-button__CVS9T","glass-button-primary":"home_glass-button-primary__o3Eea","glass-button-success":"home_glass-button-success__Tju00","glass-button-danger":"home_glass-button-danger__QrAXi","glass-card":"home_glass-card__xqfi9","glass-card-highlight":"home_glass-card-highlight__U_WWE","glass-modal-overlay":"home_glass-modal-overlay__P9nln","glass-modal":"home_glass-modal__ujLH0","glass-nav-container":"home_glass-nav-container__s_3lM","glass-nav-button":"home_glass-nav-button___HD46","glass-notification-unread":"home_glass-notification-unread__Ddf3D","glass-notification-read":"home_glass-notification-read__Bz8wx","glass-tag":"home_glass-tag__ic8iV","glass-tag-warning":"home_glass-tag-warning__1z0Xj","glass-loading":"home_glass-loading___OOS7","glass-empty-state":"home_glass-empty-state__ngWuT","glass-profile-container":"home_glass-profile-container__Ofhd4","glass-profile-header":"home_glass-profile-header__0xqky"}},9299:(e,t,o)=>{"use strict";o.d(t,{A:()=>_});var r=o(5155),a=o(2115),n=o(5695),i=o(6203),s=o(3201),c=o(4744);let _=e=>{let{targetUserId:t,targetUsername:o,className:_=""}=e,[l,m]=(0,a.useState)(null),[h,u]=(0,a.useState)(!1),[d,g]=(0,a.useState)(!0),[f,p]=(0,a.useState)(!1),[w,v]=(0,a.useState)(!1),b=(0,n.useRouter)();if((0,a.useEffect)(()=>{let e=(0,i.onAuthStateChanged)(s.j2,async e=>{if(e){m(e.uid);try{let o=await (0,c.E$)(e.uid,t);u(o)}catch(e){console.error("Error checking follow status:",e)}finally{g(!1)}}else m(null),g(!1)});return()=>e()},[t]),(0,a.useEffect)(()=>{let e;return w&&(e=setTimeout(()=>{v(!1)},3e3)),()=>{e&&clearTimeout(e)}},[w]),l===t)return null;let y=async()=>{if(!l)return void b.push("/login");p(!0);try{h?(await (0,c.Qt)(l,t),u(!1)):(await (0,c.pV)(l,t),u(!0),v(!0))}catch(e){console.error("Error with follow/unfollow action:",e)}finally{p(!1)}},x="px-4 py-2 rounded-full text-sm font-medium transition-colors",C="".concat(h?"".concat(x," bg-white text-gray-800 border border-gray-300 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"):"".concat(x," bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2")," ").concat(_);return d?(0,r.jsx)("button",{className:"".concat(x," bg-gray-200 text-gray-400 cursor-not-allowed ").concat(_),disabled:!0,children:"Loading..."}):(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("button",{onClick:y,disabled:f,className:C,"aria-label":h?"Unfollow ".concat(o):"Follow ".concat(o),children:f?(0,r.jsxs)("span",{className:"flex items-center justify-center",children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),h?"Unfollowing...":"Following..."]}):(0,r.jsx)("span",{children:h?"Following":"Follow"})}),w&&(0,r.jsxs)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 bg-gray-800 text-white text-xs rounded py-1 px-2 pointer-events-none opacity-90 whitespace-nowrap z-10",children:[(0,r.jsx)("div",{className:"absolute -top-1 left-1/2 transform -translate-x-1/2 w-2 h-2 rotate-45 bg-gray-800"}),"Notification sent to ",o]})]})}},9995:(e,t,o)=>{"use strict";o.d(t,{Hs:()=>m,N9:()=>i,Ss:()=>s,bA:()=>c,fP:()=>l,fZ:()=>n,he:()=>_});var r=o(5317),a=o(3201);async function n(e,t,o,n,i,s){try{let t=a.j2.currentUser;if(!t||t.uid===e)return null;let c={userId:e,type:"comment",read:!1,sourceId:i,sourceType:"comment",message:"".concat(t.displayName||"Someone",' commented on your article: "').concat(s.substring(0,50)).concat(s.length>50?"...":"",'"'),fromUser:{id:t.uid,name:t.displayName||"Anonymous"},createdAt:r.Timestamp.now(),articleSlug:o,articleTitle:n};return{id:(await (0,r.addDoc)((0,r.collection)(a.db,"notifications"),c)).id,...c}}catch(e){return console.error("Error creating notification:",e),null}}async function i(e,t,o,n){try{if(e===o)return null;let i={userId:e,type:"follow",read:!1,sourceId:o,sourceType:"user",message:"".concat(t," (@").concat(n,") started following you"),fromUser:{id:o,name:t,username:n},createdAt:r.Timestamp.now()};return{id:(await (0,r.addDoc)((0,r.collection)(a.db,"notifications"),i)).id,...i}}catch(e){return console.error("Error creating follow notification:",e),null}}async function s(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{let t,o=a.j2.currentUser;if(!o)throw Error("User not authenticated");let n=(0,r.collection)(a.db,"notifications");t=e?(0,r.query)(n,(0,r.where)("userId","==",o.uid),(0,r.where)("read","==",!1),(0,r.orderBy)("createdAt","desc"),(0,r.limit)(100)):(0,r.query)(n,(0,r.where)("userId","==",o.uid),(0,r.orderBy)("createdAt","desc"),(0,r.limit)(100));let i=await (0,r.getDocs)(t),s=[];return i.forEach(e=>{s.push({id:e.id,...e.data()})}),s}catch(e){throw console.error("Error fetching notifications:",e),e}}async function c(e){try{let t=a.j2.currentUser;if(!t)throw Error("User not authenticated");let o=(0,r.doc)(a.db,"notifications",e),n=await (0,r.getDoc)(o);if(!n.exists())throw Error("Notification not found");if(n.data().userId!==t.uid)throw Error("Unauthorized access to notification");return await (0,r.updateDoc)(o,{read:!0}),{success:!0}}catch(e){throw console.error("Error marking notification as read:",e),e}}async function _(){try{let e=a.j2.currentUser;if(!e)throw Error("User not authenticated");let t=(0,r.collection)(a.db,"notifications"),o=(0,r.query)(t,(0,r.where)("userId","==",e.uid),(0,r.where)("read","==",!1)),n=await (0,r.getDocs)(o),i=n.docs.map(e=>(0,r.updateDoc)(e.ref,{read:!0}));return await Promise.all(i),{success:!0,count:n.size}}catch(e){throw console.error("Error marking all notifications as read:",e),e}}async function l(e){try{let t=a.j2.currentUser;if(!t)throw Error("User not authenticated");let o=(0,r.doc)(a.db,"notifications",e),n=await (0,r.getDoc)(o);if(!n.exists())throw Error("Notification not found");if(n.data().userId!==t.uid)throw Error("Unauthorized access to notification");return await (0,r.deleteDoc)(o),{success:!0}}catch(e){throw console.error("Error deleting notification:",e),e}}async function m(){try{let e=a.j2.currentUser;if(!e)return 0;let t=(0,r.collection)(a.db,"notifications"),o=(0,r.query)(t,(0,r.where)("userId","==",e.uid),(0,r.where)("read","==",!1));return(await (0,r.getDocs)(o)).size}catch(e){return console.error("Error counting unread notifications:",e),0}}}}]);