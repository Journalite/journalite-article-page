(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[173],{3201:(e,t,a)=>{"use strict";a.d(t,{db:()=>c,j2:()=>s});var o=a(3915),n=a(6864),r=a(6203),i=a(5317);let _=(0,o.Wp)({apiKey:"AIzaSyCFpybhLt43iKUw6lNahU1n2zjYv0BXmf4",authDomain:"journalitev1.firebaseapp.com",projectId:"journalitev1",storageBucket:"journalitev1.firebasestorage.app",messagingSenderId:"897263211529",appId:"1:897263211529:web:bae4a00910a2236d6d54d8",measurementId:"G-ZYT8PRMT0D"});try{(0,n.P5)(_)}catch(e){}let s=(0,r.xI)(_),c=(0,i.aU)(_);window.location.origin},5695:(e,t,a)=>{"use strict";var o=a(8999);a.o(o,"useRouter")&&a.d(t,{useRouter:function(){return o.useRouter}}),a.o(o,"useSearchParams")&&a.d(t,{useSearchParams:function(){return o.useSearchParams}})},5814:(e,t,a)=>{Promise.resolve().then(a.bind(a,7435))},6956:e=>{e.exports={header:"notifications_header__gUUZi",title:"notifications_title__zlF2P",markAllButton:"notifications_markAllButton__gDtwR",emptyState:"notifications_emptyState__AoLUG",emptyIcon:"notifications_emptyIcon__1a9Fy",notificationsList:"notifications_notificationsList__oZ7nR",notificationCard:"notifications_notificationCard__69Xe7",unread:"notifications_unread__fcobY",notificationContent:"notifications_notificationContent__XIgXs",message:"notifications_message__vAkcz",time:"notifications_time__nyAob",notificationActions:"notifications_notificationActions__HEamu",viewButton:"notifications_viewButton__GtAPj",readButton:"notifications_readButton__ma_Ky",deleteButton:"notifications_deleteButton__LgfU6",summary:"notifications_summary__ljxQh",statCard:"notifications_statCard__1KLa_",statValue:"notifications_statValue__54IQX",statLabel:"notifications_statLabel__iBeoK"}},7435:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var o=a(5155),n=a(2115),r=a(5695),i=a(6874),_=a.n(i),s=a(6203),c=a(3201),l=a(9995),m=a(8163),h=a.n(m),d=a(6956),u=a.n(d);function p(){let[e,t]=(0,n.useState)(!1),[a,i]=(0,n.useState)(!0),[m,d]=(0,n.useState)([]),[p,f]=(0,n.useState)(!1),g=(0,r.useRouter)();(0,n.useEffect)(()=>{let e=(0,s.hg)(c.j2,e=>{let a=!!e;t(a),a?v():g.push("/login?redirect=/notifications")});return()=>e()},[g]);let v=async()=>{try{i(!0);let e=await (0,l.Ss)(!1);d(e)}catch(e){console.error("Error fetching notifications:",e)}finally{i(!1)}},x=async e=>{if(e.id&&!e.read)try{await (0,l.bA)(e.id),d(t=>t.map(t=>t.id===e.id?{...t,read:!0}:t))}catch(e){console.error("Error marking notification as read:",e)}},y=async()=>{try{await (0,l.he)(),d(e=>e.map(e=>({...e,read:!0})))}catch(e){console.error("Error marking all notifications as read:",e)}},b=async e=>{if(e)try{await (0,l.fP)(e),d(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Error deleting notification:",e)}},N=e=>{if(!e)return"";try{return(e.toDate?e.toDate():new Date(e)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(e){return"Invalid date"}};return a?(0,o.jsx)("div",{className:h().container,children:(0,o.jsx)("div",{className:h().loading,children:"Loading notifications..."})}):(0,o.jsxs)("div",{className:h()["three-column-layout"],children:[(0,o.jsxs)("aside",{className:"".concat(h()["left-sidebar"]," ").concat(p?h().collapsed:""),children:[(0,o.jsxs)("div",{className:h()["sidebar-header"],children:[(0,o.jsx)("div",{className:h().logo,children:"Journalite"}),(0,o.jsx)("button",{className:h()["toggle-button"],onClick:()=>{f(!p)},"aria-label":p?"Expand sidebar":"Collapse sidebar",children:p?"→":"←"})]}),(0,o.jsx)("nav",{className:h()["vertical-nav"],children:e?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(_(),{href:"/",className:"".concat(h()["nav-link"]," ").concat(h()["nav-home"]),children:[(0,o.jsx)("span",{className:h()["nav-icon"],children:"•"}),(0,o.jsx)("span",{className:h()["nav-text"],children:"Home"})]}),(0,o.jsxs)(_(),{href:"/my-thoughts",className:"".concat(h()["nav-link"]," ").concat(h()["nav-thoughts"]),children:[(0,o.jsx)("span",{className:h()["nav-icon"],children:"•"}),(0,o.jsx)("span",{className:h()["nav-text"],children:"My Thoughts"})]}),(0,o.jsxs)(_(),{href:"/create-article",className:"".concat(h()["nav-link"]," ").concat(h()["nav-create"]),children:[(0,o.jsx)("span",{className:h()["nav-icon"],children:"•"}),(0,o.jsx)("span",{className:h()["nav-text"],children:"Create Article"})]}),(0,o.jsxs)(_(),{href:"/explore",className:"".concat(h()["nav-link"]," ").concat(h()["nav-explore"]),children:[(0,o.jsx)("span",{className:h()["nav-icon"],children:"•"}),(0,o.jsx)("span",{className:h()["nav-text"],children:"Explore"})]}),(0,o.jsxs)(_(),{href:"/notifications",className:"".concat(h()["nav-link"]," ").concat(h().active),children:[(0,o.jsx)("span",{className:h()["nav-icon"],children:"•"}),(0,o.jsx)("span",{className:h()["nav-text"],children:"Notifications"})]}),(0,o.jsxs)(_(),{href:"/my-profile",className:"".concat(h()["nav-link"]," ").concat(h()["nav-profile"]),children:[(0,o.jsx)("span",{className:h()["nav-icon"],children:"•"}),(0,o.jsx)("span",{className:h()["nav-text"],children:"My Profile"})]}),(0,o.jsxs)(_(),{href:"/settings",className:"".concat(h()["nav-link"]," ").concat(h()["nav-settings"]),children:[(0,o.jsx)("span",{className:h()["nav-icon"],children:"•"}),(0,o.jsx)("span",{className:h()["nav-text"],children:"Settings"})]})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(_(),{href:"/",className:"".concat(h()["nav-link"]," ").concat(h()["nav-home"]),children:[(0,o.jsx)("span",{className:h()["nav-icon"],children:"•"}),(0,o.jsx)("span",{className:h()["nav-text"],children:"Home"})]}),(0,o.jsxs)(_(),{href:"/login",className:"".concat(h()["nav-link"]," ").concat(h()["nav-login"]),children:[(0,o.jsx)("span",{className:h()["nav-icon"],children:"•"}),(0,o.jsx)("span",{className:h()["nav-text"],children:"Login"})]}),(0,o.jsxs)(_(),{href:"/learn",className:"".concat(h()["nav-link"]," ").concat(h()["nav-learn"]),children:[(0,o.jsx)("span",{className:h()["nav-icon"],children:"•"}),(0,o.jsx)("span",{className:h()["nav-text"],children:"Learn More"})]})]})})]}),(0,o.jsxs)("main",{className:h()["center-column"],children:[(0,o.jsxs)("div",{className:u().header,children:[(0,o.jsx)("h1",{className:u().title,children:"Notifications"}),m.length>0&&(0,o.jsx)("button",{className:u().markAllButton,onClick:y,children:"Mark all as read"})]}),0===m.length?(0,o.jsxs)("div",{className:u().emptyState,children:[(0,o.jsx)("div",{className:u().emptyIcon,children:"\uD83D\uDD14"}),(0,o.jsx)("h2",{children:"No notifications yet"}),(0,o.jsx)("p",{children:"When you receive notifications, they will appear here."})]}):(0,o.jsx)("div",{className:u().notificationsList,children:m.map(e=>(0,o.jsxs)("div",{className:"".concat(u().notificationCard," ").concat(e.read?"":u().unread),children:[(0,o.jsxs)("div",{className:u().notificationContent,children:[(0,o.jsx)("p",{className:u().message,children:e.message}),(0,o.jsx)("p",{className:u().time,children:N(e.createdAt)})]}),(0,o.jsxs)("div",{className:u().notificationActions,children:[(0,o.jsx)(_(),{href:"/articles?slug=".concat(e.articleSlug),className:u().viewButton,onClick:()=>x(e),children:"View"}),!e.read&&(0,o.jsx)("button",{className:u().readButton,onClick:()=>x(e),children:"Mark as read"}),(0,o.jsx)("button",{className:u().deleteButton,onClick:()=>e.id&&b(e.id),children:"Delete"})]})]},e.id))})]}),(0,o.jsxs)("aside",{className:h()["right-sidebar"],children:[(0,o.jsx)("h2",{className:h()["sidebar-heading"],children:"Notifications Summary"}),m.length>0&&(0,o.jsxs)("div",{className:u().summary,children:[(0,o.jsxs)("div",{className:u().statCard,children:[(0,o.jsx)("span",{className:u().statValue,children:m.filter(e=>!e.read).length}),(0,o.jsx)("span",{className:u().statLabel,children:"Unread"})]}),(0,o.jsxs)("div",{className:u().statCard,children:[(0,o.jsx)("span",{className:u().statValue,children:m.length}),(0,o.jsx)("span",{className:u().statLabel,children:"Total"})]})]})]})]})}},8163:e=>{e.exports={"article-page":"home_article-page__CJrzD","three-column-layout":"home_three-column-layout__x41EQ","left-sidebar":"home_left-sidebar__MaSov",collapsed:"home_collapsed__2_VdN","sidebar-header":"home_sidebar-header__4tIx3",logo:"home_logo__fwoF8","toggle-button":"home_toggle-button__sVP2W","vertical-nav":"home_vertical-nav__Cj0En","nav-home":"home_nav-home__X8XEK","nav-icon":"home_nav-icon__yM4nn","nav-thoughts":"home_nav-thoughts__0rfq1","nav-explore":"home_nav-explore__bcQBn","nav-profile":"home_nav-profile__WAAem","nav-settings":"home_nav-settings__0w_SC","nav-logout":"home_nav-logout__MCaXq","nav-login":"home_nav-login__1lQUW","nav-signup":"home_nav-signup__8EtSK","nav-learn":"home_nav-learn__M1FC_","nav-plans":"home_nav-plans__c9i07","nav-link":"home_nav-link__6kEPW","nav-text":"home_nav-text__B7jdN",active:"home_active__S0jaV","sidebar-footer":"home_sidebar-footer__Fj8FR","sidebar-collapse-button":"home_sidebar-collapse-button__W3ZL0","center-column":"home_center-column__eaxY9",expanded:"home_expanded__mJRm4",loading:"home_loading__D6__B","prompt-banner":"home_prompt-banner__xFQFU","prompt-icon":"home_prompt-icon__9eWo_","prompt-text":"home_prompt-text__P3NSJ","prompt-button":"home_prompt-button__z8a6r","featured-card":"home_featured-card__r3SXe","featured-content":"home_featured-content__gbOMz","featured-image":"home_featured-image__3DBbZ","cover-image":"home_cover-image___ZInI","featured-label":"home_featured-label__z2IzP","featured-title":"home_featured-title__qNCn0","featured-meta":"home_featured-meta__Lq6uD","featured-excerpt":"home_featured-excerpt__dhAPX","read-link":"home_read-link___6ZMN","article-grid":"home_article-grid__mC5EI","article-card":"home_article-card__fzb4w","article-title":"home_article-title__toAvL","article-meta":"home_article-meta__9UhXG","article-excerpt":"home_article-excerpt__kuCuZ","article-tags":"home_article-tags__VxN88",tag:"home_tag__LEtq4","reaction-bar":"home_reaction-bar__Y0gsv","reaction-button":"home_reaction-button__KLD0h","reaction-icon":"home_reaction-icon__vhB0y","right-sidebar":"home_right-sidebar__e_5Hr","sidebar-heading":"home_sidebar-heading__lega4","tag-list":"home_tag-list__fgeEi","trending-tag":"home_trending-tag__0awB8","write-button":"home_write-button__Gowtg","edit-button":"home_edit-button__RsQLX","quote-card":"home_quote-card__LAcHm","quote-tag":"home_quote-tag__AukSw","article-container":"home_article-container__RCmcS","article-header":"home_article-header__mdTUd","article-content":"home_article-content__HUOVu","article-paragraph":"home_article-paragraph__6t7oy","article-cover-image":"home_article-cover-image__KDspQ",header:"home_header__PUC5f",hero:"home_hero__3iLRs","hero-title":"home_hero-title__tuN3q","hero-subtitle":"home_hero-subtitle__cyiJZ","cta-button":"home_cta-button__X8xB1","main-grid":"home_main-grid__qFsbA","section-title":"home_section-title__wEK3N","article-tag":"home_article-tag__m6NuJ","author-info":"home_author-info__Xw67P","author-avatar":"home_author-avatar__kBH_g","author-name":"home_author-name__vEgN7",topics:"home_topics__lPwTP","topic-tag":"home_topic-tag__LL122","trending-list":"home_trending-list__YinkY",writers:"home_writers__2u4IP","writer-item":"home_writer-item__1jEW3","writer-info":"home_writer-info__OG3R7","writer-avatar":"home_writer-avatar__b69xH","writer-name":"home_writer-name__McEqt","follow-button":"home_follow-button__UX_LS",features:"home_features__Uc1bS","feature-title":"home_feature-title__9pzGT","feature-desc":"home_feature-desc__jOby5",footer:"home_footer__1HL_E","menu-overlay":"home_menu-overlay__S__PE",fadeIn:"home_fadeIn__uLm0f",articleFormContainer:"home_articleFormContainer__DSMnb",articleFormHeader:"home_articleFormHeader__yeH26",articleFormTitle:"home_articleFormTitle__B11fv",articleFormSubtitle:"home_articleFormSubtitle__XZLCa",articleForm:"home_articleForm__qtKbt",formGroup:"home_formGroup__dX_8o",formLabel:"home_formLabel__qdIcu",optionalLabel:"home_optionalLabel__U0gvl",formControl:"home_formControl__Cf48C",formTextarea:"home_formTextarea__tVyby",formActions:"home_formActions__BdMyR",cancelButton:"home_cancelButton__docpL",submitButton:"home_submitButton__gVGwS",errorAlert:"home_errorAlert__tVY_A",errorIcon:"home_errorIcon__gc9ZB",imagePreview:"home_imagePreview__zqwvQ",tagsPreview:"home_tagsPreview__V6lf7",container:"home_container__TLSt1","writing-tips":"home_writing-tips__2ODsS","writing-tip":"home_writing-tip__dmGLE",loginLink:"home_loginLink__imUQF",discussionSection:"home_discussionSection__0Ifpl",discussionTitle:"home_discussionTitle__O3EuW",commentForm:"home_commentForm__zAQrR",commentInputContainer:"home_commentInputContainer__gKx6N",commentAvatar:"home_commentAvatar__T8zJ0",replyAvatar:"home_replyAvatar___kB3f",commentInputWrapper:"home_commentInputWrapper__hxZkN",commentInput:"home_commentInput__uUtg_",replyInput:"home_replyInput__rYKdQ",commentActions:"home_commentActions__OO9jZ",replyActions:"home_replyActions__p9B_f",submitReplyButton:"home_submitReplyButton__BdUJ2",cancelReplyButton:"home_cancelReplyButton__XvM8F",loginPrompt:"home_loginPrompt__w4N0u",loginPromptButtons:"home_loginPromptButtons__snC_B",loginButton:"home_loginButton__YS1MQ",closePromptButton:"home_closePromptButton__QYTJ8",errorMessage:"home_errorMessage__9Ki1b",loadingSpinner:"home_loadingSpinner__peANt",spin:"home_spin__D0mwY",noComments:"home_noComments__850HV",commentsList:"home_commentsList__fRn9g",commentItem:"home_commentItem__L5fNy",commentHeader:"home_commentHeader___Zk6a",replyHeader:"home_replyHeader__f7TaG",commentMeta:"home_commentMeta__MJRA8",replyMeta:"home_replyMeta__ve_YC",commentAuthor:"home_commentAuthor__HPgNT",replyAuthor:"home_replyAuthor__2Brdn",commentDate:"home_commentDate__VBAuX",replyDate:"home_replyDate__y0RtU",commentContent:"home_commentContent__uzL9r",replyContent:"home_replyContent__HFiXM",commentControls:"home_commentControls__ebC_D",likeButton:"home_likeButton__gtW9b",replyButton:"home_replyButton__e_FYj",toggleRepliesButton:"home_toggleRepliesButton__UC2Rk",deleteButton:"home_deleteButton__VEIPc",liked:"home_liked__LMNuR",replyForm:"home_replyForm__CpHFF",replyInputContainer:"home_replyInputContainer__3_T0M",repliesList:"home_repliesList__TjSoC",replyItem:"home_replyItem__TadHa",profileHeader:"home_profileHeader__N2hD3",profileAvatar:"home_profileAvatar__zAfHf",avatarPlaceholder:"home_avatarPlaceholder__mh9Xc",profileInfo:"home_profileInfo__tQtas",profileName:"home_profileName__7mtlO",profileUsername:"home_profileUsername__ACE_Q",profileBio:"home_profileBio__pKxZ3",sectionHeading:"home_sectionHeading__F_a8F",profileContent:"home_profileContent__a6u08",emptyState:"home_emptyState__0oCVS",sidebarSection:"home_sidebarSection__cyQHn",backLink:"home_backLink__Anavd","article-image":"home_article-image__mOEoE",searchContainer:"home_searchContainer__NcXe2",searchInputWrapper:"home_searchInputWrapper__jDfiT",searchInput:"home_searchInput__D6QYE",searchLoading:"home_searchLoading__0lIVS",searchResults:"home_searchResults__sWgqy",searchResultItem:"home_searchResultItem__CuGQu",userAvatar:"home_userAvatar__sJEnc",userInfo:"home_userInfo__ZUkKC",userName:"home_userName__01vW8",userUsername:"home_userUsername__wHrb_",noResults:"home_noResults__VKSke",searchBarContainer:"home_searchBarContainer__p1hA_",sidebarSearch:"home_sidebarSearch__rSKxe"}},9995:(e,t,a)=>{"use strict";a.d(t,{Hs:()=>l,Ss:()=>i,bA:()=>_,fP:()=>c,fZ:()=>r,he:()=>s});var o=a(5317),n=a(3201);async function r(e,t,a,r,i,_){try{let t=n.j2.currentUser;if(!t||t.uid===e)return null;let s={userId:e,type:"comment",read:!1,sourceId:i,sourceType:"comment",message:"".concat(t.displayName||"Someone",' commented on your article: "').concat(_.substring(0,50)).concat(_.length>50?"...":"",'"'),fromUser:{id:t.uid,name:t.displayName||"Anonymous"},createdAt:o.Dc.now(),articleSlug:a,articleTitle:r};return{id:(await (0,o.gS)((0,o.rJ)(n.db,"notifications"),s)).id,...s}}catch(e){return console.error("Error creating notification:",e),null}}async function i(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{let t,a=n.j2.currentUser;if(!a)throw Error("User not authenticated");let r=(0,o.rJ)(n.db,"notifications");t=e?(0,o.P)(r,(0,o._M)("userId","==",a.uid),(0,o._M)("read","==",!1),(0,o.My)("createdAt","desc"),(0,o.AB)(100)):(0,o.P)(r,(0,o._M)("userId","==",a.uid),(0,o.My)("createdAt","desc"),(0,o.AB)(100));let i=await (0,o.GG)(t),_=[];return i.forEach(e=>{_.push({id:e.id,...e.data()})}),_}catch(e){throw console.error("Error fetching notifications:",e),e}}async function _(e){try{let t=n.j2.currentUser;if(!t)throw Error("User not authenticated");let a=(0,o.H9)(n.db,"notifications",e),r=await (0,o.x7)(a);if(!r.exists())throw Error("Notification not found");if(r.data().userId!==t.uid)throw Error("Unauthorized access to notification");return await (0,o.mZ)(a,{read:!0}),{success:!0}}catch(e){throw console.error("Error marking notification as read:",e),e}}async function s(){try{let e=n.j2.currentUser;if(!e)throw Error("User not authenticated");let t=(0,o.rJ)(n.db,"notifications"),a=(0,o.P)(t,(0,o._M)("userId","==",e.uid),(0,o._M)("read","==",!1)),r=await (0,o.GG)(a),i=r.docs.map(e=>(0,o.mZ)(e.ref,{read:!0}));return await Promise.all(i),{success:!0,count:r.size}}catch(e){throw console.error("Error marking all notifications as read:",e),e}}async function c(e){try{let t=n.j2.currentUser;if(!t)throw Error("User not authenticated");let a=(0,o.H9)(n.db,"notifications",e),r=await (0,o.x7)(a);if(!r.exists())throw Error("Notification not found");if(r.data().userId!==t.uid)throw Error("Unauthorized access to notification");return await (0,o.kd)(a),{success:!0}}catch(e){throw console.error("Error deleting notification:",e),e}}async function l(){try{let e=n.j2.currentUser;if(!e)return 0;let t=(0,o.rJ)(n.db,"notifications"),a=(0,o.P)(t,(0,o._M)("userId","==",e.uid),(0,o._M)("read","==",!1));return(await (0,o.GG)(a)).size}catch(e){return console.error("Error counting unread notifications:",e),0}}}},e=>{var t=t=>e(e.s=t);e.O(0,[697,992,158,874,117,441,684,358],()=>t(5814)),_N_E=e.O()}]);