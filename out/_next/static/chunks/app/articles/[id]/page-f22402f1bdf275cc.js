(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8406],{4734:(e,a,t)=>{Promise.resolve().then(t.bind(t,8120))},8120:(e,a,t)=>{"use strict";t.d(a,{default:()=>x});var s=t(5155),l=t(2115),i=t(5695),r=t(6874),n=t.n(r),c=t(3201),d=t(3074),o=t(6016),h=t(9210),u=t(8501),m=t.n(u);let x=e=>{let{id:a}=e,t=(0,i.useRouter)(),[r,u]=(0,l.useState)(!0),[x,g]=(0,l.useState)(""),[j,N]=(0,l.useState)(null),[v,k]=(0,l.useState)(null),[p,f]=(0,l.useState)([]),[C,w]=(0,l.useState)(!1),[A,y]=(0,l.useState)(null);(0,l.useEffect)(()=>{let e=c.j2.onAuthStateChanged(e=>{y(e)});return()=>e()},[]),(0,l.useEffect)(()=>{(async()=>{try{u(!0);let e=await (0,h.zE)(a);if(!e)return void g("Article not found");let t=e.body?e.body.replace(/<div[^>]*>Content is loaded from HTML<\/div>/g,"").replace(/<h1[^>]*>Untitled Article<\/h1>/g,""):"";N(t),f(e.likes||[]);let s=e.body?e.body.split(/\s+/).length:0,l=Math.ceil(s/200),i=e.createdAt?new Date(1e3*e.createdAt.seconds).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Unknown date";k({title:e.title||"Untitled Article",authorName:e.authorName||"Anonymous",createdAt:i,readTime:l,likes:e.likes||[],tags:e.tags||[]})}catch(e){console.error("Error loading article:",e),g("Failed to load article")}finally{u(!1)}})()},[a]),(0,l.useEffect)(()=>{(null==v?void 0:v.likes)&&A&&w(v.likes.includes(A.uid))},[v,A]);let b=async()=>{if(!A)return void alert("Please login to like articles");try{C?(f(p.filter(e=>e!==A.uid)),w(!1)):(f([...p,A.uid]),w(!0))}catch(e){console.error("Error updating like status:",e)}};return r?(0,s.jsxs)("div",{className:m().loadingContainer,children:[(0,s.jsx)("div",{className:m().loadingIndicator}),(0,s.jsx)("p",{children:"Loading article..."})]}):x?(0,s.jsx)("div",{className:m().errorContainer,children:(0,s.jsx)("p",{className:m().errorMessage,children:x})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("header",{className:m().pageHeader,children:(0,s.jsxs)("div",{className:m().headerContainer,children:[(0,s.jsxs)(n(),{href:"/",className:m().backLink,children:[(0,s.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M15 18L9 12L15 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Home"]}),(0,s.jsx)("div",{className:m().headerLogo,children:"Journalite"})]})}),(0,s.jsxs)("div",{className:m().pageContainer,children:[v&&(0,s.jsxs)("header",{className:m().articleHeader,children:[(0,s.jsx)("h1",{className:m().articleTitle,children:v.title}),(0,s.jsxs)("div",{className:m().articleMeta,children:[(0,s.jsxs)("div",{className:m().authorInfo,children:[(0,s.jsx)("div",{className:m().authorAvatar,children:v.authorName.charAt(0)}),(0,s.jsxs)("div",{className:m().authorDetails,children:[(0,s.jsx)("div",{className:m().authorName,children:v.authorName}),(0,s.jsxs)("div",{className:m().articleDetails,children:[v.createdAt," \xb7 ",v.readTime," min read"]})]})]}),(0,s.jsxs)("div",{className:m().articleActions,children:[(0,s.jsxs)("button",{className:"".concat(m().likeButton," ").concat(C?m().liked:""),onClick:b,"aria-label":C?"Unlike article":"Like article",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:C?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",className:m().likeIcon,children:(0,s.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),(0,s.jsx)("span",{children:p.length>0?p.length:""})]}),(0,s.jsx)("button",{className:m().editButton,onClick:()=>t.push("/articles/".concat(a,"/edit")),children:"Edit"})]})]}),v.tags&&v.tags.length>0&&(0,s.jsx)("div",{className:m().tagContainer,children:v.tags.map((e,a)=>(0,s.jsx)("span",{className:m().tag,children:e},a))})]}),(0,s.jsx)(d.A,{articleId:a,initialHtml:j||void 0}),(0,s.jsx)("div",{className:m().commentsContainer,children:(0,s.jsx)(o.A,{articleId:a})})]})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[8354,8130,2992,7158,7117,6874,922,9429,8441,1684,7358],()=>a(4734)),_N_E=e.O()}]);