(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[700],{227:(e,s,a)=>{Promise.resolve().then(a.bind(a,4622))},3201:(e,s,a)=>{"use strict";a.d(s,{db:()=>o,j2:()=>d});var r=a(3915),t=a(6864),n=a(6203),l=a(5317);let i=(0,r.Wp)({apiKey:"AIzaSyCFpybhLt43iKUw6lNahU1n2zjYv0BXmf4",authDomain:"journalitev1.firebaseapp.com",projectId:"journalitev1",storageBucket:"journalitev1.firebasestorage.app",messagingSenderId:"897263211529",appId:"1:897263211529:web:bae4a00910a2236d6d54d8",measurementId:"G-ZYT8PRMT0D"});try{(0,t.P5)(i)}catch(e){}let d=(0,n.xI)(i),o=(0,l.aU)(i)},4622:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>u});var r=a(5155),t=a(2115),n=a(6874),l=a.n(n),i=a(5695),d=a(6203),o=a(3201);function c(){let[e,s]=(0,t.useState)(""),[a,n]=(0,t.useState)(""),[c,u]=(0,t.useState)(!1),[m,x]=(0,t.useState)(!0),[h,f]=(0,t.useState)(""),[p,w]=(0,t.useState)(!1),[j,g]=(0,t.useState)(""),[v,b]=(0,t.useState)(""),[N,y]=(0,t.useState)({}),[P,S]=(0,t.useState)({});(0,i.useRouter)();let k=(0,i.useSearchParams)();(0,t.useEffect)(()=>{let e=null==k?void 0:k.get("oobCode");if(!e){x(!1),f("Invalid password reset link. Please request a new one.");return}(async()=>{try{b(e);let s=await (0,d.RE)(o.j2,e);g(s),x(!1)}catch(e){console.error("Error verifying reset code:",e),x(!1),f("This password reset link has expired or is invalid. Please request a new one.")}})()},[k]);let R=e=>{let{name:s,validity:a}=e.target;y({...N,[s]:!0}),S({...P,[s]:""}),a.valueMissing&&S({...P,[s]:"newPassword"===s?"Please enter a new password":"Please confirm your password"})},E=async s=>{s.preventDefault();let r=Array.from(s.currentTarget.elements),t={},n={},l=!0;if(r.forEach(e=>{e.name&&e.required&&(t[e.name]=!0,e.value.trim()||(n[e.name]="newPassword"===e.name?"Please enter a new password":"Please confirm your password",l=!1))}),e!==a&&(n.confirmPassword="Passwords do not match",l=!1),e&&e.length<6&&(n.newPassword="Password must be at least 6 characters",l=!1),y({...N,...t}),S({...P,...n}),l){u(!0),f("");try{await (0,d.R4)(o.j2,v,e),w(!0)}catch(e){console.error("Error resetting password:",e),f("Failed to reset password. The link may have expired. Please try requesting a new link.")}finally{u(!1)}}},I=e=>{let s="w-full px-5 py-3.5 bg-[#f8f5ec] border border-[#e8e1d1] rounded-md focus:outline-none focus:ring-1 focus:ring-slate-500";return N[e]&&P[e]?"".concat(s," border-red-300 bg-red-50"):s};return(0,r.jsxs)("div",{className:"min-h-screen bg-[#f5efe0] flex",children:[(0,r.jsx)("div",{className:"w-full md:w-1/2 flex flex-col justify-center",children:(0,r.jsxs)("div",{className:"w-full max-w-sm mx-auto px-6 md:px-0 md:ml-20 xl:ml-32",children:[(0,r.jsxs)("div",{className:"mb-12",children:[(0,r.jsx)("h1",{className:"text-5xl md:text-6xl font-serif font-normal text-slate-900",children:"Journalite"}),(0,r.jsxs)("div",{className:"mt-4 text-lg md:text-xl text-slate-800 italic",children:[(0,r.jsx)("p",{children:"Reset your password to"}),(0,r.jsx)("p",{children:"return to your Thoughtspace."})]})]}),m&&(0,r.jsx)("div",{className:"text-slate-800",children:"Verifying your reset link..."}),h&&(0,r.jsx)("div",{className:"mb-6 p-3 bg-red-50 text-red-700 text-sm rounded-md",children:h}),p?(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsxs)("div",{className:"mb-8 text-slate-800",children:[(0,r.jsx)("p",{className:"mb-2 font-medium",children:"Password successfully reset!"}),(0,r.jsx)("p",{children:"Your password has been updated. You can now sign in with your new password."})]}),(0,r.jsxs)(l(),{href:"/login",className:"inline-flex items-center px-5 py-3.5 bg-[#1a1a19] text-white rounded-md hover:bg-[#2a2a29] focus:outline-none focus:ring-2 focus:ring-slate-500",children:[(0,r.jsx)("span",{className:"mr-2",children:"→"}),(0,r.jsx)("span",{children:"Go to login"})]})]}):!m&&!h&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("form",{onSubmit:E,className:"space-y-4 w-full",noValidate:!0,children:[j&&(0,r.jsxs)("div",{className:"mb-4 text-slate-800",children:["Reset password for: ",(0,r.jsx)("span",{className:"font-medium",children:j})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{id:"newPassword",name:"newPassword",type:"password",className:I("newPassword"),placeholder:"New password",value:e,onChange:e=>s(e.target.value),onBlur:R,required:!0}),N.newPassword&&P.newPassword&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-500",children:P.newPassword})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",className:I("confirmPassword"),placeholder:"Confirm password",value:a,onChange:e=>n(e.target.value),onBlur:R,required:!0}),N.confirmPassword&&P.confirmPassword&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-500",children:P.confirmPassword})]}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{type:"submit",className:"w-full flex items-center justify-center px-4 py-3.5 bg-[#1a1a19] text-white rounded-md hover:bg-[#2a2a29] focus:outline-none focus:ring-2 focus:ring-slate-500 focus:ring-offset-2",disabled:c,children:c?"Resetting password...":(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"mr-2",children:"→"}),(0,r.jsx)("span",{children:"Reset password"})]})})}),(0,r.jsx)("div",{className:"flex justify-center pt-2 text-sm text-slate-700",children:(0,r.jsx)(l(),{href:"/login",className:"hover:text-slate-900",children:"Return to login"})})]})}),(0,r.jsx)("div",{className:"mt-20 mb-8 text-slate-700 italic",children:(0,r.jsx)("p",{children:"Words are the threads of thought."})})]})}),(0,r.jsx)("div",{className:"hidden md:block w-1/2 relative bg-[#f5efe0]",children:(0,r.jsx)("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:'url("/images/login.png")',pointerEvents:"none"},"aria-hidden":"true"})})]})}function u(){return(0,r.jsx)(t.Suspense,{fallback:(0,r.jsx)("div",{className:"min-h-screen bg-[#f5efe0] flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-3xl font-serif font-normal text-slate-900 mb-4",children:"Journalite"}),(0,r.jsx)("p",{className:"text-slate-700",children:"Loading reset password page..."})]})}),children:(0,r.jsx)(c,{})})}},5695:(e,s,a)=>{"use strict";var r=a(8999);a.o(r,"useRouter")&&a.d(s,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(s,{useSearchParams:function(){return r.useSearchParams}})}},e=>{var s=s=>e(e.s=s);e.O(0,[992,158,117,874,441,684,358],()=>s(227)),_N_E=e.O()}]);