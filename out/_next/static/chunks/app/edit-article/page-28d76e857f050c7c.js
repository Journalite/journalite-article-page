(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[268],{5159:(e,a,s)=>{Promise.resolve().then(s.bind(s,9994))},5695:(e,a,s)=>{"use strict";var t=s(8999);s.o(t,"useRouter")&&s.d(a,{useRouter:function(){return t.useRouter}}),s.o(t,"useSearchParams")&&s.d(a,{useSearchParams:function(){return t.useSearchParams}})},9994:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>p});var t=s(5155),l=s(2115),r=s(5695),i=s(6203),c=s(3201),n=s(6874),o=s.n(n),d=s(9210),u=s(8163),m=s.n(u);let h=e=>{let{articleId:a}=e,[s,i]=(0,l.useState)(""),[n,u]=(0,l.useState)(""),[h,v]=(0,l.useState)(""),[p,g]=(0,l.useState)(""),[x,j]=(0,l.useState)("published"),[N,f]=(0,l.useState)(!1),[b,S]=(0,l.useState)(!0),[y,C]=(0,l.useState)(""),F=(0,r.useRouter)();(0,l.useEffect)(()=>{let e=async()=>{try{var e;S(!0);let s=await (0,d.zE)(a);i(s.title),u(s.body),v((null==(e=s.tags)?void 0:e.join(", "))||""),g(s.coverImage||""),j(s.status||"published")}catch(e){console.error("Error loading article:",e),C("Failed to load article data")}finally{S(!1)}};a&&e()},[a]);let E=async e=>{if(e.preventDefault(),!s||!n)return void C("Title and content are required");if(!c.j2.currentUser)return void C("You must be logged in to edit an article");try{f(!0),C("");let e=h.split(",").map(e=>e.trim()).filter(e=>""!==e),t={title:s,body:n,tags:e,status:x};""!==p.trim()&&(t.coverImage=p);let l=await (0,d.iZ)(a,t);"published"===x?F.push("/articles?slug=".concat(l.slug)):F.push("/my-thoughts")}catch(e){console.error("Error updating article:",e),C("Failed to update article. Please try again.")}finally{f(!1)}};return b?(0,t.jsx)("div",{className:m().articleFormContainer,children:(0,t.jsx)("div",{className:m().loading,children:"Loading article data..."})}):(0,t.jsxs)("div",{className:m().articleFormContainer,children:[(0,t.jsxs)("div",{className:m().articleFormHeader,children:[(0,t.jsx)("h1",{className:m().articleFormTitle,children:"Edit Article"}),(0,t.jsx)("p",{className:m().articleFormSubtitle,children:"Update your thoughts"})]}),y&&(0,t.jsxs)("div",{className:m().errorAlert,children:[(0,t.jsx)("span",{className:m().errorIcon,children:"⚠️"}),(0,t.jsx)("span",{children:y})]}),(0,t.jsxs)("form",{onSubmit:E,className:m().articleForm,children:[(0,t.jsxs)("div",{className:m().formGroup,children:[(0,t.jsx)("label",{htmlFor:"title",className:m().formLabel,children:"Title"}),(0,t.jsx)("input",{type:"text",id:"title",value:s,onChange:e=>i(e.target.value),required:!0,placeholder:"Enter a captivating title",className:m().formControl})]}),(0,t.jsxs)("div",{className:m().formGroup,children:[(0,t.jsxs)("label",{htmlFor:"coverImage",className:m().formLabel,children:["Cover Image URL ",(0,t.jsx)("span",{className:m().optionalLabel,children:"(optional)"})]}),(0,t.jsx)("input",{type:"url",id:"coverImage",value:p,onChange:e=>g(e.target.value),placeholder:"https://example.com/image.jpg",className:m().formControl}),p&&(0,t.jsx)("div",{className:m().imagePreview,children:(0,t.jsx)("img",{src:p,alt:"Cover preview"})})]}),(0,t.jsxs)("div",{className:m().formGroup,children:[(0,t.jsxs)("label",{htmlFor:"tags",className:m().formLabel,children:["Tags ",(0,t.jsx)("span",{className:m().optionalLabel,children:"(comma separated)"})]}),(0,t.jsx)("input",{type:"text",id:"tags",value:h,onChange:e=>v(e.target.value),placeholder:"technology, news, science",className:m().formControl}),h&&(0,t.jsx)("div",{className:m().tagsPreview,children:h.split(",").map((e,a)=>e.trim()&&(0,t.jsx)("span",{className:m().tag,children:e.trim()},a))})]}),(0,t.jsxs)("div",{className:m().formGroup,children:[(0,t.jsx)("label",{htmlFor:"status",className:m().formLabel,children:"Status"}),(0,t.jsxs)("select",{id:"status",value:x,onChange:e=>j(e.target.value),className:m().formControl,children:[(0,t.jsx)("option",{value:"published",children:"Published"}),(0,t.jsx)("option",{value:"drafts",children:"Save as Draft"})]})]}),(0,t.jsxs)("div",{className:m().formGroup,children:[(0,t.jsx)("label",{htmlFor:"body",className:m().formLabel,children:"Content"}),(0,t.jsx)("textarea",{id:"body",value:n,onChange:e=>u(e.target.value),required:!0,placeholder:"Write your article content here...",className:m().formTextarea,rows:15})]}),(0,t.jsxs)("div",{className:m().formActions,children:[(0,t.jsx)(o(),{href:"/my-thoughts",className:m().cancelButton,children:"Cancel"}),(0,t.jsx)("button",{type:"submit",className:m().submitButton,disabled:N,children:N?"Saving...":"Save Changes"})]})]})]})};function v(){let e=(0,r.useSearchParams)(),a=(null==e?void 0:e.get("id"))||"",[s,n]=(0,l.useState)(!1),[o,d]=(0,l.useState)(!0),u=(0,r.useRouter)();return((0,l.useEffect)(()=>{let e=(0,i.hg)(c.j2,e=>{let s=!!e;n(s),d(!1),s||u.push("/login?redirect=/edit-article?id=".concat(a))});return()=>e()},[a,u]),(0,l.useEffect)(()=>{o||!s||a||u.push("/my-thoughts")},[a,s,o,u]),o)?(0,t.jsx)("div",{className:m().container,children:(0,t.jsx)("div",{className:m().loading,children:"Loading..."})}):s?a?(0,t.jsx)(h,{articleId:a}):(0,t.jsx)("div",{className:m().container,children:(0,t.jsx)("div",{className:m().loading,children:"No article ID provided."})}):(0,t.jsx)("div",{className:m().container,children:(0,t.jsx)("div",{className:m().loading,children:"Please log in to edit articles."})})}function p(){return(0,t.jsx)(l.Suspense,{fallback:(0,t.jsx)("div",{className:m().container,children:(0,t.jsx)("div",{className:m().loading,children:"Loading..."})}),children:(0,t.jsx)(v,{})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[779,992,158,117,874,692,441,684,358],()=>a(5159)),_N_E=e.O()}]);