(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[998],{350:(t,e,a)=>{"use strict";a.d(e,{A:()=>d});var s=a(5155),i=a(2115),n=a(6874),c=a.n(n),l=a(9995),o=a(912),r=a.n(o);let d=()=>{let[t,e]=(0,i.useState)(0),[a,n]=(0,i.useState)([]),[o,d]=(0,i.useState)(!1),h=(0,i.useRef)(null);(0,i.useEffect)(()=>{let t=async()=>{e(await (0,l.Hs)())};t();let a=setInterval(t,6e4);return()=>clearInterval(a)},[]),(0,i.useEffect)(()=>{let t=t=>{h.current&&!h.current.contains(t.target)&&d(!1)};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[]),(0,i.useEffect)(()=>{o&&u()},[o]);let u=async()=>{try{let t=await (0,l.Ss)(!1);n(t)}catch(t){console.error("Error fetching notifications:",t)}},m=async t=>{try{!t.read&&t.id&&(await (0,l.bA)(t.id),e(t=>Math.max(t-1,0)),n(e=>e.map(e=>e.id===t.id?{...e,read:!0}:e)))}catch(t){console.error("Error marking notification as read:",t)}},_=t=>{if(!t)return"";let e=t.toDate?t.toDate():new Date(t),a=Math.floor((new Date().getTime()-e.getTime())/6e4);if(a<1)return"Just now";if(a<60)return"".concat(a,"m ago");let s=Math.floor(a/60);if(s<24)return"".concat(s,"h ago");let i=Math.floor(s/24);return i<7?"".concat(i,"d ago"):e.toLocaleDateString()};return(0,s.jsxs)("div",{className:r().notificationContainer,ref:h,children:[(0,s.jsxs)("button",{className:r().bellButton,onClick:()=>{d(!o)},children:[(0,s.jsx)("span",{className:r().bellIcon,children:"\uD83D\uDD14"}),t>0&&(0,s.jsx)("span",{className:r().unreadBadge,children:t})]}),o&&(0,s.jsxs)("div",{className:r().notificationDropdown,children:[(0,s.jsxs)("div",{className:r().notificationHeader,children:[(0,s.jsx)("h3",{children:"Notifications"}),a.length>0&&(0,s.jsx)(c(),{href:"/notifications",className:r().viewAllLink,children:"View All"})]}),(0,s.jsx)("div",{className:r().notificationList,children:0===a.length?(0,s.jsx)("div",{className:r().emptyState,children:"No notifications yet"}):a.slice(0,5).map(t=>(0,s.jsxs)(c(),{href:"/articles?slug=".concat(t.articleSlug),className:"".concat(r().notificationItem," ").concat(t.read?"":r().unread),onClick:()=>m(t),children:[(0,s.jsxs)("div",{className:r().notificationContent,children:[(0,s.jsx)("p",{className:r().notificationMessage,children:t.message}),(0,s.jsx)("span",{className:r().notificationTime,children:_(t.createdAt)})]}),!t.read&&(0,s.jsx)("div",{className:r().unreadDot})]},t.id))}),a.length>5&&(0,s.jsx)("div",{className:r().notificationFooter,children:(0,s.jsx)(c(),{href:"/notifications",className:r().seeMoreLink,children:"See more notifications"})})]})]})}},912:t=>{t.exports={notificationContainer:"NotificationBell_notificationContainer__TFGqP",bellButton:"NotificationBell_bellButton__PKB6r",bellIcon:"NotificationBell_bellIcon__ALAAB",unreadBadge:"NotificationBell_unreadBadge__cOn_b",notificationDropdown:"NotificationBell_notificationDropdown__p8Mv4",notificationHeader:"NotificationBell_notificationHeader__cPSyI",viewAllLink:"NotificationBell_viewAllLink__une1x",notificationList:"NotificationBell_notificationList__SBbvK",notificationItem:"NotificationBell_notificationItem__MW9MC",unread:"NotificationBell_unread__9c4op",notificationContent:"NotificationBell_notificationContent__2upmA",notificationMessage:"NotificationBell_notificationMessage__aqMDB",notificationTime:"NotificationBell_notificationTime__JQ2O9",unreadDot:"NotificationBell_unreadDot__qaEb7",notificationFooter:"NotificationBell_notificationFooter__l28sD",seeMoreLink:"NotificationBell_seeMoreLink__eh2qR",emptyState:"NotificationBell_emptyState___y1V2"}},5695:(t,e,a)=>{"use strict";var s=a(8999);a.o(s,"useRouter")&&a.d(e,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(e,{useSearchParams:function(){return s.useSearchParams}})},6192:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>N});var s=a(5155),i=a(2115),n=a(6874),c=a.n(n),l=a(5695),o=a(6203),r=a(5317),d=a(3201),h=a(9210),u=a(8163),m=a.n(u),_=a(6944),f=a.n(_),x=a(350);function N(){let[t,e]=(0,i.useState)(!1),[a,n]=(0,i.useState)(null),[u,_]=(0,i.useState)(!0),[N,g]=(0,i.useState)(!1),[j,v]=(0,i.useState)(0),[p,y]=(0,i.useState)("published"),[b,B]=(0,i.useState)([]),[w,C]=(0,i.useState)(null),[S,D]=(0,i.useState)(!1),L=(0,l.useRouter)();(0,i.useEffect)(()=>{v(window.innerWidth);let t=()=>{v(window.innerWidth)};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),(0,i.useEffect)(()=>{g(j<768)},[j]),(0,i.useEffect)(()=>{let t=(0,o.hg)(d.j2,t=>{let a=!!t;e(a),n(t),a?_(!1):L.push("/login?redirect=/my-thoughts")});return()=>t()},[L]),(0,i.useEffect)(()=>{let e=async()=>{if(a)try{let t;_(!0);let e=(0,r.rJ)(d.db,"articles");t="published"===p?(0,r.P)(e,(0,r._M)("authorId","==",a.uid),(0,r.My)("createdAt","desc")):(0,r.P)(e,(0,r._M)("authorId","==",a.uid),(0,r._M)("status","==","drafts"),(0,r.My)("createdAt","desc"));let s=await (0,r.GG)(t),i=[];s.forEach(t=>{let e=t.data();"published"===p?e.status&&"published"!==e.status||i.push({id:t.id,...e,status:e.status||"published"}):i.push({id:t.id,...e})}),B(i)}catch(t){console.error("Error fetching articles:",t)}finally{_(!1)}};a&&t&&e()},[a,t,p]);let k=async()=>{try{await (0,o.CI)(d.j2),L.push("/")}catch(t){console.error("Error signing out:",t)}},T=t=>{C(t),D(!0)},E=async()=>{if(w)try{await (0,h.a)(w),B(b.filter(t=>t.id!==w)),D(!1),C(null)}catch(t){console.error("Error deleting article:",t)}},M=t=>{let e;return t?(t&&"function"==typeof t.toDate?t.toDate():new Date(t)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""},A=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:150;return t?t.length<=e?t:t.substring(0,e).trim()+"...":""};return u?(0,s.jsx)("div",{className:m().container,children:(0,s.jsx)("div",{className:m().loading,children:"Loading..."})}):t?(0,s.jsxs)("div",{className:m()["three-column-layout"],children:[(0,s.jsxs)("aside",{className:"".concat(m()["left-sidebar"]," ").concat(N?m().collapsed:""),children:[(0,s.jsxs)("div",{className:m()["sidebar-header"],children:[(0,s.jsx)("div",{className:m().logo,children:"Journalite"}),(0,s.jsx)("button",{className:m()["toggle-button"],onClick:()=>{g(!N)},"aria-label":N?"Expand sidebar":"Collapse sidebar",children:N?"→":"←"})]}),(0,s.jsxs)("nav",{className:m()["vertical-nav"],children:[(0,s.jsxs)(c(),{href:"/",className:"".concat(m()["nav-link"]," ").concat(m()["nav-home"]),children:[(0,s.jsx)("span",{className:m()["nav-icon"],children:"•"}),(0,s.jsx)("span",{className:m()["nav-text"],children:"Home"})]}),(0,s.jsxs)(c(),{href:"/my-thoughts",className:"".concat(m()["nav-link"]," ").concat(m()["nav-thoughts"]," ").concat(m().active),children:[(0,s.jsx)("span",{className:m()["nav-icon"],children:"•"}),(0,s.jsx)("span",{className:m()["nav-text"],children:"My Thoughts"})]}),(0,s.jsxs)(c(),{href:"/create-article",className:"".concat(m()["nav-link"]," ").concat(m()["nav-create"]),children:[(0,s.jsx)("span",{className:m()["nav-icon"],children:"•"}),(0,s.jsx)("span",{className:m()["nav-text"],children:"Create Article"})]}),(0,s.jsxs)(c(),{href:"/explore",className:"".concat(m()["nav-link"]," ").concat(m()["nav-explore"]),children:[(0,s.jsx)("span",{className:m()["nav-icon"],children:"•"}),(0,s.jsx)("span",{className:m()["nav-text"],children:"Explore"})]}),(0,s.jsxs)(c(),{href:"/my-profile",className:"".concat(m()["nav-link"]," ").concat(m()["nav-profile"]),children:[(0,s.jsx)("span",{className:m()["nav-icon"],children:"•"}),(0,s.jsx)("span",{className:m()["nav-text"],children:"My Profile"})]}),(0,s.jsxs)("button",{onClick:k,className:"".concat(m()["nav-link"]," ").concat(m()["nav-logout"]),children:[(0,s.jsx)("span",{className:m()["nav-icon"],children:"•"}),(0,s.jsx)("span",{className:m()["nav-text"],children:"Log out"})]})]})]}),(0,s.jsxs)("main",{className:m()["center-column"],children:[(0,s.jsxs)("div",{className:f().header,children:[(0,s.jsx)("h1",{className:f().title,children:"My Thoughts"}),(0,s.jsx)("div",{className:f().actions,children:(0,s.jsx)(c(),{href:"/create-article",className:f().createButton,children:"New Article"})})]}),(0,s.jsxs)("div",{className:f().tabs,children:[(0,s.jsx)("button",{className:"".concat(f().tabButton," ").concat("published"===p?f().active:""),onClick:()=>y("published"),children:"Published"}),(0,s.jsx)("button",{className:"".concat(f().tabButton," ").concat("drafts"===p?f().active:""),onClick:()=>y("drafts"),children:"Drafts"})]}),0===b.length?(0,s.jsxs)("div",{className:f().emptyState,children:[(0,s.jsxs)("p",{children:["You don't have any ",p," articles yet."]}),"published"===p?(0,s.jsx)("p",{children:"When you publish your articles, they will appear here."}):(0,s.jsx)("p",{children:"Save your work as drafts to continue later."}),(0,s.jsx)(c(),{href:"/create-article",className:f().emptyStateButton,children:"Create Your First Article"})]}):(0,s.jsx)("div",{className:f().articlesList,children:b.map(t=>{var e;return(0,s.jsxs)("div",{className:f().articleCard,children:[(0,s.jsxs)("div",{className:f().articleContent,children:[(0,s.jsx)("h2",{className:f().articleTitle,children:(0,s.jsx)(c(),{href:"/articles?slug=".concat(t.slug),children:t.title})}),(0,s.jsx)("p",{className:f().articleDate,children:M(t.createdAt)}),(0,s.jsx)("p",{className:f().articleExcerpt,children:A(t.body)}),(0,s.jsx)("div",{className:f().articleTags,children:null==(e=t.tags)?void 0:e.map((t,e)=>(0,s.jsx)("span",{className:f().articleTag,children:t},e))})]}),(0,s.jsxs)("div",{className:f().articleActions,children:[(0,s.jsx)(c(),{href:"/articles?slug=".concat(t.slug),className:f().viewButton,children:"View"}),(0,s.jsx)(c(),{href:"/edit-article?id=".concat(t.id),className:f().editButton,children:"Edit"}),(0,s.jsx)("button",{className:f().deleteButton,onClick:()=>T(t.id||""),children:"Delete"})]})]},t.id)})})]}),(0,s.jsxs)("aside",{className:m()["right-sidebar"],children:[(0,s.jsx)("h2",{className:m()["sidebar-heading"],children:"Your Stats"}),(0,s.jsx)(x.A,{}),(0,s.jsxs)("div",{className:f().statsContainer,children:[(0,s.jsxs)("div",{className:f().statCard,children:[(0,s.jsx)("span",{className:f().statValue,children:b.filter(t=>"published"===t.status).length}),(0,s.jsx)("span",{className:f().statLabel,children:"Published"})]}),(0,s.jsxs)("div",{className:f().statCard,children:[(0,s.jsx)("span",{className:f().statValue,children:b.filter(t=>"drafts"===t.status).length}),(0,s.jsx)("span",{className:f().statLabel,children:"Drafts"})]})]}),(0,s.jsx)(c(),{href:"/create-article",className:m()["write-button"],children:"Write"})]}),S&&(0,s.jsx)("div",{className:f().modalOverlay,children:(0,s.jsxs)("div",{className:f().modal,children:[(0,s.jsx)("h3",{className:f().modalTitle,children:"Confirm Delete"}),(0,s.jsx)("p",{className:f().modalText,children:"Are you sure you want to delete this article? This action cannot be undone."}),(0,s.jsxs)("div",{className:f().modalButtons,children:[(0,s.jsx)("button",{className:f().cancelButton,onClick:()=>{D(!1),C(null)},children:"Cancel"}),(0,s.jsx)("button",{className:f().confirmButton,onClick:E,children:"Delete"})]})]})})]}):(0,s.jsxs)("div",{className:m().container,children:[(0,s.jsx)("p",{children:"Please log in to view your articles."}),(0,s.jsx)(c(),{href:"/login?redirect=/my-thoughts",className:m().loginLink,children:"Login Now"})]})}},6944:t=>{t.exports={header:"my-thoughts_header__T84ea",title:"my-thoughts_title__H24DY",actions:"my-thoughts_actions__GWoto",createButton:"my-thoughts_createButton__bL87g",tabs:"my-thoughts_tabs__MTj07",tabButton:"my-thoughts_tabButton__OZNMA",active:"my-thoughts_active__COw73",emptyState:"my-thoughts_emptyState__2Re4c",emptyStateButton:"my-thoughts_emptyStateButton__q4s1p",articlesList:"my-thoughts_articlesList__jwxYp",articleCard:"my-thoughts_articleCard__rN5RC",articleContent:"my-thoughts_articleContent__hh7o4",articleTitle:"my-thoughts_articleTitle__WTcKB",articleDate:"my-thoughts_articleDate__6MnGt",articleExcerpt:"my-thoughts_articleExcerpt__7bMHG",articleTags:"my-thoughts_articleTags__XkPh2",articleTag:"my-thoughts_articleTag__joHmZ",articleActions:"my-thoughts_articleActions__4Mqfy",viewButton:"my-thoughts_viewButton__UcpED",editButton:"my-thoughts_editButton__cUZCL",deleteButton:"my-thoughts_deleteButton__PdPWh",statsContainer:"my-thoughts_statsContainer__nxG1O",statCard:"my-thoughts_statCard__AR6VO",statValue:"my-thoughts_statValue__SUqDm",statLabel:"my-thoughts_statLabel__3IppR",modalOverlay:"my-thoughts_modalOverlay__Jj6UM",modal:"my-thoughts_modal__ISbR_",modalTitle:"my-thoughts_modalTitle__T_PLg",modalText:"my-thoughts_modalText__fTuAg",modalButtons:"my-thoughts_modalButtons__s9o7F",cancelButton:"my-thoughts_cancelButton__gh4wj",confirmButton:"my-thoughts_confirmButton__Kxpb_"}},7423:(t,e,a)=>{Promise.resolve().then(a.bind(a,6192))}},t=>{var e=e=>t(t.s=e);t.O(0,[697,992,158,874,117,692,441,684,358],()=>e(7423)),_N_E=t.O()}]);